"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[1360],{47992:(e,l,t)=>{t.d(l,{G:()=>d});var a=t(9950),n=t(95491),i=t.n(n),o=t(99674),s=t(90650),r=t(44414);const d=e=>{let{fetchOptions:l,debounceTimeout:t=400,onClear:n,refetchOptions:d=!1,...u}=e;const[c,v]=(0,a.useState)(!1),[m,p]=(0,a.useState)([]),h=(0,a.useMemo)((()=>i()((e=>{p([]),v(!0),l(e).then((e=>{p(e),v(!1)}))}),t)),[l,t]);return(0,r.jsx)(o.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:h,onClear:()=>{h(""),n&&n()},notFoundContent:c?(0,r.jsx)(s.A,{size:"small"}):"no results",...u,options:m,onFocus:()=>{m.length&&!d||h("")}})}},31281:(e,l,t)=>{function a(e,l){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const a=e.map((e=>({[e.locale]:""===l["".concat(t,"[").concat(e.locale,"]")]?void 0:l["".concat(t,"[").concat(e.locale,"]")]})));return Object.assign({},...a)}t.d(l,{A:()=>a})},41360:(e,l,t)=>{t.r(l),t.d(l,{default:()=>d});t(9950);var a=t(59233),n=t(76585),i=t(31281),o=t(91854),s=t(5302),r=t(44414);function d(){const[e]=a.A.useForm(),{languages:l}=(0,o.d4)((e=>e.formLang),o.bN);return(0,r.jsx)(n.A,{form:e,handleSubmit:(e,t)=>{const a={type:"look",active:Number(e.active),shop_id:e.shop.value,title:(0,i.A)(l,e,"title"),description:(0,i.A)(l,e,"description"),products:e.products.map((e=>e.value)),images:t.map((e=>e.name))};return s.A.create(a)}})}},76585:(e,l,t)=>{t.d(l,{A:()=>w});var a=t(9950),n=t(23263),i=t(59233),o=t(87094),s=t(41988),r=t(55902),d=t(25933),u=t(48538),c=t(70030),v=t(71999),m=t(91854),p=t(28429),h=t(98591),A=t(47992),g=t(47933),j=t(48970),x=t(74623),b=t(85923),f=t(86918),y=t(55660),k=t(44414);function w(e){var l,t,w,S;let{form:P,handleSubmit:C}=e;const I=(0,m.wA)(),O=(0,p.Zp)(),{t:q}=(0,c.B)(),{defaultLang:F,languages:L}=(0,m.d4)((e=>e.formLang),m.bN),{activeMenu:E}=(0,m.d4)((e=>e.menu),m.bN),[N,z]=(0,a.useState)(!1),[G,V]=(0,a.useState)(null!==(l=null===E||void 0===E||null===(t=E.data)||void 0===t?void 0:t.image)&&void 0!==l?l:[]),[_,M]=(0,a.useState)(null!==(w=null===E||void 0===E||null===(S=E.data)||void 0===S?void 0:S.shop)&&void 0!==w?w:{}),[T,B]=(0,a.useState)(!1);function K(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return(l?!e&&(null===l||void 0===l?void 0:l.locale)===F:!e)?Promise.reject(new Error(q("required"))):e&&""===(null===e||void 0===e?void 0:e.trim())?Promise.reject(new Error(q("no.empty.space"))):e&&(null===e||void 0===e?void 0:e.trim().length)<t?Promise.reject(new Error(q("must.be.at.least.".concat(t)))):Promise.resolve()}return(0,k.jsx)(a.Fragment,{children:(0,k.jsx)(n.A,{title:q("add.look"),extra:(0,k.jsx)(v.A,{}),children:(0,k.jsxs)(i.A,{form:P,onFinish:e=>{z(!0);const l="catalog/looks";C(e,G).then((()=>{b.oR.success(q("successfully.added")),(0,m.vA)((()=>{I((0,x.EK)({...E,nextUrl:l})),I((0,f.x_)({}))})),O("/".concat(l))})).finally((()=>z(!1)))},layout:"vertical",initialValues:{active:!0,...null===E||void 0===E?void 0:E.data},children:[(0,k.jsxs)(o.A,{gutter:12,children:[(0,k.jsx)(s.A,{span:12,children:L.map((e=>(0,k.jsx)(i.A.Item,{label:q("title"),name:"title[".concat(e.locale,"]"),hidden:e.locale!==F,rules:[{validator:(l,t)=>K(t,e)}],children:(0,k.jsx)(r.A,{})},"title"+e.id)))}),(0,k.jsx)(s.A,{span:12,children:L.map((e=>(0,k.jsx)(i.A.Item,{label:q("description"),name:"description[".concat(e.locale,"]"),hidden:e.locale!==F,rules:[{validator:(l,t)=>K(t,e,5)}],children:(0,k.jsx)(h.A,{rows:3,maxLength:300})},"description"+e.id)))}),(0,k.jsx)(s.A,{span:12,children:(0,k.jsx)(i.A.Item,{label:q("shop"),name:"shop",rules:[{required:!0,message:q("required")}],children:(0,k.jsx)(A.G,{allowClear:!1,fetchOptions:e=>{const l={page:1,perPage:10,status:"approved",search:e||null};return y.A.getAll(l).then((e=>e.data.map((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))))},onSelect:e=>{B(!0),M(e),P.setFieldsValue({products:[]})}})},"shop")}),(0,k.jsx)(s.A,{span:12,children:(0,k.jsx)(i.A.Item,{label:q("products"),name:"products",rules:[{required:!0,message:q("required")}],children:(0,k.jsx)(A.G,{mode:"multiple",fetchOptions:e=>{const l={page:1,perPage:10,active:1,status:"published",shop_id:null===_||void 0===_?void 0:_.value,search:e||null};return g.A.getAll(l).then((e=>e.data.map((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}})))).finally((()=>B(!1)))},disabled:!(null!==_&&void 0!==_&&_.value),refetchOptions:T})})}),(0,k.jsx)(s.A,{span:4,children:(0,k.jsx)(i.A.Item,{name:"images",label:q("image"),rules:[{validator:()=>0===G.length?Promise.reject(new Error(q("required"))):Promise.resolve()}],children:(0,k.jsx)(j.A,{type:"products",imageList:G,setImageList:V,form:P,multiple:!1})})}),(0,k.jsx)(s.A,{span:4,children:(0,k.jsx)(i.A.Item,{label:q("active"),name:"active",valuePropName:"checked",children:(0,k.jsx)(d.A,{defaultChecked:!0})})})]}),(0,k.jsx)(u.A,{type:"primary",htmlType:"submit",loading:N,children:q("submit")})]})})})}}}]);