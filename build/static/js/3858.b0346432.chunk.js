"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[3858],{75670:(e,a,l)=>{l.d(a,{A:()=>p});var t=l(9950),n=l(59233),o=l(70030),s=l(36455),r=l(19181),i=l.n(r),c=l(63620),d=l(64924),u=l(85923),m=l(44414);function p(e){let{form:a,lang:l,languages:r}=e;const{t:p}=(0,o.B)();function v(e){e.plugins.get("FileRepository").createUploadAdapter=e=>function(e){return{upload:()=>new Promise(((a,l)=>{const t=new FormData;e.file.then((e=>{e.size/1024/1024<2||(u.oR.error(p("min.2.mb")),l()),t.append("image",e),t.append("type","blogs"),d.A.upload(t).then((e=>{let{data:l}=e;a({default:"".concat(c.sE+l.title)})})).catch((e=>{l(e)}))}))}))}}(e)}return(0,m.jsx)(t.Fragment,{children:r.map((e=>(0,m.jsx)(n.A.Item,{label:p("description"),name:"description[".concat(e.locale,"]"),valuePropName:"data",getValueFromEvent:(e,a)=>a.getData(),rules:[{required:e.locale===l,message:p("required")},{validator:(e,a)=>a&&""===(null===a||void 0===a?void 0:a.trim())?Promise.reject(new Error(p("no.empty.space"))):a&&(null===a||void 0===a?void 0:a.trim().length)<5?Promise.reject(new Error(p("must.be.at.least.5"))):a&&(null===a||void 0===a?void 0:a.trim().length)>200?Promise.reject(new Error(p("must.be.less.200"))):Promise.resolve()}],hidden:e.locale!==l,children:(0,m.jsx)(s.CKEditor,{editor:i(),config:{extraPlugins:[v]},onBlur:(l,t)=>{const n=t.getData();a.setFieldsValue({["description[".concat(e.value,"]")]:n})}})},"desc"+e.locale)))})}},31281:(e,a,l)=>{function t(e,a){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const t=e.map((e=>({[e.locale]:""===a["".concat(l,"[").concat(e.locale,"]")]?void 0:a["".concat(l,"[").concat(e.locale,"]")]})));return Object.assign({},...t)}l.d(a,{A:()=>t})},3858:(e,a,l)=>{l.r(a),l.d(a,{default:()=>E});var t=l(9950),n=l(28429),o=l(85923),s=l(59233),r=l(23263),i=l(87094),c=l(41988),d=l(55902),u=l(99674),m=l(25933),p=l(48538),v=l(91854),g=l(74623),h=l(60926),b=l(70030),j=l(71999),x=l(48970),A=l(63620),f=l(75670),_=l(96011),y=l.n(_),w=l(31281),k=l(46492),P=l(44414);const E=()=>{var e,a,l;const{t:_}=(0,b.B)(),{activeMenu:E}=(0,v.d4)((e=>e.menu),v.bN),N=(0,v.wA)(),[F]=s.A.useForm(),I=(0,n.Zp)(),[q,z]=(0,t.useState)(!1),{languages:B,defaultLang:D}=(0,v.d4)((e=>e.formLang),v.bN),{pages:L}=(0,v.d4)((e=>e.pages),v.bN),[R,V]=(0,t.useState)(null!==(e=E.data)&&void 0!==e&&null!==(a=e.galleries)&&void 0!==a&&a[0]?[(C=null===(l=E.data.galleries)||void 0===l?void 0:l[0].path,{name:C,url:A.sE+C})]:[]);var C;(0,t.useEffect)((()=>()=>{const e=F.getFieldsValue(!0);N((0,g.Ok)({activeMenu:E,data:e}))}),[]);return(0,P.jsx)(r.A,{title:_("add.pages"),className:"h-100",extra:(0,P.jsx)(j.A,{}),children:(0,P.jsxs)(s.A,{name:"page-add",layout:"vertical",onFinish:e=>{z(!0);const a={images:R.map((e=>e.name)),active:Number(e.active),type:e.type,title:(0,w.A)(B,e,"title"),description:(0,w.A)(B,e,"description"),buttons:{google_play_button_link:null===e||void 0===e?void 0:e.google_play_button_link,app_store_button_link:null===e||void 0===e?void 0:e.app_store_button_link}};y()({method:"post",url:"".concat(A.TT,"dashboard/admin/pages"),headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:a,params:{}}).then((()=>{const e="pages";o.oR.success(_("successfully.created")),N((0,g.EK)({...E,nextUrl:e})),I("/".concat(e)),N((0,h.f)({}))})).catch((e=>{var a,l;return o.oR.error(null===(a=e.response)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.message)})).finally((()=>z(!1)))},form:F,initialValues:{active:!0,...E.data},className:"d-flex flex-column h-100",children:[(0,P.jsxs)(i.A,{gutter:12,children:[(0,P.jsx)(c.A,{span:12,children:B.map((e=>(0,P.jsx)(s.A.Item,{label:_("name"),name:"title[".concat(e.locale,"]"),rules:[{validator:(a,l)=>l||(null===e||void 0===e?void 0:e.locale)!==D?l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(new Error(_("no.empty.space"))):l&&(null===l||void 0===l?void 0:l.length)<2?Promise.reject(new Error(_("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(_("required")))}],hidden:e.locale!==D,children:(0,P.jsx)(d.A,{})},"title"+e.locale)))}),(0,P.jsx)(c.A,{span:12}),(0,P.jsx)(c.A,{span:24,children:(0,P.jsx)(f.A,{form:F,languages:B,lang:D})}),(0,P.jsx)(c.A,{span:12,children:(0,P.jsx)(s.A.Item,{label:_("type"),name:"type",rules:[{required:!0,message:_("required")}],children:(0,P.jsx)(u.A,{options:k.F.filter((e=>!L.some((a=>a.type===e.value)))),className:"w-100"})})}),(0,P.jsx)(c.A,{span:12,children:(0,P.jsx)(s.A.Item,{label:_("active"),name:"active",valuePropName:"checked",children:(0,P.jsx)(m.A,{})})}),(0,P.jsx)(c.A,{span:12,children:(0,P.jsx)(s.A.Item,{label:_("google_play_button_link"),name:"google_play_button_link",children:(0,P.jsx)(d.A,{className:"w-100"})})}),(0,P.jsx)(c.A,{span:12,children:(0,P.jsx)(s.A.Item,{label:_("app_store_button_link"),name:"app_store_button_link",children:(0,P.jsx)(d.A,{className:"w-100"})})}),(0,P.jsx)(c.A,{span:12,children:(0,P.jsx)(s.A.Item,{label:_("image"),name:"images",rules:[{validator:(e,a)=>0===(null===R||void 0===R?void 0:R.length)?Promise.reject(new Error(_("required"))):Promise.resolve()}],children:(0,P.jsx)(x.A,{type:"receipts",imageList:R,setImageList:V,form:F,multiple:!1})})})]}),(0,P.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,P.jsx)("div",{className:"pb-5",children:(0,P.jsx)(p.A,{type:"primary",htmlType:"submit",loading:q,children:_("submit")})})})]})})}},46492:(e,a,l)=>{l.d(a,{F:()=>t});const t=[{value:"delivery",label:"Delivery"},{value:"about",label:"About"},{value:"about_second",label:"About second"},{value:"about_three",label:"About third"}]}}]);