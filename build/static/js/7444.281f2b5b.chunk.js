"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[7444],{17456:(e,l,o)=>{o.d(l,{A:()=>i});o(9950);const i=o.p+"static/media/paystack.6d6a77c8d6bfc75061ec651e5c2e74eb.svg"},47992:(e,l,o)=>{o.d(l,{G:()=>r});var i=o(9950),t=o(95491),n=o.n(t),s=o(99674),a=o(90650),d=o(44414);const r=e=>{let{fetchOptions:l,debounceTimeout:o=400,onClear:t,refetchOptions:r=!1,...c}=e;const[u,v]=(0,i.useState)(!1),[p,h]=(0,i.useState)([]),f=(0,i.useMemo)((()=>n()((e=>{h([]),v(!0),l(e).then((e=>{h(e),v(!1)}))}),o)),[l,o]);return(0,d.jsx)(s.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:f,onClear:()=>{f(""),t&&t()},notFoundContent:u?(0,d.jsx)(a.A,{size:"small"}):"no results",...c,options:p,onFocus:()=>{p.length&&!r||f("")}})}},8168:(e,l,o)=>{function i(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}o.d(l,{A:()=>i})},53774:(e,l,o)=>{function i(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const o=Number(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===l?"".concat(o," ").concat(e):"".concat(e," ").concat(o)}o.r(l),o.d(l,{default:()=>i})},74704:(e,l,o)=>{o.d(l,{A:()=>n});o(9950);var i=o(23263),t=o(44414);function n(e){let{title:l="Orders",value:o=0,color:n="grey",onClick:s}=e;return(0,t.jsx)(i.A,{className:"statistics-card",hoverable:!!s,onClick:s,children:(0,t.jsxs)("div",{className:"card-wrapper",children:[(0,t.jsx)("div",{className:"space"}),(0,t.jsx)("div",{className:"content",children:(0,t.jsx)("h1",{className:"number",children:o})}),(0,t.jsx)("span",{className:"highlighter ".concat(n)}),l&&(0,t.jsx)("h4",{className:"title",children:l})]})})}},57444:(e,l,o)=>{o.r(l),o.d(l,{default:()=>E});var i=o(9950),t=o(86971),n=o(12916),s=o(23263),a=o(80737),d=o(48538),r=o(87094),c=o(41988),u=o(52913),v=o(28429),p=o(91854),h=o(74623),f=o(70030),x=o(88986),m=o(8168),y=o(53774),_=o(47992),g=o(53271),b=o(85923),j=o(59051),k=o.n(j),A=o(58547),w=o(43430),C=o(98987),M=o(82706),Y=o(90650),N=o(17456),S=o(54826),D=o(70283),I=o(68873),z=o(17491),O=o(50384),P=o(44414);function F(e){let{open:l,onCancel:o,onConfirm:t,isPaying:n}=e;const{t:a}=(0,f.B)(),[u,v]=(0,i.useState)({}),[p,h]=(0,i.useState)(null),[x,m]=(0,i.useState)(!1);(0,i.useEffect)((()=>{!async function(){m(!0),z.A.getAll().then((e=>{let{data:l}=e;return h(l.map((e=>({label:e.tag||"no name",value:e.id,key:e.id}))))})).finally((()=>{m(!1)}))}()}),[]);const y=e=>{switch(e){case"wallet":return(0,P.jsx)(I.c8K,{size:80});case"paypal":return(0,P.jsx)(S.SnG,{size:80});case"stripe":return(0,P.jsx)(D.kDV,{size:80});case"razorpay":return(0,P.jsx)(D.NVb,{size:80});case"paystack":return(0,P.jsx)("img",{src:N.A,alt:"img",width:"80",height:"80"});default:return(0,P.jsx)(O.Nxq,{size:80})}};return(0,P.jsx)(M.A,{visible:l,title:a("pay.to.partner"),onCancel:o,footer:[(0,P.jsx)(d.A,{type:"primary",disabled:x||!u.value,loading:n,onClick:()=>{u.value?t(u.value):b.oR.warning(a("please.select.payment.type"))},children:a("confirm")},"save-btn"),(0,P.jsx)(d.A,{type:"default",onClick:o,children:a("cancel")},"cancel-btn")],children:(0,P.jsx)(Y.A,{spinning:x,children:(0,P.jsx)(r.A,{gutter:12,children:null===p||void 0===p?void 0:p.map(((e,l)=>"cash"===e.label||"wallet"===e.label?(0,P.jsx)(c.A,{span:12,children:(0,P.jsxs)(s.A,{style:{display:"flex",justifyContent:"center"},className:"payment-card ".concat((null===u||void 0===u?void 0:u.label)===e.label?"active":""),onClick:()=>{v(e)},children:[(0,P.jsx)("div",{className:"payment-icon",children:y(null===e||void 0===e?void 0:e.label)}),(0,P.jsx)("div",{className:"font-weight-bold mt-2 text-center",children:a(null===e||void 0===e?void 0:e.label)})]})},l):null))})})})}var G=o(74704);const{RangePicker:R}=t.A;function E(){var e,l,o,t,j,M,Y;const{type:N}=(0,v.g)(),S=(0,p.wA)(),D=(0,v.Zp)(),{t:I}=(0,f.B)(),{defaultCurrency:z}=(0,p.d4)((e=>e.currency),p.bN),[O,E]=(0,i.useState)(!1),K=[{title:I("id"),is_show:!0,dataIndex:"id",key:"id",sorter:!0,render:e=>(0,P.jsxs)("span",{className:"text-hover",onClick:()=>{"bookings"!==N&&(e=>{S((0,h.X4)({url:"order/details/".concat(e),id:"order_details",name:I("order.details")})),D("/order/details/".concat(e))})(e)},children:["#",e]})},{title:I(N),is_show:!0,dataIndex:"user",key:"user",render:(e,l)=>{var o;const i="seller"===N?null===l||void 0===l||null===(o=l.shop)||void 0===o?void 0:o.seller:l.deliveryman;return(0,P.jsxs)("div",{children:[null===i||void 0===i?void 0:i.firstname," ",(null===i||void 0===i?void 0:i.lastname)||""]})}},..."bookings"!==N?[{title:I("order.total_price"),is_show:!0,dataIndex:"total_price",key:"total_price",render:(e,l)=>{var o,i;const t=null===(o=l.transaction)||void 0===o?void 0:o.status;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("span",{children:(0,y.default)(e,null===z||void 0===z?void 0:z.symbol,null===z||void 0===z?void 0:z.position)}),(0,P.jsx)("br",{}),(0,P.jsx)("span",{className:"progress"===t?"text-primary":"paid"===t?"text-success":"rejected"===t?"text-danger":"text-info",children:null===(i=l.transaction)||void 0===i?void 0:i.status})]})}}]:[],..."seller"===N||"bookings"===N?[{title:I("coupon.price"),is_show:!0,dataIndex:"coupon_price",key:"coupon_price",render:e=>(0,y.default)(e,null===z||void 0===z?void 0:z.symbol,null===z||void 0===z?void 0:z.position)}]:[],..."seller"===N?[{title:I("total.cashback"),is_show:!0,dataIndex:"point_histories",key:"point_histories",render:e=>{var l;return(0,y.default)(null===e||void 0===e||null===(l=e[0])||void 0===l?void 0:l.price,null===z||void 0===z?void 0:z.symbol,null===z||void 0===z?void 0:z.position)}}]:[],..."bookings"!==N?[{title:I("extra_price"),is_show:!0,dataIndex:"extra_price",key:"extra_price",render:e=>(0,y.default)(e,null===z||void 0===z?void 0:z.symbol,null===z||void 0===z?void 0:z.position)}]:[],..."seller"===N||"bookings"===N?[{title:I("service.fee"),is_show:!0,dataIndex:"service_fee",key:"service_fee",render:(e,l)=>(0,y.default)((l.service_fee||0)+(l.commission_fee||0),null===z||void 0===z?void 0:z.symbol,null===z||void 0===z?void 0:z.position)}]:[],..."seller"===N||"bookings"===N?[{title:I("seller.fee"),is_show:!0,dataIndex:"seller_fee",key:"seller_fee",render:e=>(0,y.default)(e,null===z||void 0===z?void 0:z.symbol,null===z||void 0===z?void 0:z.position)}]:[],..."bookings"===N?[{title:I("delivery.fee"),is_show:!0,dataIndex:"delivery_fee",key:"delivery_fee",render:e=>(0,y.default)(e,null===z||void 0===z?void 0:z.symbol,null===z||void 0===z?void 0:z.position)}]:[],..."bookings"===N?[{title:I("extra.time.price"),is_show:!0,dataIndex:"extra_time_price",key:"extra_time_price",render:e=>(0,y.default)(e,null===z||void 0===z?void 0:z.symbol,null===z||void 0===z?void 0:z.position)}]:[],..."bookings"===N?[{title:I("gift.cart.price"),is_show:!0,dataIndex:"gift_cart_price",key:"gift_cart_price",render:e=>(0,y.default)(e,null===z||void 0===z?void 0:z.symbol,null===z||void 0===z?void 0:z.position)}]:[],..."bookings"===N?[{title:I("price"),is_show:!0,dataIndex:"price",key:"price",render:e=>(0,y.default)(e,null===z||void 0===z?void 0:z.symbol,null===z||void 0===z?void 0:z.position)}]:[],..."bookings"===N?[{title:I("shop"),is_show:!0,dataIndex:"shop",key:"shop",render:e=>{var l;return(null===e||void 0===e||null===(l=e.seller)||void 0===l?void 0:l.full_name)||"-"}}]:[],..."bookings"===N?[{title:I("status"),is_show:!0,dataIndex:"status",key:"status",render:e=>(0,P.jsx)(n.A,{children:I(e)})}]:[],..."bookings"===N?[{title:I("type"),is_show:!0,dataIndex:"type",key:"type",render:e=>(0,P.jsx)(n.A,{children:I(e)})}]:[],{title:I("payment.type"),is_show:!0,dataIndex:"transaction",key:"transaction",render:e=>{var l;return I(null===e||void 0===e||null===(l=e.payment_system)||void 0===l?void 0:l.tag)||"-"}}],{activeMenu:V}=(0,p.d4)((e=>e.menu),p.bN),[B,T]=(0,i.useState)(null),[$,q]=(0,i.useState)(!1),[X,Z]=(0,i.useState)(k()().subtract(1,"month"),k()()),{list:H,loading:J,params:L,meta:Q}=(0,p.d4)((e=>e.paymentToPartners),p.bN),U=V.data,W={search:null===U||void 0===U?void 0:U.search,sort:null===U||void 0===U?void 0:U.sort,column:null===U||void 0===U?void 0:U.column,perPage:null===U||void 0===U?void 0:U.perPage,page:null===U||void 0===U?void 0:U.page,user_id:null===U||void 0===U?void 0:U.user_id,shop_id:null!==(null===(e=V.data)||void 0===e?void 0:e.shop_id)?null===(l=V.data)||void 0===l?void 0:l.shop_id:null,date_from:Array.isArray(X)?null===(o=X[0])||void 0===o?void 0:o.format("YYYY-MM-DD"):k()().subtract(1,"month").format("YYYY-MM-DD"),date_to:Array.isArray(X)?null===(t=X[1])||void 0===t?void 0:t.format("YYYY-MM-DD"):k()().format("YYYY-MM-DD"),type:"bookings"===N?"seller":N};console.log("paramsData",W);(0,x.A)((()=>{S((0,w.FA)({params:W,name:"bookings"===N?"bookings":"orders"}))}),[U,X,N]);const ee=(e,l)=>{S((0,h.Ok)({activeMenu:V,data:{...U,[l]:e}}))};(0,i.useEffect)((()=>{null!==V&&void 0!==V&&V.refetch&&(S((0,w.FA)({params:W,name:"bookings"===N?"bookings":"orders"})),S((0,h.km)(V)))}),[null===V||void 0===V?void 0:V.refetch]);const le={selectedRowKeys:B,onChange:e=>{T(e)}};return(0,i.useEffect)((()=>()=>{S((0,h.Ok)({activeMenu:V,data:{}}))}),[]),(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(s.A,{children:(0,P.jsxs)("div",{className:"flex justify-content-space-between",children:[(0,P.jsxs)(a.A,{wrap:!0,className:"order-filter",style:{flex:1,width:"100%"},children:[(0,P.jsx)(_.G,{placeholder:I("select.shop"),fetchOptions:async function(e){const l={search:e,status:"approved"};return A.A.getAll(l).then((e=>{let{data:l}=e;return l.map((e=>{var l;return{label:null===(l=e.translation)||void 0===l?void 0:l.title,value:e.id}}))}))},style:{width:"100%"},onSelect:e=>ee(e.value,"shop_id"),onDeselect:()=>ee(null,"shop_id"),allowClear:!0,value:null===U||void 0===U?void 0:U.shop_id}),(0,P.jsx)(_.G,{placeholder:I("select.user"),fetchOptions:async function(e){const l={search:e,perPage:10,role:N};return g.A.search(l).then((e=>{let{data:l}=e;return l.map((e=>({label:"".concat(e.firstname," ").concat(e.lastname),value:e.id})))}))},onSelect:e=>ee(e.value,"user_id"),onDeselect:()=>ee(null,"user_id"),style:{width:"100%"},value:null===U||void 0===U?void 0:U.user_id}),(0,P.jsx)(R,{value:X,onChange:e=>{ee((l=>{var o,i;return{...l,date_from:null===e||void 0===e||null===(o=e[0])||void 0===o?void 0:o.format("YYYY-MM-DD"),date_to:null===e||void 0===e||null===(i=e[1])||void 0===i?void 0:i.format("YYYY-MM-DD")}})),Z(e)},disabledDate:e=>e&&e>k()().endOf("day"),style:{width:"100%"}})]}),(0,P.jsx)(d.A,{type:"primary",disabled:!B||0===B.length,onClick:()=>E(!0),children:I("pay")})]})}),(0,P.jsx)("div",{style:{width:"100%"},children:(0,P.jsxs)(r.A,{gutter:16,className:"mt-3",children:[(0,P.jsx)(c.A,{flex:"0 0 25%",children:(0,P.jsx)(G.A,{title:I("commission.fee"),value:(0,y.default)(null===H||void 0===H?void 0:H.total_commission_fee,null===z||void 0===z?void 0:z.symbol,null===z||void 0===z?void 0:z.position),color:"purple"})}),(0,P.jsx)(c.A,{flex:"0 0 25%",children:(0,P.jsx)(G.A,{title:I("coupon"),value:(0,y.default)(null===H||void 0===H?void 0:H.total_coupon,null===z||void 0===z?void 0:z.symbol,null===z||void 0===z?void 0:z.position),color:"red"})}),"bookings"!==N&&(0,P.jsx)(c.A,{flex:"0 0 25%",children:(0,P.jsx)(G.A,{title:I("delivery.fee"),value:(0,y.default)(null!==H&&void 0!==H&&H.total_delivery_fee?Math.trunc(null===H||void 0===H?void 0:H.total_delivery_fee):0,null===z||void 0===z?void 0:z.symbol,null===z||void 0===z?void 0:z.position),color:"green"})}),"bookings"!==N&&(0,P.jsx)(c.A,{flex:"0 0 25%",children:(0,P.jsx)(G.A,{title:I("point.history"),value:(0,y.default)(null!==H&&void 0!==H&&H.total_point_history?Math.trunc(null===H||void 0===H?void 0:H.total_point_history):0,null===z||void 0===z?void 0:z.symbol,null===z||void 0===z?void 0:z.position),color:"purple"})}),(0,P.jsx)(c.A,{flex:"0 0 25%",children:(0,P.jsx)(G.A,{title:I("price"),value:(0,y.default)(null!==H&&void 0!==H&&H.total_price?Math.trunc(null===H||void 0===H?void 0:H.total_price):0,null===z||void 0===z?void 0:z.symbol,null===z||void 0===z?void 0:z.position),color:"red"})}),(0,P.jsx)(c.A,{flex:"0 0 25%",children:(0,P.jsx)(G.A,{title:I("seller.fee"),value:(0,y.default)(null!==H&&void 0!==H&&H.total_seller_fee?Math.trunc(null===H||void 0===H?void 0:H.total_seller_fee):0,null===z||void 0===z?void 0:z.symbol,null===z||void 0===z?void 0:z.position),color:"purple"})}),(0,P.jsx)(c.A,{flex:"0 0 25%",children:(0,P.jsx)(G.A,{title:I("service.fee"),value:(0,y.default)(null!==H&&void 0!==H&&H.total_service_fee?Math.trunc(null===H||void 0===H?void 0:H.total_service_fee):0,null===z||void 0===z?void 0:z.symbol,null===z||void 0===z?void 0:z.position),color:"red"})}),(0,P.jsx)(c.A,{flex:"0 0 25%",children:(0,P.jsx)(G.A,{title:I("tax"),value:(0,y.default)(null!==H&&void 0!==H&&H.total_tax?Math.trunc(null===H||void 0===H?void 0:H.total_tax):0,null===z||void 0===z?void 0:z.symbol,null===z||void 0===z?void 0:z.position),color:"green"})}),"bookings"===N&&(0,P.jsx)(c.A,{flex:"0 0 25%",children:(0,P.jsx)(G.A,{title:I("extra.time.price"),value:(0,y.default)(null!==H&&void 0!==H&&H.extra_time_price?Math.trunc(null===H||void 0===H?void 0:H.extra_time_price):0,null===z||void 0===z?void 0:z.symbol,null===z||void 0===z?void 0:z.position),color:"green"})})]})}),(0,P.jsx)(s.A,{children:(0,P.jsx)(u.A,{scroll:{x:!0},rowSelection:le,columns:null===K||void 0===K?void 0:K.filter((e=>e.is_show)),dataSource:null===H||void 0===H?void 0:H.data,loading:J,pagination:{pageSize:L.perPage,page:(null===(j=V.data)||void 0===j?void 0:j.page)||1,total:null===Q||void 0===Q?void 0:Q.total,defaultCurrent:null===(M=V.data)||void 0===M?void 0:M.page,current:null===(Y=V.data)||void 0===Y?void 0:Y.page},rowKey:e=>null===e||void 0===e?void 0:e.id,onChange:function(e,l,o){const{pageSize:i,current:t}=e,{field:n,order:s}=o,a=(0,m.A)(s);S((0,h.Ok)({activeMenu:V,data:{...U,perPage:i,page:t,column:n,sort:a}}))}})}),O&&(0,P.jsx)(F,{open:O,onCancel:()=>{E(!1),T(null)},onConfirm:e=>(e=>{q(!0);const l={data:B,type:N,payment_id:e};C.A.pay(l).then((()=>{b.oR.success(I("successfully.payed")),S((0,w.FA)({params:W,name:"bookings"===N?"bookings":"orders"}))})).finally((()=>{T(null),q(!1),E(!1)}))})(e),isPaying:$})]})}}}]);