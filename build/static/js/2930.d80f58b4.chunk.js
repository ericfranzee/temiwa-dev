"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[2930],{85023:(e,l,i)=>{i.d(l,{D:()=>s});var n=i(9950),d=i(99674),o=i(90650),t=i(44414);const s=e=>{let{fetchOptions:l,refetch:i=!1,value:s,...a}=e;const[r,u]=(0,n.useState)(!1),[c,v]=(0,n.useState)([]);"object"===typeof(null===s||void 0===s?void 0:s.label)&&null!==(null===s||void 0===s?void 0:s.label)&&(s.label=s.label.value);return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(d.A,{labelInValue:!0,filterOption:!1,notFoundContent:r?(0,t.jsx)(o.A,{size:"small"}):"no results",value:s,...a,options:r?[]:c,onFocus:()=>{c.length&&!i||(u(!0),l().then((e=>{v(e),u(!1)})))},getPopupContainer:e=>e.parentNode})})}},12970:(e,l,i)=>{function n(e){var l,i;let n=null===e||void 0===e?void 0:e.slice(0,1),d=null===e||void 0===e?void 0:e.lastIndexOf("@"),o=null===e||void 0===e?void 0:e.slice(1,d-1);o=null===(l=o)||void 0===l?void 0:l.replace(/./g,"*");let t=null===e||void 0===e?void 0:e.slice(d-1,e.length);return null===n||void 0===n||null===(i=n.concat(o))||void 0===i?void 0:i.concat(t)}i.d(l,{A:()=>n})},35973:(e,l,i)=>{function n(e){const l="".concat(e),i="*".repeat(l.length-2);return(null===l||void 0===l?void 0:l[0])+i+(null===l||void 0===l?void 0:l[(null===l||void 0===l?void 0:l.length)-1])}i.d(l,{A:()=>n})},78498:(e,l,i)=>{i.d(l,{A:()=>x});var n=i(9950),d=i(97239);const o=i.p+"static/media/pin.0e41858db80c699cd8a2.png";var t=i(96011),s=i.n(t),a=i(63620);async function r(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.CJ,i={latlng:"".concat(null===e||void 0===e?void 0:e.lat,",").concat(null===e||void 0===e?void 0:e.lng),key:l};return s().get("https://maps.googleapis.com/maps/api/geocode/json",{params:i}).then((e=>{var l;let{data:i}=e;return null===(l=i.results[0])||void 0===l?void 0:l.formatted_address})).catch((e=>"not found"))}var u=i(39174),c=i(85923),v=i(70030),p=i(6566),h=i(44414);const m=(0,p.A)();const x=(0,d.GoogleApiWrapper)({apiKey:m,libraries:["places","geometry"]})((function(e){var l,i;const[t,s]=(0,n.useState)(),{t:a}=(0,v.B)(),p=async()=>{await navigator.geolocation.getCurrentPosition((function(e){const l={lat:e.coords.latitude,lng:e.coords.longitude};s(l)}),(function(e){c.oR.warning(a("turn.on.gps"))}))};(0,n.useEffect)((()=>{p()}),[]);const x=[{lat:Number(null===e||void 0===e||null===(l=e.location)||void 0===l?void 0:l.lat)||0,lng:Number(null===e||void 0===e||null===(i=e.location)||void 0===i?void 0:i.lng)||0}];for(var y=new e.google.maps.LatLngBounds,g=0;g<x.length;g++)y.extend(x[g]);return(0,h.jsxs)("div",{className:"map-container",style:{height:400,width:"100%"},children:[(0,h.jsx)("button",{className:"map-button",type:"button",onClick:()=>{p(),t&&(async l=>{const i={lat:null===l||void 0===l?void 0:l.lat,lng:null===l||void 0===l?void 0:l.lng};e.setLocation(i);const n=await r(i,m);e.setAddress(n)})(t)},children:(0,h.jsx)(u.uFi,{})}),(0,h.jsx)(d.Map,{cursor:"pointer",onClick:async(l,i,n)=>{const{latLng:d}=n,o={lat:d.lat(),lng:d.lng()};e.setLocation(o);const t=await r(o,m);e.setAddress(t)},google:e.google,defaultZoom:12,zoom:10,className:"clickable",initialCenter:e.location,center:e.location,children:(0,h.jsx)(d.Marker,{position:e.location,icon:{url:o,scaledSize:new e.google.maps.Size(32,32)},className:"marker"})})]})}))},1201:(e,l,i)=>{i.d(l,{A:()=>r});i(9950);var n=i(70030),d=i(88542);const o=i.p+"static/media/noproductsfound.1cec73868b5fd048b865.riv",t=i.p+"static/media/noresult.ac4af107751f94856a9c.riv",s=i.p+"static/media/nosell.32cb2c2cc548a15c820d.riv";var a=i(44414);const r=function(e){let{id:l="noresult",text:i=""}=e;const{t:r}=(0,n.B)(),u={src:{noproductsfound:o,noresult:t,nosell:s}[l],artboard:"New Artboard",autoplay:!0},{RiveComponent:c}=(0,d.useRive)(u);return(0,a.jsxs)("div",{className:"animation-canvas",children:[(0,a.jsx)("div",{style:{width:"100%",height:200},children:(0,a.jsx)(c,{})}),(0,a.jsx)("div",{className:"text",children:r(i)})]})}},8297:(e,l,i)=>{i.d(l,{A:()=>a});var n=i(9950),d=i(55902),o=i(41397),t=i(60767),s=i(44414);function a(e){let{handleChange:l,defaultValue:i,resetSearch:a,...r}=e;const[u,c]=(0,n.useState)(i),v=(0,n.useMemo)((()=>(0,o.debounce)((e=>{l(e)}),800)),[]);return(0,n.useEffect)((()=>{c(i)}),[a]),(0,s.jsx)(d.A,{value:u,onChange:e=>{c(e.target.value),v(e.target.value)},prefix:(0,s.jsx)(t.A,{}),...r})}},47992:(e,l,i)=>{i.d(l,{G:()=>r});var n=i(9950),d=i(95491),o=i.n(d),t=i(99674),s=i(90650),a=i(44414);const r=e=>{let{fetchOptions:l,debounceTimeout:i=400,onClear:d,refetchOptions:r=!1,...u}=e;const[c,v]=(0,n.useState)(!1),[p,h]=(0,n.useState)([]),m=(0,n.useMemo)((()=>o()((e=>{h([]),v(!0),l(e).then((e=>{h(e),v(!1)}))}),i)),[l,i]);return(0,a.jsx)(t.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:m,onClear:()=>{m(""),d&&d()},notFoundContent:c?(0,a.jsx)(s.A,{size:"small"}):"no results",...u,options:p,onFocus:()=>{p.length&&!r||m("")}})}},80415:(e,l,i)=>{i.d(l,{G:()=>t,HV:()=>d,LH:()=>n,PR:()=>o,wO:()=>a,xt:()=>s});const n={new:[1,2,3,4,5],accepted:[1,2,3,4,5],ready:[1,2,3,4,5],on_a_way:[1,2,3,4,5],delivered:[1,2,3,4,5],canceled:[1,2,3,4,5],cooking:[1,2,3,4,5]},d=(new Date,new Date,["new","accepted","ready","on_a_way","pause","delivered","canceled"]),o=30,t="HH:mm",s="hh:mm a",a=!0},29597:(e,l,i)=>{function n(e){var l;if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const i=null===e||void 0===e||null===(l=e.location)||void 0===l?void 0:l.split(", ");return{lat:Number(null===i||void 0===i?void 0:i[0]),lng:Number(null===i||void 0===i?void 0:i[1])}}i.d(l,{A:()=>n})},22576:(e,l,i)=>{function n(e){for(var l=[],i=[],n="",d=0;d<(null===(o=e.stocks)||void 0===o?void 0:o.length);d++){var o;n="",e.stocks[d].extras.sort(((e,l)=>e.extra_group_id-l.extra_group_id));for(var t=0;t<(null===(s=e.stocks[d].extras)||void 0===s?void 0:s.length);t++){var s,a=Object.assign({},e.stocks[d].extras[t]),r=l.findIndex((e=>e.extra_value_id==a.extra_value_id));-1==r?(a.level=t,a.up=[n],l.push(a),n+=a.extra_value_id.toString()):(l[r].up.push(n),n+=a.extra_value_id.toString())}var u={id:e.stocks[d].id,extras:n,price:e.stocks[d].price,quantity:e.stocks[d].quantity,countable_id:e.stocks[d].countable_id,discount:e.stocks[d].discount,tax:e.stocks[d].tax,total_price:e.stocks[d].total_price,bonus:e.stocks[d].bonus};i.push(u)}return{stock:i,extras:l}}function d(e,l,i){for(var n=""==e?[]:e.split(","),d=[],o=[],t=0;t<=n.length;t++){t-1>=0&&(o[o.length]=n[t-1].toString());var s=l.filter((e=>{if(new Set(e.up).has(o.join("")))return e}));s.length>0&&d.push(s)}t=0;if(o.length<d.length)for(;t<l.length;){o[o.length]=d[d.length-1][0].extra_value_id.toString();let e=l.filter((e=>!!new Set(e.up).has(o.join(""))));if(0==e.length)break;d.push(e),t++}var a=i.findIndex((e=>e.extras==o.join("")));return{stock:i[a],extras:d}}i.d(l,{A:()=>d,w:()=>n})},51066:(e,l,i)=>{i.d(l,{Q:()=>o});var n=i(17706),d=i(80415);const o=()=>{var e,l,i,o;return null!==(e=null===(l=n.M.getState())||void 0===l||null===(i=l.globalSettings)||void 0===i||null===(o=i.settings)||void 0===o?void 0:o.hour_format)&&void 0!==e?e:d.G}},49602:(e,l,i)=>{function n(e){var l;const i=null===e||void 0===e||null===(l=e.extras)||void 0===l?void 0:l.find((e=>"image"===e.group.type));return i?i.value:""}i.d(l,{A:()=>n})},6566:(e,l,i)=>{i.d(l,{A:()=>d});var n=i(17706);const d=()=>{var e,l;const i={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IS_DEMO:"false"}.MAP_API_KEY,{google_map_key:d}=null===(e=n.M.getState())||void 0===e||null===(l=e.globalSettings)||void 0===l?void 0:l.settings;return d||i}},53774:(e,l,i)=>{function n(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const i=Number(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===l?"".concat(i," ").concat(e):"".concat(e," ").concat(i)}i.r(l),i.d(l,{default:()=>n})},28249:(e,l,i)=>{function n(){var e;let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0;const n=(null===i||void 0===i||null===(e=i.translation)||void 0===e?void 0:e.title)||"pcs";if(!l)return 0;switch(null===i||void 0===i?void 0:i.position){case"after":default:return"".concat(l," ").concat(n);case"before":return"".concat(n," ").concat(l)}}i.d(l,{A:()=>n})},67366:(e,l,i)=>{function n(e){return e.cartItems.filter((l=>l.bag_id===e.currentBag))}function d(e){return e.data.find((l=>l.bag_id===e.currentBag))}i.d(l,{Xd:()=>d,je:()=>n})},774:(e,l,i)=>{i.d(l,{A:()=>d});var n=i(82371);const d={getAll:e=>n.A.get("dashboard/admin/user-addresses",{params:e}),create:e=>n.A.post("dashboard/admin/user-addresses",e)}},74827:(e,l,i)=>{i.d(l,{A:()=>d});var n=i(82371);const d={getAll:e=>n.A.get("rest/brands/paginate",{params:e}),getById:(e,l)=>n.A.get("rest/brands/".concat(e),{params:l})}},78457:(e,l,i)=>{i.d(l,{A:()=>d});var n=i(82371);const d={getAll:e=>n.A.get("dashboard/seller/categories/paginate",{params:e}),getById:(e,l)=>n.A.get("dashboard/seller/categories/".concat(e),{params:l}),search:e=>n.A.get("dashboard/seller/categories/search",{params:e}),paginateSelect:e=>n.A.get("dashboard/seller/categories/select-paginate",{params:e})}},53992:(e,l,i)=>{i.d(l,{A:()=>d});var n=i(82371);const d={checkCoupon:e=>n.A.post("rest/coupons/check",e),checkCashback:e=>n.A.post("rest/cashback/check",e)}},11024:(e,l,i)=>{i.r(l),i.d(l,{default:()=>Ee});var n=i(9950),d=i(23263),o=i(87094),t=i(41988),s=i(47992),a=i(74827),r=i(78457),u=i(88986),c=i(91854),v=i(92979),p=i(8297),h=i(70030),m=i(44414);const x=()=>{const{t:e}=(0,h.B)(),l=(0,c.wA)(),[i,x]=(0,n.useState)(null),[y,g]=(0,n.useState)(null),[j,A]=(0,n.useState)(null),{myShop:f}=(0,c.d4)((e=>e.myShop),c.bN);return(0,u.A)((()=>{const e={brand_id:null===i||void 0===i?void 0:i.value,category_id:null===y||void 0===y?void 0:y.value,search:j,active:1,status:"published"};l((0,v.EN)(e))}),[i,y,j]),(0,m.jsx)(d.A,{children:(0,m.jsxs)(o.A,{gutter:12,children:[(0,m.jsx)(t.A,{span:12,children:(0,m.jsx)(p.A,{className:"w-100",placeholder:e("search"),handleChange:A})}),(0,m.jsx)(t.A,{span:"shop"===f.type?6:12,children:(0,m.jsx)(s.G,{className:"w-100",placeholder:e("select.category"),fetchOptions:async function(l){const i={search:l,type:"main"};return l||null===i||void 0===i||delete i.search,r.A.search(i).then((l=>l.data.map((l=>{var i,n;return{label:null!==(i=null===l||void 0===l||null===(n=l.translation)||void 0===n?void 0:n.title)&&void 0!==i?i:e("no.name"),value:null===l||void 0===l?void 0:l.id,key:null===l||void 0===l?void 0:l.id}}))))},onChange:e=>g(e),value:y})}),"shop"===f.type?(0,m.jsx)(t.A,{span:6,children:(0,m.jsx)(s.G,{className:"w-100",placeholder:e("select.brand"),fetchOptions:async function(l){const i={search:0===(null===l||void 0===l?void 0:l.length)?null:l};return a.A.getAll(i).then((l=>l.data.map((l=>{var i;return{label:null!==(i=null===l||void 0===l?void 0:l.title)&&void 0!==i?i:e("no.name"),value:null===l||void 0===l?void 0:l.id,key:null===l||void 0===l?void 0:l.id}}))))},onChange:e=>x(e),value:i})}):void 0]})})};var y=i(68832),g=i(90650),j=i(7785),A=i(55995),f=i(8750),_=i(69554),b=i(85923),k=i(82706),N=i(48538),w=i(72243),C=i(91524),S=i(80737),q=i(53387),I=i(91348),z=i(53774),D=i(2794),F=i(28249),M=i(49602),R=i(22576),E=i(52765);const T=e=>{var l,i;let{showExtras:n,addonCalculate:d,selectedValues:o,handleChange:t}=e;return(0,m.jsx)(S.A,{direction:"vertical",size:"middle",children:null===(l=n.stock)||void 0===l||null===(i=l.addons)||void 0===i?void 0:i.filter((e=>!!e.product)).map((e=>{var l,i;const n=o.includes(String(e.addon_id));return(0,m.jsxs)("div",{children:[(0,m.jsx)(E.A,{id:String(e.id),name:String(e.id),checked:n,onChange:()=>t(e)}),(0,m.jsxs)("label",{htmlFor:String(e.id),children:[n&&(0,m.jsxs)(S.A,{size:0,children:[(0,m.jsx)(N.A,{type:"text",className:"minus-button",style:{padding:0,height:"max-content"},size:"small",icon:(0,m.jsx)(I.A,{}),disabled:1===e.product.quantity,onClick:l=>{l.stopPropagation(),d(e.addon_id,e.product.quantity-1)}}),(0,m.jsx)("span",{className:"ml-2",children:e.product.quantity||e.product.min_qty}),(0,m.jsx)(N.A,{type:"text",className:"plus-button",style:{padding:0,height:"max-content"},size:"small",icon:(0,m.jsx)(f.A,{}),onClick:l=>{l.stopPropagation(),d(e.addon_id,e.product.quantity?e.product.quantity+1:e.product.min_qty+1)}})]}),(0,m.jsx)("span",{className:"ml-2",children:null===(l=e.product)||void 0===l||null===(i=l.translation)||void 0===i?void 0:i.title})]})]},e.id)}))})};var B=i(67231);function O(e){var l,i,d,s;let{extrasModal:a,setExtrasModal:r}=e;const[u,v]=(0,n.useState)(!1),[p,x]=(0,n.useState)({}),{t:y}=(0,h.B)(),[j,A]=(0,n.useState)({}),E=(0,c.wA)(),[O,V]=(0,n.useState)([]),[H,Y]=(0,n.useState)([]),[P,L]=(0,n.useState)([]),[G,X]=(0,n.useState)([]),[W,Q]=(0,n.useState)([]),[U,K]=(0,n.useState)({extras:[],stock:{id:0,quantity:1,price:0}}),[$,J]=(0,n.useState)(a.quantity||p.quantity||p.min_qty||1),{currentBag:Z,currency:ee}=(0,c.d4)((e=>e.cart),c.bN),le=e=>{var l;const i=P.findIndex((l=>l.extra_group_id===e.extra_group_id));let n=P;i>-1&&(n=n.slice(0,i)),n.push(e);const d=n.map((e=>e.extra_value_id)).join(",");var o=(0,R.A)(d,O,H);K(o),null===(l=o.extras)||void 0===l||l.forEach((l=>{const i=P.findIndex((i=>l[0].extra_group_id!==e.extra_group_id?i.extra_group_id===l[0].extra_group_id:i.extra_group_id===e.extra_group_id));if(l[0].level>=e.level){var d=l[0].extra_group_id!==e.extra_group_id?l[0]:e;-1===i?n.push(d):n[i]=d}})),L(n)};const ie=()=>r(!1);function ne(e){var l;return((null===U||void 0===U||null===(l=U.stock)||void 0===l?void 0:l[e||"price"])||0)*$}return(0,n.useEffect)((()=>{null!==U&&void 0!==U&&U.stock&&A({...U.stock,extras:P})}),[U]),(0,n.useEffect)((()=>{v(!0),B.A.getById(a.uuid).then((e=>{var l;let{data:i}=e;x(i);const n=(0,R.w)(i,null===a||void 0===a?void 0:a.addons);var d;(V(n.extras),J(a.quantity||i.quantity||i.min_qty),Y(n.stock),K((0,R.A)(P,n.extras,n.stock)),null===(l=(0,R.A)("",n.extras,n.stock).extras)||void 0===l||l.forEach((e=>{L((l=>[...l,e[0]]))})),null!==a&&void 0!==a&&a.addons)&&Q((null===a||void 0===a||null===(d=a.addons)||void 0===d?void 0:d.map((e=>{var l;return String((null===e||void 0===e||null===(l=e.countable)||void 0===l?void 0:l.id)||e.countable_id)})))||[])})).finally((()=>v(!1)))}),[a.uuid]),(0,m.jsx)(k.A,{visible:!!p,title:p.name,onCancel:ie,footer:[u?null:(0,m.jsx)(N.A,{icon:(0,m.jsx)(q.A,{}),type:"primary",onClick:()=>{const e={...p,stock:j,quantity:$,id:j.id,img:(0,M.A)(j)||p.img,bag_id:Z,stockID:j};e.quantity>j.quantity?b.oR.warning("".concat(y("you.cannot.order.more.than")," ").concat(j.quantity)):(E((0,D.bE)(e)),r(null))},children:y("add")},"add-product"),(0,m.jsx)(N.A,{type:"default",onClick:ie,children:y("cancel")},"cancel-product")],children:(0,m.jsxs)(g.A,{spinning:u,children:[(0,m.jsxs)(o.A,{gutter:24,children:[(0,m.jsx)(t.A,{span:8,children:(0,m.jsx)(w.A,{src:(0,_.A)((0,M.A)(j)||p.img),alt:p.name,height:200,style:{objectFit:"contain"}})}),(0,m.jsx)(t.A,{span:16,children:(0,m.jsxs)(C.A,{title:null===(l=p.translation)||void 0===l?void 0:l.title,children:[(0,m.jsxs)(C.A.Item,{label:y("price"),span:3,children:[(0,m.jsx)("div",{className:null!==j&&void 0!==j&&j.discount?"strike":"",children:(0,z.default)(ne(),null===ee||void 0===ee?void 0:ee.symbol,null===ee||void 0===ee?void 0:ee.position)}),null!==j&&void 0!==j&&j.discount?(0,m.jsx)("div",{className:"ml-2 font-weight-bold",children:(0,z.default)(ne("total_price"),null===ee||void 0===ee?void 0:ee.symbol,null===ee||void 0===ee?void 0:ee.position)}):""]}),(0,m.jsx)(C.A.Item,{label:y("in.stock"),span:3,children:(0,F.A)((null===j||void 0===j?void 0:j.quantity)||0,p.unit)}),(0,m.jsx)(C.A.Item,{label:y("tax"),span:3,children:(0,z.default)(null===j||void 0===j?void 0:j.tax,null===ee||void 0===ee?void 0:ee.symbol,null===ee||void 0===ee?void 0:ee.position)})]})})]}),null===U||void 0===U||null===(i=U.extras)||void 0===i?void 0:i.map(((e,l)=>{var i,n,d;return(0,m.jsxs)("div",{className:"extra-group",children:[(0,m.jsxs)("div",{className:"mb-3",children:[null===e||void 0===e||null===(i=e[0])||void 0===i||null===(n=i.group)||void 0===n||null===(d=n.translation)||void 0===d?void 0:d.title,":"]}),(0,m.jsx)(S.A,{className:"extras-select",wrap:!0,children:e.map((e=>{var l;return"color"===(null===e||void 0===e||null===(l=e.group)||void 0===l?void 0:l.type)?(0,m.jsx)("div",{className:"extras-color-wrapper rounded ".concat(P.find((l=>l.extra_value_id===e.extra_value_id))?"selected":""),onClick:()=>le(e),children:(0,m.jsx)("div",{className:"extras-color",style:{backgroundColor:e.value.value}})}):(0,m.jsx)("span",{className:"extras-text rounded ".concat(P.find((l=>l.extra_value_id===e.extra_value_id))?"selected":""),onClick:()=>le(e),children:e.value.value})}))},"extra-group"+l)]})})),(0,m.jsx)(T,{showExtras:U,selectedValues:W,handleChange:e=>{const l=String(e.addon_id);W.includes(l)?Q((e=>e.filter((e=>e!==l)))):Q((e=>[...e,l]))},addonCalculate:function(e,l){K((i=>({...i,stock:{...i.stock,addons:i.stock.addons.map((i=>i.addon_id===e?{...i,product:{...i.product,quantity:l}}:i))}}))),X((i=>i.map((i=>i.addon_id===e?{...i,product:{...i.product,quantity:l}}:i))))}}),(0,m.jsx)(o.A,{gutter:12,className:"mt-3",children:(0,m.jsx)(t.A,{span:24,children:(0,m.jsxs)(S.A,{children:[(0,m.jsx)(N.A,{type:"primary",icon:(0,m.jsx)(I.A,{}),onClick:function(){1!==$&&($<=p.min_qty||J((e=>e-1)))}}),($||1)*((null===p||void 0===p?void 0:p.interval)||1),null===p||void 0===p||null===(d=p.unit)||void 0===d||null===(s=d.translation)||void 0===s?void 0:s.title,(0,m.jsx)(N.A,{type:"primary",icon:(0,m.jsx)(f.A,{}),onClick:function(){$!==(null===p||void 0===p?void 0:p.quantity)&&$!==p.max_qty&&J((e=>e+1))}})]})})})]})},null===p||void 0===p?void 0:p.id)}var V=i(50384),H=i(67366),Y=i(1201);function P(){const e={lg:8,xl:6,xxl:6},{t:l}=(0,h.B)(),[i,s]=(0,n.useState)(null),a=(0,c.wA)(),{products:r,loading:u,meta:p,params:x}=(0,c.d4)((e=>e.product),c.bN),y=(0,c.d4)((e=>(0,H.Xd)(e.cart))),{currency:k}=(0,c.d4)((e=>e.cart),c.bN),{before_order_phone_required:N}=(0,c.d4)((e=>e.globalSettings.settings),c.bN),w={perPage:12,page:1,status:"published",active:1};return(0,m.jsxs)("div",{className:"px-2",children:[u?(0,m.jsx)(g.A,{className:"d-flex justify-content-center my-5"}):(0,m.jsx)(o.A,{gutter:12,className:"mt-4 product-card",children:0===r.length?(0,m.jsx)(t.A,{span:24,children:(0,m.jsx)(Y.A,{id:"nosell"})}):r.map(((i,o)=>{var a;return(0,n.createElement)(t.A,{...e,key:o},(0,m.jsxs)(d.A,{className:"products-col",cover:(0,m.jsx)("img",{alt:i.name,src:(0,_.A)(i.img)}),onClick:()=>(e=>{var i;k?0!==(null===y||void 0===y||null===(i=y.user)||void 0===i?void 0:i.length)?null!==y&&void 0!==y&&y.phone||"1"!==N?Number(null===y||void 0===y?void 0:y.phone)<0?b.oR.warning(l("invalid.phone.number")):y.address||1!==(null===y||void 0===y?void 0:y.delivery_type)?y.delivery_point||0!==(null===y||void 0===y?void 0:y.delivery_type)?null!==y&&void 0!==y&&y.paymentType?y.deliveries?null!==y&&void 0!==y&&y.delivery_date?null!==(null===y||void 0===y?void 0:y.delivery_time)?s(e):b.oR.warning(l("please.select.delivery.time")):b.oR.warning(l("please.select.delivery.date")):b.oR.warning(l("please.select.delivery")):b.oR.warning(l("please.select.payment.type")):b.oR.warning(l("please.select.delivery.point")):b.oR.warning(l("please.select.address")):b.oR.warning(l("please.enter.phone")):b.oR.warning(l("please.select.user")):b.oR.warning(l("please.select.currency"))})(i),children:[(0,m.jsx)(A.A,{title:null===i||void 0===i||null===(a=i.translation)||void 0===a?void 0:a.title}),(0,m.jsx)("div",{className:"preview",children:(0,m.jsx)(f.A,{})}),i.stocks.map((e=>{var l,i;return(0,m.jsxs)("span",{className:e.bonus?"show-bonus":"d-none",children:[(0,m.jsx)(V.ob7,{})," ",null===(l=e.bonus)||void 0===l?void 0:l.value,"+",null===(i=e.bonus)||void 0===i?void 0:i.bonus_quantity]})}))]},i.id))}))}),i&&(0,m.jsx)(O,{extrasModal:i,setExtrasModal:s}),(0,m.jsx)("div",{className:"d-flex justify-content-end my-5",children:(0,m.jsx)(j.A,{total:p.total,current:x.page,pageSize:12,showSizeChanger:!1,onChange:function(e){a((0,v.zv)({...w,page:e}))},active:1})})]})}var L=i(59233),G=i(40577),X=i(99674),W=i(47965),Q=i(94118),U=i(49433),K=i(66209),$=i(41397),J=i(85023),Z=i(55902);function ee(e){let{visible:l,handleCancel:i}=e;const{t:d}=(0,h.B)(),[s]=L.A.useForm(),[a,r]=(0,n.useState)(!1),[u,c]=(0,n.useState)(null);return(0,m.jsx)(k.A,{title:d("add.client"),visible:l,onCancel:i,footer:[(0,m.jsx)(N.A,{type:"primary",onClick:()=>s.submit(),loading:a,children:d("save")},"ok-button"),(0,m.jsx)(N.A,{onClick:i,children:d("cancel")},"cancel-button")],children:(0,m.jsx)(L.A,{layout:"vertical",name:"user-add-form",form:s,onFinish:e=>{const l={...e,role:"user"};r(!0),K.A.create(l).then((()=>{b.oR.success(d("successfully.added")),i()})).catch((e=>c(e.response.data.params))).finally((()=>r(!1)))},children:(0,m.jsxs)(o.A,{gutter:12,children:[(0,m.jsx)(t.A,{span:12,children:(0,m.jsx)(L.A.Item,{label:d("firstname"),name:"firstname",help:null!==u&&void 0!==u&&u.firstname?u.firstname[0]:null,validateStatus:null!==u&&void 0!==u&&u.firstname?"error":"success",rules:[{required:!0,message:d("required")}],children:(0,m.jsx)(Z.A,{})})}),(0,m.jsx)(t.A,{span:12,children:(0,m.jsx)(L.A.Item,{label:d("lastname"),name:"lastname",help:null!==u&&void 0!==u&&u.lastname?u.lastname[0]:null,validateStatus:null!==u&&void 0!==u&&u.lastname?"error":"success",rules:[{required:!0,message:d("required")}],children:(0,m.jsx)(Z.A,{})})}),(0,m.jsx)(t.A,{span:12,children:(0,m.jsx)(L.A.Item,{label:d("phone"),name:"phone",help:null!==u&&void 0!==u&&u.phone?u.phone[0]:null,validateStatus:null!==u&&void 0!==u&&u.phone?"error":"success",rules:[{required:!0,message:d("required")}],children:(0,m.jsx)(G.A,{min:0,className:"w-100"})})}),(0,m.jsx)(t.A,{span:12,children:(0,m.jsx)(L.A.Item,{label:d("email"),name:"email",help:null!==u&&void 0!==u&&u.email?u.email[0]:null,validateStatus:null!==u&&void 0!==u&&u.email?"error":"success",rules:[{required:!0,message:d("required")}],children:(0,m.jsx)(Z.A,{type:"email"})})})]})})})}var le=i(17491),ie=i(86971),ne=i(59051),de=i.n(ne),oe=i(40011),te=i(94392),se=i(774),ae=i(78687),re=i(82206),ue=i(82371);const ce={getAll:e=>ue.A.get("dashboard/seller/user-addresses",{params:e}),create:e=>ue.A.post("dashboard/seller/user-addresses",e)};var ve=i(78498),pe=i(29597);function he(e){var l,i,d;let{uuid:o,handleCancel:t,parentForm:s}=e;const{t:a}=(0,h.B)(),[r]=L.A.useForm(),{defaultLang:u}=(0,c.d4)((e=>e.formLang),c.bN),{currentBag:v}=(0,c.d4)((e=>e.cart),c.bN),{settings:p}=(0,c.d4)((e=>e.globalSettings),c.bN),x=s.getFieldsValue(),[y,g]=(0,n.useState)(null!==(l=x.location)&&void 0!==l&&l.latitude?{lat:null===(i=x.location)||void 0===i?void 0:i.latitude,lng:null===(d=x.location)||void 0===d?void 0:d.longitude}:(0,pe.A)(p));return(0,n.useEffect)((()=>{r.setFieldsValue({address:x.address.address||null})}),[v]),(0,m.jsx)(k.A,{visible:!!o,title:a("create.address"),onCancel:t,footer:[(0,m.jsx)(N.A,{type:"primary",onClick:()=>r.submit(),children:a("save")},"saveBtn"),(0,m.jsx)(N.A,{type:"default",onClick:t,children:a("cancel")},"cancelBtn")],children:(0,m.jsxs)(L.A,{layout:"vertical",name:"user-address",form:r,onFinish:e=>{const l={address:{address:e.address},location:{latitude:y.lat,longitude:y.lng}};s.setFieldsValue(l),t()},initialValues:{["address[".concat(u,"]")]:x.address.address},children:[(0,m.jsx)(L.A.Item,{name:"address",label:a("address"),rules:[{required:!0,message:a("required")}],children:(0,m.jsx)(Z.A,{})}),(0,m.jsx)(L.A.Item,{label:a("map"),children:(0,m.jsx)(ve.A,{location:y,setLocation:g,setAddress:e=>r.setFieldsValue({address:e})})})]})})}function me(e){let{visible:l,handleCancel:i}=e;const{t:d}=(0,h.B)(),[a]=L.A.useForm(),[r,u]=(0,n.useState)(!1),[v,p]=(0,n.useState)(null),[x,y]=(0,n.useState)(null),g=(0,c.wA)(),j=(0,c.d4)((e=>(0,H.Xd)(e.cart))),{currentBag:A}=(0,c.d4)((e=>e.cart),c.bN),f=(0,n.useRef)([]);return(0,m.jsxs)(k.A,{title:d("add.delivery.address"),visible:l,onCancel:i,footer:[(0,m.jsx)(N.A,{type:"primary",onClick:()=>a.submit(),loading:r,children:d("save")},"ok-button"),(0,m.jsx)(N.A,{onClick:i,children:d("cancel")},"cancel-button")],children:[(0,m.jsx)(L.A,{layout:"vertical",form:a,onFinish:e=>{var l,n,o,t,s;const a={...e,user_id:null===(l=j.user)||void 0===l?void 0:l.value,country_id:null===(n=e.country)||void 0===n?void 0:n.value,city_id:null===(o=e.city)||void 0===o?void 0:o.value,active:1,phone:null===(t=e.phone)||void 0===t?void 0:t.toString(),street_house_number:null===(s=e.street_house_number)||void 0===s?void 0:s.toString(),city:void 0,country:void 0};u(!0),ce.create(a).then((()=>{b.oR.success(d("successfully.added")),i()})).catch((e=>p(e.response.data.params))).finally((()=>u(!1)))},children:(0,m.jsxs)(o.A,{gutter:24,children:[(0,m.jsx)(t.A,{span:12,children:(0,m.jsx)(L.A.Item,{name:"firstname",label:d("firstname"),rules:[{required:!0,message:d("required")}],children:(0,m.jsx)(Z.A,{})})}),(0,m.jsx)(t.A,{span:12,children:(0,m.jsx)(L.A.Item,{name:"lastname",label:d("lastname"),rules:[{required:!0,message:d("required")}],children:(0,m.jsx)(Z.A,{})})}),(0,m.jsx)(t.A,{span:12,children:(0,m.jsx)(L.A.Item,{name:"title",label:d("title"),rules:[{required:!0,message:d("required")}],children:(0,m.jsx)(Z.A,{})})}),(0,m.jsxs)(t.A,{span:12,children:[(0,m.jsx)(L.A.Item,{name:"country",label:d("country"),rules:[{required:!0,message:d("required")}],children:(0,m.jsx)(s.G,{fetchOptions:e=>{var l;const i={search:e,perPage:10,page:1,has_price:1,region_id:null===j||void 0===j||null===(l=j.region)||void 0===l?void 0:l.value};return ae.A.get(i).then((e=>{let{data:l}=e;const i=null===l||void 0===l?void 0:l.flatMap((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id,region_id:null===e||void 0===e?void 0:e.region_id}}));return f.current=i,i}))},placeholder:d("select.country"),onChange:e=>{const l=f.current.find((l=>l.value===e.value));a.setFieldsValue({region_id:null===l||void 0===l?void 0:l.region_id}),g((0,D.Td)({country:e,region_id:null===l||void 0===l?void 0:l.region_id,bag_id:A}))},refetchOptions:!0,onClear:()=>{a.setFieldsValue({city:[]}),g((0,D.Td)({country:null,city:null,bag_id:A}))},autoComplete:"none"})}),(0,m.jsx)(L.A.Item,{name:"region_id",hidden:!0})]}),(0,m.jsx)(t.A,{span:12,children:(0,m.jsx)(L.A.Item,{name:"city",label:d("city"),rules:[{required:!0,message:d("required")}],children:(0,m.jsx)(s.G,{fetchOptions:e=>{var l;const i={search:e,perPage:10,page:1,country_id:null===j||void 0===j||null===(l=j.country)||void 0===l?void 0:l.value,has_price:1};return re.A.get(i).then((e=>{let{data:l}=e;return null===l||void 0===l?void 0:l.flatMap((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},placeholder:d("select.city"),refetchOptions:!0,disabled:!(null!==j&&void 0!==j&&j.country),onChange:e=>g((0,D.Td)({city:e,bag_id:A})),autoComplete:"none"})})}),(0,m.jsx)(t.A,{span:12,children:(0,m.jsx)(L.A.Item,{label:d("phone.number"),name:"phone",rules:[{validator:(e,l)=>l<0?Promise.reject(new Error(d("must.be.positive"))):Promise.resolve()}],children:(0,m.jsx)(G.A,{className:"w-100",addonBefore:"+",parser:e=>parseInt(e,10)})})}),(0,m.jsx)(t.A,{span:12,children:(0,m.jsx)(L.A.Item,{name:"street_house_number",label:d("home.number"),rules:[{required:!0,message:d("required")},{type:"number",max:99999999,message:d("max.length.8")}],children:(0,m.jsx)(G.A,{placeholder:d("home.number"),className:"w-100",min:0,onChange:e=>g((0,D.Td)({street_house_number:e,bag_id:A}))})})}),(0,m.jsx)(t.A,{span:12,children:(0,m.jsx)(L.A.Item,{name:"zipcode",label:d("zip.code"),rules:[{required:!0,message:d("required")}],children:(0,m.jsx)(Z.A,{placeholder:d("zip.code"),className:"w-100",onChange:e=>g((0,D.Td)({zip_code:e.target.value,bag_id:A})),maxLength:15})})}),(0,m.jsxs)(t.A,{span:24,children:[(0,m.jsx)(L.A.Item,{name:["address","address"],label:d("address"),rules:[{required:!0,message:""}],onClick:()=>{j.userUuid?y(j.userUuid):b.oR.warning(d("please.select.client"))},children:(0,m.jsx)(Z.A,{autoComplete:"off",placeholder:d("address")})}),(0,m.jsx)(L.A.Item,{name:["location","latitude"],hidden:!0}),(0,m.jsx)(L.A.Item,{name:["location","longitude"],hidden:!0})]}),(0,m.jsx)(t.A,{span:24,children:(0,m.jsx)(L.A.Item,{name:"additional_details",label:d("details"),children:(0,m.jsx)(Z.A,{})})})]})}),x&&(0,m.jsx)(he,{uuid:x,handleCancel:()=>y(null),parentForm:a})]})}var xe=i(51066);const ye=()=>{var e,l,i,a,r;const{t:v}=(0,h.B)(),p=(0,c.wA)(),x=(0,c.d4)((e=>(0,H.Xd)(e.cart))),{myShop:y}=(0,c.d4)((e=>e.myShop),c.bN),{currentBag:g}=(0,c.d4)((e=>e.cart),c.bN),j=(0,c.d4)((e=>{var l,i;return null===(l=e.globalSettings)||void 0===l||null===(i=l.settings)||void 0===i?void 0:i.using_12_hour_format}),c.bN),A=(0,c.d4)((e=>(0,H.Xd)(e.cart))),[f,_]=(0,n.useState)(null),k=null===y||void 0===y||null===(e=y.shop_closed_date)||void 0===e?void 0:e.map((e=>e.day)),w=(0,n.useRef)([]),C=(0,xe.Q)();const S=[{label:v("delivery"),value:"delivery",key:1},{label:v("pickup"),value:"point",key:0}];return(0,u.A)((()=>{var e,l;if(null!==A&&void 0!==A&&null!==(e=A.deliveryAddress)&&void 0!==e&&e.country_id&&null!==A&&void 0!==A&&null!==(l=A.deliveryAddress)&&void 0!==l&&l.city_id){var i,n;const e={country_id:null===A||void 0===A||null===(i=A.deliveryAddress)||void 0===i?void 0:i.country_id,city_id:null===A||void 0===A||null===(n=A.deliveryAddress)||void 0===n?void 0:n.city_id};te.A.get(e).then((e=>{var l;let{data:i}=e;p((0,D.Td)({delivery_price_id:null===i||void 0===i||null===(l=i[0])||void 0===l?void 0:l.id,bag_id:g}))}))}}),[null===A||void 0===A||null===(l=A.deliveryAddress)||void 0===l?void 0:l.country_id,null===A||void 0===A||null===(i=A.deliveryAddress)||void 0===i?void 0:i.city_id]),(0,m.jsxs)(d.A,{title:v("shipping.info"),className:"p-0",children:[(0,m.jsxs)(o.A,{gutter:12,children:[(0,m.jsx)(t.A,{span:24,children:(0,m.jsx)(L.A.Item,{name:"delivery",label:v("delivery"),rules:[{required:!0,message:v("required")}],children:(0,m.jsx)(X.A,{placeholder:v("delivery.type"),options:S,labelInValue:!0,onSelect:e=>p((0,D.Td)({delivery_type:e.value,bag_id:g})),onChange:e=>p((0,D.Td)({deliveries:e,bag_id:g}))})})}),1===(null===A||void 0===A||null===(a=A.deliveries)||void 0===a?void 0:a.key)&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(t.A,{span:21,children:(0,m.jsx)(L.A.Item,{name:"address",label:v("address"),rules:[{required:!0,message:v("required")}],children:(0,m.jsx)(s.G,{fetchOptions:e=>{const l={search:e,perPage:10,page:1};return se.A.getAll(l).then((e=>{let{data:l}=e;return w.current=l,null===l||void 0===l?void 0:l.map((e=>{var l;return{label:(null===e||void 0===e?void 0:e.title)||(null===(l=e.location)||void 0===l?void 0:l.address),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},placeholder:v("select.address"),allowClear:!1,onChange:e=>{var l;if(void 0===e)return p((0,D.Td)({bag_id:g,address:"",deliveryAddress:null}));const i=w.current.find((l=>l.id===e.value));p((0,D.Td)({bag_id:g,address:e,phone:i.phone,deliveryAddress:{address:null===(l=i.location)||void 0===l?void 0:l.address,country_id:null===i||void 0===i?void 0:i.country_id,city_id:null===i||void 0===i?void 0:i.city_id,street_house_number:null===i||void 0===i?void 0:i.street_house_number,zip_code:null===i||void 0===i?void 0:i.zipcode,location:null===i||void 0===i?void 0:i.location}}))},autoComplete:"none"})})}),(0,m.jsx)(t.A,{span:3,children:(0,m.jsx)(L.A.Item,{label:" ",children:(0,m.jsx)(N.A,{icon:(0,m.jsx)(q.A,{}),onClick:()=>{x.userUuid?_(x.userUuid):b.oR.warning(v("please.select.client"))}})})})]}),0===(null===A||void 0===A||null===(r=A.deliveries)||void 0===r?void 0:r.key)&&(0,m.jsx)(t.A,{span:24,children:(0,m.jsx)(L.A.Item,{name:"delivery_point",label:v("delivery.point"),rules:[{required:!0,message:v("required")}],children:(0,m.jsx)(s.G,{fetchOptions:e=>{const l={search:e,perPage:10,page:1};return oe.A.get(l).then((e=>{let{data:l}=e;return null===l||void 0===l?void 0:l.flatMap((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},placeholder:v("select.delivery.point"),onChange:e=>{p((0,D.Td)({delivery_point:e,bag_id:g}))}})})}),(0,m.jsx)(t.A,{span:24,children:(0,m.jsxs)(o.A,{gutter:12,children:[(0,m.jsx)(t.A,{span:12,children:(0,m.jsx)(L.A.Item,{name:"delivery_date",label:v("delivery.date"),rules:[{required:!0,message:v("required")}],children:(0,m.jsx)(ie.A,{placeholder:v("delivery.date"),className:"w-100",format:"YYYY-MM-DD",disabledDate:function(e){const l=null===k||void 0===k?void 0:k.find((l=>l===de()(e).format("YYYY-MM-DD"))),i=de()().add(-1,"days")>=e;return l||i},allowClear:!1,onChange:e=>{const l=de()(e).format("YYYY-MM-DD");p((0,D.Td)({delivery_date:l,bag_id:g}))}})})}),(0,m.jsx)(t.A,{span:12,children:(0,m.jsx)(L.A.Item,{label:"".concat(v("delivery.time")," (").concat(v("up.to"),")"),name:"delivery_time",rules:[{required:!0,message:v("required")}],children:(0,m.jsx)(ie.A,{disabled:!x.delivery_date,picker:"time",placeholder:v("start.time"),className:"w-100",format:C,use12Hours:"1"===j,showNow:!1,allowClear:!1,disabledTime:()=>({disabledHours:()=>((e,l)=>{const i=parseInt(e),n=parseInt(l),d=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24];for(let o=i;o<=n;o++)delete d[o];return d})(de()(null===A||void 0===A?void 0:A.delivery_date).format("YYYYMMDD")===de()(new Date).format("YYYYMMDD")?de()(new Date).add(1,"hour").format("HH"):0,24),disabledMinutes:()=>[],disabledSeconds:()=>[]}),onChange:e=>{const l=de()(e).format("HH:mm");p((0,D.Td)({delivery_time:l,bag_id:g}))}})})})]})})]}),f&&(0,m.jsx)(me,{visible:f,handleCancel:()=>_(null)})]})};var ge=i(28429);function je(){var e;const{t:l}=(0,h.B)(),[i]=L.A.useForm(),a=(0,c.wA)(),{currencies:r,loading:u}=(0,c.d4)((e=>e.currency),c.bN),{currentBag:v,bags:p,currency:x}=(0,c.d4)((e=>e.cart),c.bN),{before_order_phone_required:y}=(0,c.d4)((e=>e.globalSettings.settings),c.bN),j=(0,ge.zy)(),A=null===j||void 0===j||null===(e=j.state)||void 0===e?void 0:e.delivery_type,_=(0,c.d4)((e=>(0,H.Xd)(e.cart))),[b,k]=(0,n.useState)([]),[w,C]=(0,n.useState)(null),[q,I]=(0,n.useState)(null);return(0,n.useEffect)((()=>{if(x){const e={label:"".concat(null===x||void 0===x?void 0:x.title," (").concat(null===x||void 0===x?void 0:x.symbol,")"),value:null===x||void 0===x?void 0:x.id,key:null===x||void 0===x?void 0:x.id};a((0,D.Td)({formCurrency:e,bag_id:v})),i.setFieldsValue({currency:e})}else{const e=r.find((e=>e.default)),l={label:"".concat(null===e||void 0===e?void 0:e.title," (").concat(null===e||void 0===e?void 0:e.symbol,")"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id};a((0,D.Td)({currentCurrency:e,bag_id:v})),a((0,D.MN)(e)),i.setFieldsValue({currency:l})}}),[]),(0,n.useEffect)((()=>{i.setFieldsValue({user:_.user||null,payment_type:_.paymentType||null,address:_.address?{value:_.address.value,label:_.address.label}:null,delivery:_.deliveries||null,delivery_time:null!==_&&void 0!==_&&_.delivery_time?de()("".concat(null===_||void 0===_?void 0:_.delivery_date," ").concat(null===_||void 0===_?void 0:_.delivery_time)):null,delivery_date:null!==_&&void 0!==_&&_.delivery_date?de()(null===_||void 0===_?void 0:_.delivery_date):null,delivery_point:(null===_||void 0===_?void 0:_.delivery_point)||null,country:(null===_||void 0===_?void 0:_.country)||null,city:(null===_||void 0===_?void 0:_.city)||null,phone:(null===_||void 0===_?void 0:_.phone)||null,home_number:(null===_||void 0===_?void 0:_.street_house_number)||null,zip_code:(null===_||void 0===_?void 0:_.zip_code)||null})}),[v,_]),(0,m.jsxs)("div",{className:"order-tabs",children:[(0,m.jsxs)("div",{className:"tabs-container",children:[(0,m.jsx)("div",{className:"tabs",children:p.map((e=>(0,m.jsx)("div",{className:e===v?"tab active":"tab",onClick:()=>a((0,D.s2)(e)),children:(0,m.jsxs)(S.A,{children:[(0,m.jsx)(W.A,{}),(0,m.jsxs)("span",{children:[l("bag")," - ",e+1]}),e&&e===v?(0,m.jsx)(Q.A,{onClick:l=>((e,l)=>{e.preventDefault(),e.stopPropagation(),a((0,D.vX)(l))})(l,e),className:"close-button",size:12}):""]})},"tab"+e)))}),(0,m.jsx)(N.A,{size:"small",type:"primary",shape:"circle",icon:(0,m.jsx)(f.A,{}),className:"tab-add-button",onClick:()=>a((0,D.e3)())})]}),(0,m.jsxs)(L.A,{layout:"vertical",name:"pos-form",form:i,children:[(0,m.jsxs)(d.A,{className:v?"":"tab-card",children:[u&&(0,m.jsx)("div",{className:"loader",children:(0,m.jsx)(g.A,{})}),(0,m.jsxs)(o.A,{gutter:6,style:{marginBottom:15},children:[(0,m.jsx)(t.A,{span:21,children:(0,m.jsx)(L.A.Item,{name:"user",rules:[{required:!0,message:""}],className:"w-100",children:(0,m.jsx)(s.G,{placeholder:l("select.client"),fetchOptions:async function(e){const l={search:e,perPage:10,my_clients:1};return K.A.getAll(l).then((e=>{let{data:l}=e;return k(l),function(e){if(!e)return;return(0,$.isArray)(e)?e.map((e=>({label:"".concat((null===e||void 0===e?void 0:e.firstname)||""," ").concat((null===e||void 0===e?void 0:e.lastname)||""),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}))):{label:"".concat((null===e||void 0===e?void 0:e.firstname)||""," ").concat((null===e||void 0===e?void 0:e.lastname)||""),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}(l)}))},onSelect:function(e){const l=b.find((l=>l.id===e.value));a((0,D.Td)({user:e,userUuid:l.uuid,bag_id:v,phone:null===l||void 0===l?void 0:l.phone})),I(null===l||void 0===l?void 0:l.phone),i.setFieldsValue({address:null,phone:null===l||void 0===l?void 0:l.phone})},onClear:()=>{i.setFieldsValue({phone:null,user:null})}})})}),(0,m.jsx)(t.A,{span:3,children:(0,m.jsx)(L.A.Item,{children:(0,m.jsx)(N.A,{icon:(0,m.jsx)(U.A,{}),onClick:()=>{C(!0)}})})}),"1"===y&&(0,m.jsx)(t.A,{span:12,children:(0,m.jsx)(L.A.Item,{name:"phone",rules:[{required:!0,message:l("required")},{validator(e,i){if(i<0)return Promise.reject(new Error(l("must.be.positive")))}}],children:(0,m.jsx)(G.A,{className:"w-100",placeholder:l("phone.number"),disabled:q,onChange:e=>a((0,D.Td)({phone:e,bag_id:v}))})})}),(0,m.jsx)(t.A,{span:12,children:(0,m.jsx)(L.A.Item,{name:"currency",rules:[{required:!0,message:l("required")}],children:(0,m.jsx)(X.A,{placeholder:l("select.currency"),onSelect:function(e){const l=r.find((l=>l.id===e.value));a((0,D.MN)(l))},labelInValue:!0,disabled:!0,children:null===r||void 0===r?void 0:r.map(((e,l)=>(0,m.jsx)(X.A.Option,{value:null===e||void 0===e?void 0:e.id,children:"".concat(null===e||void 0===e?void 0:e.title," (").concat(null===e||void 0===e?void 0:e.symbol,")")},l)))})})}),(0,m.jsx)(t.A,{span:12,children:(0,m.jsx)(L.A.Item,{name:"payment_type",rules:[{required:!0,message:l("required")}],children:(0,m.jsx)(J.D,{fetchOptions:async function(){return le.A.getAll().then((e=>{let{data:i}=e;return i.filter((e=>"cash"===e.tag||"wallet"===e.tag)).map((e=>({label:l(null===e||void 0===e?void 0:e.tag)||l("no.name"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id})))}))},className:"w-100",placeholder:l("select.payment.type"),onSelect:e=>{a((0,D.Td)({paymentType:e,bag_id:v}))}})})})]})]}),!A&&(0,m.jsx)(ye,{})]}),w&&(0,m.jsx)(ee,{visible:w,handleCancel:()=>C(!1)})]})}var Ae=i(44070),fe=i(12916),_e=i(40895),be=i(57056),ke=i(53992),Ne=i(52913),we=i(86245),Ce=i(37279),Se=i(44738),qe=i(35973),Ie=i(12970),ze=i(13311);const De=e=>{var l,i,o,t,s,a,r,u,v,p,x,y,g,j,A,f,_,b,w,C,q,I,D,F,M,R,E,T,B,O;let{handleClose:H}=e;const{t:Y}=(0,h.B)(),{cartOrder:P}=(0,c.d4)((e=>e.cart),c.bN),{defaultLang:L}=(0,c.d4)((e=>e.formLang),c.bN),{isDemo:G}=(0,ze.A)(),X=(0,xe.Q)(),[W,Q]=(0,n.useState)(),[U,K]=(0,n.useState)();return(0,n.useEffect)((()=>{if(P){var e;const l=null===P||void 0===P||null===(e=P.filter((e=>!(null!==e&&void 0!==e&&e.parent_id))))||void 0===e?void 0:e[0];K(null===P||void 0===P?void 0:P.map((e=>null===e||void 0===e?void 0:e.details)).flat()),Q(l)}}),[P]),(0,m.jsx)(k.A,{visible:!!P,title:Y("order.created.successfully"),onOk:H,onCancel:H,footer:[(0,m.jsx)(N.A,{onClick:H,children:Y("back")}),(0,m.jsxs)(N.A,{type:"primary",onClick:()=>window.print(),children:[(0,m.jsx)(Ce.A,{type:"printer"}),(0,m.jsx)("span",{className:"ml-1",children:Y("print")})]})],width:1e3,children:(0,m.jsx)("div",{className:"py-4 order-preview",children:(0,m.jsxs)(d.A,{children:[(0,m.jsxs)("div",{className:"d-flex justify-content-between mt-3",children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)("h2",{className:"mb-1 font-weight-semibold",children:[Y("invoice")," #",null===W||void 0===W?void 0:W.id]}),(0,m.jsx)("p",{children:de()(null===W||void 0===W?void 0:W.created_at).format("YYYY-MM-DD ".concat(X))}),(0,m.jsx)("address",{children:(0,m.jsxs)("p",{children:[(0,m.jsxs)("span",{children:[Y("delivery.type"),": ",null===W||void 0===W?void 0:W.delivery_type]}),(0,m.jsx)("br",{}),(0,m.jsxs)("span",{className:"d-flex",style:{gap:"4px"},children:[Y("otp"),":",(0,m.jsx)("div",{className:"d-flex",style:{flexWrap:"wrap",gap:"10px"},children:null===P||void 0===P||null===(l=P.map((e=>{var l;return null!==(l=null===e||void 0===e?void 0:e.otp)&&void 0!==l?l:Y("N/A")})))||void 0===l?void 0:l.join(", ")})]}),(0,m.jsx)("br",{}),"point"===(null===W||void 0===W?void 0:W.delivery_type)&&(null===W||void 0===W||null===(i=W.delivery_point)||void 0===i?void 0:i.address)&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("span",{children:[Y("point"),":"," ",null===W||void 0===W||null===(o=W.delivery_point)||void 0===o||null===(t=o.address)||void 0===t?void 0:t[L]]}),(0,m.jsx)("br",{})]})," ","delivery"===(null===W||void 0===W?void 0:W.delivery_type)&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("span",{children:[Y("delivery.address"),": ",null===W||void 0===W||null===(s=W.address)||void 0===s?void 0:s.address]}),(0,m.jsx)("br",{})]}),(0,m.jsxs)("span",{children:[Y("delivery.date"),": ",null===W||void 0===W?void 0:W.delivery_date," ",null===W||void 0===W||null===(a=W.details[0])||void 0===a?void 0:a.delivery_time]}),(0,m.jsx)("br",{}),(0,m.jsxs)("span",{children:[Y("note"),": ",null!==(r=null===W||void 0===W?void 0:W.note)&&void 0!==r?r:"--"]})]})})]}),(0,m.jsx)("address",{children:(0,m.jsxs)("p",{children:[(0,m.jsxs)("span",{className:"font-weight-semibold text-dark font-size-md",children:[null===W||void 0===W||null===(u=W.user)||void 0===u?void 0:u.firstname," ",(null===W||void 0===W||null===(v=W.user)||void 0===v?void 0:v.lastname)||""]}),(0,m.jsx)("br",{}),(0,m.jsxs)("span",{children:[Y("phone"),":"," ",null!==W&&void 0!==W&&null!==(p=W.user)&&void 0!==p&&p.phone?G?(0,qe.A)(null===W||void 0===W||null===(x=W.user)||void 0===x?void 0:x.phone):null===W||void 0===W||null===(y=W.user)||void 0===y?void 0:y.phone:Y("no.phone")]}),(0,m.jsx)("br",{}),(0,m.jsxs)("span",{children:[Y("email"),":"," ",null!==W&&void 0!==W&&null!==(g=W.user)&&void 0!==g&&g.email?G?(0,Ie.A)(null===W||void 0===W||null===(j=W.user)||void 0===j?void 0:j.email):null===W||void 0===W||null===(A=W.user)||void 0===A?void 0:A.email:Y("no.email")]})]})})]}),(0,m.jsxs)("div",{className:"mt-4",children:[(0,m.jsxs)(Ne.A,{scroll:{x:!0},dataSource:U,pagination:!1,className:"mb-5",children:[(0,m.jsx)(we.A,{title:"No.",dataIndex:"id"},"id"),(0,m.jsx)(we.A,{title:Y("product"),dataIndex:"stock",render:(e,l)=>{var i,n,d;return(0,m.jsxs)(S.A,{wrap:!0,children:[(null===l||void 0===l?void 0:l.bonus)&&(0,m.jsx)("span",{children:(0,m.jsx)(V.ob7,{})}),(0,m.jsx)("span",{children:null===e||void 0===e||null===(i=e.product)||void 0===i||null===(n=i.translation)||void 0===n?void 0:n.title}),null===e||void 0===e||null===(d=e.extras)||void 0===d?void 0:d.map((e=>{var l,i,n,d,o,t,s;return"color"===(null===(l=e.group)||void 0===l?void 0:l.type)?(0,m.jsxs)(fe.A,{children:[null===(i=e.group)||void 0===i||null===(n=i.translation)||void 0===n?void 0:n.title,":"," ",(0,Se.n)(null===(d=e.value)||void 0===d?void 0:d.value)]},null===e||void 0===e?void 0:e.id):(0,m.jsxs)(fe.A,{children:[null===(o=e.group)||void 0===o||null===(t=o.translation)||void 0===t?void 0:t.title,":"," ",null===(s=e.value)||void 0===s?void 0:s.value]},null===e||void 0===e?void 0:e.id)}))]})}},"product"),(0,m.jsx)(we.A,{title:Y("quantity"),dataIndex:"numberQuantity",render:(e,l)=>{var i,n,d,o,t,s;return(0,m.jsxs)("span",{children:[l.quantity*((null===(i=l.stock)||void 0===i||null===(n=i.product)||void 0===n?void 0:n.interval)||1),null===l||void 0===l||null===(d=l.stock)||void 0===d||null===(o=d.product)||void 0===o||null===(t=o.unit)||void 0===t||null===(s=t.translation)||void 0===s?void 0:s.title]})}},"numberQuantity"),(0,m.jsx)(we.A,{title:Y("discount"),dataIndex:"discount",render:(e,l)=>{var i,n,d;return(0,z.default)((null===l||void 0===l||null===(i=l.stock)||void 0===i?void 0:i.discount)||0,null===W||void 0===W||null===(n=W.currency)||void 0===n?void 0:n.symbol,null===W||void 0===W||null===(d=W.currency)||void 0===d?void 0:d.position)}},"discount"),(0,m.jsx)(we.A,{title:Y("price"),dataIndex:"total_price",render:e=>{var l,i;return(0,z.default)(e,null===W||void 0===W||null===(l=W.currency)||void 0===l?void 0:l.symbol,null===W||void 0===W||null===(i=W.currency)||void 0===i?void 0:i.position)}},"total_price")]}),(0,m.jsx)("div",{className:"d-flex justify-content-end",children:(0,m.jsxs)("div",{className:"text-right ",children:[(0,m.jsxs)("div",{className:"border-bottom",children:[(0,m.jsxs)("p",{className:"mb-2",children:[(0,m.jsxs)("span",{children:[Y("products"),": "]}),(0,z.default)(null===W||void 0===W?void 0:W.details.reduce(((e,l)=>e+((null===l||void 0===l?void 0:l.total_price)||0)),0),null===W||void 0===W||null===(f=W.currency)||void 0===f?void 0:f.symbol,null===W||void 0===W||null===(_=W.currency)||void 0===_?void 0:_.position)]}),(0,m.jsxs)("p",{children:[Y("delivery.fee")," :"," ",(0,z.default)(null===W||void 0===W?void 0:W.delivery_fee,null===W||void 0===W||null===(b=W.currency)||void 0===b?void 0:b.symbol,null===W||void 0===W||null===(w=W.currency)||void 0===w?void 0:w.position)]}),(0,m.jsxs)("p",{children:[Y("service.fee")," :"," ",(0,z.default)(null===W||void 0===W?void 0:W.service_fee,null===W||void 0===W||null===(C=W.currency)||void 0===C?void 0:C.symbol,null===W||void 0===W||null===(q=W.currency)||void 0===q?void 0:q.position)]}),(0,m.jsxs)("p",{children:[Y("tax")," :"," ",(0,z.default)((null===W||void 0===W?void 0:W.total_tax)||0,null===W||void 0===W||null===(I=W.currency)||void 0===I?void 0:I.symbol,null===W||void 0===W||null===(D=W.currency)||void 0===D?void 0:D.position)]}),(0,m.jsxs)("p",{children:[Y("discount")," : -",(0,z.default)(null===W||void 0===W?void 0:W.total_discount,null===W||void 0===W||null===(F=W.currency)||void 0===F?void 0:F.symbol,null===W||void 0===W||null===(M=W.currency)||void 0===M?void 0:M.position)]}),(0,m.jsxs)("p",{children:[Y("coupon")," : -",(0,z.default)(null===W||void 0===W||null===(R=W.coupon)||void 0===R?void 0:R.price,null===W||void 0===W||null===(E=W.currency)||void 0===E?void 0:E.symbol,null===W||void 0===W||null===(T=W.currency)||void 0===T?void 0:T.position)]})]}),(0,m.jsxs)("h2",{className:"font-weight-semibold mt-3",children:[(0,m.jsxs)("span",{className:"mr-1",children:[Y("grand.total"),": "]}),(0,z.default)(null===W||void 0===W?void 0:W.total_price,null===W||void 0===W||null===(B=W.currency)||void 0===B?void 0:B.symbol,null===W||void 0===W||null===(O=W.currency)||void 0===O?void 0:O.position)]})]})})]})]})})})};var Fe=i(21215),Me=i.n(Fe);function Re(){var e;const{t:l}=(0,h.B)(),i=(0,c.wA)(),{cartItems:s,cartShops:a,currentBag:r,total:p,coupons:x,currency:y}=(0,c.d4)((e=>e.cart),c.bN),{myShop:j}=(0,c.d4)((e=>e.myShop),c.bN),A=(0,c.d4)((e=>(0,H.je)(e.cart))),k=(0,c.d4)((e=>(0,H.Xd)(e.cart)),c.bN),[C,q]=(0,n.useState)(!1),[F,M]=(0,n.useState)(null),[R,E]=(0,n.useState)(!1),[T]=L.A.useForm(),{myShop:B}=(0,c.d4)((e=>e.myShop),c.bN),O=(0,ge.zy)(),P=null===O||void 0===O||null===(e=O.state)||void 0===e?void 0:e.delivery_type;function G(){const e=function(e){var l,i,n;const d=e.map((e=>{var l,i;return{quantity:e.quantity,stock_id:e.stockID?null===(l=e.stockID)||void 0===l?void 0:l.id:null===(i=e.stock)||void 0===i?void 0:i.id}})),o={};null===x||void 0===x||null===(l=x.filter((e=>null===e||void 0===e?void 0:e.verified)))||void 0===l||l.forEach((e=>o["".concat(null===e||void 0===e?void 0:e.shop_id)]=null===e||void 0===e?void 0:e.name));const t={products:d,currency_id:null===y||void 0===y?void 0:y.id,coupon:o,shop_id:B.id,delivery_type:null===k||void 0===k||null===(i=k.deliveries)||void 0===i?void 0:i.value,delivery_point_id:"point"===(null===k||void 0===k?void 0:k.delivery_type)?null===k||void 0===k||null===(n=k.delivery_point)||void 0===n?void 0:n.value:void 0,delivery_price_id:"delivery"===(null===k||void 0===k?void 0:k.delivery_type)?null===k||void 0===k?void 0:k.delivery_price_id:void 0};return Me().stringify(t,{addQueryPrefix:!0})}(A);q(!0),be.A.calculate(e).then((e=>{var l,n,d,o,t;let{data:s}=e;const a=null===s||void 0===s||null===(l=s.shops)||void 0===l||null===(n=l.flatMap((e=>e.stocks)))||void 0===n?void 0:n.map((e=>({...A.find((l=>l.id===e.id)),...e,...e.stock.countable,stock:e.stock.stock_extras,stocks:e.stock.stock_extras,stockID:e.stock})));i((0,D.Q4)(a));const r={product_total:null===s||void 0===s?void 0:s.price,tax:null===s||void 0===s?void 0:s.total_tax,shop_tax:null===s||void 0===s?void 0:s.total_shop_tax,order_total:null===s||void 0===s?void 0:s.total_price,delivery_fee:null===s||void 0===s||null===(d=s.delivery_fee)||void 0===d?void 0:d.reduce(((e,l)=>{var i;return e+(null!==(i=null===l||void 0===l?void 0:l.price)&&void 0!==i?i:0)}),0),service_fee:null===s||void 0===s?void 0:s.service_fee,coupon:null!==(o=null===s||void 0===s||null===(t=s.coupon)||void 0===t?void 0:t.reduce(((e,l)=>e+(null===l||void 0===l?void 0:l.price)),0))&&void 0!==o?o:0,discount:null===s||void 0===s?void 0:s.total_discount};i((0,D.bH)(r))})).finally((()=>q(!1)))}(0,u.A)((()=>{i((0,v.EN)({perPage:12,currency_id:null===y||void 0===y?void 0:y.id,status:"published",active:1})),A.length&&G()}),[y]),(0,u.A)((()=>{A.length?G():i((0,D.t6)())}),[s,r,null===k||void 0===k?void 0:k.delivery_price_id,y,null===k||void 0===k?void 0:k.coupon,R]);const X=null===x||void 0===x?void 0:x.find((e=>(null===e||void 0===e?void 0:e.shop_id)===(null===j||void 0===j?void 0:j.id))),W=e=>{var n,d,s,a,r,u,c,v,p,h,x,g,j,A,b,k,C,q,F,M,R,E;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(o.A,{style:{position:"relative"},children:[(null===e||void 0===e?void 0:e.bonus)&&(0,m.jsx)("div",{style:{position:"absolute",top:"-3px",right:0,backgroundColor:"#283142",width:"25px",height:"25px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"5px",zIndex:100},children:(0,m.jsx)(V.ob7,{color:"#fff"})}),(0,m.jsx)(t.A,{span:8,children:(0,m.jsx)(w.A,{width:100,height:"auto",src:(0,_.A)(null===e||void 0===e||null===(n=e.stockID)||void 0===n||null===(d=n.product)||void 0===d?void 0:d.img),preview:!0,placeholder:!0,className:"rounded"})}),(0,m.jsx)(t.A,{span:16,children:(0,m.jsxs)("div",{className:"w-100",children:[(0,m.jsx)("span",{className:"mb-3",style:{display:"block",maxWidth:"calc(100% - 40px)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:(null===e||void 0===e||null===(s=e.stockID)||void 0===s||null===(a=s.product)||void 0===a||null===(r=a.translation)||void 0===r?void 0:r.title)||""}),(E=null===e||void 0===e?void 0:e.stock,null===e||void 0===e||e.bonus,(0,m.jsx)(S.A,{wrap:!0,style:{display:"flex",flexDirection:"column",alignItems:"flex-start",margin:"12px 0",rowGap:"8px"},children:E.map(((e,i)=>{var n,d,o,t,s,a;return"color"===(null===e||void 0===e||null===(n=e.group)||void 0===n?void 0:n.type)?(0,m.jsxs)(S.A,{children:[l("color"),":",(0,m.jsx)("div",{style:{width:"20px",height:"20px",border:"1px solid #080136",borderRadius:"50%",backgroundColor:null===e||void 0===e||null===(a=e.value)||void 0===a?void 0:a.value}})]}):(0,m.jsxs)(S.A,{children:[(0,m.jsxs)("span",{children:[null===e||void 0===e||null===(d=e.group)||void 0===d||null===(o=d.translation)||void 0===o?void 0:o.title,":"]}),(0,m.jsx)(fe.A,{className:"extras-text rounded pr-2 pl-2",children:null===(s=e.value)||void 0===s?void 0:s.value},i+"-"+(null===(t=e.value)||void 0===t?void 0:t.value))]})}))})),(null===e||void 0===e?void 0:e.bonus)&&(0,m.jsxs)(S.A,{className:"mt-3",children:[(0,m.jsxs)("span",{children:[l("count"),": "]}),(0,m.jsx)("span",{children:"".concat((null===e||void 0===e?void 0:e.quantity)*((null===e||void 0===e||null===(u=e.stockID)||void 0===u||null===(c=u.product)||void 0===c?void 0:c.interval)||1)," \n                              ").concat((null===e||void 0===e||null===(v=e.stockID)||void 0===v||null===(p=v.product)||void 0===p||null===(h=p.unit)||void 0===h||null===(x=h.translation)||void 0===x?void 0:x.title)||"")})]}),!(null!==e&&void 0!==e&&e.bonus)&&(0,m.jsx)(S.A,{className:"mt-3",children:(0,z.default)((null===e||void 0===e?void 0:e.total_price)||(null===e||void 0===e?void 0:e.price),null===y||void 0===y?void 0:y.symbol,null===y||void 0===y?void 0:y.position)})]})}),!(null!==e&&void 0!==e&&e.bonus)&&(0,m.jsxs)(t.A,{span:24,style:{display:"flex",columnGap:"8px",marginTop:"20px",alignItems:"center"},children:[(0,m.jsx)(N.A,{shape:"circle",type:"primary",size:"small",icon:(0,m.jsx)(I.A,{size:14}),onClick:()=>(e=>{1!==e.quantity&&(e.quantity<=e.min_qty||i((0,D.bl)({...e,quantity:1})))})(e),disabled:1===(null===e||void 0===e?void 0:e.quantity)||(null===e||void 0===e||null===(g=e.stockID)||void 0===g||null===(j=g.product)||void 0===j?void 0:j.min_qty)===(null===e||void 0===e?void 0:e.quantity)}),(0,m.jsx)("span",{children:"".concat((null===e||void 0===e?void 0:e.quantity)*((null===e||void 0===e||null===(A=e.stockID)||void 0===A||null===(b=A.product)||void 0===b?void 0:b.interval)||1)," \n                              ").concat((null===e||void 0===e||null===(k=e.stockID)||void 0===k||null===(C=k.product)||void 0===C||null===(q=C.unit)||void 0===q||null===(F=q.translation)||void 0===F?void 0:F.title)||"")}),(0,m.jsx)(N.A,{shape:"circle",type:"primary",size:"small",icon:(0,m.jsx)(f.A,{size:14}),onClick:()=>(e=>{var l;e.quantity!==(null===e||void 0===e||null===(l=e.stock)||void 0===l?void 0:l.quantity)&&e.quantity!==e.max_qty&&i((0,D.bE)({...e,quantity:1}))})(e),disabled:(null===e||void 0===e?void 0:e.quantity)===(null===e||void 0===e||null===(M=e.stock)||void 0===M||null===(R=M.product)||void 0===R?void 0:R.max_qty)}),(0,m.jsx)(N.A,{onClick:()=>{return l=e,i((0,D.dt)(l));var l},icon:(0,m.jsx)(Ae.A,{}),size:"small",style:{marginLeft:"20px"},type:"danger"})]})]}),(0,m.jsx)(_e.A,{})]})};return(0,m.jsxs)(d.A,{children:[C&&(0,m.jsx)("div",{className:"loader",children:(0,m.jsx)(g.A,{})}),(0,m.jsxs)("div",{className:"card-save",children:[a.map((e=>(0,m.jsx)("div",{children:W(e)}))),a.length?(0,m.jsxs)("div",{style:{display:"flex",columnGap:"20px",marginTop:"20px"},children:[(0,m.jsx)(Z.A,{className:"w-100",placeholder:l("enter.coupon"),onChange:e=>i((0,D.Im)({name:e.target.value,shop_id:null===j||void 0===j?void 0:j.id}))}),(0,m.jsx)(N.A,{onClick:()=>function(e){var l,n;const d=null===x||void 0===x?void 0:x.find((l=>l.shop_id===e));if(!d||null===d||void 0===d||null===(l=d.name)||void 0===l||!l.trim())return;const o={coupon:null===d||void 0===d?void 0:d.name,shop_id:null===d||void 0===d?void 0:d.shop_id,user_id:null===k||void 0===k||null===(n=k.user)||void 0===n?void 0:n.value};i((0,D.bO)({shop_id:e,loading:!0})),ke.A.checkCoupon(o).then((e=>{let{data:l}=e;i((0,D.sm)({shop_id:null===l||void 0===l?void 0:l.shop_id,price:null===l||void 0===l?void 0:l.price})),E(!R)})).catch((e=>console.log("error of coupon => ",e))).finally((()=>i((0,D.bO)({shop_id:e,loading:!1}))))}(null===j||void 0===j?void 0:j.id),disabled:null===X||void 0===X?void 0:X.loading,loading:null===X||void 0===X?void 0:X.loading,children:l("check")})]}):(0,m.jsxs)("div",{children:[(0,m.jsx)(Y.A,{id:"nosell"}),(0,m.jsx)("p",{style:{textAlign:"center"},children:l("empty.cart")})]}),(0,m.jsx)(_e.A,{}),(0,m.jsx)(o.A,{className:"all-price-row",children:(0,m.jsxs)(t.A,{span:24,className:"col",children:[(0,m.jsxs)("div",{className:"all-price-container",children:[(0,m.jsx)("span",{children:l("products")}),(0,m.jsx)("span",{children:(0,z.default)(p.product_total,null===y||void 0===y?void 0:y.symbol,null===y||void 0===y?void 0:y.position)})]}),(0,m.jsxs)("div",{className:"all-price-container",children:[(0,m.jsx)("span",{children:l("delivery.fee")}),(0,m.jsx)("span",{children:(0,z.default)(p.delivery_fee,null===y||void 0===y?void 0:y.symbol,null===y||void 0===y?void 0:y.position)})]}),(0,m.jsxs)("div",{className:"all-price-container",children:[(0,m.jsx)("span",{children:l("service.fee")}),(0,m.jsx)("span",{children:(0,z.default)(p.service_fee,null===y||void 0===y?void 0:y.symbol,null===y||void 0===y?void 0:y.position)})]}),(0,m.jsxs)("div",{className:"all-price-container",children:[(0,m.jsx)("span",{children:l("tax")}),(0,m.jsx)("span",{children:(0,z.default)(p.tax,null===y||void 0===y?void 0:y.symbol,null===y||void 0===y?void 0:y.position)})]}),(0,m.jsxs)("div",{className:"all-price-container",children:[(0,m.jsx)("span",{children:l("discount")}),(0,m.jsxs)("span",{children:["-"," ",(0,z.default)(p.discount,null===y||void 0===y?void 0:y.symbol,null===y||void 0===y?void 0:y.position)]})]}),(0,m.jsxs)("div",{className:"all-price-container",children:[(0,m.jsx)("span",{children:l("coupon")}),(0,m.jsxs)("span",{children:["-"," ",(0,z.default)(p.coupon,null===y||void 0===y?void 0:y.symbol,null===y||void 0===y?void 0:y.position)]})]})]})}),(0,m.jsxs)(o.A,{className:"submit-row",children:[(0,m.jsxs)(t.A,{span:14,className:"col",children:[(0,m.jsx)("span",{children:l("total.amount")}),(0,m.jsx)("span",{children:(0,z.default)(p.order_total,null===y||void 0===y?void 0:y.symbol,null===y||void 0===y?void 0:y.position)})]}),(0,m.jsx)(t.A,{className:"col2",children:(0,m.jsx)(N.A,{type:"primary",onClick:()=>(()=>{var e,n,d,o,t,s,r,u,v,h;if(!y&&!P)return void b.oR.warning(l("please.select.currency"));if((null===(e=k.deliveryAddress)||void 0===e||!e.city_id)&&"delivery"===(null===k||void 0===k?void 0:k.delivery_type))return void b.oR.warning(l("delivery.address.is.invalid"));if(!k.delivery_point&&"point"===(null===k||void 0===k?void 0:k.delivery_type))return void b.oR.warning(l("please.select.delivery.point"));if(!k.delivery_time&&!P)return void b.oR.warning(l("shop.closed"));if(!k.delivery_date&&!P)return void b.oR.warning(l("please.select.deliveryDate"));q(!0);const m=null===x||void 0===x?void 0:x.filter((e=>null===e||void 0===e?void 0:e.verified)),g=m.reduce(((e,l)=>(e["".concat(l.shop_id)]=l.name,e)),{}),j=null===a||void 0===a?void 0:a.map((e=>({stock_id:e.stockID.id,quantity:e.quantity,bonus:e.bonus}))),A={user_id:null===(n=k.user)||void 0===n?void 0:n.value,currency_id:null===y||void 0===y?void 0:y.id,rate:y.rate,payment_id:null===(d=k.paymentType)||void 0===d?void 0:d.value,delivery_point_id:"point"===(null===k||void 0===k?void 0:k.delivery_type)?null===k||void 0===k||null===(o=k.delivery_point)||void 0===o?void 0:o.value:void 0,delivery_date:"".concat(k.delivery_date," ").concat(de()(k.delivery_time,"HH:mm").format("HH:mm")),delivery_type:k.deliveries.value,coupon:g,data:[{shop_id:null===B||void 0===B?void 0:B.id,products:j}],tax:p.order_tax,delivery_price_id:"delivery"===(null===k||void 0===k?void 0:k.delivery_type)?null===k||void 0===k?void 0:k.delivery_price_id:void 0,address:"delivery"===(null===k||void 0===k?void 0:k.delivery_type)?null===k||void 0===k?void 0:k.deliveryAddress:void 0,location:"delivery"===(null===k||void 0===k?void 0:k.delivery_type)?{latitude:null===k||void 0===k||null===(t=k.deliveryAddress)||void 0===t||null===(s=t.location)||void 0===s?void 0:s.latitude,longitude:null===k||void 0===k||null===(r=k.deliveryAddress)||void 0===r||null===(u=r.location)||void 0===u?void 0:u.longitude}:void 0,products:j,phone:null===k||void 0===k||null===(v=k.phone)||void 0===v?void 0:v.toString()},f={currency_id:null===y||void 0===y?void 0:y.id,delivery_type:P,payment_type:null===(h=k.paymentType)||void 0===h?void 0:h.label,products:j,shop_id:B.id,coupon:g},_=P?f:A;be.A.create(_).then((e=>{(0,c.vA)((()=>{i((0,D.fW)(null===e||void 0===e?void 0:e.data)),i((0,D.sX)())})),M(!0),T.resetFields()})).catch((e=>console.error(e))).finally((()=>q(!1)))})(),disabled:!a.length,children:l("place.order")})})]})]}),F?(0,m.jsx)(De,{handleClose:()=>{M(null),i((0,D.sX)()),i((0,D.MW)()),i((0,D.c7)()),0!==r&&i((0,D.vX)(r)),b.oR.success(l("successfully.closed"))}}):""]})}function Ee(){return(0,m.jsx)("div",{className:"pos-system",children:(0,m.jsx)(y.A,{className:"site-layout",children:(0,m.jsxs)(o.A,{gutter:24,children:[(0,m.jsxs)(t.A,{span:15,children:[(0,m.jsx)(x,{}),(0,m.jsx)(P,{})]}),(0,m.jsxs)(t.A,{span:9,children:[(0,m.jsx)(je,{}),(0,m.jsx)(Re,{})]})]})})})}},91348:(e,l,i)=>{i.d(l,{A:()=>a});var n=i(89379),d=i(9950);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"};var t=i(25085),s=function(e,l){return d.createElement(t.A,(0,n.A)((0,n.A)({},e),{},{ref:l,icon:o}))};const a=d.forwardRef(s)},53387:(e,l,i)=>{i.d(l,{A:()=>a});var n=i(89379),d=i(9950);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};var t=i(25085),s=function(e,l){return d.createElement(t.A,(0,n.A)((0,n.A)({},e),{},{ref:l,icon:o}))};const a=d.forwardRef(s)},37279:(e,l,i)=>{i.d(l,{A:()=>a});var n=i(89379),d=i(9950);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M820 436h-40c-4.4 0-8 3.6-8 8v40c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-40c0-4.4-3.6-8-8-8zm32-104H732V120c0-4.4-3.6-8-8-8H300c-4.4 0-8 3.6-8 8v212H172c-44.2 0-80 35.8-80 80v328c0 17.7 14.3 32 32 32h168v132c0 4.4 3.6 8 8 8h424c4.4 0 8-3.6 8-8V772h168c17.7 0 32-14.3 32-32V412c0-44.2-35.8-80-80-80zM360 180h304v152H360V180zm304 664H360V568h304v276zm200-140H732V500H292v204H160V412c0-6.6 5.4-12 12-12h680c6.6 0 12 5.4 12 12v292z"}}]},name:"printer",theme:"outlined"};var t=i(25085),s=function(e,l){return d.createElement(t.A,(0,n.A)((0,n.A)({},e),{},{ref:l,icon:o}))};const a=d.forwardRef(s)},86245:(e,l)=>{l.A=void 0;var i=function(e){return null};l.A=i}}]);