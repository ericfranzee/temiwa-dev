"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[3667],{47992:(e,l,i)=>{i.d(l,{G:()=>d});var t=i(9950),n=i(95491),a=i.n(n),o=i(99674),r=i(90650),s=i(44414);const d=e=>{let{fetchOptions:l,debounceTimeout:i=400,onClear:n,refetchOptions:d=!1,...c}=e;const[u,v]=(0,t.useState)(!1),[m,h]=(0,t.useState)([]),A=(0,t.useMemo)((()=>a()((e=>{h([]),v(!0),l(e).then((e=>{h(e),v(!1)}))}),i)),[l,i]);return(0,s.jsx)(o.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:A,onClear:()=>{A(""),n&&n()},notFoundContent:u?(0,s.jsx)(r.A,{size:"small"}):"no results",...c,options:m,onFocus:()=>{m.length&&!d||A("")}})}},41064:(e,l,i)=>{function t(e,l){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["title"];if(null===l||void 0===l||!l.translations)return{};const{translations:t}=l,n=(e,l)=>{const i=null===t||void 0===t?void 0:t.find((l=>(null===l||void 0===l?void 0:l.locale)===(null===e||void 0===e?void 0:e.locale)));return i||{[l]:""}},a=e.flatMap((e=>i.flatMap((l=>({["".concat(l,"[").concat(null===e||void 0===e?void 0:e.locale,"]")]:n(e,l)[l]})))));return Object.assign({},...a)}i.d(l,{A:()=>t})},31281:(e,l,i)=>{function t(e,l){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const t=e.map((e=>({[e.locale]:""===l["".concat(i,"[").concat(e.locale,"]")]?void 0:l["".concat(i,"[").concat(e.locale,"]")]})));return Object.assign({},...t)}i.d(l,{A:()=>t})},43667:(e,l,i)=>{i.r(l),i.d(l,{default:()=>f});var t=i(59233),n=i(23263),a=i(70030),o=i(9950),r=i(91854),s=i(74623),d=i(62110),c=i(28429),u=i(71999),v=i(41064),m=i(62466),h=i(88986),A=i(33241),p=i(44414);const f=function(){const{t:e}=(0,a.B)(),{id:l}=(0,c.g)(),[i]=t.A.useForm(),f=(0,r.wA)(),{activeMenu:g}=(0,r.d4)((e=>e.menu),r.bN),{languages:x}=(0,r.d4)((e=>e.formLang),r.bN),[b,j]=(0,o.useState)(!0),y=e=>{j(!0),d.A.getById(e).then((e=>{var l,t,n,a,o;let{data:r}=e;const d={...(0,v.A)(x,r,["title"]),active:!!r.active,service:{label:null===r||void 0===r||null===(l=r.service)||void 0===l||null===(t=l.translation)||void 0===t?void 0:t.title,value:null===r||void 0===r||null===(n=r.service)||void 0===n?void 0:n.id,key:null===r||void 0===r||null===(a=r.service)||void 0===a?void 0:a.id},price:(null===r||void 0===r?void 0:r.price)||0,img:null!==r&&void 0!==r&&null!==(o=r.img)&&void 0!==o&&o.length?[(0,m.A)(null===r||void 0===r?void 0:r.img)]:[]};f((0,s.Ok)({activeMenu:g,data:{serviceExtrasForm:d}})),i.setFieldsValue(d)})).finally((()=>j(!1)))};return(0,o.useEffect)((()=>{y(l),f((0,s.km)(g))}),[]),(0,h.A)((()=>{g.refetch&&(y(l),f((0,s.km)(g)))})),(0,p.jsx)(n.A,{title:e("edit.service.extra"),loading:b,extra:(0,p.jsx)(u.A,{}),children:(0,p.jsx)(A.A,{form:i,onSubmit:e=>d.A.update(l,e)})})}},33241:(e,l,i)=>{i.d(l,{A:()=>y});var t=i(59233),n=i(87094),a=i(41988),o=i(40577),r=i(55902),s=i(25933),d=i(48538),c=i(47992),u=i(9950),v=i(54764),m=i(70030),h=i(91854),A=i(28429),p=i(85923),f=i(74623),g=i(43394),x=i(31281),b=i(48970),j=i(44414);const y=function(e){var l,i;let{form:y,onSubmit:k}=e;const{t:S}=(0,m.B)(),F=(0,A.Zp)(),I=(0,h.wA)(),{defaultLang:N,languages:O}=(0,h.d4)((e=>e.formLang),h.bN),{defaultCurrency:w}=(0,h.d4)((e=>e.currency),h.bN),{activeMenu:C}=(0,h.d4)((e=>e.menu),h.bN),{state:M}=(0,A.zy)(),[q,L]=(0,u.useState)(!1),[z,B]=(0,u.useState)((null===(l=C.data)||void 0===l||null===(i=l.serviceExtrasForm)||void 0===i?void 0:i.img)||[]);return(0,j.jsxs)(t.A,{form:y,layout:"vertical",onFinish:e=>{var l;const i={active:e.active?1:0,service_id:e.service.value,title:(0,x.A)(O,e,"title"),price:e.price||0,img:null===z||void 0===z||null===(l=z[0])||void 0===l?void 0:l.url};L(!0),k(i).then((()=>{const e="service-extra";p.oR.success(S("successfully.created")),y.resetFields(),(0,h.vA)((()=>{I((0,f.EK)({...C,nextUrl:e})),I((0,g.Y)(null===M||void 0===M?void 0:M.params))})),F("/".concat(e))})).finally((()=>L(!1)))},initialValues:{active:!0},children:[(0,j.jsxs)(n.A,{gutter:12,children:[(0,j.jsx)(a.A,{span:12,children:(0,j.jsx)(t.A.Item,{label:S("service"),name:"service",rules:[{required:!0,message:"required"}],children:(0,j.jsx)(c.G,{fetchOptions:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const l={search:null!==e&&void 0!==e&&e.length?e:void 0,perPage:10,page:1};return v.A.getAll(l).then((e=>{var l;return null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.map((e=>{var l;return{label:(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||S("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},refetchOptions:!0})})}),(0,j.jsx)(a.A,{span:12,children:(0,j.jsx)(t.A.Item,{label:S("price"),name:"price",rules:[{required:!0}],children:(0,j.jsx)(o.A,{className:"w-100",addonAfter:"after"===(null===w||void 0===w?void 0:w.position)&&(null===w||void 0===w?void 0:w.symbol),addonBefore:"before"===(null===w||void 0===w?void 0:w.position)&&(null===w||void 0===w?void 0:w.symbol)})})}),(0,j.jsx)(a.A,{span:12,children:O.map(((e,l)=>(0,j.jsx)(t.A.Item,{label:S("title"),name:"title[".concat(e.locale,"]"),rules:[{required:e.locale===N,message:S("required")}],hidden:e.locale!==N,children:(0,j.jsx)(r.A,{})},"title"+l)))}),(0,j.jsx)(a.A,{span:6,children:(0,j.jsx)(t.A.Item,{label:S("image"),name:"image",children:(0,j.jsx)(b.A,{type:"service_extras",imageList:z,setImageList:B,form:y,multiple:!1})})}),(0,j.jsx)(a.A,{children:(0,j.jsx)(t.A.Item,{label:S("active"),name:"active",valuePropName:"checked",children:(0,j.jsx)(s.A,{})})})]}),(0,j.jsx)(d.A,{type:"primary",htmlType:"submit",loading:q,children:S("submit")})]})}}}]);