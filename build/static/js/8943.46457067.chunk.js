"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[8943],{68943:(e,a,t)=>{t.r(a),t.d(a,{default:()=>f});var l=t(9950),i=t(28429),s=t(85923),r=t(59233),n=t(23263),d=t(87094),u=t(41988),o=t(55902),m=t(40577),c=t(48538),g=t(91854),h=t(74623),p=t(70030),v=t(71999),A=t(93394),j=t(48970),b=t(44414);const f=()=>{var e,a;const{t:t}=(0,p.B)(),{activeMenu:f}=(0,g.d4)((e=>e.menu),g.bN),{id:x}=(0,i.g)(),y=(0,g.wA)(),{defaultLang:k,languages:w}=(0,g.d4)((e=>e.formLang),g.bN),[E,q]=(0,l.useState)(null!==(e=f.data)&&void 0!==e&&e.image?[null===(a=f.data)||void 0===a?void 0:a.image]:[]),[I]=r.A.useForm(),z=(0,i.Zp)(),[F,L]=(0,l.useState)(!1),[N,P]=(0,l.useState)(!1);(0,l.useEffect)((()=>()=>{const e=I.getFieldsValue(!0);y((0,h.Ok)({activeMenu:f,data:e}))}),[]);return(0,l.useEffect)((()=>{f.refetch&&(e=>{L(!0),A.A.getById(e).then((e=>{let a=e.data;I.setFieldsValue({...a,title:{[k]:a.translation.title},area:Number(a.area)}),q(a.galleries.map((e=>({uid:e.id,name:e.path,url:e.path}))))})).finally((()=>{L(!1),y((0,h.km)(f))}))})(x)}),[f.refetch]),(0,b.jsx)(n.A,{title:t("add.booking.zone"),extra:(0,b.jsx)(v.A,{}),loading:F,children:(0,b.jsxs)(r.A,{name:"basic",layout:"vertical",onFinish:e=>{const a={...e,area:String(e.area),images:null===E||void 0===E?void 0:E.map((e=>e.name))};P(!0);const l="seller/booking/zone";A.A.update(x,a).then((()=>{s.oR.success(t("successfully.created")),z("/".concat(l)),y((0,h.EK)({...f,nextUrl:l}))})).finally((()=>P(!1)))},form:I,initialValues:{active:!0,...f.data},children:[(0,b.jsxs)(d.A,{gutter:12,children:[(0,b.jsx)(u.A,{span:12,children:w.map((e=>(0,b.jsx)(r.A.Item,{label:t("title"),name:["title",e.locale],rules:[{validator:(a,l)=>l||(null===e||void 0===e?void 0:e.locale)!==k?l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(new Error(t("no.empty.space"))):l&&(null===l||void 0===l?void 0:l.trim().length)<2?Promise.reject(new Error(t("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(t("required")))}],hidden:e.locale!==k,children:(0,b.jsx)(o.A,{})},"title"+e.id)))}),(0,b.jsx)(u.A,{span:12,children:(0,b.jsx)(r.A.Item,{label:t("area"),name:"area",rules:[{required:!0,message:t("required")},{type:"number",min:1,message:t("must.be.at.least.1")}],children:(0,b.jsx)(m.A,{className:"w-100"})})}),(0,b.jsx)(u.A,{span:24,children:(0,b.jsx)(r.A.Item,{label:t("image"),name:"images",rules:[{required:0===(null===E||void 0===E?void 0:E.length),message:t("required")}],children:(0,b.jsx)(j.A,{type:"shop-galleries",imageList:E,setImageList:q,form:I,multiple:!0})})})]}),(0,b.jsx)(c.A,{type:"primary",htmlType:"submit",loading:N,children:t("submit")})]})})}}}]);