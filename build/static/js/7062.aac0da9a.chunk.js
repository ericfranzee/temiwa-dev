"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[7062],{85023:(e,t,a)=>{a.d(t,{D:()=>r});var l=a(9950),s=a(99674),n=a(90650),i=a(44414);const r=e=>{let{fetchOptions:t,refetch:a=!1,value:r,...d}=e;const[o,u]=(0,l.useState)(!1),[c,m]=(0,l.useState)([]);"object"===typeof(null===r||void 0===r?void 0:r.label)&&null!==(null===r||void 0===r?void 0:r.label)&&(r.label=r.label.value);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(s.A,{labelInValue:!0,filterOption:!1,notFoundContent:o?(0,i.jsx)(n.A,{size:"small"}):"no results",value:r,...d,options:o?[]:c,onFocus:()=>{c.length&&!a||(u(!0),t().then((e=>{m(e),u(!1)})))},getPopupContainer:e=>e.parentNode})})}},47992:(e,t,a)=>{a.d(t,{G:()=>o});var l=a(9950),s=a(95491),n=a.n(s),i=a(99674),r=a(90650),d=a(44414);const o=e=>{let{fetchOptions:t,debounceTimeout:a=400,onClear:s,refetchOptions:o=!1,...u}=e;const[c,m]=(0,l.useState)(!1),[p,v]=(0,l.useState)([]),h=(0,l.useMemo)((()=>n()((e=>{v([]),m(!0),t(e).then((e=>{v(e),m(!1)}))}),a)),[t,a]);return(0,d.jsx)(i.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:h,onClear:()=>{h(""),s&&s()},notFoundContent:c?(0,d.jsx)(r.A,{size:"small"}):"no results",...u,options:p,onFocus:()=>{p.length&&!o||h("")}})}},67062:(e,t,a)=>{a.r(t),a.d(t,{default:()=>C});var l=a(9950),s=a(59233),n=a(23263),i=a(87094),r=a(40577),d=a(41988),o=a(55902),u=a(99674),c=a(25933),m=a(48538),p=a(90650),v=a(85923),h=a(28429),j=a(71999),g=a(98591),x=a(91854),A=a(74623),y=a(12598),b=a(63620),f=a(70030),k=a(48970),I=(a(85023),a(98890)),w=a(3462),q=a(47992),S=a(44414);const C=()=>{var e,t;const{t:a}=(0,f.B)(),C=(0,h.Zp)(),F=(0,x.wA)(),{activeMenu:_}=(0,x.d4)((e=>e.menu),x.bN),{params:N}=(0,x.d4)((e=>e.requestModels),x.bN),[O,z]=(0,l.useState)(!1),[V,E]=(0,l.useState)(null!==(e=_.data)&&void 0!==e&&e.image?[null===(t=_.data)||void 0===t?void 0:t.image]:[]),{state:L}=(0,h.zy)(),[M]=s.A.useForm(),[P,B]=(0,l.useState)(!1),[G,T]=(0,l.useState)(null),{id:U}=(0,h.g)(),{defaultLang:D,languages:K}=(0,x.d4)((e=>e.formLang),x.bN);(0,l.useEffect)((()=>()=>{const e=M.getFieldsValue(!0);F((0,A.Ok)({activeMenu:_,data:e}))}),[]);return(0,l.useEffect)((()=>{var e;_.refetch&&(e=U,z(!0),I.A.getById(e).then((e=>{var t,a,l,s;let n=e.data;const i={...null===n||void 0===n?void 0:n.data,keywords:null===(t=n.data)||void 0===t?void 0:t.keywords.split(","),parent_id:{label:null===(a=n.parent)||void 0===a||null===(l=a.translation)||void 0===l?void 0:l.title,value:n.data.parent_id,key:n.data.parent_id}};var r;M.setFieldsValue(i),E([(r=null===(s=n.data.images)||void 0===s?void 0:s.at(0),{name:r,url:b.sE+r})])})).finally((()=>{z(!1),F((0,A.km)(_))})))}),[_.refetch]),(0,S.jsx)(n.A,{title:a("edit.request"),extra:(0,S.jsx)(j.A,{}),children:O?(0,S.jsx)("div",{className:"d-flex justify-content-center align-items-center py-5",children:(0,S.jsx)(p.A,{size:"large",className:"mt-5 pt-5"})}):(0,S.jsxs)(s.A,{name:"basic",layout:"vertical",onFinish:e=>{var t;B(!0);const l={id:e.id,type:"category",data:{...e,type:null!==L&&void 0!==L&&L.parentId?"sub_main":"main",active:e.active?1:0,keywords:e.keywords.join(","),parent_id:(null===L||void 0===L?void 0:L.parentId)||(null===(t=e.parent_id)||void 0===t?void 0:t.value),images:null===V||void 0===V?void 0:V.map((e=>e.name))}},s={...N},n="catalog/categories";I.A.requestChangeUpdate(U,l).then((()=>{v.oR.success(a("successfully.updated")),F((0,A.EK)({..._,nextUrl:n})),F((0,w.uj)(s)),C("/".concat(n),{state:{tab:"request"}})})).catch((e=>T(e.response.data.params))).finally((()=>B(!1)))},initialValues:{active:!0,..._.data},form:M,children:[(0,S.jsxs)(i.A,{gutter:12,children:[(0,S.jsx)(s.A.Item,{name:"id",hidden:!0,children:(0,S.jsx)(r.A,{})}),(0,S.jsx)(d.A,{span:12,children:K.map(((e,t)=>(0,S.jsx)(s.A.Item,{label:a("name"),name:["title",e.locale],help:G&&G.title[D]?G.title[D][0]:null,validateStatus:G?"error":"success",rules:[{required:e.locale===D,message:a("required")}],hidden:e.locale!==D,children:(0,S.jsx)(o.A,{})},e.title+t)))}),(0,S.jsx)(d.A,{span:12,children:K.map(((e,t)=>(0,S.jsx)(s.A.Item,{label:a("description"),name:["description",e.locale],rules:[{required:e.locale===D,message:a("required")}],hidden:e.locale!==D,children:(0,S.jsx)(g.A,{rows:4})},e.locale+t)))}),(0,S.jsx)(d.A,{span:12,children:(0,S.jsx)(s.A.Item,{label:a("keywords"),name:"keywords",rules:[{required:!0,message:a("required")}],children:(0,S.jsx)(u.A,{mode:"tags",style:{width:"100%"}})})}),(0,S.jsx)(d.A,{span:12,children:(0,S.jsx)(s.A.Item,{label:a("parent.category"),name:"parent_id",rules:[{required:!0,message:a("required")}],children:(0,S.jsx)(q.G,{fetchOptions:async function(){const e={perPage:100,type:null!==L&&void 0!==L&&L.parentId?"main":"sub_shop",active:1};return y.A.selectPaginate(e).then((e=>e.data.map((e=>{var t;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id,key:e.id}}))))}})})}),(0,S.jsx)(d.A,{span:4,children:(0,S.jsx)(s.A.Item,{label:a("image"),children:(0,S.jsx)(k.A,{type:"categories",imageList:V,setImageList:E,form:M,multiple:!1})})}),(0,S.jsx)(d.A,{span:2,children:(0,S.jsx)(s.A.Item,{label:a("active"),name:"active",valuePropName:"checked",children:(0,S.jsx)(c.A,{})})})]}),(0,S.jsx)(m.A,{type:"primary",htmlType:"submit",loading:P,children:a("submit")})]})})}}}]);