"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[4227],{47992:(e,t,l)=>{l.d(t,{G:()=>d});var n=l(9950),i=l(95491),o=l.n(i),a=l(99674),r=l(90650),s=l(44414);const d=e=>{let{fetchOptions:t,debounceTimeout:l=400,onClear:i,refetchOptions:d=!1,...c}=e;const[u,v]=(0,n.useState)(!1),[m,h]=(0,n.useState)([]),p=(0,n.useMemo)((()=>o()((e=>{h([]),v(!0),t(e).then((e=>{h(e),v(!1)}))}),l)),[t,l]);return(0,s.jsx)(a.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:p,onClear:()=>{p(""),i&&i()},notFoundContent:u?(0,s.jsx)(r.A,{size:"small"}):"no results",...c,options:m,onFocus:()=>{m.length&&!d||p("")}})}},31281:(e,t,l)=>{function n(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const n=e.map((e=>({[e.locale]:""===t["".concat(l,"[").concat(e.locale,"]")]?void 0:t["".concat(l,"[").concat(e.locale,"]")]})));return Object.assign({},...n)}l.d(t,{A:()=>n})},69239:(e,t,l)=>{l.d(t,{A:()=>w});var n=l(59233),i=l(87094),o=l(41988),a=l(55902),r=l(40577),s=l(99674),d=l(25933),c=l(48538),u=l(91854),v=l(70030),m=l(9950),h=l(85923),p=l(74623),A=l(28429),f=l(76206),j=l(31281),x=l(47992),b=l(55660),g=l(44414);const y=["1 day","3 days","7 days","14 days","1 month","2 month","3 month","4 month","5 month","6 month","8 month","18 months","1 year","2 years","5 years"];const w=function(e){let{handleSubmit:t,form:l}=e;const{t:w}=(0,v.B)(),k=(0,u.wA)(),I=(0,A.Zp)(),{defaultLang:O,languages:S}=(0,u.d4)((e=>e.formLang),u.bN),{defaultCurrency:C}=(0,u.d4)((e=>e.currency),u.bN),{activeMenu:q}=(0,u.d4)((e=>e.menu)),[E,N]=(0,m.useState)(!1);function P(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return(t?!e&&(null===t||void 0===t?void 0:t.locale)===O:!e)?Promise.reject(new Error(w("required"))):e&&""===(null===e||void 0===e?void 0:e.trim())?Promise.reject(new Error(w("no.empty.space"))):e&&(null===e||void 0===e?void 0:e.trim().length)<l?Promise.reject(new Error(w("must.be.at.least.".concat(l)))):Promise.resolve()}return(0,g.jsxs)(n.A,{layout:"vertical",form:l,onFinish:e=>{var l;N(!0);const n="gift-cards",i={price:e.price,time:e.time,active:e.active?1:0,shop_id:null===(l=e.shop)||void 0===l?void 0:l.value,title:(0,j.A)(S,e,"title"),description:(0,j.A)(S,e,"description")};t(i).then((()=>{h.oR.success(w("successfully.added")),(0,u.vA)((()=>{k((0,p.EK)({...q,nextUrl:n})),k((0,f.Eb)())})),I("/".concat(n))})).finally((()=>N(!1)))},children:[(0,g.jsxs)(i.A,{gutter:12,children:[(0,g.jsx)(o.A,{span:12,children:S.map((e=>(0,g.jsx)(n.A.Item,{label:w("title"),name:"title[".concat(e.locale,"]"),hidden:e.locale!==O,rules:[{validator:(t,l)=>P(l,e)}],children:(0,g.jsx)(a.A,{})},"title"+e.id)))}),(0,g.jsx)(o.A,{span:12,children:S.map((e=>(0,g.jsx)(n.A.Item,{label:w("description"),name:"description[".concat(e.locale,"]"),hidden:e.locale!==O,rules:[{validator:(t,l)=>P(l,e)}],children:(0,g.jsx)(a.A,{})},"description"+e.id)))}),(0,g.jsx)(o.A,{span:12,children:(0,g.jsx)(n.A.Item,{name:"price",label:w("price"),rules:[{required:!0,message:w("required")}],children:(0,g.jsx)(r.A,{min:0,className:"w-100",addonAfter:"after"===(null===C||void 0===C?void 0:C.position)&&((null===C||void 0===C?void 0:C.symbol)||"$"),addonBefore:"before"===(null===C||void 0===C?void 0:C.position)&&((null===C||void 0===C?void 0:C.symbol)||"$")})})}),(0,g.jsx)(o.A,{span:12,children:(0,g.jsx)(n.A.Item,{name:"time",label:w("time"),rules:[{required:!0}],children:(0,g.jsx)(s.A,{children:y.map((e=>(0,g.jsx)(s.A.Option,{value:e,children:e},e)))})})}),(0,g.jsx)(o.A,{span:12,children:(0,g.jsx)(n.A.Item,{label:w("shop"),name:"shop",rules:[{required:!0,message:w("required")}],children:(0,g.jsx)(x.G,{fetchOptions:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t={search:e,perPage:10,page:1};return""===e.trim()&&delete t.search,b.A.getAll(t).then((e=>{var t;return null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.map((e=>{var t;return{label:null===e||void 0===e||null===(t=e.translation)||void 0===t?void 0:t.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))}})})}),(0,g.jsx)(o.A,{children:(0,g.jsx)(n.A.Item,{name:"active",label:w("active"),valuePropName:"checked",children:(0,g.jsx)(d.A,{})})})]}),(0,g.jsx)(c.A,{type:"primary",htmlType:"submit",loading:E,children:w("submit")})]})}},54227:(e,t,l)=>{l.r(t),l.d(t,{default:()=>h});var n=l(91854),i=l(70030),o=l(59233),a=l(23263),r=l(28429),s=l(9950),d=l(69239),c=l(22961),u=l(74623),v=l(71999),m=l(44414);const h=function(){const e=(0,n.wA)(),{t:t}=(0,i.B)(),[l]=o.A.useForm(),{activeMenu:h}=(0,n.d4)((e=>e.menu),n.bN),{languages:p}=(0,n.d4)((e=>e.formLang),n.bN),{id:A}=(0,r.g)(),[f,j]=(0,s.useState)(!1);function x(e){if(null===e||void 0===e||!e.translations)return{};const{translations:t}=e,l=p.map((e=>{var l,n;return{["title[".concat(e.locale,"]")]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.title,["description[".concat(e.locale,"]")]:null===(n=t.find((t=>t.locale===e.locale)))||void 0===n?void 0:n.description}}));return Object.assign({},...l)}return(0,s.useEffect)((()=>{h.refetch&&((t=>{j(!0),c.A.getById(t).then((t=>{var n,i,o,a,r,s;const d={...x(t.data),time:null===(n=t.data)||void 0===n?void 0:n.time,price:null===(i=t.data)||void 0===i?void 0:i.price,active:!(null===(o=t.data)||void 0===o||!o.active),shop:{value:t.data.shop_id,label:null===(a=t.data)||void 0===a||null===(r=a.shop)||void 0===r||null===(s=r.translation)||void 0===s?void 0:s.title}};l.setFieldsValue(d),e((0,u.Ok)({activeMenu:h,data:d}))})).finally((()=>j(!1)))})(A),e((0,u.km)(h)))}),[h.refetch]),(0,m.jsx)(a.A,{title:t("edit.gift.card"),extra:(0,m.jsx)(v.A,{}),loading:f,children:!f&&(0,m.jsx)(d.A,{form:l,handleSubmit:e=>c.A.update(A,e)})})}}}]);