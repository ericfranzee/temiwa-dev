"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[7626],{7626:(l,e,n)=>{n.r(e),n.d(e,{default:()=>C});var t=n(9950),i=n(91854),a=n(74623),s=n(28429),d=n(70030),o=n(85923),r=n(23263),c=n(91524),u=n(87094),m=n(41988),v=n(99985),h=n(80737),x=n(48538),p=n(90650),j=n(63620),A=n(3462),b=n(98890),y=n(59233),g=n(82706),I=n(55902),f=n(44414);function q(l){let{data:e,handleCancel:n,handleOk:i,visible:a}=l;const{t:s}=(0,d.B)(),[o]=y.A.useForm(),[r,c]=(0,t.useState)(!1);return(0,f.jsx)(g.A,{title:s(e.title),visible:a,onCancel:n,footer:[(0,f.jsx)(x.A,{type:"primary",onClick:()=>o.submit(),loading:r,children:s("save")}),(0,f.jsx)(x.A,{type:"default",onClick:n,children:s("cancel")})],children:(0,f.jsx)(y.A,{layout:"vertical",onFinish:l=>{c(!0);const e={...l,status:"canceled"};i(e)},form:o,children:(0,f.jsx)(y.A.Item,{children:(0,f.jsx)(u.A,{className:"mt-4",children:(0,f.jsx)(m.A,{span:24,children:(0,f.jsx)(y.A.Item,{name:"status_note",label:s("note"),rules:[{validator:(l,e)=>e?e&&""===(null===e||void 0===e?void 0:e.trim())?Promise.reject(new Error(s("no.empty.space"))):e&&(null===e||void 0===e?void 0:e.trim().length)<2?Promise.reject(new Error(s("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(s("required")))}],children:(0,f.jsx)(I.A.TextArea,{maxLength:250,showCount:!0})})})})})})})}const k={type:"product"},C=()=>{var l,e,n,y,g,I,C,w,N,S,E,_,P,z;const B=(0,i.wA)(),F=(0,s.Zp)(),{t:L}=(0,d.B)(),{id:O}=(0,s.g)(),{activeMenu:K}=(0,i.d4)((l=>l.menu)),{defaultLang:M}=(0,i.d4)((l=>l.formLang),i.bN),[R,T]=(0,t.useState)(!1),[U,Z]=(0,t.useState)(!1),[D,G]=(0,t.useState)({}),[H,J]=(0,t.useState)({}),[Q,V]=(0,t.useState)(""),[W,X]=(0,t.useState)(!1);function Y(l){Z(!0);const e="catalog/products";b.A.changeStatus(O,l).then((()=>{F("/".concat(e),{state:{tab:"request"}}),B((0,a.EK)({...K,nextUrl:e})),o.oR.success(L("successfully.changed")),B((0,A.uj)(k))})).finally((()=>{X(!1),Z(!1)}))}(0,t.useEffect)((()=>{var l;l=O,T(!0),b.A.getById(l).then((l=>{var e;G(l.data.data),J(l.data.model),V(null===(e=l.data)||void 0===e?void 0:e.status_note)})).finally((()=>{T(!1),B((0,a.km)(K))}))}),[O]);const $=D,ll=H;return R?(0,f.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,f.jsx)(p.A,{size:"large",className:"py-5"})}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(r.A,{children:[(0,f.jsxs)(c.A,{bordered:!0,title:L("changed.info"),children:[(0,f.jsx)(c.A.Item,{label:"".concat(L("title")," (").concat(M,")"),span:3,children:$["title[".concat(M,"]")]}),(0,f.jsx)(c.A.Item,{label:"".concat(L("description")," (").concat(M,")"),span:3,children:$["description[".concat(M,"]")]}),(0,f.jsx)(c.A.Item,{label:L("shop"),span:1.5,children:null===$||void 0===$||null===(l=$.shop)||void 0===l?void 0:l.translation.title}),(0,f.jsx)(c.A.Item,{label:L("category"),span:1.5,children:null===$||void 0===$||null===(e=$.category)||void 0===e?void 0:e.label}),(0,f.jsx)(c.A.Item,{label:L("brand"),span:1.5,children:null===$||void 0===$||null===(n=$.brand)||void 0===n?void 0:n.label}),(0,f.jsx)(c.A.Item,{label:L("unit"),span:1.5,children:null===$||void 0===$||null===(y=$.unit)||void 0===y?void 0:y.label}),(0,f.jsx)(c.A.Item,{label:L("images"),span:3,children:(0,f.jsx)(u.A,{gutter:12,children:null===$||void 0===$||null===(g=$.images)||void 0===g?void 0:g.map(((l,e)=>(0,f.jsx)(m.A,{children:(0,f.jsx)("img",{width:80,alt:"product",src:l.url})},"image"+e)))})}),(0,f.jsx)(c.A.Item,{label:L("tax"),children:null===$||void 0===$?void 0:$.tax}),(0,f.jsx)(c.A.Item,{label:L("min.quantity"),children:null===$||void 0===$?void 0:$.min_qty}),(0,f.jsx)(c.A.Item,{label:L("max.quantity"),children:null===$||void 0===$?void 0:$.max_qty})]}),null===$||void 0===$||null===(I=$.stocks)||void 0===I?void 0:I.map(((l,e)=>{var n;return l?(0,f.jsxs)(c.A,{bordered:!0,className:"mt-4",children:[(0,f.jsx)(c.A.Item,{label:L("price"),span:2,children:l.price}),(0,f.jsx)(c.A.Item,{label:L("quantity"),span:2,children:l.quantity}),null===l||void 0===l||null===(n=l.ids)||void 0===n?void 0:n.map(((l,e)=>(0,f.jsx)(c.A.Item,{label:null===$||void 0===$?void 0:$.extras[e].label,children:null===l||void 0===l?void 0:l.label},"extra"+e)))]},"desc"+e):""})),(0,f.jsxs)(c.A,{bordered:!0,className:"mt-4",title:L("original.info"),children:[(0,f.jsx)(c.A.Item,{label:"".concat(L("title")," (").concat(M,")"),span:3,column:3,children:null===ll||void 0===ll||null===(C=ll.translation)||void 0===C?void 0:C.title}),(0,f.jsx)(c.A.Item,{label:"".concat(L("description")," (").concat(M,")"),span:3,column:3,children:null===ll||void 0===ll||null===(w=ll.translation)||void 0===w?void 0:w.description}),(0,f.jsx)(c.A.Item,{label:L("shop"),span:1.5,column:1.5,children:null===ll||void 0===ll||null===(N=ll.shop)||void 0===N?void 0:N.translation.title}),(0,f.jsx)(c.A.Item,{label:L("category"),span:1.5,column:1.5,children:null===ll||void 0===ll||null===(S=ll.category)||void 0===S?void 0:S.translation.title}),(0,f.jsx)(c.A.Item,{label:L("brand"),span:1.5,column:1.5,children:null===ll||void 0===ll||null===(E=ll.brand)||void 0===E?void 0:E.title}),(0,f.jsx)(c.A.Item,{label:L("unit"),span:1.5,column:1.5,children:null===ll||void 0===ll||null===(_=ll.unit)||void 0===_?void 0:_.translation.title}),(0,f.jsx)(c.A.Item,{label:L("images"),span:3,column:3,children:(0,f.jsx)(u.A,{gutter:12,children:null===ll||void 0===ll||null===(P=ll.galleries)||void 0===P?void 0:P.map(((l,e)=>(0,f.jsx)(m.A,{children:(0,f.jsx)("img",{width:80,alt:"product",src:j.sE+l.path})},"image"+e)))})}),(0,f.jsx)(c.A.Item,{span:3,column:3,label:L("tax"),children:null===ll||void 0===ll?void 0:ll.tax}),(0,f.jsx)(c.A.Item,{span:3,column:3,label:L("min.quantity"),children:null===ll||void 0===ll?void 0:ll.min_qty}),(0,f.jsx)(c.A.Item,{span:3,column:3,label:L("max.quantity"),children:null===ll||void 0===ll?void 0:ll.max_qty})]}),null===ll||void 0===ll||null===(z=ll.stocks)||void 0===z?void 0:z.map(((l,e)=>{var n;return l?(0,f.jsxs)(c.A,{bordered:!0,className:"mt-4",children:[(0,f.jsx)(c.A.Item,{label:L("price"),span:2,column:2,children:null===l||void 0===l?void 0:l.price}),(0,f.jsx)(c.A.Item,{label:L("quantity"),span:2,column:2,children:null===l||void 0===l?void 0:l.quantity}),null===l||void 0===l||null===(n=l.extras)||void 0===n?void 0:n.map(((l,e)=>{var n,t;return(0,f.jsx)(c.A.Item,{label:null===l||void 0===l||null===(n=l.group)||void 0===n||null===(t=n.translation)||void 0===t?void 0:t.title,span:2,column:2,children:null===l||void 0===l?void 0:l.value},"extra"+e)}))]},"desc"+e):""})),Q&&(0,f.jsx)(v.A,{className:"mt-4",message:L("status.note"),description:Q,type:"error"}),(0,f.jsx)("div",{className:"d-flex justify-content-end mt-4",children:(0,f.jsxs)(h.A,{children:[(0,f.jsx)(x.A,{type:"primary",onClick:()=>{Y({status:"approved"})},children:L("accept")}),(0,f.jsx)(x.A,{type:"primary",danger:!0,onClick:()=>{X(!0)},children:L("decline")})]})})]}),(0,f.jsx)(q,{data:{title:"decline"},visible:W,handleCancel:()=>X(!1),handleOk:Y,laoding:U})]})}}}]);