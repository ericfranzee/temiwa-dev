"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[5459],{75670:(e,t,a)=>{a.d(t,{A:()=>g});var l=a(9950),s=a(59233),n=a(70030),r=a(36455),i=a(19181),c=a.n(i),o=a(63620),d=a(64924),u=a(85923),m=a(44414);function g(e){let{form:t,lang:a,languages:i}=e;const{t:g}=(0,n.B)();function h(e){e.plugins.get("FileRepository").createUploadAdapter=e=>function(e){return{upload:()=>new Promise(((t,a)=>{const l=new FormData;e.file.then((e=>{e.size/1024/1024<2||(u.oR.error(g("min.2.mb")),a()),l.append("image",e),l.append("type","blogs"),d.A.upload(l).then((e=>{let{data:a}=e;t({default:"".concat(o.sE+a.title)})})).catch((e=>{a(e)}))}))}))}}(e)}return(0,m.jsx)(l.Fragment,{children:i.map((e=>(0,m.jsx)(s.A.Item,{label:g("description"),name:"description[".concat(e.locale,"]"),valuePropName:"data",getValueFromEvent:(e,t)=>t.getData(),rules:[{required:e.locale===a,message:g("required")},{validator:(e,t)=>t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(g("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<5?Promise.reject(new Error(g("must.be.at.least.5"))):t&&(null===t||void 0===t?void 0:t.trim().length)>200?Promise.reject(new Error(g("must.be.less.200"))):Promise.resolve()}],hidden:e.locale!==a,children:(0,m.jsx)(r.CKEditor,{editor:c(),config:{extraPlugins:[h]},onBlur:(a,l)=>{const s=l.getData();t.setFieldsValue({["description[".concat(e.value,"]")]:s})}})},"desc"+e.locale)))})}},35459:(e,t,a)=>{a.r(t),a.d(t,{default:()=>q});var l=a(9950),s=a(28429),n=a(85923),r=a(59233),i=a(23263),c=a(87094),o=a(41988),d=a(55902),u=a(25933),m=a(80737),g=a(48538),h=a(91854),p=a(74623),v=a(12044),j=a(58920),x=a(71999),A=a(70030),f=a(75670),b=a(48970),y=a(44414);function q(){var e,t;const{t:a}=(0,A.B)(),{activeMenu:q}=(0,h.d4)((e=>e.menu),h.bN),{languages:w,defaultLang:E}=(0,h.d4)((e=>e.formLang),h.bN),F=(0,h.wA)(),[P]=r.A.useForm(),k=(0,s.Zp)(),[I,N]=(0,l.useState)(null!==(e=q.data)&&void 0!==e&&e.image?[null===(t=q.data)||void 0===t?void 0:t.image]:[]),[L,V]=(0,l.useState)(!1);function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"title";const a=w.map((a=>({[a.locale]:e["".concat(t,"[").concat(a.locale,"]")]})));return Object.assign({},...a)}(0,l.useEffect)((()=>()=>{const e=P.getFieldsValue(!0);F((0,p.Ok)({activeMenu:q,data:e}))}),[]);return(0,y.jsx)(i.A,{title:a("add.blog"),extra:(0,y.jsx)(x.A,{}),children:(0,y.jsxs)(r.A,{name:"blog-add",layout:"vertical",onFinish:e=>{const t={type:"blog",active:e.active?1:0,images:I.length?I.map((e=>e.name)):void 0,title:_(e),description:_(e,"description"),short_desc:_(e,"short_desc")};V(!0);const l="blogs";j.A.create(t).then((()=>{n.oR.success(a("successfully.created")),F((0,p.EK)({...q,nextUrl:l})),k("/".concat(l)),F((0,v.k)({}))})).finally((()=>V(!1)))},form:P,initialValues:{active:!0,...q.data},children:[(0,y.jsxs)(c.A,{gutter:12,children:[(0,y.jsx)(o.A,{span:12,children:w.map((e=>(0,y.jsx)(r.A.Item,{label:a("title"),name:"title[".concat(e.locale,"]"),rules:[{required:e.locale===E,message:a("required")}],hidden:e.locale!==E,children:(0,y.jsx)(d.A,{})},"title"+e.locale)))}),(0,y.jsx)(o.A,{children:(0,y.jsx)(r.A.Item,{label:a("image"),rules:[{required:!I.length,message:a("required")}],children:(0,y.jsx)(b.A,{type:"blogs",imageList:I,setImageList:N,form:P,length:"1",multiple:!1})})}),(0,y.jsx)(o.A,{children:(0,y.jsx)("div",{className:"col-md-12 col-sm-6",children:(0,y.jsx)(r.A.Item,{label:a("active"),name:"active",valuePropName:"checked",children:(0,y.jsx)(u.A,{})})})}),(0,y.jsx)(o.A,{span:12,children:w.map((e=>(0,y.jsx)(r.A.Item,{label:a("short.description"),name:"short_desc[".concat(e.locale,"]"),rules:[{required:e.locale===E,message:a("required")}],hidden:e.locale!==E,children:(0,y.jsx)(d.A,{})},"short_desc"+e.locale)))}),(0,y.jsx)(o.A,{span:24,children:(0,y.jsx)(f.A,{languages:w,form:P,lang:E})})]}),(0,y.jsx)(m.A,{children:(0,y.jsx)(g.A,{type:"primary",htmlType:"submit",loading:L,children:a("save")})})]})})}}}]);