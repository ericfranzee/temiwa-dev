"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[9910],{27276:(e,a,t)=>{t.d(a,{v:()=>r});var l=t(9950),n=t(90777),i=t(90650),s=t(44414);const r=e=>{let{fetchOptions:a,refetch:t=!1,...r}=e;const[d,c]=(0,l.useState)(!1),[u,o]=(0,l.useState)([]);return(0,s.jsx)(n.A,{treeLine:!0,treeData:d?[]:u,treeDefaultExpandAll:!0,labelInValue:!0,onFocus:()=>{u.length&&!t||(c(!0),a().then((e=>{o(e),c(!1)})))},notFoundContent:d?(0,s.jsx)(i.A,{size:"small"}):"no results",...r})}},9910:(e,a,t)=>{t.r(a),t.d(a,{default:()=>f});var l=t(9950),n=t(59233),i=t(23263),s=t(87094),r=t(41988),d=t(55902),c=t(99674),u=t(48538),o=t(85923),m=t(28429),p=t(71999),h=t(98591),v=t(91854),g=t(74623),y=t(12598),A=t(48970),x=t(70030),j=t(27276),b=t(44414);const f=()=>{var e,a;const{t:t}=(0,x.B)(),f=(0,m.Zp)(),k=(0,v.wA)(),{activeMenu:w}=(0,v.d4)((e=>e.menu),v.bN),{user:q}=(0,v.d4)((e=>e.auth),v.bN),{state:I}=(0,m.zy)(),[S,_]=(0,l.useState)(null!==(e=w.data)&&void 0!==e&&e.image?[null===(a=w.data)||void 0===a?void 0:a.image]:[]),[F,L]=(0,l.useState)("main"),[z]=n.A.useForm(),[C,E]=(0,l.useState)(!1),[N,O]=(0,l.useState)(null),{defaultLang:V,languages:D}=(0,v.d4)((e=>e.formLang),v.bN);(0,l.useEffect)((()=>()=>{const e=z.getFieldsValue(!0);k((0,g.Ok)({activeMenu:w,data:e}))}),[]);return(0,b.jsx)(i.A,{title:null!==I&&void 0!==I&&I.parentId?t("add.sub.category"):t("add.category"),extra:(0,b.jsx)(p.A,{}),children:(0,b.jsxs)(n.A,{name:"basic",layout:"vertical",onFinish:e=>{var a,l,n;E(!0);const i={...e,type:null!==(a=e.parent_id)&&void 0!==a&&a.value?F:"main",active:0,keywords:e.keywords.join(","),parent_id:null===(l=e.parent_id)||void 0===l?void 0:l.value,"images[0]":null===(n=S[0])||void 0===n?void 0:n.name},s="seller/categories";y.A.create(i).then((()=>{o.oR.success(t("successfully.created")),k((0,g.EK)({...w,nextUrl:s})),f("/".concat(s))})).catch((e=>O(e.response.data.params))).finally((()=>E(!1)))},initialValues:{active:!0,...w.data},form:z,children:[(0,b.jsxs)(s.A,{gutter:12,children:[(0,b.jsx)(r.A,{span:12,children:D.map(((e,a)=>(0,b.jsx)(n.A.Item,{label:t("name"),name:"title[".concat(e.locale,"]"),help:N&&N["title.".concat(V)]?N["title.".concat(V)][0]:null,validateStatus:N?"error":"success",rules:[{required:e.locale===V,message:t("required")}],hidden:e.locale!==V,children:(0,b.jsx)(d.A,{placeholder:t("name")})},e.title+a)))}),(0,b.jsx)(r.A,{span:12,children:D.map(((e,a)=>(0,b.jsx)(n.A.Item,{label:t("description"),name:"description[".concat(e.locale,"]"),rules:[{required:e.locale===V,message:t("required")}],hidden:e.locale!==V,children:(0,b.jsx)(h.A,{rows:4})},e.locale+a)))}),(0,b.jsx)(r.A,{span:12,children:(0,b.jsx)(n.A.Item,{label:t("keywords"),name:"keywords",rules:[{required:!0,message:t("required")}],children:(0,b.jsx)(c.A,{mode:"tags",style:{width:"100%"}})})}),(0,b.jsx)(r.A,{span:12,children:(0,b.jsx)(n.A.Item,{label:t("parent.category"),name:"parent_id",rules:[{required:!1,message:t("required")}],children:(0,b.jsx)(j.v,{fetchOptions:async function(){return y.A.selectPaginate({perPage:100,type:"main"}).then((e=>e.data.map((e=>{var a,t;return{label:null===(a=e.translation)||void 0===a?void 0:a.title,value:e.id,key:e.id,type:"main",children:null===(t=e.children)||void 0===t?void 0:t.map((e=>{var a,t;return{label:null===(a=e.translation)||void 0===a?void 0:a.title,value:e.id,key:e.id,type:"sub_main",children:null===(t=e.children)||void 0===t?void 0:t.map((e=>{var a;return{label:null===(a=e.translation)||void 0===a?void 0:a.title,value:e.id,key:e.id,disabled:!0,type:"child"}}))}}))}}))))},onSelect:(e,a,t)=>{const{type:l}=a||{};L("main"===l?"sub_main":"sub_main"===l?"child":"main")},allowClear:!0})})}),(0,b.jsx)(r.A,{span:4,children:(0,b.jsx)(n.A.Item,{label:t("image"),children:(0,b.jsx)(A.A,{type:"categories",imageList:S,setImageList:_,form:z,multiple:!1})})})]}),(0,b.jsx)(u.A,{type:"primary",htmlType:"submit",loading:C,children:t("submit")})]})})}}}]);