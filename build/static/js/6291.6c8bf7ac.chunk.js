"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[6291],{47992:(e,t,i)=>{i.d(t,{G:()=>s});var n=i(9950),l=i(95491),a=i.n(l),d=i(99674),o=i(90650),r=i(44414);const s=e=>{let{fetchOptions:t,debounceTimeout:i=400,onClear:l,refetchOptions:s=!1,...u}=e;const[c,v]=(0,n.useState)(!1),[p,h]=(0,n.useState)([]),f=(0,n.useMemo)((()=>a()((e=>{h([]),v(!0),t(e).then((e=>{h(e),v(!1)}))}),i)),[t,i]);return(0,r.jsx)(d.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:f,onClear:()=>{f(""),l&&l()},notFoundContent:c?(0,r.jsx)(o.A,{size:"small"}):"no results",...u,options:p,onFocus:()=>{p.length&&!s||f("")}})}},8168:(e,t,i)=>{function n(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}i.d(t,{A:()=>n})},53774:(e,t,i)=>{function n(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const i=Number(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===t?"".concat(i," ").concat(e):"".concat(e," ").concat(i)}i.r(t),i.d(t,{default:()=>n})},76291:(e,t,i)=>{i.r(t),i.d(t,{default:()=>_});var n=i(70030),l=i(91854),a=i(9950),d=i(53774),o=i(12916),r=i(48538),s=i(23263),u=i(52913),c=i(12678),v=i(8168),p=i(74623),h=i(88986),f=i(80737),g=i(47992),m=i(55660),x=i(53271),A=i(44414);const j=()=>{const{t:e}=(0,n.B)(),t=(0,l.wA)(),{activeMenu:i}=(0,l.d4)((e=>e.menu),l.bN),a=e=>{const n=i.data;t((0,p.Ok)({activeMenu:i,data:{...n,...e}}))};return(0,A.jsxs)(f.A,{wrap:!0,children:[(0,A.jsx)(g.G,{fetchOptions:e=>{const t={perPage:10,page:1,search:e};return m.A.getAll(t).then((e=>{var t;return null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.map((e=>{var t;return{label:null===e||void 0===e||null===(t=e.translation)||void 0===t?void 0:t.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},className:"w-200px",placeholder:e("select.shop"),onChange:e=>a({shop_id:null===e||void 0===e?void 0:e.value})}),(0,A.jsx)(g.G,{fetchOptions:e=>{const t={parPage:10,page:1,search:e};return x.A.getAll(t).then((e=>{var t;return null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.map((e=>({label:"".concat(null===e||void 0===e?void 0:e.firstname," ").concat(null===e||void 0===e?void 0:e.lastname),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id})))}))},className:"w-200px",placeholder:e("select.user"),onChange:e=>a({user_id:null===e||void 0===e?void 0:e.value})})]})};var C=i(82706),b=i(91524),w=i(81446),y=i(29720);function k(e){var t,i,o,s,u,c,v,p;let{id:h,handleCancel:f}=e;const[g,m]=(0,a.useState)({}),[x,j]=(0,a.useState)(!1),{t:k}=(0,n.B)(),{defaultCurrency:I}=(0,l.d4)((e=>e.currency),l.bN);return(0,a.useEffect)((()=>{!function(e){j(!0),y.A.getById(e).then((e=>m(e.data))).finally((()=>j(!1)))}(h)}),[h]),(0,A.jsx)(C.A,{visible:!!h,title:k("gift.card"),onCancel:f,footer:(0,A.jsx)(r.A,{type:"default",onClick:f,children:k("cancel")}),children:x?(0,A.jsx)(w.A,{}):(0,A.jsxs)(b.A,{bordered:!0,children:[(0,A.jsx)(b.A.Item,{span:3,label:k("id"),children:g.id}),(0,A.jsx)(b.A.Item,{span:3,label:k("gift.card"),children:null===(t=g.giftCart)||void 0===t||null===(i=t.translation)||void 0===i?void 0:i.title}),(0,A.jsx)(b.A.Item,{span:3,label:k("gift.card.id"),children:null===(o=g.giftCart)||void 0===o?void 0:o.id}),(0,A.jsx)(b.A.Item,{span:3,label:k("time"),children:null===(s=g.giftCart)||void 0===s?void 0:s.time}),(0,A.jsx)(b.A.Item,{span:3,label:k("shop.id"),children:null===(u=g.giftCart)||void 0===u?void 0:u.shop_id}),(0,A.jsx)(b.A.Item,{span:3,label:k("price"),children:(0,d.default)(null===g||void 0===g?void 0:g.price,null===I||void 0===I?void 0:I.symbol,null===I||void 0===I?void 0:I.position)}),(0,A.jsx)(b.A.Item,{span:3,label:k("user.id"),children:null===(c=g.user)||void 0===c?void 0:c.id}),(0,A.jsxs)(b.A.Item,{span:3,label:k("user"),children:[null===(v=g.user)||void 0===v?void 0:v.firstname," ",null===(p=g.user)||void 0===p?void 0:p.lastname]})]})})}var I=i(22428);const _=function(){var e,t,i;const{t:f}=(0,n.B)(),g=(0,l.wA)(),{activeMenu:m}=(0,l.d4)((e=>e.menu),l.bN),[x,C]=(0,a.useState)({shop:{}}),{userGiftCards:b,loading:w,meta:y,params:_}=(0,l.d4)((e=>e.userGiftCards),l.bN),{defaultCurrency:S}=(0,l.d4)((e=>e.currency),l.bN),[N,O]=(0,a.useState)(null),P=m.data,z={sort:null===P||void 0===P?void 0:P.sort,column:null===P||void 0===P?void 0:P.column,perPage:null===P||void 0===P?void 0:P.perPage,page:null===P||void 0===P?void 0:P.page,shop_id:null===P||void 0===P?void 0:P.shop_id,user_id:null===P||void 0===P?void 0:P.user_id},F=[{title:f("id"),dataIndex:"id",key:"id",sorter:!0,is_show:!0},{title:f("user"),dataIndex:"user",key:"user",is_show:!0,render:(e,t)=>{var i,n;return"".concat(null===(i=t.user)||void 0===i?void 0:i.firstname," ").concat(null===(n=t.user)||void 0===n?void 0:n.lastname)}},{title:f("gift.card"),dataIndex:"giftCart",key:"gift.card",is_show:!0,render:(e,t)=>{var i,n;return null===t||void 0===t||null===(i=t.giftCart)||void 0===i||null===(n=i.translation)||void 0===n?void 0:n.title}},{title:f("time"),dataIndex:"time",key:"time",is_show:!0,render:(e,t)=>{var i;return null===t||void 0===t||null===(i=t.giftCart)||void 0===i?void 0:i.time}},{title:f("price"),dataIndex:"price",key:"price",is_show:!0,render:(e,t)=>(0,d.default)(null===t||void 0===t?void 0:t.price,null===S||void 0===S?void 0:S.symbol,null===S||void 0===S?void 0:S.position)},{title:f("transaction"),dataIndex:"transaction",key:"transaction",is_show:!0,render:(e,t)=>{var i;const n=(null===(i=t.transaction)||void 0===i?void 0:i.status)||"not.paid";return"not.paid"===n?(0,A.jsx)(o.A,{children:f(n)}):"paid"===n?(0,A.jsx)(o.A,{color:"cyan",children:f(n)}):(0,A.jsx)(o.A,{color:"warning",children:f(n)})}},{title:f("options"),key:"options",is_show:!0,render:(e,t)=>(0,A.jsx)(r.A,{icon:(0,A.jsx)(c.A,{}),onClick:()=>G(t)})}],G=e=>{O(e.id)};return(0,h.A)((()=>{g((0,I.$)(z))}),[m.data]),(0,a.useEffect)((()=>{m.refetch&&(g((0,p.km)(m)),g((0,I.$)()))}),[m.refetch]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(s.A,{children:(0,A.jsx)(j,{filters:x,setFilters:C})}),(0,A.jsx)(s.A,{title:f("user.gift.cards"),children:(0,A.jsx)(u.A,{scroll:{x:!0},columns:null===F||void 0===F?void 0:F.filter((e=>e.is_show)),dataSource:b,loading:w,pagination:{pageSize:_.perPage,page:(null===(e=m.data)||void 0===e?void 0:e.page)||1,total:y.total,defaultCurrent:null===(t=m.data)||void 0===t?void 0:t.page,current:null===(i=m.data)||void 0===i?void 0:i.page},rowKey:e=>e.id,onChange:function(e,t,i){const{pageSize:n,current:l}=e,{field:a,order:d}=i,o=(0,v.A)(d);g((0,p.Ok)({activeMenu:m,data:{...P,perPage:n,page:l,column:a,sort:o}}))}})}),N&&(0,A.jsx)(k,{id:N,handleCancel:()=>O(null)})]})}}}]);