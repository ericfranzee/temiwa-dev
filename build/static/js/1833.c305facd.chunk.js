"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[1833],{75670:(e,t,l)=>{l.d(t,{A:()=>v});var a=l(9950),n=l(59233),o=l(70030),r=l(36455),i=l(19181),s=l.n(i),c=l(63620),d=l(64924),u=l(85923),m=l(44414);function v(e){let{form:t,lang:l,languages:i}=e;const{t:v}=(0,o.B)();function p(e){e.plugins.get("FileRepository").createUploadAdapter=e=>function(e){return{upload:()=>new Promise(((t,l)=>{const a=new FormData;e.file.then((e=>{e.size/1024/1024<2||(u.oR.error(v("min.2.mb")),l()),a.append("image",e),a.append("type","blogs"),d.A.upload(a).then((e=>{let{data:l}=e;t({default:"".concat(c.sE+l.title)})})).catch((e=>{l(e)}))}))}))}}(e)}return(0,m.jsx)(a.Fragment,{children:i.map((e=>(0,m.jsx)(n.A.Item,{label:v("description"),name:"description[".concat(e.locale,"]"),valuePropName:"data",getValueFromEvent:(e,t)=>t.getData(),rules:[{required:e.locale===l,message:v("required")},{validator:(e,t)=>t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(v("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<5?Promise.reject(new Error(v("must.be.at.least.5"))):t&&(null===t||void 0===t?void 0:t.trim().length)>200?Promise.reject(new Error(v("must.be.less.200"))):Promise.resolve()}],hidden:e.locale!==l,children:(0,m.jsx)(r.CKEditor,{editor:s(),config:{extraPlugins:[p]},onBlur:(l,a)=>{const n=a.getData();t.setFieldsValue({["description[".concat(e.value,"]")]:n})}})},"desc"+e.locale)))})}},47992:(e,t,l)=>{l.d(t,{G:()=>c});var a=l(9950),n=l(95491),o=l.n(n),r=l(99674),i=l(90650),s=l(44414);const c=e=>{let{fetchOptions:t,debounceTimeout:l=400,onClear:n,refetchOptions:c=!1,...d}=e;const[u,m]=(0,a.useState)(!1),[v,p]=(0,a.useState)([]),g=(0,a.useMemo)((()=>o()((e=>{p([]),m(!0),t(e).then((e=>{p(e),m(!1)}))}),l)),[t,l]);return(0,s.jsx)(r.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:g,onClear:()=>{g(""),n&&n()},notFoundContent:u?(0,s.jsx)(i.A,{size:"small"}):"no results",...d,options:v,onFocus:()=>{v.length&&!c||g("")}})}},29597:(e,t,l)=>{function a(e){var t;if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const l=null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.split(", ");return{lat:Number(null===l||void 0===l?void 0:l[0]),lng:Number(null===l||void 0===l?void 0:l[1])}}l.d(t,{A:()=>a})},31281:(e,t,l)=>{function a(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const a=e.map((e=>({[e.locale]:""===t["".concat(l,"[").concat(e.locale,"]")]?void 0:t["".concat(l,"[").concat(e.locale,"]")]})));return Object.assign({},...a)}l.d(t,{A:()=>a})},1833:(e,t,l)=>{l.r(t),l.d(t,{default:()=>F});var a=l(9950),n=l(59233),o=l(23263),r=l(87094),i=l(41988),s=l(55902),c=l(25933),d=l(48538),u=l(90650),m=l(85923),v=l(28429),p=l(71999),g=l(91854),h=l(74623),j=l(33774),A=l(70030),f=l(42362),x=l(29597),b=l(47992),y=l(62572),w=l(75670),P=l(31281),E=l(44414);const F=()=>{var e,t,l,F,N;const{t:k}=(0,A.B)(),S=(0,v.Zp)(),C=(0,g.wA)(),{activeMenu:I}=(0,g.d4)((e=>e.menu),g.bN),[O,q]=(0,a.useState)(!1),[V]=n.A.useForm(),[z,_]=(0,a.useState)(!1),{id:B}=(0,v.g)(),{params:R}=(0,g.d4)((e=>e.career),g.bN),{defaultLang:D,languages:M}=(0,g.d4)((e=>e.formLang),g.bN),{settings:G}=(0,g.d4)((e=>e.globalSettings),g.bN),[K,L]=(0,a.useState)(null!==I&&void 0!==I&&null!==(e=I.data)&&void 0!==e&&e.location?{lat:parseFloat(null===I||void 0===I||null===(t=I.data)||void 0===t||null===(l=t.location)||void 0===l?void 0:l.latitude),lng:parseFloat(null===I||void 0===I||null===(F=I.data)||void 0===F||null===(N=F.location)||void 0===N?void 0:N.longitude)}:(0,x.A)(G));function T(e){if(!e)return{};const{translations:t}=e,l=M.map((e=>{var l,a,n;return{["title[".concat(e.locale,"]")]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.title,["description[".concat(e.locale,"]")]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.description,["address[".concat(e.locale,"]")]:null===(n=t.find((t=>t.locale===e.locale)))||void 0===n?void 0:n.address}}));return Object.assign({},...l)}(0,a.useEffect)((()=>()=>{const e=V.getFieldsValue(!0);C((0,h.Ok)({activeMenu:I,data:e}))}),[]);return(0,a.useEffect)((()=>{var e;I.refetch&&(e=B,q(!0),j.A.getById(e).then((e=>{let t=e.data;const l={...t,...T(t),category_id:{label:t.category.translation.title,value:t.category.id}};V.setFieldsValue(l)})).finally((()=>{q(!1),C((0,h.km)(I))})))}),[I.refetch]),(0,E.jsx)(o.A,{title:k("clone.career"),extra:(0,E.jsx)(p.A,{}),children:O?(0,E.jsx)("div",{className:"d-flex justify-content-center align-items-center py-5",children:(0,E.jsx)(u.A,{size:"large",className:"mt-5 pt-5"})}):(0,E.jsxs)(n.A,{name:"basic",layout:"vertical",onFinish:e=>{_(!0);const t={...e,title:(0,P.A)(M,e,"title"),description:(0,P.A)(M,e,"description"),address:(0,P.A)(M,e,"address"),active:e.active?1:0,"location[latitude]":K.lat,"location[longitude]":K.lng,category_id:e.category_id.value},l="catalog/career";j.A.create(t).then((()=>{m.oR.success(k("successfully.updated")),C((0,h.EK)({...I,nextUrl:l})),C((0,f.R)(R)),S("/".concat(l))})).catch((e=>console.error(e.response.data.params))).finally((()=>_(!1)))},initialValues:{parent_id:{title:"---",value:0,key:0},active:!0,...I.data},form:V,children:[(0,E.jsxs)(r.A,{gutter:12,children:[(0,E.jsx)(i.A,{span:12,children:M.map(((e,t)=>(0,E.jsx)(n.A.Item,{label:k("name"),name:"title[".concat(e.locale,"]"),rules:[{validator:(t,l)=>l||(null===e||void 0===e?void 0:e.locale)!==D?l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(new Error(k("no.empty.space"))):l&&(null===l||void 0===l?void 0:l.trim().length)<2?Promise.reject(new Error(k("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(k("required")))}],hidden:e.locale!==D,children:(0,E.jsx)(s.A,{placeholder:k("name")})},e.title+t)))}),(0,E.jsx)(i.A,{span:12,children:(0,E.jsx)(w.A,{form:V,lang:D,languages:M})}),(0,E.jsx)(i.A,{span:12,children:(0,E.jsx)(n.A.Item,{label:k("category"),name:"category_id",rules:[{required:!0,message:k("required")}],children:(0,E.jsx)(b.G,{fetchOptions:async function(e){const t={search:e.lenght>0?e:void 0,type:"career",active:1};return y.A.getAll(t).then((e=>e.data.map((e=>({label:e.translation?e.translation.title:"no name",value:e.id})))))}})})}),(0,E.jsx)(i.A,{span:12,children:M.map(((e,t)=>(0,E.jsx)(n.A.Item,{label:k("location"),name:"address[".concat(e.locale,"]"),rules:[{validator:(t,l)=>l||(null===e||void 0===e?void 0:e.locale)!==D?l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(new Error(k("no.empty.space"))):l&&(null===l||void 0===l?void 0:l.trim().length)<2?Promise.reject(new Error(k("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(k("required")))}],hidden:e.locale!==D,children:(0,E.jsx)(s.A,{})},e.locale+t)))}),(0,E.jsx)(i.A,{span:12,children:(0,E.jsx)(n.A.Item,{label:k("active"),name:"active",valuePropName:"checked",children:(0,E.jsx)(c.A,{})})}),(0,E.jsx)(i.A,{span:12}),(0,E.jsx)(i.A,{span:24,className:"mb-5"})]}),(0,E.jsx)(d.A,{type:"primary",htmlType:"submit",loading:z,children:k("submit")})]})})}}}]);