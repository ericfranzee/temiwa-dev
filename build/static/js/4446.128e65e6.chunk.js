"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[4446],{62341:(e,t,a)=>{a.d(t,{A:()=>u});var l=a(9950),n=a(90650),i=a(66876),s=a(92759),o=a(8750),r=a(64924),d=a(70030),c=a(44414);const u=e=>{let{fileList:t=[],setFileList:a,type:u,id:p}=e;const{t:v}=(0,d.B)(),[m,x]=(0,l.useState)(!1),f=m?(0,c.jsx)(n.A,{}):(0,c.jsx)(o.A,{}),h=t.find((e=>e.id===p))||[];return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(i.A,{listType:"picture-card",fileList:(null===h||void 0===h?void 0:h.galleries)||(null===h||void 0===h?void 0:h.images),customRequest:e=>{let{file:l,onSuccess:n}=e;x(!0);const i=new FormData;i.append("image",l),i.append("type",u),r.A.upload(i).then((e=>{let{data:l}=e;((e,l)=>{if(t.findIndex((t=>t.id===e))>=0){const n=t.map((t=>t.id===e?{id:e,images:[...t.images,l]}:t));a(n)}else a((t=>[...t,{id:e,images:[l]}]))})(p,(e=>({uid:e.title,name:e.title,status:"done",url:e.title,created:!0}))(l)),n("ok")})).finally((()=>{x(!1)}))},onRemove:e=>{const l=t.map((t=>{if(t.id===p){const a=t.images.filter((t=>t.uid!==e.uid));return 0===a.length?null:{...t,images:a}}return t})).filter((e=>null!==e));a(l)},showUploadList:!0,accept:".png,.jpg,.jpeg,.webp",beforeUpload:e=>!!(e.size/1024/1024<2)||(s.Ay.error(v("max.2.mb")),!1),children:f})})}},65820:(e,t,a)=>{a.d(t,{s:()=>s});var l=a(28429),n=a(21215),i=a.n(n);const s=()=>{const e=(0,l.Zp)(),t=(0,l.zy)(),a=i().parse(t.search,{ignoreQueryPrefix:!0});return{values:a,set:(t,l)=>e({search:i().stringify({...a,[t]:l})}),reset:t=>{const l={...a};l[t]&&delete l[t],e({search:i().stringify({...l})})},clear:()=>e({search:i().stringify({})}),merge:t=>e({search:i().stringify({...a,...t})})}}},9320:(e,t,a)=>{a.d(t,{A:()=>n});var l=a(82371);const n={create:e=>l.A.post("dashboard/admin/digital-files",e,{})}},84446:(e,t,a)=>{a.r(t),a.d(t,{default:()=>C});var l=a(9950),n=a(49326),i=a(86366),s=a(23263),o=a(90650),r=a(82498),d=a(57844),c=a(649),u=a(59585),p=a(44832),v=a(71999),m=a(28429),x=a(47933),f=a(91854),h=a(74623),g=a(70030),A=a(65820),j=a(4895),y=a(29657),b=a(44414);const{Step:k}=i.A,C=()=>{var e,t,a,C,N;const{t:S}=(0,g.B)(),{uuid:w}=(0,m.g)(),F=(0,A.s)(),{activeMenu:L}=(0,f.d4)((e=>e.menu),f.bN),{languages:z}=(0,f.d4)((e=>e.formLang),f.bN),M=(0,f.wA)(),E=Number((null===(e=F.values)||void 0===e?void 0:e.step)||0),[R,B]=(0,l.useState)(L.refetch),[_,I]=(0,l.useState)(n.C),{extras:O}=(null===L||void 0===L?void 0:L.data)||{},T=null===L||void 0===L||null===(t=L.data)||void 0===t?void 0:t.digital,q=null===O||void 0===O?void 0:O.some((e=>{var t;return"color"===(null===e||void 0===e||null===(t=e.group)||void 0===t?void 0:t.type)})),D=(0,l.useMemo)((()=>null===O||void 0===O?void 0:O.find((e=>{var t;return"color"===(null===e||void 0===e||null===(t=e.group)||void 0===t?void 0:t.type)}))),[O]),G=Array.from(new Set(null===D||void 0===D||null===(a=D.values)||void 0===a?void 0:a.map((e=>e.value)))).map((e=>{var t;return null===D||void 0===D||null===(t=D.values)||void 0===t?void 0:t.find((t=>t.value===e))})).filter((e=>"color"===e.group_type)),P=()=>{const e=E+1;F.set("step",e)},U=()=>{const e=E-1;F.set("step",e)},Q=e=>e?{label:e.translation?e.translation.title:e.title,value:e.id}:null;function Z(e){if(null===e||void 0===e||!e.translations)return{};const{translations:t}=e,a=z.map((e=>{var a,l;return{["title[".concat(e.locale,"]")]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.title,["description[".concat(e.locale,"]")]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.description}}));return Object.assign({},...a)}(0,l.useEffect)((()=>{L.refetch&&function(e){B(!0),x.A.getById(e).then((e=>{const t={...e.data,...Z(e.data),shop:Q(e.data.shop),category:Q(e.data.category),brand:Q(e.data.brand),unit:Q(e.data.unit),images:(a=e.data.galleries,a.map((e=>({uid:e.id,name:e.path,url:e.path})))),properties:e.data.properties.map(((e,t)=>({id:t,["key[".concat(e.locale,"]")]:e.key,["value[".concat(e.locale,"]")]:e.value}))),translation:void 0,translations:void 0};var a;M((0,h.Ok)({activeMenu:L,data:t}))})).finally((()=>{B(!1),M((0,h.km)(L))}))}(w)}),[L.refetch]);return(0,l.useEffect)((()=>{T?I(n.C.filter((e=>"product.extras"!==e.title))):!1===T&&I(n.C.filter((e=>"product.digital"!==e.title))),I(q?e=>e:e=>e.filter((e=>"Gallery"!==e.title)))}),[q,T]),(0,b.jsxs)(s.A,{title:S("clone.product"),extra:(0,b.jsx)(v.A,{}),children:[(0,b.jsx)(i.A,{current:E,onChange:e=>{M((0,h.Ok)({activeMenu:L,data:{...L.data,step:e}})),F.set("step",e)},children:n.C.map((e=>(0,b.jsx)(k,{title:S(e.title)},e.title)))}),R?(0,b.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,b.jsx)(o.A,{size:"large",className:"py-5"})}):(0,b.jsxs)("div",{className:"steps-content",children:["First-content"===n.C[E].content&&(0,b.jsx)(p.A,{next:P}),(null===(C=L.data)||void 0===C?void 0:C.digital)&&"Product-digital"===_[E].content&&(0,b.jsx)(j.A,{next:P,prev:U}),!(null!==(N=L.data)&&void 0!==N&&N.digital)&&"Second-content"===_[E].content&&(0,b.jsx)(u.A,{next:P,prev:U}),"Third-content"===n.C[E].content&&(0,b.jsx)(c.A,{next:P,prev:U}),(null===G||void 0===G?void 0:G.length)>0&&"Gallery-content"===n.C[E].content&&(0,b.jsx)(y.A,{next:P,prev:U}),"Fourth-content"===n.C[E].content&&(0,b.jsx)(r.A,{next:P,prev:U}),"Finish-content"===n.C[E].content&&(0,b.jsx)(d.A,{prev:U})]})]})}},4895:(e,t,a)=>{a.d(t,{A:()=>v});a(9950);var l=a(23263),n=a(80737),i=a(48538),s=a(70030),o=a(72540),r=a(88349),d=a(85923),c=a(9320),u=a(91854),p=a(44414);function v(e){let{prev:t,next:a}=e;const{t:v}=(0,s.B)(),{activeMenu:m}=(0,u.d4)((e=>e.menu),u.bN);return(0,p.jsxs)(l.A,{bordered:!1,className:"mb-0",children:[(0,p.jsxs)(o.A,{name:"file",multiple:!1,maxCount:1,customRequest:e=>{var t;let{file:a,onSuccess:l,onError:n}=e;const i=new FormData;i.append("file",a),i.append("active",1),i.append("product_id",null===(t=m.data)||void 0===t?void 0:t.id),c.A.create(i).then((()=>{d.oR.success(v("successfully.import")),l("ok")})).catch((e=>{console.log("upload error",e),n("error"),d.oR.error(v("file.upload.error"))}))},accept:".zip",children:[(0,p.jsx)("p",{className:"ant-upload-drag-icon",children:(0,p.jsx)(r.A,{})}),(0,p.jsx)("p",{className:"ant-upload-text",children:v("upload-drag")}),(0,p.jsx)("p",{className:"ant-upload-hint",children:v("upload-text")})]}),(0,p.jsxs)(n.A,{className:"mt-3",children:[(0,p.jsx)(i.A,{onClick:t,children:v("prev")}),(0,p.jsx)(i.A,{type:"primary",onClick:a,children:v("next")})]})]})}},29657:(e,t,a)=>{a.d(t,{A:()=>A});var l=a(9950),n=a(98485),i=a(74635),s=a(23263),o=a(81541),r=a(80737),d=a(87094),c=a(41988),u=a(74947),p=a(40895),v=a(48538),m=a(44738),x=a(91854),f=a(62341),h=a(47933),g=a(44414);const A=e=>{var t;let{prev:a,next:A}=e;const[j,y]=(0,l.useState)([]),{activeMenu:b}=(0,x.d4)((e=>e.menu),x.bN),{newExtras:k}=(null===b||void 0===b?void 0:b.data)||{},C=(0,l.useMemo)((()=>null===k||void 0===k?void 0:k.find((e=>{var t;return"color"===(null===e||void 0===e||null===(t=e.group)||void 0===t?void 0:t.type)}))),[k]),N=Array.from(new Set(null===C||void 0===C||null===(t=C.values)||void 0===t?void 0:t.map((e=>e.value)))).map((e=>{var t;return null===C||void 0===C||null===(t=C.values)||void 0===t?void 0:t.find((t=>t.value===e))})).filter((e=>"color"===e.group_type)),S=e=>({uid:e.path,name:e.path,status:"done",url:e.path,created:!0});return(0,l.useEffect)((()=>{(()=>{const e=b.data.stocks.map((e=>{let{id:t,galleries:a}=e;return{id:t,images:(null===a||void 0===a?void 0:a.map(S))||[]}}));y(e)})()}),[b.data]),(0,g.jsxs)(s.A,{title:(0,g.jsx)(o.A,{placement:"topLeft",title:"In the process of internal desktop applications development",children:(0,g.jsxs)(r.A,{children:[(0,i.t)("add.media.file"),(0,g.jsx)(n.A,{style:{fontSize:16,cursor:"pointer"}})]})}),children:[(0,g.jsx)(d.A,{gutter:[24,24],children:null===N||void 0===N?void 0:N.map((e=>{let{label:t,stock_id:a,value:l}=e;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(c.A,{span:24,children:[(0,g.jsx)(r.A,{className:"mb-4",children:(0,g.jsx)(u.A,{color:t||l,className:"extras-color-badge",text:"".concat(t||l," - ").concat((0,m.n)(t||l))})}),(0,g.jsx)(f.A,{id:a,fileList:j,setFileList:y,type:"stocks"})]}),(0,g.jsx)(p.A,{})]})}))}),(0,g.jsxs)(r.A,{className:"mt-4",children:[(0,g.jsx)(v.A,{onClick:a,children:(0,i.t)("prev")}),(0,g.jsx)(v.A,{type:"primary",htmlType:"submit",onClick:()=>{if(!j.length)return void A();const e=j.map((e=>({...e,images:e.images.map((e=>e.name))})));h.A.updateStocks({data:e}).then((()=>{A()})).catch((e=>{console.log(e)}))},children:(0,i.t)("next")})]})]})}}}]);