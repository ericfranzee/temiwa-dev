"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[9533],{79406:(e,l,n)=>{n.d(l,{a:()=>s});var i=n(9950),t=n(95491),a=n.n(t),o=n(99674),d=n(90650),r=n(44414);const s=e=>{let{fetchOptions:l,debounceTimeout:n=400,refetch:t=!1,...s}=e;const[u,c]=(0,i.useState)(!1),[v,h]=(0,i.useState)([]),m=(0,i.useMemo)((()=>a()((e=>{h([]),c(!0),l(e).then((e=>{h(e),c(!1)}))}),n)),[l,n]);return(0,r.jsx)(o.A,{showSearch:!0,allowClear:!0,labelInValue:!0,onClear:()=>m(""),filterOption:!1,onSearch:m,notFoundContent:u?(0,r.jsx)(d.A,{size:"small"}):"no results",...s,options:v,onFocus:()=>{v.length&&!t||m("")}})}},47992:(e,l,n)=>{n.d(l,{G:()=>s});var i=n(9950),t=n(95491),a=n.n(t),o=n(99674),d=n(90650),r=n(44414);const s=e=>{let{fetchOptions:l,debounceTimeout:n=400,onClear:t,refetchOptions:s=!1,...u}=e;const[c,v]=(0,i.useState)(!1),[h,m]=(0,i.useState)([]),p=(0,i.useMemo)((()=>a()((e=>{m([]),v(!0),l(e).then((e=>{m(e),v(!1)}))}),n)),[l,n]);return(0,r.jsx)(o.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:p,onClear:()=>{p(""),t&&t()},notFoundContent:c?(0,r.jsx)(d.A,{size:"small"}):"no results",...u,options:h,onFocus:()=>{h.length&&!s||p("")}})}},89533:(e,l,n)=>{n.r(l),n.d(l,{default:()=>h});n(9950);var i=n(28429),t=n(85923),a=n(59233),o=n(91854),d=n(74623),r=n(70030),s=n(94392),u=n(58268),c=n(30575),v=n(44414);const h=()=>{const{t:e}=(0,r.B)(),{id:l}=(0,i.g)(),{activeMenu:n}=(0,o.d4)((e=>e.menu),o.bN),h=(0,o.wA)(),[m]=a.A.useForm(),p=(0,i.Zp)();return(0,v.jsx)(c.A,{form:m,handleSubmit:i=>{const{area:a,city:r,country:c,region:v,price:m,fitting_rooms:g,active:f,shop_id:y}=i,x={price:m,fitting_rooms:g,active:Number(f),area_id:null===a||void 0===a?void 0:a.value,city_id:null===r||void 0===r?void 0:r.value,country_id:null===c||void 0===c?void 0:c.value,region_id:null===v||void 0===v?void 0:v.value,shop_id:null===y||void 0===y?void 0:y.value},j="delivery-price";return s.A.update(l,x).then((()=>{t.oR.success(e("successfully.updated")),(0,o.vA)((()=>{h((0,d.EK)({...n,nextUrl:j})),h((0,u.aY)({}))})),p("/".concat(j))}))}})}},30575:(e,l,n)=>{n.d(l,{A:()=>w});var i=n(9950),t=n(91854),a=n(28429),o=n(70030),d=n(59233),r=n(87094),s=n(41988),u=n(23263),c=n(40577),v=n(48538),h=n(79406),m=n(47992),p=n(2905),g=n(78687),f=n(82206),y=n(64988),x=n(55660),j=n(74623),A=n(94392),b=n(81446),F=n(44414);function w(e){let{form:l,handleSubmit:n}=e;const{t:w}=(0,o.B)(),k=(0,t.wA)(),{id:C}=(0,a.g)(),{activeMenu:S}=(0,t.d4)((e=>e.menu),t.bN),{languages:_,defaultLang:O}=(0,t.d4)((e=>e.formLang),t.bN),{defaultCurrency:N}=(0,t.d4)((e=>e.currency),t.bN),[q,I]=(0,i.useState)(!1),[B,z]=(0,i.useState)(!1),[M,P]=(0,i.useState)({}),{country:R,region:V,city:E}=M;function T(e){if(null===e||void 0===e||!e.translations)return{};const{translations:l}=e,n=_.map((e=>{var n,i;return{["title[".concat(e.locale,"]")]:null===(n=l.find((l=>l.locale===e.locale)))||void 0===n?void 0:n.title,["address[".concat(e.locale,"]")]:null===(i=l.find((l=>l.locale===e.locale)))||void 0===i?void 0:i.address}}));return Object.assign({},...n)}(0,i.useEffect)((()=>()=>{const e=l.getFieldsValue(!0);k((0,j.Ok)({activeMenu:S,data:e}))}),[]),(0,i.useEffect)((()=>{S.refetch&&C&&G(C)}),[S.refetch]);const G=()=>{I(!0),A.A.getById(C).then((e=>{var n,i,t,a,o,d,r,s,u;let{data:c}=e;const{city:v,country:h,region:m,area:p,...g}=c,f="address[".concat(O,"]"),y={area:{label:null===p||void 0===p||null===(n=p.translation)||void 0===n?void 0:n.title,value:null===p||void 0===p?void 0:p.id},city:{label:null===v||void 0===v||null===(i=v.translation)||void 0===i?void 0:i.title,value:null===v||void 0===v?void 0:v.id},country:{label:null===h||void 0===h||null===(t=h.translation)||void 0===t?void 0:t.title,value:null===h||void 0===h?void 0:h.id},region:{label:null===m||void 0===m||null===(a=m.translation)||void 0===a?void 0:a.title,value:null===m||void 0===m?void 0:m.id}},x={...T(c),...y,...g,[f]:null===(o=c.address)||void 0===o?void 0:o[O],shop_id:{label:null===c||void 0===c||null===(d=c.shop)||void 0===d||null===(r=d.translation)||void 0===r?void 0:r.title,value:null===c||void 0===c||null===(s=c.shop)||void 0===s?void 0:s.id,key:null===c||void 0===c||null===(u=c.shop)||void 0===u?void 0:u.id}};l.setFieldsValue(x),P(y)})).catch((e=>{console.error(e)})).finally((()=>{I(!1),k((0,j.km)(S))}))};return q?(0,F.jsx)(b.A,{}):(0,F.jsxs)(d.A,{form:l,name:w(C?"edit.delivery.price":"add.delivery.price"),layout:"vertical",initialValues:{clickable:!0,...S.data},onFinish:e=>{z(!0),n(e).finally((()=>z(!1)))},children:[(0,F.jsxs)(r.A,{gutter:[24,24],children:[(0,F.jsx)(s.A,{span:12,children:(0,F.jsxs)(u.A,{title:w("deliveryzone"),className:"h-100",children:[(0,F.jsx)(s.A,{span:24,children:(0,F.jsx)(d.A.Item,{label:w("region"),name:"region",rules:[{required:!0,message:w("required")}],children:(0,F.jsx)(h.a,{fetchOptions:async function(e){const l={search:e,status:1,perPage:10};return p.A.get(l).then((e=>{let{data:l}=e;return l.map((e=>{var l;return{label:(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||"no name",value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},dropdownRender:e=>(0,F.jsx)(F.Fragment,{children:e}),refetch:!0,onChange:e=>{P((l=>({...l,region:e}))),l.resetFields(["city","area","country"])}})})}),(0,F.jsx)(s.A,{span:24,children:(0,F.jsx)(d.A.Item,{label:w("country"),name:"country",rules:[{required:!0,message:w("required")}],children:(0,F.jsx)(h.a,{fetchOptions:async function(e){const l={search:e,status:1,perPage:10,region_id:null===V||void 0===V?void 0:V.value};return g.A.get(l).then((e=>{let{data:l}=e;return l.map((e=>{var l;return{label:(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||"no name",value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},dropdownRender:e=>(0,F.jsx)(F.Fragment,{children:e}),refetch:!0,onChange:e=>{P((l=>({...l,country:e}))),l.resetFields(["city","area"])},disabled:!Boolean(null===V||void 0===V?void 0:V.value)})})}),(0,F.jsx)(s.A,{span:24,children:(0,F.jsx)(d.A.Item,{label:w("city"),name:"city",rules:[{required:!1,message:w("required")}],children:(0,F.jsx)(h.a,{fetchOptions:async function(e){const l={search:e,status:1,perPage:10,country_id:null===R||void 0===R?void 0:R.value};return f.A.get(l).then((e=>{let{data:l}=e;return l.map((e=>{var l;return{label:(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||"no name",value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},dropdownRender:e=>(0,F.jsx)(F.Fragment,{children:e}),refetch:!0,disabled:!Boolean(null===R||void 0===R?void 0:R.value),onChange:e=>{P((l=>({...l,city:e}))),l.resetFields(["area"])}})})}),(0,F.jsx)(s.A,{span:24,children:(0,F.jsx)(d.A.Item,{label:w("area"),name:"area",rules:[{required:!1,message:w("required")}],children:(0,F.jsx)(h.a,{fetchOptions:async function(e){const l={search:e,status:1,perPage:10,city_id:null===E||void 0===E?void 0:E.value};return y.A.get(l).then((e=>{let{data:l}=e;return l.map((e=>{var l;return{label:(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||"no name",value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},dropdownRender:e=>(0,F.jsx)(F.Fragment,{children:e}),refetch:!0,disabled:!Boolean(null===E||void 0===E?void 0:E.value)})})})]})}),(0,F.jsx)(s.A,{span:12,children:(0,F.jsx)(u.A,{title:w("pricing"),className:"h-100",children:(0,F.jsx)(s.A,{span:24,children:(0,F.jsx)(d.A.Item,{label:"".concat(w("price")," (").concat(null===N||void 0===N?void 0:N.symbol,")"),name:"price",rules:[{required:!0,message:w("required")}],children:(0,F.jsx)(c.A,{className:"w-100"})})})})}),(0,F.jsx)(s.A,{span:12,children:(0,F.jsx)(u.A,{title:w("others"),className:"h-100",children:(0,F.jsx)(s.A,{span:24,children:(0,F.jsx)(d.A.Item,{label:w("shop"),name:"shop_id",children:(0,F.jsx)(m.G,{fetchOptions:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const l={search:e,perPage:10,page:1};return""===e.trim()&&delete l.search,x.A.getAll(l).then((e=>{var l;return null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.map((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))}})})})})})]}),(0,F.jsx)("br",{}),(0,F.jsx)("div",{className:"flex-grow-1 d-flex justify-content-end",children:(0,F.jsx)("div",{className:"pb-5",children:(0,F.jsx)(v.A,{type:"primary",htmlType:"submit",loading:B,children:w("submit")})})})]})}}}]);