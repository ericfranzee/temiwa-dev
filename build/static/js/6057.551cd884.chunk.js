"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[6057],{79406:(e,s,n)=>{n.d(s,{a:()=>u});var l=n(9950),r=n(95491),a=n.n(r),i=n(99674),t=n(90650),o=n(44414);const u=e=>{let{fetchOptions:s,debounceTimeout:n=400,refetch:r=!1,...u}=e;const[c,d]=(0,l.useState)(!1),[m,v]=(0,l.useState)([]),h=(0,l.useMemo)((()=>a()((e=>{v([]),d(!0),s(e).then((e=>{v(e),d(!1)}))}),n)),[s,n]);return(0,o.jsx)(i.A,{showSearch:!0,allowClear:!0,labelInValue:!0,onClear:()=>h(""),filterOption:!1,onSearch:h,notFoundContent:c?(0,o.jsx)(t.A,{size:"small"}):"no results",...u,options:m,onFocus:()=>{m.length&&!r||h("")}})}},47992:(e,s,n)=>{n.d(s,{G:()=>u});var l=n(9950),r=n(95491),a=n.n(r),i=n(99674),t=n(90650),o=n(44414);const u=e=>{let{fetchOptions:s,debounceTimeout:n=400,onClear:r,refetchOptions:u=!1,...c}=e;const[d,m]=(0,l.useState)(!1),[v,h]=(0,l.useState)([]),p=(0,l.useMemo)((()=>a()((e=>{h([]),m(!0),s(e).then((e=>{h(e),m(!1)}))}),n)),[s,n]);return(0,o.jsx)(i.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:p,onClear:()=>{p(""),r&&r()},notFoundContent:d?(0,o.jsx)(t.A,{size:"small"}):"no results",...c,options:v,onFocus:()=>{v.length&&!u||p("")}})}},76057:(e,s,n)=>{n.r(s),n.d(s,{default:()=>u});var l=n(70030),r=n(59233),a=n(23263),i=n(87902),t=n(84386),o=n(44414);const u=function(){const{t:e}=(0,l.B)(),[s]=r.A.useForm();return(0,o.jsx)(a.A,{title:e("add.service.master"),children:(0,o.jsx)(t.A,{form:s,onSubmit:e=>i.A.create(e)})})}},84386:(e,s,n)=>{n.d(s,{A:()=>w});var l=n(70030),r=n(91854),a=n(28429),i=n(9950),t=n(85923),o=n(74623),u=n(59233),c=n(87094),d=n(41988),m=n(40577),v=n(99674),h=n(25933),p=n(48538),A=n(47992),j=n(79406),x=n(66209),f=n(98178),b=n(75751),g=n(44414);const y=["online","offline_in","offline_out"],q=[{value:1,label:"male"},{value:2,label:"female"},{value:3,label:"all"}];const w=function(e){let{form:s,onSubmit:n,initialValues:w={}}=e;const{t:S}=(0,l.B)(),I=(0,r.wA)(),C=(0,a.Zp)(),{activeMenu:O}=(0,r.d4)((e=>e.menu)),{defaultCurrency:_}=(0,r.d4)((e=>e.currency),r.bN),k=(0,r.d4)((e=>{var s,n;return null===(s=e.myShop)||void 0===s||null===(n=s.myShop)||void 0===n?void 0:n.id}),r.bN),N=(0,i.useRef)([]),[F,V]=(0,i.useState)(!1);return(0,g.jsxs)(u.A,{onFinish:e=>{var s;V(!0);const l="seller/service-master",a={...e,shop_id:k,service_id:e.service.value,active:e.active?1:0,master_id:null===(s=e.master)||void 0===s?void 0:s.value,service:void 0,master:void 0};return n(a).then((()=>{t.oR.success("successfully.added"),(0,r.vA)((()=>{I((0,o.EK)({...O,nextUrl:l})),I((0,b.Rk)({})),C("/"+l)}))})).finally((()=>{V(!1)}))},form:s,layout:"vertical",initialValues:{active:!0},children:[(0,g.jsxs)(c.A,{gutter:24,children:[(0,g.jsx)(d.A,{span:8,children:(0,g.jsx)(u.A.Item,{label:S("master"),name:"master",rules:[{required:!0,message:S("required")}],children:(0,g.jsx)(A.G,{fetchOptions:e=>{var s;const n={page:1,perPage:20,search:null!==e&&void 0!==e&&e.length?e:void 0,role:"master",invite_status:"accepted"};return null!==e&&void 0!==e&&null!==(s=e.trim())&&void 0!==s&&s.length||delete n.search,x.A.shopUsers(n).then((e=>e.data.map((e=>({label:"".concat(null===e||void 0===e?void 0:e.firstname," ").concat(null===e||void 0===e?void 0:e.lastname),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id})))))}})})}),(0,g.jsx)(d.A,{span:8,children:(0,g.jsx)(u.A.Item,{label:S("service"),name:"service",rules:[{required:!0,message:S("required")}],children:(0,g.jsx)(j.a,{fetchOptions:e=>{const s={search:e,active:1};return f.A.getAll(s).then((e=>{const s=e.data.map((e=>({label:e.translation?e.translation.title:"no name",value:e.id,key:e.id,price:e.price,interval:e.interval,pause:e.pause,commission_fee:e.commission_fee,type:e.type,gender:e.gender})));return N.current=s,s}))},refetch:!0,onChange:e=>{var n;const l=null===(n=N.current)||void 0===n?void 0:n.find((s=>s.value===e.value));s.setFieldsValue({service:e,...l})}})})}),(0,g.jsx)(d.A,{span:8,children:(0,g.jsx)(u.A.Item,{label:S("price"),name:"price",rules:[{required:!0,message:S("required")}],children:(0,g.jsx)(m.A,{min:0,className:"w-100",addonAfter:null===_||void 0===_?void 0:_.symbol})})}),(0,g.jsx)(d.A,{span:8,children:(0,g.jsx)(u.A.Item,{label:S("interval"),name:"interval",rules:[{required:!0,message:S("required")}],children:(0,g.jsx)(m.A,{min:0,className:"w-100"})})}),(0,g.jsx)(d.A,{span:8,children:(0,g.jsx)(u.A.Item,{label:S("pause"),name:"pause",rules:[{required:!0,message:S("required")}],children:(0,g.jsx)(m.A,{min:0,className:"w-100"})})}),(0,g.jsx)(d.A,{span:8,children:(0,g.jsx)(u.A.Item,{label:"type",name:"type",rules:[{required:!0,message:S("required")}],children:(0,g.jsx)(v.A,{children:y.map(((e,s)=>(0,g.jsx)(v.A.Option,{value:e,children:e},e)))})})}),(0,g.jsx)(d.A,{span:8,children:(0,g.jsx)(u.A.Item,{label:S("commission.fee"),name:"commission_fee",children:(0,g.jsx)(m.A,{min:1,className:"w-100"})})}),(0,g.jsx)(d.A,{span:8,children:(0,g.jsx)(u.A.Item,{label:S("discount"),name:"discount",rules:[{validator:(e,s)=>void 0!==s&&(s<0||s>100)?Promise.reject(new Error(S("must.be.between.0.and.100"))):Promise.resolve()}],children:(0,g.jsx)(m.A,{min:0,className:"w-100",addonAfter:(null===_||void 0===_?void 0:_.symbol)||"$"})})}),(0,g.jsx)(d.A,{span:8,children:(0,g.jsx)(u.A.Item,{label:S("gender"),name:"gender",rules:[{required:!0,message:S("required")}],children:(0,g.jsx)(v.A,{children:q.map(((e,s)=>(0,g.jsx)(v.A.Option,{value:e.value,children:S(e.label)},e.value)))})})}),(0,g.jsx)(d.A,{span:8,children:(0,g.jsx)(u.A.Item,{label:S("active"),name:"active",valuePropName:"checked",children:(0,g.jsx)(h.A,{})})})]}),(0,g.jsx)(p.A,{type:"primary",htmlType:"submit",loading:F,children:S("submit")})]})}}}]);