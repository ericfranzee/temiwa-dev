"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[1894],{85023:(e,s,t)=>{t.d(s,{D:()=>i});var a=t(9950),n=t(99674),l=t(90650),u=t(44414);const i=e=>{let{fetchOptions:s,refetch:t=!1,value:i,...r}=e;const[d,o]=(0,a.useState)(!1),[c,m]=(0,a.useState)([]);"object"===typeof(null===i||void 0===i?void 0:i.label)&&null!==(null===i||void 0===i?void 0:i.label)&&(i.label=i.label.value);return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(n.A,{labelInValue:!0,filterOption:!1,notFoundContent:d?(0,u.jsx)(l.A,{size:"small"}):"no results",value:i,...r,options:d?[]:c,onFocus:()=>{c.length&&!t||(o(!0),s().then((e=>{m(e),o(!1)})))},getPopupContainer:e=>e.parentNode})})}},41894:(e,s,t)=>{t.r(s),t.d(s,{default:()=>N});var a=t(9950),n=t(28429),l=t(85923),u=t(59233),i=t(23263),r=t(87094),d=t(41988),o=t(40577),c=t(86971),m=t(25933),p=t(48538),x=t(91854),h=t(74623),b=t(67231),v=t(70030),j=t(59051),A=t.n(j),f=t(58358),y=t(85023),_=t(39095),g=t(44414);const N=()=>{const{t:e}=(0,v.B)(),{activeMenu:s}=(0,x.d4)((e=>e.menu),x.bN),t=(0,x.wA)(),[j]=u.A.useForm(),N=(0,n.Zp)(),[q,k]=(0,a.useState)(!1),{myShop:S}=(0,x.d4)((e=>e.myShop),x.bN);(0,a.useEffect)((()=>()=>{const e=j.getFieldsValue(!0);e.expired_at=JSON.stringify(null===e||void 0===e?void 0:e.expired_at),t((0,h.Ok)({activeMenu:s,data:e}))}),[]);return(0,g.jsx)(i.A,{title:e("add.bonus"),className:"h-100",children:(0,g.jsxs)(u.A,{name:"bonus-add",layout:"vertical",onFinish:a=>{const n={expired_at:A()(a.expired_at).format("YYYY-MM-DD"),status:a.status,type:"sum",value:a.value,bonus_stock_id:a.bonus_stock_id.value,bonus_quantity:a.bonus_quantity,bonusable_id:S.id};k(!0);const u="seller/bonus/shop";_.A.create(n).then((()=>{l.oR.success(e("successfully.created")),t((0,h.EK)({...s,nextUrl:u})),N("/".concat(u)),t((0,f.S)())})).finally((()=>k(!1)))},form:j,initialValues:{status:!0,...s.data,...(()=>{var e,t;if(null===(e=s.data)||void 0===e||!e.expired_at)return{};const a=JSON.parse(null===(t=s.data)||void 0===t?void 0:t.expired_at);return{expired_at:A()(a,"HH:mm:ss")}})()},className:"d-flex flex-column h-100",children:[(0,g.jsxs)(r.A,{gutter:12,children:[(0,g.jsx)(d.A,{span:12,children:(0,g.jsx)(u.A.Item,{label:e("order_amount"),name:"value",rules:[{required:!0,message:e("required")},{type:"number",min:1,message:e("min.1")}],children:(0,g.jsx)(o.A,{className:"w-100"})})}),(0,g.jsx)(d.A,{span:12,children:(0,g.jsx)(u.A.Item,{label:e("bonus.product.stock"),name:"bonus_stock_id",rules:[{required:!0,message:e("required")}],children:(0,g.jsx)(y.D,{fetchOptions:function(){return b.A.getStock({active:1,status:"published"}).then((e=>e.data.map((e=>({label:e.product.translation.title+"".concat(e.extras.length>0?": ".concat(e.extras.map((e=>e.value)).join(", ")):""),value:e.id})))))},debounceTimeout:200})})}),(0,g.jsx)(d.A,{span:12,children:(0,g.jsx)(u.A.Item,{label:e("bonus.product.quantity"),name:"bonus_quantity",rules:[{required:!0,message:e("required")},{type:"number",min:1,message:e("min.1")}],children:(0,g.jsx)(o.A,{className:"w-100"})})}),(0,g.jsx)(d.A,{span:12,children:(0,g.jsx)(u.A.Item,{name:"expired_at",label:e("expired.at"),rules:[{required:!0,message:e("required")}],children:(0,g.jsx)(c.A,{className:"w-100",placeholder:"",disabledDate:e=>A()().add(-1,"days")>=e})})}),(0,g.jsx)(d.A,{span:12,children:(0,g.jsx)(u.A.Item,{label:e("active"),name:"status",valuePropName:"checked",children:(0,g.jsx)(m.A,{})})})]}),(0,g.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,g.jsx)("div",{className:"pb-5",children:(0,g.jsx)(p.A,{type:"primary",htmlType:"submit",loading:q,children:e("submit")})})})]})})}}}]);