(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[1642],{85023:(e,t,l)=>{"use strict";l.d(t,{D:()=>o});var n=l(9950),s=l(99674),a=l(90650),i=l(44414);const o=e=>{let{fetchOptions:t,refetch:l=!1,value:o,...d}=e;const[r,c]=(0,n.useState)(!1),[u,v]=(0,n.useState)([]);"object"===typeof(null===o||void 0===o?void 0:o.label)&&null!==(null===o||void 0===o?void 0:o.label)&&(o.label=o.label.value);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(s.A,{labelInValue:!0,filterOption:!1,notFoundContent:r?(0,i.jsx)(a.A,{size:"small"}):"no results",value:o,...d,options:r?[]:u,onFocus:()=>{u.length&&!l||(c(!0),t().then((e=>{v(e),c(!1)})))},getPopupContainer:e=>e.parentNode})})}},28257:(e,t,l)=>{"use strict";l.d(t,{A:()=>m});l(9950);var n=l(84619),s=l(96011),a=l.n(s),i=l(63620);var o=l(91854),d=l(99674),r=l(59233),c=l(74635),u=l(44414);const v=i.bo?{componentRestrictions:{country:i.bo}}:{},m=e=>{let{value:t,setValue:l,setLocation:s,withLanguages:m=!0}=e;const{placePredictions:p,getPlacePredictions:h,isPlacePredictionsLoading:x}=(0,n.A)({apiKey:i.CJ,libraries:["places","geocode"],options:v}),{defaultLang:j,languages:g}=(0,o.d4)((e=>e.formLang),o.bN),A=()=>(0,u.jsx)(d.A,{allowClear:!0,searchValue:t,showSearch:!0,autoClearSearchValue:!0,loading:x,options:null===p||void 0===p?void 0:p.map((e=>({label:e.description,value:e.description}))),onSearch:e=>{l(e),e.length>0&&h({input:e})},onSelect:async e=>{const t=await async function(e){let t={address:e,key:arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.CJ};return a().get("https://maps.googleapis.com/maps/api/geocode/json",{params:t}).then((e=>{let{data:t}=e;return t.results[0]})).catch((e=>"not found"))}(e);s({lat:null===t||void 0===t?void 0:t.geometry.location.lat,lng:null===t||void 0===t?void 0:t.geometry.location.lng})},getPopupContainer:e=>e.parentNode});return m?(0,u.jsx)(u.Fragment,{children:g.map(((e,t)=>(0,u.jsx)(r.A.Item,{label:(0,c.t)("address"),name:"address[".concat(e.locale,"]"),rules:[{required:e.locale===j,message:(0,c.t)("required")}],hidden:e.locale!==j,children:A()},"address"+t)))}):(0,u.jsx)(r.A.Item,{label:(0,c.t)("address"),name:"address",rules:[{required:!0,message:(0,c.t)("required")}],children:A()})}},78498:(e,t,l)=>{"use strict";l.d(t,{A:()=>x});var n=l(9950),s=l(97239);const a=l.p+"static/media/pin.0e41858db80c699cd8a2.png";var i=l(96011),o=l.n(i),d=l(63620);async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.CJ,l={latlng:"".concat(null===e||void 0===e?void 0:e.lat,",").concat(null===e||void 0===e?void 0:e.lng),key:t};return o().get("https://maps.googleapis.com/maps/api/geocode/json",{params:l}).then((e=>{var t;let{data:l}=e;return null===(t=l.results[0])||void 0===t?void 0:t.formatted_address})).catch((e=>"not found"))}var c=l(39174),u=l(85923),v=l(70030),m=l(6566),p=l(44414);const h=(0,m.A)();const x=(0,s.GoogleApiWrapper)({apiKey:h,libraries:["places","geometry"]})((function(e){var t,l;const[i,o]=(0,n.useState)(),{t:d}=(0,v.B)(),m=async()=>{await navigator.geolocation.getCurrentPosition((function(e){const t={lat:e.coords.latitude,lng:e.coords.longitude};o(t)}),(function(e){u.oR.warning(d("turn.on.gps"))}))};(0,n.useEffect)((()=>{m()}),[]);const x=[{lat:Number(null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.lat)||0,lng:Number(null===e||void 0===e||null===(l=e.location)||void 0===l?void 0:l.lng)||0}];for(var j=new e.google.maps.LatLngBounds,g=0;g<x.length;g++)j.extend(x[g]);return(0,p.jsxs)("div",{className:"map-container",style:{height:400,width:"100%"},children:[(0,p.jsx)("button",{className:"map-button",type:"button",onClick:()=>{m(),i&&(async t=>{const l={lat:null===t||void 0===t?void 0:t.lat,lng:null===t||void 0===t?void 0:t.lng};e.setLocation(l);const n=await r(l,h);e.setAddress(n)})(i)},children:(0,p.jsx)(c.uFi,{})}),(0,p.jsx)(s.Map,{cursor:"pointer",onClick:async(t,l,n)=>{const{latLng:s}=n,a={lat:s.lat(),lng:s.lng()};e.setLocation(a);const i=await r(a,h);e.setAddress(i)},google:e.google,defaultZoom:12,zoom:10,className:"clickable",initialCenter:e.location,center:e.location,children:(0,p.jsx)(s.Marker,{position:e.location,icon:{url:a,scaledSize:new e.google.maps.Size(32,32)},className:"marker"})})]})}))},8297:(e,t,l)=>{"use strict";l.d(t,{A:()=>d});var n=l(9950),s=l(55902),a=l(41397),i=l(60767),o=l(44414);function d(e){let{handleChange:t,defaultValue:l,resetSearch:d,...r}=e;const[c,u]=(0,n.useState)(l),v=(0,n.useMemo)((()=>(0,a.debounce)((e=>{t(e)}),800)),[]);return(0,n.useEffect)((()=>{u(l)}),[d]),(0,o.jsx)(s.A,{value:c,onChange:e=>{u(e.target.value),v(e.target.value)},prefix:(0,o.jsx)(i.A,{}),...r})}},47992:(e,t,l)=>{"use strict";l.d(t,{G:()=>r});var n=l(9950),s=l(95491),a=l.n(s),i=l(99674),o=l(90650),d=l(44414);const r=e=>{let{fetchOptions:t,debounceTimeout:l=400,onClear:s,refetchOptions:r=!1,...c}=e;const[u,v]=(0,n.useState)(!1),[m,p]=(0,n.useState)([]),h=(0,n.useMemo)((()=>a()((e=>{p([]),v(!0),t(e).then((e=>{p(e),v(!1)}))}),l)),[t,l]);return(0,d.jsx)(i.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:h,onClear:()=>{h(""),s&&s()},notFoundContent:u?(0,d.jsx)(o.A,{size:"small"}):"no results",...c,options:m,onFocus:()=>{m.length&&!r||h("")}})}},80415:(e,t,l)=>{"use strict";l.d(t,{G:()=>i,HV:()=>s,LH:()=>n,PR:()=>a,wO:()=>d,xt:()=>o});const n={new:[1,2,3,4,5],accepted:[1,2,3,4,5],ready:[1,2,3,4,5],on_a_way:[1,2,3,4,5],delivered:[1,2,3,4,5],canceled:[1,2,3,4,5],cooking:[1,2,3,4,5]},s=(new Date,new Date,["new","accepted","ready","on_a_way","pause","delivered","canceled"]),a=30,i="HH:mm",o="hh:mm a",d=!0},51066:(e,t,l)=>{"use strict";l.d(t,{Q:()=>a});var n=l(17706),s=l(80415);const a=()=>{var e,t,l,a;return null!==(e=null===(t=n.M.getState())||void 0===t||null===(l=t.globalSettings)||void 0===l||null===(a=l.settings)||void 0===a?void 0:a.hour_format)&&void 0!==e?e:s.G}},6566:(e,t,l)=>{"use strict";l.d(t,{A:()=>s});var n=l(17706);const s=()=>{var e,t;const l={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IS_DEMO:"false"}.MAP_API_KEY,{google_map_key:s}=null===(e=n.M.getState())||void 0===e||null===(t=e.globalSettings)||void 0===t?void 0:t.settings;return s||l}},8808:(e,t,l)=>{"use strict";l.d(t,{O:()=>a});var n=l(59051),s=l.n(n);const a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const l=t/3600;let n,a;l>=168?(n="weeks",a=l/168):l>=24?(n="days",a=l/24):l>=1?(n="hours",a=l):(n="minutes",a=t);return s()(e).add(a,n).toDate()}},31281:(e,t,l)=>{"use strict";function n(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const n=e.map((e=>({[e.locale]:""===t["".concat(l,"[").concat(e.locale,"]")]?void 0:t["".concat(l,"[").concat(e.locale,"]")]})));return Object.assign({},...n)}l.d(t,{A:()=>n})},53774:(e,t,l)=>{"use strict";function n(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const l=Number(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===t?"".concat(l," ").concat(e):"".concat(e," ").concat(l)}l.r(t),l.d(t,{default:()=>n})},66136:(e,t,l)=>{"use strict";l.d(t,{A:()=>s});var n=l(82371);const s={getAll:e=>n.A.get("rest/form-options",{params:e}),getById:e=>n.A.get("rest/form-options/".concat(e))}},74142:(e,t,l)=>{"use strict";l.d(t,{A:()=>a});var n=l(82371);const s="rest/services",a={getAll:e=>n.A.get(s,{params:e}),getById:(e,t)=>n.A.get("".concat(s,"/").concat(e),{params:t}),create:e=>n.A.post(s,e,{}),update:(e,t)=>n.A.put("".concat(s,"/").concat(e),t,{}),delete:e=>n.A.delete("".concat(s,"/delete"),{params:e}),statusChange:(e,t)=>n.A.put("".concat(s,"/").concat(e),t)}},4347:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>jt});var n=l(9950),s=l(81419),a=l(9083),i=l(82706),o=l(48538),d=l(74635),r=l(59051),c=l.n(r),u=l(39427),v=l(51066),m=l(44414);const p=()=>{var e;const{selectedSlots:t,isModalOpen:l,setIsModalOpen:r,setViewContent:p}=(0,n.useContext)(u.BookingContext),h=(0,v.Q)(),x=e=>{p(e),r(!1)};return(0,m.jsxs)(i.A,{title:"".concat(null===(e=c()(null===t||void 0===t?void 0:t.start))||void 0===e?void 0:e.format(h)),visible:l,onOk:()=>{r(!1)},onCancel:()=>{r(!1)},width:280,footer:null,className:"calendar-modal",children:[(0,m.jsx)(o.A,{type:"text",className:"w-100",icon:(0,m.jsx)(s.A,{}),onClick:()=>x("addService"),style:{borderRadius:0,textAlign:"left",fontSize:16},children:(0,d.t)("add.booking")}),(0,m.jsx)(o.A,{type:"text",className:"w-100",icon:(0,m.jsx)(a.A,{}),onClick:()=>x("blockTime"),style:{borderRadius:0,textAlign:"left",fontSize:16},children:(0,d.t)("add.blocked.time")})]})};l(66379);var h=l(91854),x=l(1753),j=l(23263),g=l(90650),A=l(44071),f=l(48139),y=l(28429),_=l(48676);const b=()=>{const e=(0,y.Zp)(),t=(0,h.wA)(),l=(0,A.ye)(c()),{bookingList:s,loading:a}=(0,h.d4)((e=>e.booking)),{disabledTimes:i}=(0,h.d4)((e=>e.disabledTimes)),{infoForm:o,setIsLoading:d,setViewContent:r,setIsModalOpen:p,setSelectedSlots:x,setCalculatedData:b,setServiceData:w}=(0,n.useContext)(u.BookingContext),C=(0,v.Q)(),k=(0,n.useCallback)((t=>{if(t.disabled)return r("updateBlockTime"),void e("?disabled_slot_id=".concat(t.id));r("updateForm"),d(!0),e("?service_id=".concat(t.id)),f.A.getBookingById(t.parent_id).then((e=>{var l,n,s,a,i,r,u,v,m,p,h,j,g,A,y,_,C,k,S,D,N,I,F,T,B,M,O,Y,q;let{data:V}=e;w(V),x({start:V[(null===V||void 0===V?void 0:V.length)-1].start_date,end:V[(null===V||void 0===V?void 0:V.length)-1].end_date}),((e,t)=>{f.A.calculate({user_id:e.user_id,payment_id:e.payment_id,data:t.map((e=>({data:e.data,note:e.note,service_master_id:e.service_master.id,start_date:c().utc(null===e||void 0===e?void 0:e.start_date).format("YYYY-MM-DD HH:mm")}))),ids:e.ids}).then((e=>{let{data:l}=e;const n=l.items.map(((e,l)=>({...e,...t[l],booking_id:t[l].id,status:t[l].status,type:t[l].type,notes:t[l].notes})));b({...l,items:n})})).catch((e=>{console.error(e)})).finally((()=>d(!1)))})({user_id:null===(l=V[0])||void 0===l?void 0:l.user_id,start:null===(n=V[0])||void 0===n?void 0:n.start_date,payment_id:null===(s=V[0])||void 0===s||null===(a=s.transaction)||void 0===a||null===(i=a.payment_system)||void 0===i?void 0:i.id,ids:V.map((e=>e.id))},V),o.setFieldsValue({id:t.parent_id,shop:{label:null===(r=V[0])||void 0===r||null===(u=r.shop)||void 0===u||null===(v=u.translation)||void 0===v?void 0:v.title,value:null===(m=V[0])||void 0===m||null===(p=m.shop)||void 0===p?void 0:p.id,key:null===(h=V[0])||void 0===h||null===(j=h.shop)||void 0===j?void 0:j.id},client:{label:"".concat(null===(g=V[0])||void 0===g||null===(A=g.user)||void 0===A?void 0:A.firstname," ").concat(null===(y=V[0])||void 0===y||null===(_=y.user)||void 0===_?void 0:_.lastname),value:null===(C=V[0])||void 0===C||null===(k=C.user)||void 0===k?void 0:k.id,key:null===(S=V[0])||void 0===S||null===(D=S.user)||void 0===D?void 0:D.id},payment_id:{label:(null===(N=V[0])||void 0===N||null===(I=N.transaction)||void 0===I||null===(F=I.payment_system)||void 0===F?void 0:F.tag)||"cash",value:null===(T=V[0])||void 0===T||null===(B=T.transaction)||void 0===B||null===(M=B.payment_system)||void 0===M?void 0:M.id,key:null===(O=V[0])||void 0===O||null===(Y=O.transaction)||void 0===Y||null===(q=Y.payment_system)||void 0===q?void 0:q.id}})})).catch((e=>{console.log(e)}))}),[]),{defaultDate:S,scrollToTime:D}=(0,n.useMemo)((()=>({defaultDate:new Date,scrollToTime:new Date})),[]);return(0,n.useEffect)((()=>{t((0,_.aT)({perPage:100}))}),[t]),(0,m.jsx)(j.A,{className:"h-100",children:(0,m.jsx)(g.A,{spinning:a,children:(0,m.jsx)(A.Vv,{localizer:l,startAccessor:"start",endAccessor:"end",defaultDate:S,events:[...s,...i],onSelectEvent:k,onSelectSlot:e=>{let{start:t,end:l}=e;p(!0),x({start:t,end:l})},selectable:!0,scrollToTime:D,timeslots:3,step:30,defaultView:"day",eventPropGetter:(e,t,l,n)=>e.disabled?{className:"disabled-slot"}:"",formats:{timeGutterFormat:C,eventTimeRangeFormat:e=>{let{start:t,end:l}=e;return"".concat(c()(t).format(C)," - ").concat(c()(l).format(C))}}})})})};var w=l(52695);const C=e=>{let{children:t,open:l,setOpen:s,footer:a}=e;const i=(0,y.Zp)(),{setCalculatedData:o}=(0,n.useContext)(u.BookingContext);return(0,m.jsx)(w.A,{onClose:()=>{s(""),i("/seller/calendar"),o({})},visible:l,className:"drawer-view",width:600,headerStyle:{display:"none"},footer:a,destroyOnClose:!0,children:t})};var k=l(59233),S=l(55902),D=l(47992),N=l(8750),I=l(66362),F=l(87094),T=l(41988),B=l(99674),M=(l(13567),l(76214),l(50686)),O=l(74142),Y=(l(55660),l(66209)),q=l(43957),V=l(39362),L=l.n(V);async function H(e){const t={search:e,perPage:10};return Y.A.getAll(t).then((e=>{let{data:t}=e;return t.map((e=>({label:"".concat(null===e||void 0===e?void 0:e.firstname," ").concat(null===e||void 0===e?void 0:e.lastname),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id})))}))}async function P(e){let{service_id:t,shop_id:l,search:n}=e;const s={perPage:10,role:"master",search:null!==n&&void 0!==n&&n.length?n:void 0,service_id:t,shop_id:l};return M.A.getAll(s).then((e=>{let{data:t}=e;return t.map((e=>({label:"".concat(null===e||void 0===e?void 0:e.firstname," ").concat(null===e||void 0===e?void 0:e.lastname),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id})))}))}const E=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return await O.A.getAll(e).then((e=>{let{data:l}=e;return null===l||void 0===l?void 0:l.map((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:"".concat(null===e||void 0===e?void 0:e.id," ").concat(e.type),disabled:!(null===t||void 0===t||!t.length)&&!(null===t||void 0===t||!t.find((t=>{var l,n;return(null===t||void 0===t||null===(l=t.service_master)||void 0===l||null===(n=l.service)||void 0===n?void 0:n.id)===(null===e||void 0===e?void 0:e.id)})))}}))}))};var R=l(40895),z=l(53774),U=l(24513),W=l(98178);const G=e=>{var t,l,s,a,i,r,v,p,x,g,A,y,_,b,w,C,k;let{item:S}=e;const{setViewContent:D,serviceForm:N,service_id:I,setUpdateStatus:F,setSelectedService:T}=(0,n.useContext)(u.BookingContext),{defaultCurrency:B}=(0,h.d4)((e=>e.currency),h.bN),M=e=>{I&&(D("updateService"),f.A.getById(e).then((t=>{var l,n,s,a,i,o,r,u,v,m,p,h,x,j,g,A,f,y,_;let{data:b}=t;var w,C;null!==b&&void 0!==b&&null!==(l=b.service_master)&&void 0!==l&&null!==(n=l.service)&&void 0!==n&&n.id&&(e=>{W.A.getById(e).then((e=>{T(e.data)})).catch((e=>{console.log(e)}))})(null===b||void 0===b||null===(w=b.service_master)||void 0===w||null===(C=w.service)||void 0===C?void 0:C.id);N.setFieldsValue({id:e,shop:{key:null===b||void 0===b||null===(s=b.shop)||void 0===s?void 0:s.id,value:null===b||void 0===b||null===(a=b.shop)||void 0===a?void 0:a.id,label:null===b||void 0===b||null===(i=b.shop)||void 0===i||null===(o=i.translation)||void 0===o?void 0:o.title},service:{key:null===b||void 0===b||null===(r=b.service_master)||void 0===r||null===(u=r.service)||void 0===u?void 0:u.id,value:null===b||void 0===b||null===(v=b.service_master)||void 0===v||null===(m=v.service)||void 0===m?void 0:m.id,label:null===b||void 0===b||null===(p=b.service_master)||void 0===p||null===(h=p.service)||void 0===h||null===(x=h.translation)||void 0===x?void 0:x.title},extras:null!==b&&void 0!==b&&null!==(j=b.extras)&&void 0!==j&&j.length?null===b||void 0===b||null===(g=b.extras)||void 0===g?void 0:g.map((e=>{var t;return{key:null===e||void 0===e?void 0:e.service_extra_id,value:null===e||void 0===e?void 0:e.service_extra_id,label:(null===e||void 0===e||null===(t=e.translation)||void 0===t?void 0:t.title)||(0,d.t)("N/A")}})):[],master:{key:null===b||void 0===b||null===(A=b.master)||void 0===A?void 0:A.id,value:null===b||void 0===b||null===(f=b.master)||void 0===f?void 0:f.id,label:"".concat(null===b||void 0===b||null===(y=b.master)||void 0===y?void 0:y.firstname," ").concat(null===b||void 0===b||null===(_=b.master)||void 0===_?void 0:_.lastname)},end_date:c()(null===b||void 0===b?void 0:b.end_date).utc(),start_date:c()(null===b||void 0===b?void 0:b.start_date).utc(),note:null===b||void 0===b?void 0:b.note})})).catch((e=>{console.log(e)})))};return(0,m.jsx)(j.A,{className:"service-card ".concat(Boolean((null===(t=S.errors)||void 0===t?void 0:t.length)>0)&&!I&&"error"),children:(0,m.jsxs)("ul",{className:"mb-0",children:[(0,m.jsxs)("li",{className:"mb-3 flex justify-content-between gap-2",children:[(0,m.jsx)("strong",{className:"font-size-5",children:null===(l=S.service_master)||void 0===l||null===(s=l.service)||void 0===s||null===(a=s.translation)||void 0===a?void 0:a.title}),(0,m.jsx)(o.A,{icon:(0,m.jsx)(U.A,{}),onClick:()=>M(S.booking_id),children:(0,d.t)("edit")})]}),(0,m.jsx)("li",{children:"".concat(c().parseZone(S.start_date).format("LT")," - ").concat(c().parseZone(S.end_date).format("LT")," (").concat(null===S||void 0===S||null===(i=S.service_master)||void 0===i?void 0:i.interval,"min + ").concat(null===S||void 0===S||null===(r=S.service_master)||void 0===r?void 0:r.pause,"min processing time)")}),(null===S||void 0===S?void 0:S.status)&&(0,m.jsxs)("li",{className:"mt-2 d-flex gap-2",children:[(0,m.jsxs)("span",{children:[(0,d.t)("status"),":"]}),(0,d.t)(null===S||void 0===S?void 0:S.status)," ",(0,m.jsx)(U.A,{onClick:e=>(e=>{e.stopPropagation(),F({status:S.status,booking_id:S.booking_id})})(e),className:"edit-icon"})]}),(null===S||void 0===S?void 0:S.type)&&(0,m.jsxs)("li",{className:"mt-2 d-flex gap-2",children:[(0,m.jsxs)("span",{children:[(0,d.t)("type"),":"]}),(0,d.t)(null===S||void 0===S?void 0:S.type)]}),(0,m.jsxs)("li",{className:"mt-2 d-flex gap-2",children:[(0,m.jsxs)("span",{children:[(0,d.t)("master.fullname"),":"]}),(0,d.t)(null===S||void 0===S||null===(v=S.master)||void 0===v?void 0:v.full_name)]}),(0,m.jsxs)("li",{className:"mt-2 d-flex gap-2",children:[(0,m.jsxs)("span",{children:[(0,d.t)("service.name"),":"]}),(0,d.t)(null===S||void 0===S||null===(p=S.service_master)||void 0===p||null===(x=p.service)||void 0===x||null===(g=x.translation)||void 0===g?void 0:g.title)]}),!(null===S||void 0===S||null===(A=S.extras)||void 0===A||!A.length)&&(null===S||void 0===S||null===(y=S.extras)||void 0===y?void 0:y.map((e=>{var t;return(0,m.jsxs)("li",{className:"mt-2 d-flex gap-2",children:[(0,m.jsxs)("span",{children:[(0,d.t)("extra"),":"]}),(0,d.t)(null===e||void 0===e||null===(t=e.translation)||void 0===t?void 0:t.title)," -"," ",(0,z.default)(null===e||void 0===e?void 0:e.price,null===B||void 0===B?void 0:B.symbol,null===B||void 0===B?void 0:B.position)]})}))),(0,m.jsxs)("li",{className:"mt-2 d-flex gap-2",children:[(0,m.jsxs)("span",{children:[(0,d.t)("client"),":"]}),(0,d.t)(null===S||void 0===S||null===(_=S.user)||void 0===_?void 0:_.full_name)]}),(0,m.jsxs)("li",{className:"mt-2 d-flex gap-2",children:[(0,m.jsxs)("span",{children:[(0,d.t)("payment.type"),":"]}),(0,d.t)((null===S||void 0===S||null===(b=S.transaction)||void 0===b||null===(w=b.payment_system)||void 0===w?void 0:w.tag)||"cash")]}),(0,m.jsxs)("li",{className:"mt-2 d-flex gap-2",children:[(0,m.jsxs)("span",{children:[(0,d.t)("transaction.status"),":"]}),(0,d.t)((null===S||void 0===S||null===(C=S.transaction)||void 0===C?void 0:C.status)||"progress")]}),(0,m.jsxs)("li",{className:"mt-2 d-flex gap-2",children:[(0,m.jsxs)("span",{children:[(0,d.t)("commission.fee"),":"]}),(0,z.default)(null===S||void 0===S?void 0:S.commission_fee,null===B||void 0===B?void 0:B.symbol,null===B||void 0===B?void 0:B.position)]}),(0,m.jsxs)("li",{className:"mt-2 d-flex gap-2",children:[(0,m.jsxs)("span",{children:[(0,d.t)("discount"),":"]}),(0,z.default)(null===S||void 0===S?void 0:S.discount,null===B||void 0===B?void 0:B.symbol,null===B||void 0===B?void 0:B.position)]}),(0,m.jsxs)("li",{className:"mt-2 d-flex gap-2",children:[(0,m.jsxs)("span",{children:[(0,d.t)("gift.cart.price"),":"]}),(0,z.default)(null===S||void 0===S?void 0:S.gift_cart_price,null===B||void 0===B?void 0:B.symbol,null===B||void 0===B?void 0:B.position)]}),(0,m.jsxs)("li",{className:"mt-2 d-flex gap-2",children:[(0,m.jsxs)("span",{children:[(0,d.t)("service.fee"),":"]}),(0,z.default)(null===S||void 0===S?void 0:S.service_fee,null===B||void 0===B?void 0:B.symbol,null===B||void 0===B?void 0:B.position)]}),(0,m.jsxs)("li",{className:"mt-2 d-flex gap-2",children:[(0,m.jsxs)("span",{children:[(0,d.t)("service.master.price"),":"]}),(0,z.default)(null===S||void 0===S?void 0:S.service_master.price,null===B||void 0===B?void 0:B.symbol,null===B||void 0===B?void 0:B.position)]}),(0,m.jsx)(R.A,{}),(0,m.jsxs)("li",{className:"mt-2 d-flex gap-2",children:[(0,m.jsxs)("strong",{children:[(0,d.t)("total.price"),":"]}),(0,z.default)(null===S||void 0===S?void 0:S.total_price,null===B||void 0===B?void 0:B.symbol,null===B||void 0===B?void 0:B.position)]}),!I&&(0,m.jsx)("div",{className:"error-list",children:null===(k=S.errors)||void 0===k?void 0:k.map(((e,t)=>(0,m.jsx)("li",{children:e},t)))})]})})},{Title:K}=I.A,Z=e=>{var t;let{isDisabled:l,title:s="new.booking",isAdd:a=!1}=e;const{calculatedData:i,setViewContent:r,setInfoData:c,infoForm:v,service_id:p}=(0,n.useContext)(u.BookingContext),[h,x]=(0,n.useState)(!1);return(0,m.jsxs)(F.A,{gutter:12,children:[(0,m.jsxs)(T.A,{span:24,className:"mb-4 d-flex justify-content-between align-items-center",children:[(0,m.jsx)(K,{level:2,children:(0,d.t)(s)}),!!p&&(0,m.jsx)(o.A,{htmlType:"button",onClick:async()=>{x(!0),await async function(e){return q.A.downloadInvoice(e).then((t=>L()(t,"booking-invoice-".concat(e,".pdf"),"application/pdf")))}(p).finally((()=>{x(!1)}))},loading:h,children:(0,d.t)("download.invoice")})]}),(0,m.jsx)(T.A,{span:24,children:(0,m.jsx)(k.A.Item,{name:"client",label:(0,d.t)("select.client"),placeholder:(0,d.t)("select.client"),rules:[{required:!0,message:(0,d.t)("required")}],children:(0,m.jsx)(D.G,{disabled:!a,fetchOptions:H,style:{width:"100%"}})})}),(0,m.jsx)(T.A,{span:24,children:(0,m.jsx)(k.A.Item,{name:"payment_id",rules:[{required:!0,message:(0,d.t)("required")}],label:(0,d.t)("payment"),children:(0,m.jsx)(B.A,{placeholder:(0,d.t)("select.payment.type"),disabled:!a,children:(0,m.jsx)(B.A.Option,{value:1,children:(0,d.t)("cash")})})})}),null===i||void 0===i||null===(t=i.items)||void 0===t?void 0:t.map((e=>(0,m.jsx)(T.A,{span:24,children:(0,m.jsx)(G,{item:e})},e.id))),a&&(0,m.jsx)(T.A,{span:24,children:(0,m.jsx)(o.A,{block:!0,type:"dashed",icon:(0,m.jsx)(N.A,{}),disabled:l,onClick:()=>{c(null===v||void 0===v?void 0:v.getFieldsValue()),r("serviceForm")},children:(0,d.t)("add.service")})})]})},Q=()=>{const{infoForm:e,setCalculatedData:t,setIsUpdate:l,setOpenService:s,isLoalding:a,calculatedData:i}=(0,n.useContext)(u.BookingContext),o=k.A.useWatch("client",e),d=k.A.useWatch("payment_id",e);return(0,m.jsx)(g.A,{spinning:a,children:(0,m.jsxs)(k.A,{form:e,layout:"vertical",onFinish:n=>{const s={user_id:n.client.value,payment_id:n.payment_id.value,data:null===i||void 0===i?void 0:i.items.map((e=>{var t;return{note:e.note,data:e.data,service_master_id:null===(t=e.service_master)||void 0===t?void 0:t.id}})),start_date:null===i||void 0===i?void 0:i.start_date};f.A.update(n.id,s).then((()=>{l(!1),e.resetFields(),t({})})).catch((e=>{console.error(e)}))},children:[(0,m.jsx)(k.A.Item,{name:"id",className:"d-none",children:(0,m.jsx)(S.A,{})}),(0,m.jsx)(Z,{title:"update.booking",setOpenService:s,isDisabled:!(o&&d)})]})})};var J=l(12916),$=l(86971),X=l(85023),ee=l(35821),te=l(80415);const{Title:le}=I.A,ne=e=>{var t,l;let{shop:n,setViewContent:s,getServiceByID:a,getMasterByID:i,selectedService:o,form:r}=e;return(0,m.jsxs)(F.A,{gutter:12,children:[(0,m.jsxs)(T.A,{span:24,children:[(0,m.jsx)(J.A,{icon:(0,m.jsx)(ee.A,{}),onClick:()=>{r.resetFields(),s("updateForm")}}),(0,m.jsx)(le,{className:"my-4",level:2,children:(0,d.t)("edit.service")})]}),(0,m.jsx)(T.A,{span:12,children:(0,m.jsx)(k.A.Item,{name:"service",label:(0,d.t)("select.service"),placeholder:(0,d.t)("select.service"),rules:[{required:!0,message:(0,d.t)("required")}],children:(0,m.jsx)(X.D,{refetch:!0,disabled:!n,className:"w-100",onChange:e=>{a(e),r.setFieldsValue({extras:[]})},fetchOptions:()=>E()})})}),(0,m.jsx)(T.A,{span:12,children:(0,m.jsx)(k.A.Item,{name:"extras",label:(0,d.t)("select.service.extras"),children:(0,m.jsx)(B.A,{disabled:!(null!==o&&void 0!==o&&null!==(t=o.service_extras)&&void 0!==t&&t.length),options:null===o||void 0===o||null===(l=o.service_extras)||void 0===l?void 0:l.map((e=>{var t;return{label:(null===e||void 0===e||null===(t=e.translation)||void 0===t?void 0:t.title)||(0,d.t)("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}})),labelInValue:!0,placeholder:(0,d.t)("select.extra"),mode:"multiple"})})}),(0,m.jsx)(T.A,{span:12,children:(0,m.jsx)(k.A.Item,{name:"master",label:(0,d.t)("select.master"),placeholder:(0,d.t)("select.master"),rules:[{required:!0,message:(0,d.t)("required")}],children:(0,m.jsx)(X.D,{refetch:!0,className:"w-100",disabled:!o,onChange:e=>i(e),fetchOptions:()=>P({service_id:null===o||void 0===o?void 0:o.id})})})}),(0,m.jsx)(T.A,{span:12,children:(0,m.jsx)(k.A.Item,{label:(0,d.t)("start.date"),name:"start_date",rules:[{required:!0,message:(0,d.t)("required")}],children:(0,m.jsx)($.A,{format:"YYYY-MM-DD ".concat(te.xt),use12Hours:te.wO,className:"w-100",showTime:!0})})}),(0,m.jsx)(T.A,{span:12,children:(0,m.jsx)(k.A.Item,{label:(0,d.t)("end.date"),name:"end_date",rules:[{required:!0,message:(0,d.t)("required")}],children:(0,m.jsx)($.A,{format:"YYYY-MM-DD ".concat(te.xt),use12Hours:te.wO,className:"w-100",showTime:!0})})}),(0,m.jsx)(T.A,{span:24,children:(0,m.jsx)(k.A.Item,{name:"note",label:(0,d.t)("note"),rules:[{required:!1,message:(0,d.t)("required")}],children:(0,m.jsx)(S.A.TextArea,{})})})]})};var se=l(54764);const ae=()=>{const e=(0,h.wA)(),{serviceForm:t,setCalculatedData:l,setViewContent:s,isLoalding:a}=(0,n.useContext)(u.BookingContext),[i,o]=(0,n.useState)(null),[d,r]=(0,n.useState)(null),v=k.A.useWatch("shop",t);return(0,m.jsx)(g.A,{spinning:a,children:(0,m.jsxs)(k.A,{form:t,layout:"vertical",onFinish:n=>{var a,i,o;const r={note:null===n||void 0===n?void 0:n.note,service_master_id:null===d||void 0===d||null===(a=d.service_master)||void 0===a?void 0:a.id,end_date:c()(n.end_date).format("YYYY-MM-DD HH:mm"),start_date:c()(n.start_date).format("YYYY-MM-DD HH:mm"),service_extras:null!==n&&void 0!==n&&null!==(i=n.extras)&&void 0!==i&&i.length?null===n||void 0===n||null===(o=n.extras)||void 0===o?void 0:o.map((e=>e.value)):void 0};f.A.update(n.id,r).then((()=>{s(""),t.resetFields(),l({}),e((0,x.ny)({}))})).catch((e=>{console.error(e)}))},children:[(0,m.jsx)(k.A.Item,{name:"id",className:"d-none",children:(0,m.jsx)(S.A,{})}),(0,m.jsx)(ne,{form:t,shop:v,setViewContent:s,getMasterByID:e=>{M.A.getById(e.value).then((e=>{let{data:t}=e;const l=null===t||void 0===t?void 0:t.service_masters.find((e=>e.service_id===i.id));r({...t,service_master:l})})).catch((e=>{console.log(e)}))},getServiceByID:e=>{se.A.getById(e.value).then((e=>{o(e.data)})).catch((e=>{console.log(e)}))},selectedService:i})]})})};var ie=l(44070),oe=l(92759),de=l(78003);const{useContext:re,useState:ce}=l(9950),{BookingContext:ue}=l(39427),{default:ve}=l(53774),me=()=>{const e=(0,h.wA)(),[t,l]=ce(),{calculatedData:n,sumInterval:s,service_id:a,setViewContent:i}=re(ue);return(0,m.jsxs)("div",{className:"w-100 d-flex between my-2",children:[(0,m.jsx)(de.A,{title:(0,d.t)("delete.the.booking"),onConfirm:()=>{l(!0),f.A.delete({"ids[0]":a}).then((()=>{i(""),e((0,x.ny)()),oe.Ay.success((0,d.t)("booking.successfully.delete"))})).catch((e=>{console.log(e)})).finally((()=>l(!1)))},okText:(0,d.t)("yes"),cancelText:(0,d.t)("no"),children:(0,m.jsx)(o.A,{loading:t,type:"danger",icon:(0,m.jsx)(ie.A,{})})}),(0,m.jsxs)("div",{className:"d-flex gap-2 my-2",children:[(0,m.jsxs)("strong",{className:"font-size-5",children:[(0,d.t)("total"),":"]}),(0,m.jsx)("strong",{className:"font-size-5 text-nowrap",children:"".concat(ve(null===n||void 0===n?void 0:n.total_price)," (").concat(s,"min)")})]})]})},pe=()=>{const{infoForm:e,setCalculatedData:t,selectedSlots:l,calculatedData:s,setViewContent:a}=(0,n.useContext)(u.BookingContext),i=(0,h.wA)(),o=k.A.useWatch("client",e),d=k.A.useWatch("payment_id",e);return(0,m.jsx)(k.A,{form:e,layout:"vertical",onFinish:n=>{f.A.create({user_id:n.client.value,payment_id:n.payment_id.value,data:null===s||void 0===s?void 0:s.items.map((e=>{var t,l,n;return{note:e.note,data:e.data,service_master_id:null===e||void 0===e||null===(t=e.service_master)||void 0===t?void 0:t.id,service_extras:null!==e&&void 0!==e&&null!==(l=e.extras)&&void 0!==l&&l.length?null===e||void 0===e||null===(n=e.extras)||void 0===n?void 0:n.map((e=>null===e||void 0===e?void 0:e.id)):void 0,start_date:e.start_date}})),start_date:c()(null===l||void 0===l?void 0:l.start).format("YYYY-MM-DD HH:mm")}).then((()=>{a(""),t({}),e.resetFields(),i((0,x.ny)())})).catch((e=>{console.error(e)}))},children:(0,m.jsx)(Z,{isAdd:!0,isDisabled:!(o&&d)})})},he=()=>{const{calculatedData:e,infoForm:t,setCalculatedData:l,sumInterval:s,setViewContent:a}=(0,n.useContext)(u.BookingContext);return(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"w-100 d-flex between my-2",children:[(0,m.jsx)("strong",{className:"font-size-5",children:"Total"}),(0,m.jsx)("strong",{className:"font-size-5",children:"".concat((0,z.default)(null===e||void 0===e?void 0:e.total_price)," (").concat(s||0,"min)")})]}),(0,m.jsxs)("div",{className:"w-100 d-flex gap-2",children:[(0,m.jsx)(o.A,{type:"primary",className:"w-100",onClick:t.submit,disabled:!(null!==e&&void 0!==e&&e.status),children:(0,d.t)("checkout")}),(0,m.jsx)(o.A,{type:"danger",className:"w-100",onClick:()=>{a(""),t.resetFields(),l({})},children:(0,d.t)("cancel")})]})]})};var xe=l(63620),je=l(8808),ge=l(78498),Ae=l(28257);const{Title:fe}=I.A,ye=e=>{var t,l,s;let{shop:a,setOpen:i,getServiceByID:r,getMasterByID:p,selectedService:h,form:x,location:j,setLocation:g,value:A,setValue:f,defaultLang:y,masterTimes:_}=e;const{calculatedData:b}=(0,n.useContext)(u.BookingContext),w=(0,v.Q)(),C=k.A.useWatch("start_date_date",x),D=k.A.useWatch("master",x),N=c()(new Date);return(0,m.jsxs)(F.A,{gutter:10,children:[(0,m.jsxs)(T.A,{span:24,children:[(0,m.jsx)(J.A,{icon:(0,m.jsx)(ee.A,{}),onClick:()=>{i("addService"),x.resetFields()}}),(0,m.jsx)(fe,{className:"my-4",level:2,children:(0,d.t)("select.service")})]}),(0,m.jsx)(T.A,{span:24,children:(0,m.jsx)(k.A.Item,{name:"service",label:(0,d.t)("select.service"),placeholder:(0,d.t)("select.service"),rules:[{required:!0,message:(0,d.t)("required")}],children:(0,m.jsx)(X.D,{refetch:!0,disabled:!a,className:"w-100",onChange:e=>{r(e),x.setFieldsValue({extras:[]})},fetchOptions:()=>E({shop_id:a.id},null===b||void 0===b?void 0:b.items)})})}),(0,m.jsx)(T.A,{span:24,children:(0,m.jsx)(k.A.Item,{name:"extras",label:(0,d.t)("select.service.extras"),children:(0,m.jsx)(B.A,{disabled:!(null!==h&&void 0!==h&&null!==(t=h.service_extras)&&void 0!==t&&t.length),options:null===h||void 0===h||null===(l=h.service_extras)||void 0===l?void 0:l.map((e=>{var t;return{label:(null===e||void 0===e||null===(t=e.translation)||void 0===t?void 0:t.title)||(0,d.t)("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}})),labelInValue:!0,placeholder:(0,d.t)("select.extra"),mode:"multiple"})})}),(0,m.jsx)(T.A,{span:24,children:(0,m.jsx)(k.A.Item,{name:"master",label:(0,d.t)("select.master"),placeholder:(0,d.t)("select.master"),rules:[{required:!0,message:(0,d.t)("required")}],children:(0,m.jsx)(X.D,{refetch:!0,className:"w-100",disabled:!h,onChange:e=>{p(e),x.setFieldsValue({start_date_date:void 0,start_date_time:void 0})},fetchOptions:()=>P({shop_id:null===a||void 0===a?void 0:a.id,service_id:null===h||void 0===h?void 0:h.id})})})}),(0,m.jsx)(T.A,{span:16,children:(0,m.jsx)(k.A.Item,{name:"start_date_date",label:(0,d.t)("start.date"),placeholder:(0,d.t)("select.start.date"),rules:[{required:!0,message:(0,d.t)("required")}],children:(0,m.jsx)($.A,{disabled:!_||!D,disabledDate:e=>new Date(e)<=c()().subtract(1,"days"),onChange:()=>{x.setFieldsValue({start_date_time:void 0})},className:"w-100"})})}),(0,m.jsx)(T.A,{span:8,children:(0,m.jsx)(k.A.Item,{name:"start_date_time",label:(0,d.t)("start.time"),rules:[{required:!0,message:(0,d.t)("required")}],children:(0,m.jsx)(B.A,{placeholder:(0,d.t)("select.start.time"),disabled:!C,options:null===(s=(()=>{const e=_[null===C||void 0===C?void 0:C.format("YYYY-MM-DD")]||[];return N.format("YYYY-MM-DD")===(null===C||void 0===C?void 0:C.format("YYYY-MM-DD"))?e.filter((e=>c()(e,"HH:mm").isAfter(c()(new Date)))):e})())||void 0===s?void 0:s.map((e=>({label:c()(e,"HH:mm").format(w),value:e})))})})}),(0,m.jsx)(T.A,{span:24,children:(0,m.jsx)(k.A.Item,{name:"note",label:(0,d.t)("note"),rules:[{required:!1,message:(0,d.t)("required")}],children:(0,m.jsx)(S.A.TextArea,{})})}),Boolean("online"!==(null===h||void 0===h?void 0:h.type))&&(0,m.jsxs)(T.A,{span:24,children:[(0,m.jsx)(Ae.A,{value:A,setValue:f,setLocation:g}),(0,m.jsx)(ge.A,{location:j,setLocation:g,setAddress:e=>{x.setFieldsValue({["address[".concat(y,"]")]:e})}})]}),(0,m.jsx)(T.A,{span:24,className:"mt-4",children:(0,m.jsx)(o.A,{type:"primary",htmlType:"submit",className:"w-100",children:(0,d.t)("submit")})})]})},_e=()=>{const e=(0,h.wA)(),[t]=k.A.useForm(),{infoData:l,selectedSlots:s,setViewContent:a,calculatedData:i,setCalculatedData:o}=(0,n.useContext)(u.BookingContext),{defaultLang:d}=(0,h.d4)((e=>e.formLang)),{bookingList:r}=(0,h.d4)((e=>e.booking)),[v,p]=(0,n.useState)(null),[j,g]=(0,n.useState)(null),[A,y]=(0,n.useState)(xe.Jb),[_,b]=(0,n.useState)(""),[w,C]=(0,n.useState)([]),{myShop:S}=(0,h.d4)((e=>e.myShop));return(0,m.jsx)(k.A,{layout:"vertical",form:t,onFinish:n=>{var c,u,m;let p=[];null!==i&&void 0!==i&&i.items&&(p=null===i||void 0===i||null===(c=i.items)||void 0===c?void 0:c.map((e=>{var t,l;return{...e,service_extras:null!==e&&void 0!==e&&null!==(t=e.extras)&&void 0!==t&&t.length?null===e||void 0===e||null===(l=e.extras)||void 0===l?void 0:l.map((e=>null===e||void 0===e?void 0:e.id)):void 0}})));const h={note:n.note,data:{address:n["address[".concat(d,"]")],...A},service_master:null===j||void 0===j?void 0:j.service_master,service_extras:null!==n&&void 0!==n&&null!==(u=n.extras)&&void 0!==u&&u.length?null===n||void 0===n||null===(m=n.extras)||void 0===m?void 0:m.map((e=>null===e||void 0===e?void 0:e.value)):void 0,start_date:"".concat(n.start_date_date.format("YYYY-MM-DD")," ").concat(n.start_date_time)};var g;(g=[...p,h],f.A.calculate({user_id:l.client.value,payment_id:l.payment_id.value,data:g.map((e=>{var t;return{note:e.note,data:e.data,service_master_id:null===(t=e.service_master)||void 0===t?void 0:t.id,service_extras:null===e||void 0===e?void 0:e.service_extras,start_date:e.start_date}}))})).then((l=>{let{data:n}=l;t.resetFields(),(()=>{let t=(0,je.O)(s.start,null===v||void 0===v?void 0:v.interval);var l,n;r.length>0?(t=(0,je.O)(null===r||void 0===r||null===(l=r[r.length-1])||void 0===l?void 0:l.end,null===r||void 0===r||null===(n=r[r.length-1])||void 0===n?void 0:n.pause),e((0,x.lZ)({id:v.id,pause:v.pause,title:v.translation.title,start:t,end:(0,je.O)(t,null===v||void 0===v?void 0:v.interval)}))):e((0,x.lZ)({id:v.id,pause:v.pause,title:v.translation.title,start:new Date(s.start),end:t}))})(),o(n),a("addService")})).catch((e=>{console.log(e)}))},children:(0,m.jsx)(ye,{shop:S,form:t,setOpen:a,location:A,setLocation:y,getMasterByID:e=>{M.A.getById(e.value).then((e=>{let{data:t}=e;const l=null===t||void 0===t?void 0:t.service_masters.find((e=>e.service_id===v.id));g({...t,service_master:l}),M.A.getTimes({service_master_ids:[null===l||void 0===l?void 0:l.id],start_date:c()(null===s||void 0===s?void 0:s.start).format("YYYY-MM-DD HH:mm")}).then((e=>{var t;let{data:l}=e;C(Object.fromEntries(null===l||void 0===l||null===(t=l[0])||void 0===t?void 0:t.times.map((e=>[e.date,e.times]))))}))})).catch((e=>{console.log(e)}))},getServiceByID:e=>{W.A.getById(e.value).then((e=>{p(e.data)})).catch((e=>{console.log(e)}))},selectedService:v,value:_,setValue:b,defaultLang:d,masterTimes:w})})},{useContext:be}=l(9950),{BookingContext:we}=l(39427),{Button:Ce}=l(30628),ke=()=>{const{serviceForm:e}=be(we);return(0,m.jsx)("div",{className:"d-flex gap-2",children:(0,m.jsx)(Ce,{type:"primary",className:"w-100",onClick:e.submit,children:(0,d.t)("apply")})})};var Se=l(99985);const{Title:De}=I.A,Ne=()=>{var e,t;const[l]=k.A.useForm(),{service_id:s,calculatedData:a,setCalculatedData:i}=(0,n.useContext)(u.BookingContext),[r,c]=(0,n.useState)(!1),v=null===a||void 0===a||null===(e=a.items)||void 0===e?void 0:e.find((e=>e.booking_id===Number(s)));return(0,m.jsxs)(n.Fragment,{children:[(0,m.jsx)(De,{level:2,children:(0,d.t)("notes")}),null===v||void 0===v||null===(t=v.notes)||void 0===t?void 0:t.map((e=>(0,m.jsx)(Se.A,{message:e,className:"mb-2"}))),(0,m.jsxs)(k.A,{form:l,onFinish:e=>{c(!0),f.A.updateNote(s,e).then((e=>{let{data:t}=e;l.resetFields(),i((e=>{var l;return{...e,items:null===a||void 0===a||null===(l=a.items)||void 0===l?void 0:l.map((e=>e.booking_id===Number(s)?{...e,notes:t.notes}:e))}}))})).catch((e=>{console.log(e)})).finally((()=>c(!1)))},layout:"vertical",className:"mt-5",children:[(0,m.jsx)(k.A.Item,{name:"note",rules:[{required:!0}],label:"add.note",children:(0,m.jsx)(S.A.TextArea,{})}),(0,m.jsx)(o.A,{htmlType:"submit",type:"primary",loading:r,children:(0,d.t)("submit")})]})]})};var Ie=l(95749),Fe=l(47738),Te=l(19826),Be=l(12534),Me=l(69216);function Oe(e,t,l,n){return{key:t,icon:l,children:n,label:e}}const Ye=()=>{const{setViewContent:e,service_id:t}=(0,n.useContext)(u.BookingContext),l=[Oe("Info",t?"updateForm":"addService",(0,m.jsx)(Ie.A,{})),Oe("Forms","forms",(0,m.jsx)(Fe.A,{})),Oe("Activity","activity",(0,m.jsx)(Te.A,{})),Oe("Notes","notes",(0,m.jsx)(Be.A,{}))];return(0,m.jsx)("div",{className:"content-menu",children:(0,m.jsx)(Me.A,{mode:"inline",items:l,defaultSelectedKeys:["info"],onClick:t=>(t=>{e(t.key)})(t)})})};var qe=l(90247);const{Title:Ve,Text:Le}=I.A,He=()=>{var e,t;const{setIsAddForm:l,calculatedData:s,setFormDetailId:a}=(0,n.useContext)(u.BookingContext),i=null===s||void 0===s||null===(e=s.items)||void 0===e?void 0:e.flatMap((e=>e.data.form||[]));return(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"d-flex between",children:[(0,m.jsx)(Ve,{children:(0,d.t)("forms")}),(0,m.jsx)(o.A,{type:"text",size:"large",onClick:()=>l(!0),children:(0,d.t)("add.form")})]}),0===(null===i||void 0===i?void 0:i.length)&&(0,m.jsx)(j.A,{children:(0,m.jsx)(qe.A,{image:qe.A.PRESENTED_IMAGE_SIMPLE,description:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("strong",{children:"No client forms added yet."})," ",(0,m.jsx)("br",{})," Forms will appear here if required by any services in the appointment or if added manually."]})})}),null===s||void 0===s||null===(t=s.items)||void 0===t?void 0:t.map((e=>{var t;return e.data.form&&(0,m.jsx)("div",{children:null===(t=e.data.form)||void 0===t?void 0:t.map((e=>{var t;return(0,m.jsxs)(j.A,{children:[(0,m.jsx)(Le,{type:"secondary",children:c()().format("ddd Do MMM, h:mm a")}),(0,m.jsxs)(Le,{type:"success",className:"ml-2",children:["\u2022 ",(0,d.t)("complated")]}),(0,m.jsx)(Ve,{level:4,className:"mt-2",children:null===e||void 0===e||null===(t=e.translation)||void 0===t?void 0:t.title}),(0,m.jsx)(o.A,{onClick:()=>a(e.id),children:(0,d.t)("view.form")})]},null===e||void 0===e?void 0:e.id)}))},e.id)}))]})};var Pe=l(98252);const{Title:Ee}=I.A,Re=()=>{var e,t;const{serviceData:l,service_id:s}=(0,n.useContext)(u.BookingContext),a=null===l||void 0===l?void 0:l.find((e=>e.id==s)),i=Boolean(!(null!==a&&void 0!==a&&null!==(e=a.activities)&&void 0!==e&&e.length)),o=(0,v.Q)();return(0,m.jsxs)("div",{className:"h-100",children:[(0,m.jsx)(Ee,{children:(0,d.t)("activities")}),null===a||void 0===a||null===(t=a.activities)||void 0===t?void 0:t.map((e=>{var t;return(0,m.jsxs)(j.A,{className:"mb-2",children:[(0,m.jsx)(j.A.Meta,{avatar:(0,m.jsx)(Pe.A,{src:null===(t=e.user)||void 0===t?void 0:t.img,size:"large"}),title:e.user.firstname,description:c()(e.created_at).format("MMMM Do YYYY, ".concat(o))}),(0,m.jsx)(j.A.Meta,{description:e.note,className:"mt-3"})]},e.id)})),i&&(0,m.jsx)(qe.A,{description:(0,d.t)("activities.not.found")})]})};var ze=l(57796),Ue=l(40577),We=l(52765);const Ge=[{label:"M",value:"monday"},{label:"T",value:"tuesday"},{label:"W",value:"wednesday"},{label:"T",value:"thursday"},{label:"F",value:"friday"},{label:"S",value:"saturday"},{label:"S",value:"sunday"}],Ke=e=>{let{end:t}=e;return"date"===t?(0,m.jsx)(T.A,{span:12,children:(0,m.jsx)(k.A.Item,{name:"end_value_date",children:(0,m.jsx)($.A,{className:"w-100"})})}):"after"===t?(0,m.jsx)(T.A,{span:12,children:(0,m.jsx)(k.A.Item,{label:(0,d.t)("occurrences"),name:"end_value",children:(0,m.jsx)(Ue.A,{className:"w-100"})})}):""},Ze=e=>{let{type:t,form:l}=e;const n=k.A.useWatch("end_type",l),s=k.A.useWatch("every",l);return"dont_repeat"===t?"":"custom"===t?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(T.A,{span:24,children:(0,m.jsx)(k.A.Item,{name:"every",label:"every",children:(0,m.jsxs)(S.A.Group,{compact:!0,children:[(0,m.jsx)(k.A.Item,{name:["every","number"],noStyle:!0,children:(0,m.jsx)(Ue.A,{})}),(0,m.jsx)(k.A.Item,{name:["every","type"],noStyle:!0,children:(0,m.jsxs)(B.A,{children:[(0,m.jsx)(B.A.Option,{value:"day",children:(0,d.t)("day")}),(0,m.jsx)(B.A.Option,{value:"week",children:(0,d.t)("week")}),(0,m.jsx)(B.A.Option,{value:"month",children:(0,d.t)("month")})]})})]})})}),"week"===(null===s||void 0===s?void 0:s.type)&&(0,m.jsx)(T.A,{span:24,children:(0,m.jsx)(k.A.Item,{name:"on_days",label:(0,d.t)("on.days"),children:(0,m.jsx)(We.A.Group,{options:Ge})})}),(0,m.jsx)(T.A,{span:24,children:(0,m.jsx)(k.A.Item,{name:"end_type",label:(0,d.t)("end"),placeholder:(0,d.t)("select.end"),rules:[{required:!0,message:(0,d.t)("required")}],children:(0,m.jsxs)(B.A,{style:{width:"100%"},children:[(0,m.jsx)(B.A.Option,{value:"never",children:(0,d.t)("never")}),(0,m.jsx)(B.A.Option,{value:"date",children:(0,d.t)("date")}),(0,m.jsx)(B.A.Option,{value:"after",children:(0,d.t)("after")})]})})}),(0,m.jsx)(Ke,{end:n})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(T.A,{span:24,children:(0,m.jsx)(k.A.Item,{name:"end_type",label:(0,d.t)("end"),placeholder:(0,d.t)("select.end"),rules:[{required:!0,message:(0,d.t)("required")}],children:(0,m.jsxs)(B.A,{style:{width:"100%"},children:[(0,m.jsx)(B.A.Option,{value:"never",children:(0,d.t)("never")}),(0,m.jsx)(B.A.Option,{value:"date",children:(0,d.t)("date")}),(0,m.jsx)(B.A.Option,{value:"after",children:(0,d.t)("after")})]})})}),(0,m.jsx)(Ke,{end:n})]})},{Title:Qe}=I.A,Je=e=>{let{form:t}=e;const l=k.A.useWatch("repeats",t),{myShop:n}=(0,h.d4)((e=>e.myShop)),{languages:s,defaultLang:a}=(0,h.d4)((e=>e.formLang),h.bN),i=(0,h.d4)((e=>{var t,l;return null===(t=e.globalSettings)||void 0===t||null===(l=t.settings)||void 0===l?void 0:l.using_12_hour_format}),h.bN),o=(0,v.Q)();return(0,m.jsxs)(F.A,{gutter:[12,12],children:[(0,m.jsx)(T.A,{span:24,children:(0,m.jsx)(Qe,{className:"my-4",level:2,children:(0,d.t)("add.blocked.time")})}),(0,m.jsx)(T.A,{span:24,children:s.filter((e=>e.locale===a)).map((e=>(0,m.jsx)(k.A.Item,{label:(0,d.t)("title"),name:"title[".concat(e.locale,"]"),rules:[{required:e.locale===a,message:(0,d.t)("required")}],children:(0,m.jsx)(S.A,{})},"title"+e.locale)))}),(0,m.jsx)(T.A,{span:12,children:(0,m.jsx)(k.A.Item,{name:"master_id",label:(0,d.t)("select.master"),placeholder:(0,d.t)("select.master"),rules:[{required:!0,message:(0,d.t)("required")}],children:(0,m.jsx)(D.G,{fetchOptions:e=>P({search:e,shop_id:null===n||void 0===n?void 0:n.id}),style:{width:"100%"}})})}),(0,m.jsx)(T.A,{span:12,children:(0,m.jsx)(k.A.Item,{label:(0,d.t)("date"),name:"date",rules:[{required:!0,message:(0,d.t)("required")}],children:(0,m.jsx)($.A,{className:"w-100"})})}),(0,m.jsx)(T.A,{span:12,children:(0,m.jsx)(k.A.Item,{label:(0,d.t)("from"),name:"from",rules:[{required:!0,message:(0,d.t)("required")}],children:(0,m.jsx)(ze.A,{format:o,use12Hour:"1"===i,className:"w-100",showTime:!0})})}),(0,m.jsx)(T.A,{span:12,children:(0,m.jsx)(k.A.Item,{label:(0,d.t)("to"),name:"to",rules:[{required:!0,message:(0,d.t)("required")}],children:(0,m.jsx)(ze.A,{format:o,use12Hour:"1"===i,className:"w-100",showTime:!0})})}),(0,m.jsx)(T.A,{span:24,children:(0,m.jsx)(k.A.Item,{name:"repeats",label:(0,d.t)("repeats"),placeholder:(0,d.t)("select.repeat"),rules:[{required:!0,message:(0,d.t)("required")}],children:(0,m.jsxs)(B.A,{style:{width:"100%"},children:[(0,m.jsx)(B.A.Option,{value:"dont_repeat",children:(0,d.t)("dont_repeat")}),(0,m.jsx)(B.A.Option,{value:"day",children:(0,d.t)("day")}),(0,m.jsx)(B.A.Option,{value:"week",children:(0,d.t)("week")}),(0,m.jsx)(B.A.Option,{value:"month",children:(0,d.t)("month")}),(0,m.jsx)(B.A.Option,{value:"custom",children:(0,d.t)("custom")})]})})}),(0,m.jsx)(Ze,{type:l,form:t}),(0,m.jsx)(T.A,{span:24,style:{flexGrow:1},children:s.filter((e=>e.locale===a)).map((e=>(0,m.jsx)(k.A.Item,{label:(0,d.t)("description"),name:"description[".concat(e.locale,"]"),rules:[{required:e.locale===a,message:(0,d.t)("required")}],children:(0,m.jsx)(S.A.TextArea,{})},"description"+e.locale)))})]})};var $e=l(43194);const Xe=()=>{const e=(0,h.wA)(),{defaultLang:t}=(0,h.d4)((e=>e.formLang)),{selectedSlots:l,setViewContent:s,blocktimeForm:a}=(0,n.useContext)(u.BookingContext);return(0,m.jsx)(k.A,{form:a,layout:"vertical",onFinish:l=>{var n,a,i,o;$e.b.create({repeats:l.repeats,end_type:l.end_type,master_id:null===(n=l.master_id)||void 0===n?void 0:n.value,to:c()(l.to).format("HH:mm"),custom_repeat_type:null===(a=l.every)||void 0===a?void 0:a.type,from:c()(l.from).format("HH:mm"),date:c()(l.date).format("YYYY-MM-DD"),end_value:l.end_value||l.end_value_date,["title[".concat(t,"]")]:l["title[".concat(t,"]")],custom_repeat_value:l.on_days&&(null===(i=l.every)||void 0===i?void 0:i.number)&&[null===(o=l.every)||void 0===o?void 0:o.number,...l.on_days],["description[".concat(t,"]")]:l["description[".concat(t,"]")]}).then((()=>{s(""),e((0,_.aT)({perPage:100}))})).catch((e=>{console.log(e)}))},initialValues:{date:c()(),end_type:"never",repeats:"dont_repeat",from:c()(null===l||void 0===l?void 0:l.start,"HH:mm:ss"),to:c()(null===l||void 0===l?void 0:l.end,"HH:mm:ss"),every:{type:"day",number:1}},children:(0,m.jsx)(Je,{form:a})})};var et=l(9456);const tt=()=>{const e=(0,h.wA)(),{blocktimeForm:t,disabled_slot_id:l,setViewContent:s}=(0,n.useContext)(u.BookingContext);return(0,m.jsxs)(F.A,{gutter:6,children:[Boolean(l)&&(0,m.jsx)(T.A,{span:2,children:(0,m.jsx)(de.A,{title:"Delete the task",description:"Are you sure to delete this task?",onConfirm:()=>{et.b.delete({"ids[0]":l}).then((()=>{s(""),e((0,_.aT)({perPage:100}))})).catch((e=>{console.log(e)}))},okText:"Yes",cancelText:"No",children:(0,m.jsx)(o.A,{type:"danger",icon:(0,m.jsx)(ie.A,{})})})}),(0,m.jsx)(T.A,{span:Boolean(l)?22:24,children:(0,m.jsx)(o.A,{type:"primary",className:"w-100",onClick:()=>t.submit(),children:(0,d.t)("submit")})})]})};var lt=l(31281);const nt=()=>{const e=(0,h.wA)(),{languages:t}=(0,h.d4)((e=>e.formLang)),{setViewContent:l,disabled_slot_id:s,blocktimeForm:a}=(0,n.useContext)(u.BookingContext),[i,o]=(0,n.useState)(!1);function d(e){if(null===e||void 0===e||!e.translations)return{};const{translations:l}=e,n=t.map((e=>{var t,n;return{["title[".concat(e.locale,"]")]:null===(t=l.find((t=>t.locale===e.locale)))||void 0===t?void 0:t.title,["description[".concat(e.locale,"]")]:null===(n=l.find((t=>t.locale===e.locale)))||void 0===n?void 0:n.description}}));return Object.assign({},...n)}return(0,n.useEffect)((()=>{s&&(o(!0),$e.b.getById(s).then((e=>{var t,l,n,s,i,o;let{data:r}=e;const u={master_id:{label:"".concat((null===r||void 0===r||null===(t=r.master)||void 0===t?void 0:t.firstname)||""," ").concat((null===r||void 0===r||null===(l=r.master)||void 0===l?void 0:l.lastname)||""),value:null===r||void 0===r||null===(n=r.master)||void 0===n?void 0:n.id,key:null===r||void 0===r||null===(s=r.master)||void 0===s?void 0:s.id},every:{type:r.custom_repeat_type,number:null===(i=r.custom_repeat_value)||void 0===i?void 0:i[0]},on_days:null===(o=r.custom_repeat_value)||void 0===o?void 0:o.filter(((e,t)=>0!==t)),repeats:r.repeats,end_type:r.end_type,end_value:r.end_value,date:c()(r.date,"YYYY-MM-DD"),end_value_date:"date"===r.end_type?c()(r.end_value.replace(/\"/g,""),"YYYY-MM-DD"):"",from:c()(null===r||void 0===r?void 0:r.from,"HH:mm:ss"),to:c()(null===r||void 0===r?void 0:r.to,"HH:mm:ss"),...d(r)};a.setFieldsValue(u)})).catch((e=>{console.log(e)})).finally((()=>o(!1))))}),[s]),(0,m.jsx)(g.A,{spinning:i,children:(0,m.jsx)(k.A,{form:a,layout:"vertical",onFinish:n=>{var a,i,o,d,r;$e.b.update(s,{repeats:n.repeats,end_type:n.end_type,master_id:null===(a=n.master_id)||void 0===a?void 0:a.value,to:c()(n.to).format("HH:mm"),custom_repeat_type:null===(i=n.every)||void 0===i?void 0:i.type,from:c()(n.from).format("HH:mm"),date:c()(n.date).format("YYYY-MM-DD"),end_value:(null===(o=n.end_value)||void 0===o?void 0:o.toString())||n.end_value_date,title:(0,lt.A)(t,n),description:(0,lt.A)(t,n,"description"),custom_repeat_value:n.on_days&&(null===(d=n.every)||void 0===d?void 0:d.number)&&[null===(r=n.every)||void 0===r?void 0:r.number,...n.on_days]}).then((()=>{l(""),e((0,_.aT)({perPage:100}))})).catch((e=>{console.log(e)}))},children:(0,m.jsx)(Je,{form:a})})})},st=()=>{const{viewContent:e,setViewContent:t}=(0,n.useContext)(u.BookingContext);return(0,m.jsx)(C,{open:e,setOpen:t,footer:(()=>{switch(e){case"addService":return(0,m.jsx)(he,{});case"updateForm":return(0,m.jsx)(me,{});case"updateService":return(0,m.jsx)(ke,{});case"blockTime":case"updateBlockTime":return(0,m.jsx)(tt,{});default:return""}})(),children:(0,m.jsxs)(m.Fragment,{children:["addService"!==e&&"serviceForm"!==e&&"blockTime"!==e&&"updateBlockTime"!==e&&(0,m.jsx)(Ye,{}),(()=>{switch(e){case"addService":return(0,m.jsx)(pe,{});case"serviceForm":return(0,m.jsx)(_e,{});case"updateForm":return(0,m.jsx)(Q,{});case"updateService":return(0,m.jsx)(ae,{});case"notes":return(0,m.jsx)(Ne,{});case"forms":return(0,m.jsx)(He,{});case"activity":return(0,m.jsx)(Re,{});case"blockTime":return(0,m.jsx)(Xe,{});case"updateBlockTime":return(0,m.jsx)(nt,{})}})()]})})};var at=l(66136),it=l(24893),ot=l(25933);const{Title:dt}=I.A,rt=e=>{var t,l,s;let{item:a}=e;const[i]=k.A.useForm(),{service_id:r,setIsAddForm:c,calculatedData:v,setCalculatedData:p}=(0,n.useContext)(u.BookingContext),h=e=>{var t,l,n;switch(e.answer_type){case"single_answer":return(0,m.jsx)(it.Ay.Group,{children:null===(t=e.answer)||void 0===t?void 0:t.map((e=>(0,m.jsx)(it.Ay,{value:e,children:e})))});case"short_answer":return(0,m.jsx)(S.A,{});case"long_answer":return(0,m.jsx)(S.A.TextArea,{});case"multiple_choice":return(0,m.jsx)(We.A.Group,{children:null===(l=e.answer)||void 0===l?void 0:l.map((e=>(0,m.jsx)(We.A,{value:e,children:e})))});case"drop_down":return(0,m.jsx)(B.A,{children:null===(n=e.answer)||void 0===n?void 0:n.map((e=>(0,m.jsx)(B.A.Option,{value:e,children:e})))});case"yes_or_no":return(0,m.jsx)(ot.A,{});default:return""}},x=null===v||void 0===v||null===(t=v.items)||void 0===t?void 0:t.flatMap((e=>e.data.form||[]));return(0,m.jsxs)(j.A,{className:"w-100",children:[(0,m.jsx)(dt,{children:null===a||void 0===a||null===(l=a.translation)||void 0===l?void 0:l.title}),(0,m.jsxs)(k.A,{layout:"vertical",form:i,onFinish:e=>{var t,l;f.A.update(r,{data:{...null===v||void 0===v||null===(t=v.items[0])||void 0===t?void 0:t.data,form:[...x,{...a,data:null===(l=a.data)||void 0===l?void 0:l.map((t=>{const l=e[t.answer_type];return{...t,user_answer:l?"object"===typeof l?l:[l]:void 0}}))}]}}).then((e=>{i.resetFields(),c(!1),p((t=>({...t,items:t.items.map((t=>({...t,data:e.data.data})))})))})).catch((e=>{console.log(e)}))},children:[null===(s=a.data)||void 0===s?void 0:s.map((e=>(0,m.jsx)(m.Fragment,{children:"description_text"===e.answer_type?(0,m.jsx)(Se.A,{message:e.question,type:"info"}):(0,m.jsx)(k.A.Item,{label:e.question,name:e.answer_type,rules:[{required:Boolean(e.required)}],children:h(e)})}))),(0,m.jsx)(o.A,{className:"mt-4",type:"primary",htmlType:"submit",children:(0,d.t)("complate")})]})]})},ct=()=>{const{isAddForm:e,setIsAddForm:t}=(0,n.useContext)(u.BookingContext),[l,s]=(0,n.useState)([]),[a,o]=(0,n.useState)(null),r=l.map((e=>({key:e.id,label:e.translation.title}))),c=(0,n.useMemo)((()=>l.find((e=>e.id===a))),[a,l]);return(0,n.useEffect)((()=>{at.A.getAll().then((e=>{let{data:t}=e;s(t),o(t[0].id)})).catch((e=>{console.log(e)}))}),[]),(0,m.jsx)(i.A,{centered:!0,width:912,footer:null,visible:e,onCancel:()=>{t(!1)},title:(0,d.t)("select.a.form"),children:(0,m.jsxs)("div",{className:"d-flex gap-2",children:[(0,m.jsx)(Me.A,{style:{width:256},mode:"vertical",items:r,onClick:e=>{let{key:t}=e;return o(Number(t))}}),(0,m.jsx)(rt,{item:c,formList:l})]})})};var ut=l(70030),vt=l(8297);const mt=()=>{const{t:e}=(0,ut.B)(),t=(0,h.wA)(),[l,s]=(0,n.useState)([]),[a,i]=(0,n.useState)({});const o=e=>{i((t=>({...t,...e})))};return(0,n.useEffect)((()=>{t((0,x.ny)(a)),t((0,_.aT)({perPage:100,...a}))}),[a]),(0,n.useEffect)((()=>{M.A.getAll({perPage:100,role:"master"}).then((e=>{let{data:t}=e;const l=t.map((e=>({label:"".concat(null===e||void 0===e?void 0:e.firstname," ").concat(null===e||void 0===e?void 0:e.lastname),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id})));s(l)}))}),[]),(0,m.jsx)(j.A,{children:(0,m.jsxs)(F.A,{gutter:24,children:[(0,m.jsx)(T.A,{span:5,children:(0,m.jsx)(B.A,{className:"w-100",defaultValue:{label:"All",value:null,key:null},onChange:(e,t)=>o(t),children:l.map((e=>(0,m.jsx)(B.A.Option,{value:e.value,children:e.label},e.key)))})}),(0,m.jsx)(T.A,{span:5,children:(0,m.jsx)(vt.A,{defaultValue:a.search,placeholder:e("search"),handleChange:e=>o({search:e})})})]})})};var pt=l(91524);const ht=()=>{var e,t,l;const{formDetailId:s,setFormDetailId:a,calculatedData:o}=(0,n.useContext)(u.BookingContext),r=null===o||void 0===o||null===(e=o.items)||void 0===e?void 0:e.flatMap((e=>e.data.form||[])).find((e=>e.id===s));return(0,m.jsx)(i.A,{footer:null,visible:s,onCancel:()=>{a(null)},title:(0,d.t)("form.detail"),children:(0,m.jsx)(pt.A,{title:null===r||void 0===r||null===(t=r.translation)||void 0===t?void 0:t.title,layout:"vertical",children:null===r||void 0===r||null===(l=r.data)||void 0===l?void 0:l.map(((e,t)=>{var l,n;return"yes_or_no"===e.answer_type?(0,m.jsx)(pt.A.Item,{label:e.question,span:12,children:null===e||void 0===e||null===(l=e.user_answer)||void 0===l?void 0:l.map((e=>e?(0,d.t)("yes"):(0,d.t)("no")))},t):(0,m.jsx)(pt.A.Item,{label:e.question,span:12,children:null===e||void 0===e||null===(n=e.user_answer)||void 0===n?void 0:n.map((e=>(e.answer_type,(0,m.jsx)("div",{className:"ml-1",children:e}))))},t)}))})})},xt=()=>{const[e]=k.A.useForm(),{updateStatus:t,setUpdateStatus:l,setCalculatedData:s}=(0,n.useContext)(u.BookingContext),a=()=>{l(null),e.resetFields()};return(0,m.jsx)(i.A,{title:(0,d.t)("update.status"),visible:t,onCancel:a,width:280,footer:null,children:(0,m.jsxs)(k.A,{form:e,onFinish:e=>{f.A.changeStatus(t.booking_id,e).then((e=>{let{data:l}=e;a(),s((e=>({...e,items:e.items.map((e=>({...e,status:e.booking_id===t.booking_id?l.status:e.status})))})))})).catch((e=>{console.log(e)}))},layout:"vertical",initialValues:{status:null===t||void 0===t?void 0:t.status},children:[(0,m.jsx)(k.A.Item,{name:"status",rules:[{required:!0}],label:"status",children:(0,m.jsxs)(B.A,{children:[(0,m.jsx)(B.A.Option,{value:"new",children:(0,d.t)("new")}),(0,m.jsx)(B.A.Option,{value:"canceled",children:(0,d.t)("canceled")}),(0,m.jsx)(B.A.Option,{value:"booked",children:(0,d.t)("booked")}),(0,m.jsx)(B.A.Option,{value:"progress",children:(0,d.t)("progress")}),(0,m.jsx)(B.A.Option,{value:"ended",children:(0,d.t)("ended")})]})}),(0,m.jsx)(o.A,{htmlType:"submit",type:"primary",children:(0,d.t)("submit")})]})})},jt=()=>{const e=(0,h.wA)();return(0,n.useEffect)((()=>{e((0,x.ny)())}),[e]),(0,m.jsxs)(u.default,{children:[(0,m.jsx)(mt,{}),(0,m.jsx)(b,{}),(0,m.jsx)(p,{}),(0,m.jsx)(st,{}),(0,m.jsx)(ct,{}),(0,m.jsx)(ht,{}),(0,m.jsx)(xt,{})]})}},39427:(e,t,l)=>{"use strict";l.r(t),l.d(t,{BookingContext:()=>o,default:()=>d});var n=l(59233),s=l(9950),a=l(42074),i=l(44414);const o=(0,s.createContext)(null),d=e=>{var t;let{children:l}=e,[d]=(0,a.ok)();const r=d.get("service_id"),c=d.get("disabled_slot_id"),[u]=n.A.useForm(),[v]=n.A.useForm(),[m]=n.A.useForm(),[p,h]=(0,s.useState)([]),[x,j]=(0,s.useState)({}),[g,A]=(0,s.useState)({}),[f,y]=(0,s.useState)(!1),[_,b]=(0,s.useState)(null),[w,C]=(0,s.useState)(!1),[k,S]=(0,s.useState)(""),[D,N]=(0,s.useState)(!1),[I,F]=(0,s.useState)(null),[T,B]=(0,s.useState)(null),M=null===x||void 0===x||null===(t=x.items)||void 0===t?void 0:t.reduce(((e,t)=>{var l;return e+(null===t||void 0===t||null===(l=t.service_master)||void 0===l?void 0:l.interval)}),0);return(0,i.jsx)(o.Provider,{value:{infoForm:v,serviceForm:u,serviceData:p,setServiceData:h,calculatedData:x,setCalculatedData:j,selectedSlots:_,setSelectedSlots:b,isModalOpen:f,setIsModalOpen:y,isLoalding:w,setIsLoading:C,viewContent:k,setViewContent:S,sumInterval:M,infoData:g,setInfoData:A,service_id:r,isAddForm:D,setIsAddForm:N,disabled_slot_id:c,blocktimeForm:m,formDetailId:I,setFormDetailId:F,updateStatus:T,setUpdateStatus:B},children:l})}},39362:function(e,t){var l,n,s;n=[],void 0===(s="function"===typeof(l=function(){return function e(t,l,n){var s,a,i=window,o="application/octet-stream",d=n||o,r=t,c=!l&&!n&&r,u=document.createElement("a"),v=function(e){return String(e)},m=i.Blob||i.MozBlob||i.WebKitBlob||v,p=l||"download";if(m=m.call?m.bind(i):Blob,"true"===String(this)&&(d=(r=[r,d])[0],r=r[1]),c&&c.length<2048&&(p=c.split("/").pop().split("?")[0],u.href=c,-1!==u.href.indexOf(c))){var h=new XMLHttpRequest;return h.open("GET",c,!0),h.responseType="blob",h.onload=function(t){e(t.target.response,p,o)},setTimeout((function(){h.send()}),0),h}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(r)){if(!(r.length>2096103.424&&m!==v))return navigator.msSaveBlob?navigator.msSaveBlob(A(r),p):f(r);d=(r=A(r)).type||o}else if(/([\x80-\xff])/.test(r)){for(var x=0,j=new Uint8Array(r.length),g=j.length;x<g;++x)j[x]=r.charCodeAt(x);r=new m([j],{type:d})}function A(e){for(var t=e.split(/[:;,]/),l=t[1],n=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),s=n.length,a=0,i=new Uint8Array(s);a<s;++a)i[a]=n.charCodeAt(a);return new m([i],{type:l})}function f(e,t){if("download"in u)return u.href=e,u.setAttribute("download",p),u.className="download-js-link",u.innerHTML="downloading...",u.style.display="none",document.body.appendChild(u),setTimeout((function(){u.click(),document.body.removeChild(u),!0===t&&setTimeout((function(){i.URL.revokeObjectURL(u.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,o)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var l=document.createElement("iframe");document.body.appendChild(l),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,o)),l.src=e,setTimeout((function(){document.body.removeChild(l)}),333)}if(s=r instanceof m?r:new m([r],{type:d}),navigator.msSaveBlob)return navigator.msSaveBlob(s,p);if(i.URL)f(i.URL.createObjectURL(s),!0);else{if("string"===typeof s||s.constructor===v)try{return f("data:"+d+";base64,"+i.btoa(s))}catch(y){return f("data:"+d+","+encodeURIComponent(s))}(a=new FileReader).onload=function(e){f(this.result)},a.readAsDataURL(s)}return!0}})?l.apply(t,n):l)||(e.exports=s)}}]);