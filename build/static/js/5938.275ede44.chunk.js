(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[5938],{79406:(e,r,t)=>{"use strict";t.d(r,{a:()=>l});var n=t(9950),i=t(95491),s=t.n(i),a=t(99674),o=t(90650),u=t(44414);const l=e=>{let{fetchOptions:r,debounceTimeout:t=400,refetch:i=!1,...l}=e;const[c,p]=(0,n.useState)(!1),[_,v]=(0,n.useState)([]),d=(0,n.useMemo)((()=>s()((e=>{v([]),p(!0),r(e).then((e=>{v(e),p(!1)}))}),t)),[r,t]);return(0,u.jsx)(a.A,{showSearch:!0,allowClear:!0,labelInValue:!0,onClear:()=>d(""),filterOption:!1,onSearch:d,notFoundContent:c?(0,u.jsx)(o.A,{size:"small"}):"no results",...l,options:_,onFocus:()=>{_.length&&!i||d("")}})}},47992:(e,r,t)=>{"use strict";t.d(r,{G:()=>l});var n=t(9950),i=t(95491),s=t.n(i),a=t(99674),o=t(90650),u=t(44414);const l=e=>{let{fetchOptions:r,debounceTimeout:t=400,onClear:i,refetchOptions:l=!1,...c}=e;const[p,_]=(0,n.useState)(!1),[v,d]=(0,n.useState)([]),h=(0,n.useMemo)((()=>s()((e=>{d([]),_(!0),r(e).then((e=>{d(e),_(!1)}))}),t)),[r,t]);return(0,u.jsx)(a.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:h,onClear:()=>{h(""),i&&i()},notFoundContent:p?(0,u.jsx)(o.A,{size:"small"}):"no results",...c,options:v,onFocus:()=>{v.length&&!l||h("")}})}},15938:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>v});var n=t(59233),i=t(23263),s=t(70030),a=t(9950),o=t(72124),u=t(74623),l=(t(43673),t(91854)),c=t(28429),p=t(23596),_=t(44414);const v=function(){const{t:e}=(0,s.B)(),r=(0,l.wA)(),[t]=n.A.useForm(),{id:v}=(0,c.g)(),{activeMenu:d}=(0,l.d4)((e=>e.menu)),[h,f]=(0,a.useState)(!0),[x,m]=(0,a.useState)({});return(0,a.useEffect)((()=>{d.refetch&&((e=>{f(!0),o.A.getById(e).then((e=>{var r,t,n,i;let{data:s}=e;m({shop:{value:s.shop_id,label:null===(r=s.shop)||void 0===r||null===(t=r.translation)||void 0===t?void 0:t.title,key:s.shop_id},service:{value:null===s||void 0===s?void 0:s.service_id,label:null===s||void 0===s||null===(n=s.service)||void 0===n||null===(i=n.translation)||void 0===i?void 0:i.title,key:null===s||void 0===s?void 0:s.service_id},price:s.price,interval:s.interval,pause:s.pause,commission_fee:s.commission_fee,active:s.active,discount:s.discount,type:s.type,gender:s.gender})})).finally((()=>f(!1)))})(v),r((0,u.km)(d)))}),[d.refetch]),(0,_.jsx)(i.A,{title:e("add.service.master"),loading:h,children:!h&&(0,_.jsx)(p.A,{form:t,onSubmit:e=>o.A.update(v,e),initialValues:x})})}},23596:(e,r,t)=>{"use strict";t.d(r,{A:()=>b});var n=t(59233),i=t(87094),s=t(41988),a=t(40577),o=t(99674),u=t(25933),l=t(48538),c=t(47992),p=t(79406),_=t(9950),v=t(72124),d=t(85923),h=t(91854),f=t(74623),x=t(75751),m=t(28429),A=t(70030),y=t(44414);const j=["online","offline_in","offline_out"],g=[{value:1,label:"male"},{value:2,label:"female"},{value:3,label:"other"}];const b=function(e){var r,t,b,w;let{form:S,onSubmit:C,initialValues:O={}}=e;const{t:q}=(0,A.B)(),I=(0,h.wA)(),k=(0,m.Zp)(),{activeMenu:N}=(0,h.d4)((e=>e.menu)),{defaultCurrency:F}=(0,h.d4)((e=>e.currency),h.bN),{user:M}=(0,h.d4)((e=>e.auth)),V=(0,_.useRef)([]),[z,E]=(0,_.useState)(!1);return(0,y.jsxs)(n.A,{initialValues:{active:!Object.keys(O).length||!!O.active,shop:{value:null===(r=M.invite)||void 0===r?void 0:r.shop_id,label:(null===(t=M.invite)||void 0===t||null===(b=t.shop)||void 0===b||null===(w=b.translation)||void 0===w?void 0:w.title)||"shop not found"},...O},onFinish:e=>{E(!0);const r="master/service-master",t={...e,shop_id:e.shop.value,service_id:e.service.value,active:e.active?1:0,shop:void 0,service:void 0};return C(t).then((()=>{d.oR.success("successfully.added"),(0,h.vA)((()=>{I((0,f.EK)({...N,nextUrl:r})),I((0,x.mj)({})),k("/"+r)}))})).finally((()=>{E(!1)}))},form:S,layout:"vertical",children:[(0,y.jsxs)(i.A,{gutter:24,children:[(0,y.jsx)(s.A,{span:8,children:(0,y.jsx)(n.A.Item,{label:q("shop"),name:"shop",rules:[{required:!0,message:q("required")}],children:(0,y.jsx)(c.G,{disabled:!0})})}),(0,y.jsx)(s.A,{span:8,children:(0,y.jsx)(n.A.Item,{label:q("service"),name:"service",rules:[{required:!0,message:q("required")}],children:(0,y.jsx)(p.a,{fetchOptions:e=>{const r={search:e,active:1};return v.A.searchServices(r).then((e=>{const r=e.data.map((e=>({label:e.translation?e.translation.title:"no name",value:e.id,key:e.id,price:e.price,interval:e.interval,pause:e.pause,commission_fee:e.commission_fee,type:e.type,gender:e.gender})));return V.current=r,r}))},refetch:!0,onChange:e=>{var r;const t=null===(r=V.current)||void 0===r?void 0:r.find((r=>r.value===e.value));S.setFieldsValue({service:e,...t})}})})}),(0,y.jsx)(s.A,{span:8,children:(0,y.jsx)(n.A.Item,{label:q("price"),name:"price",rules:[{required:!0,message:q("required")}],children:(0,y.jsx)(a.A,{min:0,className:"w-100",addonAfter:null===F||void 0===F?void 0:F.symbol})})}),(0,y.jsx)(s.A,{span:8,children:(0,y.jsx)(n.A.Item,{label:q("interval"),name:"interval",rules:[{required:!0,message:q("required")}],children:(0,y.jsx)(a.A,{min:0,className:"w-100"})})}),(0,y.jsx)(s.A,{span:8,children:(0,y.jsx)(n.A.Item,{label:q("pause"),name:"pause",rules:[{required:!0,message:q("required")}],children:(0,y.jsx)(a.A,{min:0,className:"w-100"})})}),(0,y.jsx)(s.A,{span:8,children:(0,y.jsx)(n.A.Item,{label:"type",name:"type",rules:[{required:!0,message:q("required")}],children:(0,y.jsx)(o.A,{children:j.map(((e,r)=>(0,y.jsx)(o.A.Option,{value:e,children:e},e)))})})}),(0,y.jsx)(s.A,{span:8,children:(0,y.jsx)(n.A.Item,{label:q("commission.fee"),name:"commission_fee",children:(0,y.jsx)(a.A,{min:1,className:"w-100"})})}),(0,y.jsx)(s.A,{span:8,children:(0,y.jsx)(n.A.Item,{label:q("discount"),name:"discount",rules:[{validator:(e,r)=>void 0!==r&&(r<0||r>100)?Promise.reject(new Error(q("must.be.between.0.and.100"))):Promise.resolve()}],children:(0,y.jsx)(a.A,{min:0,className:"w-100",addonAfter:"%"})})}),(0,y.jsx)(s.A,{span:8,children:(0,y.jsx)(n.A.Item,{label:q("gender"),name:"gender",rules:[{required:!0,message:q("required")}],children:(0,y.jsx)(o.A,{children:g.map(((e,r)=>(0,y.jsx)(o.A.Option,{value:e.value,children:q(e.label)},e.value)))})})}),(0,y.jsx)(s.A,{span:8,children:(0,y.jsx)(n.A.Item,{label:q("active"),name:"active",valuePropName:"checked",children:(0,y.jsx)(u.A,{})})})]}),(0,y.jsx)(l.A,{type:"primary",htmlType:"submit",loading:z,children:q("submit")})]})}},5294:(e,r,t)=>{var n=t(48230),i=t(43463);function s(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}s.prototype=n(i.prototype),s.prototype.constructor=s,e.exports=s},46231:(e,r,t)=>{var n=t(48230),i=t(43463);function s(e,r){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=void 0}s.prototype=n(i.prototype),s.prototype.constructor=s,e.exports=s},65507:e=>{e.exports=function(e,r,t){switch(t.length){case 0:return e.call(r);case 1:return e.call(r,t[0]);case 2:return e.call(r,t[0],t[1]);case 3:return e.call(r,t[0],t[1],t[2])}return e.apply(r,t)}},30399:(e,r,t)=>{var n=t(87946);e.exports=function(e,r){for(var t=-1,i=r.length,s=Array(i),a=null==e;++t<i;)s[t]=a?void 0:n(e,r[t]);return s}},48230:(e,r,t)=>{var n=t(24567),i=Object.create,s=function(){function e(){}return function(r){if(!n(r))return{};if(i)return i(r);e.prototype=r;var t=new e;return e.prototype=void 0,t}}();e.exports=s},26810:(e,r,t)=>{var n=t(87518),i=t(97989);e.exports=function e(r,t,s,a,o){var u=-1,l=r.length;for(s||(s=i),o||(o=[]);++u<l;){var c=r[u];t>0&&s(c)?t>1?e(c,t-1,s,a,o):n(o,c):a||(o[o.length]=c)}return o}},10052:(e,r,t)=>{var n=t(26463),i=t(92535);e.exports=function(e,r){for(var t=0,s=(r=n(r,e)).length;null!=e&&t<s;)e=e[i(r[t++])];return t&&t==s?e:void 0}},43463:e=>{e.exports=function(){}},65148:(e,r,t)=>{var n=t(96800),i=t(88925),s=t(69002),a=i?function(e,r){return i(e,"toString",{configurable:!0,enumerable:!1,value:n(r),writable:!0})}:s;e.exports=a},37696:(e,r,t)=>{var n=t(61570);e.exports=function(e,r){return n(r,(function(r){return e[r]}))}},96862:(e,r,t)=>{var n=t(5294),i=t(87518),s=t(61516);e.exports=function(e,r){var t=e;return t instanceof n&&(t=t.value()),s(r,(function(e,r){return r.func.apply(r.thisArg,i([e],r.args))}),t)}},26463:(e,r,t)=>{var n=t(12279),i=t(65916),s=t(17044),a=t(54008);e.exports=function(e,r){return n(e)?e:i(e,r)?[e]:s(a(e))}},76321:e=>{e.exports=function(e,r){var t=-1,n=e.length;for(r||(r=Array(n));++t<n;)r[t]=e[t];return r}},88925:(e,r,t)=>{var n=t(20220),i=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(r){}}();e.exports=i},65002:(e,r,t)=>{var n=t(32964),i=t(24295),s=t(1043);e.exports=function(e){return s(i(e,void 0,n),e+"")}},97989:(e,r,t)=>{var n=t(4635),i=t(24578),s=t(12279),a=n?n.isConcatSpreadable:void 0;e.exports=function(e){return s(e)||i(e)||!!(a&&e&&e[a])}},65916:(e,r,t)=>{var n=t(12279),i=t(50184),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,r){if(n(e))return!1;var t=typeof e;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=e&&!i(e))||(a.test(e)||!s.test(e)||null!=r&&e in Object(r))}},80275:e=>{e.exports=function(e){for(var r,t=[];!(r=e.next()).done;)t.push(r.value);return t}},23734:(e,r,t)=>{var n=t(42434);e.exports=function(e){var r=n(e,(function(e){return 500===t.size&&t.clear(),e})),t=r.cache;return r}},24295:(e,r,t)=>{var n=t(65507),i=Math.max;e.exports=function(e,r,t){return r=i(void 0===r?e.length-1:r,0),function(){for(var s=arguments,a=-1,o=i(s.length-r,0),u=Array(o);++a<o;)u[a]=s[r+a];a=-1;for(var l=Array(r+1);++a<r;)l[a]=s[a];return l[r]=t(u),n(e,this,l)}}},1043:(e,r,t)=>{var n=t(65148),i=t(42929)(n);e.exports=i},42929:e=>{var r=Date.now;e.exports=function(e){var t=0,n=0;return function(){var i=r(),s=16-(i-n);if(n=i,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},17044:(e,r,t)=>{var n=t(23734),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,a=n((function(e){var r=[];return 46===e.charCodeAt(0)&&r.push(""),e.replace(i,(function(e,t,n,i){r.push(n?i.replace(s,"$1"):t||e)})),r}));e.exports=a},92535:(e,r,t)=>{var n=t(50184);e.exports=function(e){if("string"==typeof e||n(e))return e;var r=e+"";return"0"==r&&1/e==-1/0?"-0":r}},57351:(e,r,t)=>{var n=t(5294),i=t(46231),s=t(76321);e.exports=function(e){if(e instanceof n)return e.clone();var r=new i(e.__wrapped__,e.__chain__);return r.__actions__=s(e.__actions__),r.__index__=e.__index__,r.__values__=e.__values__,r}},69203:(e,r,t)=>{var n=t(74740);e.exports=function(e){var r=n(e);return r.__chain__=!0,r}},45593:(e,r,t)=>{var n=t(46231);e.exports=function(){return new n(this.value(),this.__chain__)}},96800:e=>{e.exports=function(e){return function(){return e}}},32964:(e,r,t)=>{var n=t(26810);e.exports=function(e){return(null==e?0:e.length)?n(e,1):[]}},87946:(e,r,t)=>{var n=t(10052);e.exports=function(e,r,t){var i=null==e?void 0:n(e,r);return void 0===i?t:i}},69002:e=>{e.exports=function(e){return e}},56801:(e,r,t)=>{var n=t(22022),i=t(12279),s=t(39248);e.exports=function(e){return"string"==typeof e||!i(e)&&s(e)&&"[object String]"==n(e)}},42434:(e,r,t)=>{var n=t(54467);function i(e,r){if("function"!=typeof e||null!=r&&"function"!=typeof r)throw new TypeError("Expected a function");var t=function(){var n=arguments,i=r?r.apply(this,n):n[0],s=t.cache;if(s.has(i))return s.get(i);var a=e.apply(this,n);return t.cache=s.set(i,a)||s,a};return t.cache=new(i.Cache||n),t}i.Cache=n,e.exports=i},32377:(e,r,t)=>{var n=t(75696);e.exports=function(){void 0===this.__values__&&(this.__values__=n(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}}},49091:(e,r,t)=>{var n=t(43463),i=t(57351);e.exports=function(e){for(var r,t=this;t instanceof n;){var s=i(t);s.__index__=0,s.__values__=void 0,r?a.__wrapped__=s:r=s;var a=s;t=t.__wrapped__}return a.__wrapped__=e,r}},20608:e=>{var r=Array.prototype.reverse;e.exports=function(e){return null==e?e:r.call(e)}},43673:(e,r,t)=>{e.exports={at:t(26272),chain:t(69203),commit:t(45593),lodash:t(74740),next:t(32377),plant:t(49091),reverse:t(35503),tap:t(41287),thru:t(94229),toIterator:t(91527),toJSON:t(51523),value:t(9676),valueOf:t(22422),wrapperChain:t(9288)}},41287:e=>{e.exports=function(e,r){return r(e),e}},94229:e=>{e.exports=function(e,r){return r(e)}},75696:(e,r,t)=>{var n=t(4635),i=t(76321),s=t(25531),a=t(97840),o=t(56801),u=t(80275),l=t(90943),c=t(26557),p=t(10078),_=t(83134),v=n?n.iterator:void 0;e.exports=function(e){if(!e)return[];if(a(e))return o(e)?p(e):i(e);if(v&&e[v])return u(e[v]());var r=s(e);return("[object Map]"==r?l:"[object Set]"==r?c:_)(e)}},91527:e=>{e.exports=function(){return this}},51523:(e,r,t)=>{e.exports=t(9676)},22422:(e,r,t)=>{e.exports=t(9676)},83134:(e,r,t)=>{var n=t(37696),i=t(65724);e.exports=function(e){return null==e?[]:n(e,i(e))}},26272:(e,r,t)=>{var n=t(5294),i=t(46231),s=t(30399),a=t(65002),o=t(97059),u=t(94229),l=a((function(e){var r=e.length,t=r?e[0]:0,a=this.__wrapped__,l=function(r){return s(r,e)};return!(r>1||this.__actions__.length)&&a instanceof n&&o(t)?((a=a.slice(t,+t+(r?1:0))).__actions__.push({func:u,args:[l],thisArg:void 0}),new i(a,this.__chain__).thru((function(e){return r&&!e.length&&e.push(void 0),e}))):this.thru(l)}));e.exports=l},9288:(e,r,t)=>{var n=t(69203);e.exports=function(){return n(this)}},74740:(e,r,t)=>{var n=t(5294),i=t(46231),s=t(43463),a=t(12279),o=t(39248),u=t(57351),l=Object.prototype.hasOwnProperty;function c(e){if(o(e)&&!a(e)&&!(e instanceof n)){if(e instanceof i)return e;if(l.call(e,"__wrapped__"))return u(e)}return new i(e)}c.prototype=s.prototype,c.prototype.constructor=c,e.exports=c},35503:(e,r,t)=>{var n=t(5294),i=t(46231),s=t(20608),a=t(94229);e.exports=function(){var e=this.__wrapped__;if(e instanceof n){var r=e;return this.__actions__.length&&(r=new n(this)),(r=r.reverse()).__actions__.push({func:a,args:[s],thisArg:void 0}),new i(r,this.__chain__)}return this.thru(s)}},9676:(e,r,t)=>{var n=t(96862);e.exports=function(){return n(this.__wrapped__,this.__actions__)}}}]);