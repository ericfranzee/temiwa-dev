"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[2308],{79406:(e,s,l)=>{l.d(s,{a:()=>d});var n=l(9950),a=l(95491),i=l.n(a),r=l(99674),t=l(90650),o=l(44414);const d=e=>{let{fetchOptions:s,debounceTimeout:l=400,refetch:a=!1,...d}=e;const[c,u]=(0,n.useState)(!1),[m,v]=(0,n.useState)([]),h=(0,n.useMemo)((()=>i()((e=>{v([]),u(!0),s(e).then((e=>{v(e),u(!1)}))}),l)),[s,l]);return(0,o.jsx)(r.A,{showSearch:!0,allowClear:!0,labelInValue:!0,onClear:()=>h(""),filterOption:!1,onSearch:h,notFoundContent:c?(0,o.jsx)(t.A,{size:"small"}):"no results",...d,options:m,onFocus:()=>{m.length&&!a||h("")}})}},47992:(e,s,l)=>{l.d(s,{G:()=>d});var n=l(9950),a=l(95491),i=l.n(a),r=l(99674),t=l(90650),o=l(44414);const d=e=>{let{fetchOptions:s,debounceTimeout:l=400,onClear:a,refetchOptions:d=!1,...c}=e;const[u,m]=(0,n.useState)(!1),[v,h]=(0,n.useState)([]),p=(0,n.useMemo)((()=>i()((e=>{h([]),m(!0),s(e).then((e=>{h(e),m(!1)}))}),l)),[s,l]);return(0,o.jsx)(r.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:p,onClear:()=>{p(""),a&&a()},notFoundContent:u?(0,o.jsx)(t.A,{size:"small"}):"no results",...c,options:v,onFocus:()=>{v.length&&!d||p("")}})}},62308:(e,s,l)=>{l.r(s),l.d(s,{default:()=>v});var n=l(70030),a=l(91854),i=l(59233),r=l(23263),t=l(28429),o=l(9950),d=l(74623),c=l(87902),u=l(84386),m=l(44414);const v=function(){const{t:e}=(0,n.B)(),s=(0,a.wA)(),[l]=i.A.useForm(),{id:v}=(0,t.g)(),{activeMenu:h}=(0,a.d4)((e=>e.menu)),[p,A]=(0,o.useState)(!0);return(0,o.useEffect)((()=>{h.refetch&&((e=>{A(!0),c.A.getById(e).then((e=>{var s,n,a;let{data:i}=e;l.setFieldsValue({master:{value:null===(s=i.master)||void 0===s?void 0:s.id,label:"".concat(i.master.firstname," ").concat(i.master.lastname)},service:{value:null===i||void 0===i?void 0:i.service_id,label:null===i||void 0===i||null===(n=i.service)||void 0===n||null===(a=n.translation)||void 0===a?void 0:a.title,key:null===i||void 0===i?void 0:i.service_id},price:i.price,interval:i.interval,pause:i.pause,commission_fee:i.commission_fee,active:i.active,discount:i.discount,type:i.type,gender:i.gender})})).finally((()=>A(!1)))})(v),s((0,d.km)(h)))}),[h.refetch]),(0,m.jsx)(r.A,{title:e("add.service.master"),loading:p,children:!p&&(0,m.jsx)(u.A,{form:l,onSubmit:e=>c.A.update(v,e)})})}},84386:(e,s,l)=>{l.d(s,{A:()=>q});var n=l(70030),a=l(91854),i=l(28429),r=l(9950),t=l(85923),o=l(74623),d=l(59233),c=l(87094),u=l(41988),m=l(40577),v=l(99674),h=l(25933),p=l(48538),A=l(47992),f=l(79406),j=l(66209),x=l(98178),b=l(75751),g=l(44414);const y=["online","offline_in","offline_out"],w=[{value:1,label:"male"},{value:2,label:"female"},{value:3,label:"all"}];const q=function(e){let{form:s,onSubmit:l,initialValues:q={}}=e;const{t:S}=(0,n.B)(),I=(0,a.wA)(),_=(0,i.Zp)(),{activeMenu:C}=(0,a.d4)((e=>e.menu)),{defaultCurrency:k}=(0,a.d4)((e=>e.currency),a.bN),O=(0,a.d4)((e=>{var s,l;return null===(s=e.myShop)||void 0===s||null===(l=s.myShop)||void 0===l?void 0:l.id}),a.bN),F=(0,r.useRef)([]),[N,V]=(0,r.useState)(!1);return(0,g.jsxs)(d.A,{onFinish:e=>{var s;V(!0);const n="seller/service-master",i={...e,shop_id:O,service_id:e.service.value,active:e.active?1:0,master_id:null===(s=e.master)||void 0===s?void 0:s.value,service:void 0,master:void 0};return l(i).then((()=>{t.oR.success("successfully.added"),(0,a.vA)((()=>{I((0,o.EK)({...C,nextUrl:n})),I((0,b.Rk)({})),_("/"+n)}))})).finally((()=>{V(!1)}))},form:s,layout:"vertical",initialValues:{active:!0},children:[(0,g.jsxs)(c.A,{gutter:24,children:[(0,g.jsx)(u.A,{span:8,children:(0,g.jsx)(d.A.Item,{label:S("master"),name:"master",rules:[{required:!0,message:S("required")}],children:(0,g.jsx)(A.G,{fetchOptions:e=>{var s;const l={page:1,perPage:20,search:null!==e&&void 0!==e&&e.length?e:void 0,role:"master",invite_status:"accepted"};return null!==e&&void 0!==e&&null!==(s=e.trim())&&void 0!==s&&s.length||delete l.search,j.A.shopUsers(l).then((e=>e.data.map((e=>({label:"".concat(null===e||void 0===e?void 0:e.firstname," ").concat(null===e||void 0===e?void 0:e.lastname),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id})))))}})})}),(0,g.jsx)(u.A,{span:8,children:(0,g.jsx)(d.A.Item,{label:S("service"),name:"service",rules:[{required:!0,message:S("required")}],children:(0,g.jsx)(f.a,{fetchOptions:e=>{const s={search:e,active:1};return x.A.getAll(s).then((e=>{const s=e.data.map((e=>({label:e.translation?e.translation.title:"no name",value:e.id,key:e.id,price:e.price,interval:e.interval,pause:e.pause,commission_fee:e.commission_fee,type:e.type,gender:e.gender})));return F.current=s,s}))},refetch:!0,onChange:e=>{var l;const n=null===(l=F.current)||void 0===l?void 0:l.find((s=>s.value===e.value));s.setFieldsValue({service:e,...n})}})})}),(0,g.jsx)(u.A,{span:8,children:(0,g.jsx)(d.A.Item,{label:S("price"),name:"price",rules:[{required:!0,message:S("required")}],children:(0,g.jsx)(m.A,{min:0,className:"w-100",addonAfter:null===k||void 0===k?void 0:k.symbol})})}),(0,g.jsx)(u.A,{span:8,children:(0,g.jsx)(d.A.Item,{label:S("interval"),name:"interval",rules:[{required:!0,message:S("required")}],children:(0,g.jsx)(m.A,{min:0,className:"w-100"})})}),(0,g.jsx)(u.A,{span:8,children:(0,g.jsx)(d.A.Item,{label:S("pause"),name:"pause",rules:[{required:!0,message:S("required")}],children:(0,g.jsx)(m.A,{min:0,className:"w-100"})})}),(0,g.jsx)(u.A,{span:8,children:(0,g.jsx)(d.A.Item,{label:"type",name:"type",rules:[{required:!0,message:S("required")}],children:(0,g.jsx)(v.A,{children:y.map(((e,s)=>(0,g.jsx)(v.A.Option,{value:e,children:e},e)))})})}),(0,g.jsx)(u.A,{span:8,children:(0,g.jsx)(d.A.Item,{label:S("commission.fee"),name:"commission_fee",children:(0,g.jsx)(m.A,{min:1,className:"w-100"})})}),(0,g.jsx)(u.A,{span:8,children:(0,g.jsx)(d.A.Item,{label:S("discount"),name:"discount",rules:[{validator:(e,s)=>void 0!==s&&(s<0||s>100)?Promise.reject(new Error(S("must.be.between.0.and.100"))):Promise.resolve()}],children:(0,g.jsx)(m.A,{min:0,className:"w-100",addonAfter:(null===k||void 0===k?void 0:k.symbol)||"$"})})}),(0,g.jsx)(u.A,{span:8,children:(0,g.jsx)(d.A.Item,{label:S("gender"),name:"gender",rules:[{required:!0,message:S("required")}],children:(0,g.jsx)(v.A,{children:w.map(((e,s)=>(0,g.jsx)(v.A.Option,{value:e.value,children:S(e.label)},e.value)))})})}),(0,g.jsx)(u.A,{span:8,children:(0,g.jsx)(d.A.Item,{label:S("active"),name:"active",valuePropName:"checked",children:(0,g.jsx)(h.A,{})})})]}),(0,g.jsx)(p.A,{type:"primary",htmlType:"submit",loading:N,children:S("submit")})]})}}}]);