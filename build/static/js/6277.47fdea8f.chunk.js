"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[6277],{85023:(e,l,t)=>{t.d(l,{D:()=>s});var a=t(9950),i=t(99674),n=t(90650),d=t(44414);const s=e=>{let{fetchOptions:l,refetch:t=!1,value:s,...o}=e;const[r,u]=(0,a.useState)(!1),[c,v]=(0,a.useState)([]);"object"===typeof(null===s||void 0===s?void 0:s.label)&&null!==(null===s||void 0===s?void 0:s.label)&&(s.label=s.label.value);return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(i.A,{labelInValue:!0,filterOption:!1,notFoundContent:r?(0,d.jsx)(n.A,{size:"small"}):"no results",value:s,...o,options:r?[]:c,onFocus:()=>{c.length&&!t||(u(!0),l().then((e=>{v(e),u(!1)})))},getPopupContainer:e=>e.parentNode})})}},72345:(e,l,t)=>{t.d(l,{v:()=>r});var a=t(9950),i=t(90777),n=t(90650),d=t(95491),s=t.n(d),o=t(44414);const r=e=>{let{fetchOptions:l,refetch:t=!1,debounceTimeout:d=400,...r}=e;const[u,c]=(0,a.useState)(!1),[v,p]=(0,a.useState)([]),m=(0,a.useMemo)((()=>s()((e=>{p([]),c(!0),l(e).then((e=>{p(e),c(!1)}))}),d)),[]);return(0,o.jsx)(i.A,{showSearch:!0,labelInValue:!0,filterTreeNode:(e,l)=>l.label.localeCompare(e),treeLine:!0,onSearch:e=>m(e),treeData:u?[]:v,treeDefaultExpandAll:!0,onFocus:()=>{v.length&&!t||(c(!0),l().then((e=>{p(e),c(!1)})))},notFoundContent:u?(0,o.jsx)(n.A,{size:"small"}):"no results",...r})}},35116:(e,l,t)=>{t.d(l,{A:()=>r});t(9950);var a=t(48538),i=t(44070),n=t(85923),d=t(70030),s=t(13311),o=t(44414);function r(e){let{size:l="",onClick:t,type:r="default",...u}=e;const{t:c}=(0,d.B)(),{isDemo:v}=(0,s.A)();return(0,o.jsx)(a.A,{size:l,icon:(0,o.jsx)(i.A,{}),onClick:e=>{v?n.oR.warning(c("cannot.work.demo")):t(e)},type:r,...u})}},47992:(e,l,t)=>{t.d(l,{G:()=>r});var a=t(9950),i=t(95491),n=t.n(i),d=t(99674),s=t(90650),o=t(44414);const r=e=>{let{fetchOptions:l,debounceTimeout:t=400,onClear:i,refetchOptions:r=!1,...u}=e;const[c,v]=(0,a.useState)(!1),[p,m]=(0,a.useState)([]),x=(0,a.useMemo)((()=>n()((e=>{m([]),v(!0),l(e).then((e=>{m(e),v(!1)}))}),t)),[l,t]);return(0,o.jsx)(d.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:x,onClear:()=>{x(""),i&&i()},notFoundContent:c?(0,o.jsx)(s.A,{size:"small"}):"no results",...u,options:p,onFocus:()=>{p.length&&!r||x("")}})}},12196:(e,l,t)=>{t.d(l,{A:()=>g});var a=t(9950),i=t(59233),n=t(72243),d=t(87094),s=t(41988),o=t(80737),r=t(66876),u=t(82706),c=t(48538),v=t(8750),p=t(44070),m=t(48970),x=t(64924),h=t(70030),A=t(44414);const g=e=>{var l;let{mediaList:t,setMediaList:g,name:j="products"}=e;const{t:y}=(0,h.B)(),[b]=i.A.useForm(),[f,k]=(0,a.useState)(null),[q,_]=(0,a.useState)([]),[w,I]=(0,a.useState)(!1),[S,N]=(0,a.useState)(!1),C=async e=>{let{file:l,type:t}=e;l.name?(k("video"===t?(0,A.jsx)("video",{controls:!0,src:l.name,width:450,height:450}):(0,A.jsx)(n.A,{src:l.name,width:"100%",height:450,alt:"preview-img"})),I(!0)):k(null)},F=e=>({uid:e.title,name:e.title,status:"done",url:e.title,created:!0});return(0,A.jsxs)(d.A,{gutter:[24,24],children:[(0,A.jsx)(s.A,{span:24,children:(0,A.jsx)(o.A,{className:"align-items-start",children:(0,A.jsx)(r.A,{customRequest:e=>{let{file:l,onSuccess:t}=e;N(!0);const a=new FormData;a.append("image",l),a.append("type",j),x.A.upload(a).then((e=>{let{data:l}=e;g((e=>({...e,images:[...e.images,{...F(l),isVideo:!0}]}))),t("ok")}))},accept:"video/*",listType:"text",className:"video-upload",multiple:!1,fileList:[],children:(0,A.jsxs)("div",{className:"media-upload",children:[(0,A.jsx)(v.A,{})," ",(0,A.jsx)("span",{children:y("upload.video")})]})})})}),(0,A.jsx)(s.A,{span:24,children:null===t||void 0===t||null===(l=t.previews)||void 0===l?void 0:l.map(((e,l)=>{var a,i;return(0,A.jsxs)(o.A,{className:"uploaded-file",wrap:!0,children:[(0,A.jsx)("span",{className:"media-item",onClick:()=>C({type:"img",file:null===t||void 0===t?void 0:t.previews[l]}),children:null===t||void 0===t||null===(a=t.previews[l])||void 0===a?void 0:a.name}),(0,A.jsx)("span",{className:"media-item",onClick:()=>C({type:"video",file:null===t||void 0===t?void 0:t.images[l]}),children:null===t||void 0===t||null===(i=t.images[l])||void 0===i?void 0:i.name}),(0,A.jsx)(p.A,{className:"delete-media-item",onClick:()=>(e=>{const l=t.images.filter(((l,t)=>{if(t!==e)return l})),a=t.previews.filter(((l,t)=>{if(t!==e)return l}));g({images:l,previews:a})})(l)})]})}))}),(0,A.jsx)(u.A,{title:"Video Preview",visible:w,onCancel:()=>{I(!1)},footer:null,children:f}),(0,A.jsx)(u.A,{title:"Preview image",visible:S,footer:null,onCancel:()=>N(!1),children:(0,A.jsx)(i.A,{form:b,onFinish:()=>{g((e=>({...e,previews:[...e.previews,...q]}))),_([]),N(!1)},layout:"vertical",children:(0,A.jsxs)(d.A,{gutter:[24,24],children:[(0,A.jsx)(s.A,{span:24,children:(0,A.jsx)(i.A.Item,{label:y("preview.image"),name:"preview-image",rules:[{required:!(null!==q&&void 0!==q&&q.length),message:y("required")}],children:(0,A.jsx)(m.A,{type:j,imageList:q,setImageList:_,multiple:!1,text:"upload.image",form:b})})}),(0,A.jsx)(s.A,{span:24,className:"d-flex justify-content-end",children:(0,A.jsx)(c.A,{type:"primary",onClick:()=>b.submit(),children:y("save")})})]})})})]})}},45321:(e,l,t)=>{t.d(l,{A:()=>a});const a=function(e){let l=[],t=e.length-1;return function a(i,n){for(let s=0,o=null===(d=e[n])||void 0===d?void 0:d.length;s<o;s++){var d;let o=i.slice(0);o.push(e[n][s]),n===t?l.push(o):a(o,n+1)}}([],0),l}},34537:(e,l,t)=>{function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;const l=[];for(let t=0;t<e;t++){const e=Math.floor(10*Math.random());l.push(e)}return l.join("")}t.d(l,{A:()=>a})},31281:(e,l,t)=>{function a(e,l){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const a=e.map((e=>({[e.locale]:""===l["".concat(t,"[").concat(e.locale,"]")]?void 0:l["".concat(t,"[").concat(e.locale,"]")]})));return Object.assign({},...a)}t.d(l,{A:()=>a})},37295:(e,l,t)=>{t.d(l,{A:()=>i});var a=t(9950);function i(e,l){const[t,i]=(0,a.useState)(e);return(0,a.useEffect)((()=>{const t=setTimeout((()=>{i(e)}),l);return()=>{clearTimeout(t)}}),[e,l]),t}},74827:(e,l,t)=>{t.d(l,{A:()=>i});var a=t(82371);const i={getAll:e=>a.A.get("rest/brands/paginate",{params:e}),getById:(e,l)=>a.A.get("rest/brands/".concat(e),{params:l})}},78457:(e,l,t)=>{t.d(l,{A:()=>i});var a=t(82371);const i={getAll:e=>a.A.get("dashboard/seller/categories/paginate",{params:e}),getById:(e,l)=>a.A.get("dashboard/seller/categories/".concat(e),{params:l}),search:e=>a.A.get("dashboard/seller/categories/search",{params:e}),paginateSelect:e=>a.A.get("dashboard/seller/categories/select-paginate",{params:e})}},31888:(e,l,t)=>{t.d(l,{A:()=>i});var a=t(82371);const i={getAll:e=>a.A.get("dashboard/seller/units/paginate",{params:e}),getById:(e,l)=>a.A.get("dashboard/seller/units/".concat(e),{params:l})}},50860:(e,l,t)=>{t.d(l,{A:()=>g});var a=t(9950),i=t(59233),n=t(82706),d=t(48538),s=t(55902),o=t(99674),r=t(70030),u=t(71999),c=t(91854),v=t(59621),p=t(85923),m=t(88149),x=t(31281),h=t(81446),A=t(44414);function g(e){let{modal:l,handleCancel:t,onSuccess:g}=e;const[j]=i.A.useForm(),{t:y}=(0,r.B)(),b=(0,c.wA)(),[f,k]=(0,a.useState)(!1),[q,_]=(0,a.useState)(!1),{languages:w,defaultLang:I}=(0,c.d4)((e=>e.formLang),c.bN);(0,a.useEffect)((()=>{var e;null!==l&&void 0!==l&&l.id&&(e=l.id,_(!0),v.A.getGroupById(e).then((e=>{const l=e.data;j.setFieldsValue({...l,...S(l)})})).finally((()=>_(!1)))),b((0,m.As)())}),[l]);function S(e){if(!e)return{};const{translations:l}=e,t=w.map((e=>{var t;return{["title[".concat(e.locale,"]")]:null===(t=l.find((l=>l.locale===e.locale)))||void 0===t?void 0:t.title}}));return Object.assign({},...t)}return(0,A.jsx)(n.A,{title:null!==l&&void 0!==l&&l.id?y("edit.extra.group"):y("add.extra.group"),visible:!!l,onCancel:t,footer:[(0,A.jsx)(d.A,{type:"primary",onClick:()=>j.submit(),loading:f,children:y("save")},"save-button-group"),(0,A.jsx)(d.A,{type:"default",onClick:t,children:y("cancel")},"cancel-button-group")],children:q?(0,A.jsx)(h.A,{}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{className:"d-flex justify-content-end",children:(0,A.jsx)(u.A,{})}),(0,A.jsxs)(i.A,{layout:"vertical",name:"extra-group",form:j,onFinish:e=>{const a={title:(0,x.A)(w,e),type:null===e||void 0===e?void 0:e.type};null!==l&&void 0!==l&&l.id?function(e,l){k(!0),v.A.updateGroup(e,l).then((()=>{p.oR.success(y("successfully.updated")),b((0,m.As)()),t()})).finally((()=>k(!1)))}(null===l||void 0===l?void 0:l.id,a):function(e){k(!0),v.A.createGroup(e).then((()=>{p.oR.success(y("successfully.created")),t(),b((0,m.As)()),g&&g()})).finally((()=>k(!1)))}(a)},children:[w.map((e=>(0,A.jsx)(i.A.Item,{rules:[{required:e.locale===I,message:y("required")}],name:"title[".concat(e.locale,"]"),label:y("title"),hidden:e.locale!==I,children:(0,A.jsx)(s.A,{placeholder:y("title")})},"title"+e.locale))),(0,A.jsx)(i.A.Item,{name:"type",label:y("type"),rules:[{required:!0,message:y("required")}],children:(0,A.jsxs)(o.A,{style:{width:"100%"},placeholder:y("select.extra.type"),children:[(0,A.jsx)(o.A.Option,{value:"color",children:y("color")}),(0,A.jsx)(o.A.Option,{value:"text",children:y("text")})]})})]})]})})}},97434:(e,l,t)=>{t.d(l,{A:()=>g});var a=t(59233),i=t(55902),n=t(82706),d=t(48538),s=t(9950),o=t(25825),r=t(70030),u=t(91854),c=t(85923),v=t(32599),p=t(62466),m=t(43999),x=t(59621),h=t(47992),A=t(44414);function g(e){var l,t,g,j;let{modal:y,handleCancel:b,isVisible:f,paramsData:k}=e;const[q]=a.A.useForm(),{t:_}=(0,r.B)(),w=(0,u.wA)(),[I,S]=(0,s.useState)(!1),[N,C]=(0,s.useState)("text"),[F,O]=(0,s.useState)(null),[V,M]=(0,s.useState)("");(0,s.useEffect)((()=>{if(null!==y&&void 0!==y&&y.id){switch(C(y.group.type),y.group.type){case"color":M(y.value);break;case"image":O((0,p.A)(y.value))}q.setFieldsValue(y)}}),[y]);function E(e,l){switch(e){case"color":return l.hex;case"text":return l;case"image":return l.name;default:return""}}return(0,A.jsx)(n.A,{title:null!==y&&void 0!==y&&y.id?_("edit.extra"):_("add.extra"),visible:f,onCancel:b,footer:[(0,A.jsx)(d.A,{type:"primary",onClick:()=>q.submit(),loading:I,children:_("save")}),(0,A.jsx)(d.A,{type:"default",onClick:b,children:_("cancel")})],children:(0,A.jsxs)(a.A,{name:"extra-form",layout:"vertical",form:q,onFinish:e=>{var l,t;const a={extra_group_id:null!==(l=e.extra_group_id.value)&&void 0!==l?l:e.extra_group_id,value:null!==(t=E(N,e.value))&&void 0!==t?t:e.value};null!==y&&void 0!==y&&y.id?((e,l)=>{S(!0),x.A.updateValue(e,l).then((()=>{c.oR.success(_("successfully.updated")),b(),w((0,m.$Y)(k))})).finally((()=>{S(!1),q.resetFields()}))})(y.id,a):(e=>{S(!0),x.A.createValue(e).then((()=>{c.oR.success(_("successfully.created")),b(),w((0,m.$Y)(k))})).finally((()=>{S(!1),q.resetFields()}))})(a)},initialValues:{extra_group_id:null!==y&&void 0!==y&&y.group?{label:null===y||void 0===y||null===(l=y.group)||void 0===l||null===(t=l.translation)||void 0===t?void 0:t.title,value:null===y||void 0===y||null===(g=y.group)||void 0===g?void 0:g.id,key:null===y||void 0===y||null===(j=y.group)||void 0===j?void 0:j.id}:[]},children:[(0,A.jsx)(a.A.Item,{name:"extra_group_id",label:_("extra.group"),rules:[{required:!0,message:"required"}],children:(0,A.jsx)(h.G,{fetchOptions:e=>{const l={perPage:10,page:1,search:e};return x.A.getAllGroups(l).then((e=>e.data.map((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:"".concat(null===e||void 0===e?void 0:e.type,",").concat(null===e||void 0===e?void 0:e.id)}}))))},placeholder:_("select.extra.group"),allowClear:!0,onChange:e=>{var l;C(null===e||void 0===e||null===(l=e.key)||void 0===l?void 0:l.split(",")[0]),q.setFieldsValue({value:""})}})}),(0,A.jsx)(a.A.Item,{name:"value",label:_("value"),rules:[{required:!0,message:"required"}],children:(e=>{switch(e){case"color":return(0,A.jsx)(o.Xq,{onChangeComplete:e=>M(e.hex),color:V,disableAlpha:!0});case"text":return(0,A.jsx)(i.A,{placeholder:_("enter.extra.value")});case"image":return(0,A.jsx)(v.A,{type:"extras",image:F,setImage:O,form:q,name:"value"});default:return""}})(N)})]})})}},76092:(e,l,t)=>{t.d(l,{A:()=>F});var a=t(9950),i=t(23263),n=t(59233),d=t(80737),s=t(48538),o=t(91854),r=t(74623),u=t(70030),c=t(28429),v=t(82706),p=t(52765),m=t(90247),x=t(63611),h=t(74947),A=t(11260),g=t(97434),j=t(8750),y=t(44738),b=t(69466),f=t(44414);const k=e=>{let{extra:l,onClose:t,onSelect:i}=e;const{t:n}=(0,u.B)(),[o,r]=(0,a.useState)(!1),[c,k]=(0,a.useState)([]),[q,_]=(0,a.useState)([]),[w,I]=(0,a.useState)(!1);function S(e){r(!0),A.A.getGroupById(e).then((e=>k(e.data.extra_values.map((e=>({label:e.value,value:e.id,group_type:e.group.type})))))).finally((()=>{r(!1)}))}return(0,a.useEffect)((()=>{var e;null!==l&&void 0!==l&&l.value&&!w&&(S(l.value),_((null===l||void 0===l||null===(e=l.values)||void 0===e?void 0:e.map((e=>e.value)))||[]))}),[null===l||void 0===l?void 0:l.value,w]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(v.A,{visible:!!l,onCancel:t,footer:[(0,f.jsx)(s.A,{onClick:t,children:n("cancel")}),!o&&c.length>0&&(0,f.jsx)(s.A,{onClick:()=>{const e=[];c.forEach((l=>{q.forEach((t=>{l.value===t&&e.push(l)}))})),i(null===l||void 0===l?void 0:l.value,e),t()},type:"primary",children:n("save")})],children:[(0,f.jsx)(b.Ay,{autoHide:!0,autoHeight:!0,autoHeightMin:"60vh",autoHeightMax:"60vh",children:(0,f.jsx)(p.A.Group,{value:q,onChange:e=>{_(e)},className:"w-100",children:0!==(null===c||void 0===c?void 0:c.length)||o?(0,f.jsx)(x.Ay,{dataSource:c,loading:o,renderItem:e=>(0,f.jsx)(x.Ay.Item,{children:(0,f.jsx)(p.A,{value:e.value,children:"color"===e.group_type?(0,f.jsxs)(d.A,{size:"small",children:[(0,f.jsx)(h.A,{className:"extras-color-badge",color:null===e||void 0===e?void 0:e.label}),(0,y.n)(null===e||void 0===e?void 0:e.label),(0,f.jsxs)("span",{children:["(",null===e||void 0===e?void 0:e.label,")"]})]}):(0,f.jsx)("span",{children:null===e||void 0===e?void 0:e.label})})})}):(0,f.jsx)(m.A,{})})}),o?null:(0,f.jsx)(s.A,{type:"link",onClick:()=>I(!0),style:{paddingLeft:0},icon:(0,f.jsx)(j.A,{}),children:n("add.new.extra")})]}),l&&(0,f.jsx)(g.A,{isVisible:w,modal:{label:null===l||void 0===l?void 0:l.label,value:null===l||void 0===l?void 0:l.id,key:null===l||void 0===l?void 0:l.id},handleCancel:()=>I(!1),groupId:null===l||void 0===l?void 0:l.value,onSuccess:()=>S(null===l||void 0===l?void 0:l.value)})]})};var q=t(6604),_=t(55902),w=t(12916),I=t(50860),S=t(37295);const N=e=>{let{open:l,onClose:t,selectedExtras:i,onSelect:n}=e;const{t:d}=(0,u.B)(),[o,r]=(0,a.useState)([]),[c,p]=(0,a.useState)(!1),[m,h]=(0,a.useState)(!1),[g,y]=(0,a.useState)(""),b=(0,S.A)(g,500),k=e=>{p(!0);const l={valid:1,perPage:100,search:e};A.A.getAllGroups(l).then((e=>{const l=e.data.map((e=>{var l;return{id:e.id,label:null===(l=e.translation)||void 0===l?void 0:l.title,value:e.id,shop_id:e.shop_id,group:{...e}}}));r(l)})).finally((()=>p(!1)))};return(0,a.useEffect)((()=>{l&&k(b)}),[l,b]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(v.A,{visible:l,onCancel:()=>{t(),y("")},footer:null,children:[(0,f.jsx)(_.A,{className:"mt-3",value:g,onChange:e=>y(e.target.value)}),(0,f.jsx)(x.Ay,{loading:c,dataSource:o.filter((e=>!(null!==i&&void 0!==i&&i.some((l=>l.id===e.id))))),renderItem:e=>(0,f.jsx)(x.Ay.Item,{extra:null!==e&&void 0!==e&&e.shop_id?null:(0,f.jsx)(w.A,{children:d("admin")}),style:{cursor:"pointer"},onClick:()=>{n(e)},children:e.label}),footer:c?null:(0,f.jsx)(s.A,{type:"link",onClick:()=>h(!0),style:{paddingLeft:0},icon:(0,f.jsx)(j.A,{}),children:d("add.new.extra")})})]}),(0,f.jsx)(I.A,{modal:m,handleCancel:()=>h(!1),onSuccess:()=>k()})]})};var C=t(85923);const F=e=>{var l;let{next:t,prev:v,isRequest:p,mode:m}=e;const{t:x}=(0,u.B)(),h=(0,o.wA)(),{uuid:A,id:g}=(0,c.g)(),j=(0,c.Zp)(),y=(0,c.zy)(),{activeMenu:b}=(0,o.d4)((e=>e.menu),o.bN),[_,w]=(0,a.useState)(!1),[I,S]=(0,a.useState)(!1),[F,O]=(0,a.useState)((null===(l=b.data)||void 0===l?void 0:l.extras)||[]),[V,M]=(0,a.useState)(null),[E,L]=(0,a.useState)(!1),{settings:B}=(0,o.d4)((e=>e.globalSettings));return(0,f.jsx)(i.A,{children:(0,f.jsxs)(n.A,{layout:"vertical",initialValues:{...b.data},onFinish:()=>{var e,l;if(F.some((e=>{var l;return 0===(null===(l=e.values)||void 0===l?void 0:l.length)||!e.values})))return void C.oR.error(x("please.select.at.least.1.extra.value.for.each.extra"));F.map((e=>e.value)).sort(((e,l)=>e-l));let t=y.state;return p?(h((0,r.Ok)({activeMenu:b,data:{...b.data,extras:F}})),void j("/seller/product-request/".concat(g,"?step=2"),{state:{generate:E}})):!E&&!y.state||"edit"!==m||null!==(e=y.state)&&void 0!==e&&e.create||"0"!==(null===B||void 0===B?void 0:B.product_auto_approve)?(w(!0),h((0,r.Ok)({activeMenu:b,data:{...b.data,extras:F}})),void j("/seller/product/".concat(A,"?step=2"),{state:{create:null===(l=y.state)||void 0===l?void 0:l.create}})):(y.state?t.extras=F:t={...b.data,extras:F},h((0,r.Ok)({activeMenu:b,data:{...b.data,extras:F}})),void j("/seller/product/".concat(A,"?step=2"),{state:t}))},children:[(0,f.jsx)(N,{open:I,onClose:()=>S(!1),selectedExtras:F,onSelect:e=>{L(!0),O((l=>[...l,e])),S(!1)}}),(0,f.jsx)(k,{extra:V,onClose:()=>M(null),onSelect:(e,l)=>{L(!0),O((t=>t.map((t=>{if(t.value===e){const e=l.map((e=>{var l,t;const a=null===(l=b.data)||void 0===l||null===(t=l.extras)||void 0===t?void 0:t.flatMap((e=>e.values)).find((l=>l.value===e.value));return{...e,stock_id:null===a||void 0===a?void 0:a.stock_id}}));return{...t,values:e}}return t}))))}}),(0,f.jsx)(d.A,{className:"w-100",size:"middle",direction:"vertical",children:F.map((e=>{var l;return(0,f.jsxs)(d.A,{className:"w-100",direction:"vertical",children:[(0,f.jsxs)(d.A,{className:"w-100",wrap:!0,children:[(0,f.jsx)(s.A,{onClick:()=>M(e),ghost:!0,type:"primary",children:null===e||void 0===e?void 0:e.label}),null===e||void 0===e||null===(l=e.values)||void 0===l?void 0:l.map((l=>(0,f.jsxs)("div",{className:"extra-value",children:[null===l||void 0===l?void 0:l.label," ",(0,f.jsx)("button",{onClick:()=>{return t=e.value,a=l.value,L(!0),void O((e=>e.map((e=>e.value===t?{...e,values:(null===e||void 0===e?void 0:e.values.filter((e=>e.value!==a)))||[]}:e))));var t,a},type:"button",className:"extra-clear",children:(0,f.jsx)(q.lr4,{})})]},l.value)))]}),(0,f.jsx)(d.A,{className:"w-100",style:{justifyContent:"flex-end"},children:(0,f.jsx)(s.A,{danger:!0,onClick:()=>{return l=e,L(!0),void O((e=>e.filter((e=>e.id!==l.id))));var l},type:"text",children:x("delete")})})]},e.id)}))}),(0,f.jsx)(s.A,{onClick:()=>S(!0),className:"w-100 my-3",type:"dashed",children:x("add.extra")}),(0,f.jsxs)(d.A,{className:"mt-3",children:[(0,f.jsx)(s.A,{onClick:v,children:x("prev")}),(0,f.jsx)(s.A,{type:"primary",htmlType:"submit",loading:_,children:x("next")})]})]})})}},62425:(e,l,t)=>{t.d(l,{A:()=>b});var a=t(9950),i=t(23263),n=t(91524),d=t(87094),s=t(41988),o=t(80737),r=t(48538),u=t(90650),c=t(91854),v=t(28429),p=t(74623),m=t(92979),x=t(70030),h=t(67231),A=t(63620),g=t(8228),j=t(85923),y=t(44414);const b=e=>{var l,t,b,f,k,q,_,w,I,S,N;let{prev:C,isRequest:F,mode:O}=e;const{t:V}=(0,x.B)(),{activeMenu:M}=(0,c.d4)((e=>e.menu),c.bN),{defaultLang:E,languages:L}=(0,c.d4)((e=>e.formLang),c.bN),B=(0,v.Zp)(),{state:z}=(0,v.zy)(),G=(0,c.wA)(),[R,T]=(0,a.useState)({}),[W,P]=(0,a.useState)(null),{uuid:D}=(0,v.g)(),{params:U}=(0,c.d4)((e=>e.product),c.bN),[H,K]=(0,a.useState)(!1),{settings:X}=(0,c.d4)((e=>e.globalSettings));function Z(e){if(null===e||void 0===e||!e.translations)return{};const{translations:l}=e,t=L.map((e=>{var t,a;return{["title[".concat(e.locale,"]")]:null===(t=l.find((l=>l.locale===e.locale)))||void 0===t?void 0:t.title,["description[".concat(e.locale,"]")]:null===(a=l.find((l=>l.locale===e.locale)))||void 0===a?void 0:a.description}}));return Object.assign({},...t)}const Y=(0,a.useCallback)((e=>{P(!0),h.A.getById(e).then((e=>{const l={...e.data,...Z(e.data),properties:e.data.properties.map(((e,l)=>({id:l,["key[".concat(e.locale,"]")]:e.key,["value[".concat(e.locale,"]")]:e.value}))),translation:void 0,translations:void 0};T(l)})).finally((()=>P(!1)))}),[D]);(0,a.useEffect)((()=>{F||Y(D)}),[F,D]);const $=F?M.data:z;return W?(0,y.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,y.jsx)(u.A,{size:"large",className:"py-5"})}):(0,y.jsxs)(i.A,{children:[z||F?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(n.A,{title:V("product.info"),bordered:!0,children:[(0,y.jsx)(n.A.Item,{label:"".concat(V("title")," (").concat(E,")"),span:3,children:$["title[".concat(E,"]")]}),(0,y.jsx)(n.A.Item,{label:"".concat(V("description")," (").concat(E,")"),span:3,children:$["description[".concat(E,"]")]}),(0,y.jsx)(n.A.Item,{label:V("shop"),span:1.5,children:null===$||void 0===$||null===(l=$.shop)||void 0===l?void 0:l.translation.title}),(0,y.jsx)(n.A.Item,{label:V("category"),span:1.5,children:null===$||void 0===$||null===(t=$.category)||void 0===t?void 0:t.label}),(0,y.jsx)(n.A.Item,{label:V("brand"),span:1.5,children:null===$||void 0===$||null===(b=$.brand)||void 0===b?void 0:b.label}),(0,y.jsx)(n.A.Item,{label:V("unit"),span:1.5,children:null===$||void 0===$||null===(f=$.unit)||void 0===f?void 0:f.label}),(0,y.jsx)(n.A.Item,{label:V("images"),span:3,children:(0,y.jsx)(d.A,{gutter:12,children:null===$||void 0===$||null===(k=$.images)||void 0===k?void 0:k.filter((e=>!e.isVideo)).map(((e,l)=>(0,y.jsx)(s.A,{children:(0,y.jsx)("img",{width:80,alt:"product",src:e.url})},"image"+l)))})}),(0,y.jsx)(n.A.Item,{label:V("tax"),children:null===$||void 0===$?void 0:$.tax}),(0,y.jsx)(n.A.Item,{label:V("min.quantity"),children:null===$||void 0===$?void 0:$.min_qty}),(0,y.jsx)(n.A.Item,{label:V("max.quantity"),children:null===$||void 0===$?void 0:$.max_qty})]}),null===$||void 0===$?void 0:$.stocks.map(((e,l)=>{var t;return e?(0,y.jsxs)(n.A,{bordered:!0,className:"mt-4",children:[(0,y.jsx)(n.A.Item,{label:V("price"),span:2,children:e.price}),(0,y.jsx)(n.A.Item,{label:V("quantity"),span:2,children:e.quantity}),null===e||void 0===e||null===(t=e.ids)||void 0===t?void 0:t.map(((e,l)=>(0,y.jsx)(n.A.Item,{label:null===$||void 0===$?void 0:$.extras[l].label,children:null===e||void 0===e?void 0:e.label},"extra"+l)))]},"desc"+l):""}))]}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(n.A,{title:V("product.info"),bordered:!0,children:[(0,y.jsx)(n.A.Item,{label:"".concat(V("title")," (").concat(E,")"),span:3,children:R["title[".concat(E,"]")]}),(0,y.jsx)(n.A.Item,{label:"".concat(V("description")," (").concat(E,")"),span:3,children:R["description[".concat(E,"]")]}),(0,y.jsx)(n.A.Item,{label:V("shop"),span:1.5,children:null===(q=R.shop)||void 0===q?void 0:q.translation.title}),(0,y.jsx)(n.A.Item,{label:V("category"),span:1.5,children:null===(_=R.category)||void 0===_?void 0:_.translation.title}),(0,y.jsx)(n.A.Item,{label:V("brand"),span:1.5,children:null===(w=R.brand)||void 0===w?void 0:w.title}),(0,y.jsx)(n.A.Item,{label:V("unit"),span:1.5,children:null===(I=R.unit)||void 0===I?void 0:I.translation.title}),(0,y.jsx)(n.A.Item,{label:V("images"),span:3,children:(0,y.jsx)(d.A,{gutter:12,children:null===R||void 0===R||null===(S=R.galleries)||void 0===S?void 0:S.filter((e=>!e.preview)).map(((e,l)=>(0,y.jsx)(s.A,{children:(0,y.jsx)("img",{width:80,alt:"product",src:A.sE+e.path})},"image"+l)))})}),(0,y.jsx)(n.A.Item,{label:V("tax"),children:R.tax}),(0,y.jsx)(n.A.Item,{label:V("min.quantity"),children:R.min_qty}),(0,y.jsx)(n.A.Item,{label:V("max.quantity"),children:R.max_qty})]}),null===(N=R.stocks)||void 0===N?void 0:N.map(((e,l)=>e?(0,y.jsxs)(n.A,{bordered:!0,className:"mt-4",children:[(0,y.jsx)(n.A.Item,{label:V("price"),span:2,children:e.price}),(0,y.jsx)(n.A.Item,{label:V("quantity"),span:2,children:e.quantity}),e.extras.map(((e,l)=>{var t,a,i;return(0,y.jsx)(n.A.Item,{label:null===e||void 0===e||null===(t=e.group)||void 0===t||null===(a=t.translation)||void 0===a?void 0:a.title,children:null===e||void 0===e||null===(i=e.value)||void 0===i?void 0:i.value},"extra"+l)}))]},"desc"+l):""))]}),(0,y.jsx)("div",{className:"d-flex mt-4",children:(0,y.jsxs)(o.A,{children:[(0,y.jsx)(r.A,{onClick:C,children:V("prev")}),(0,y.jsx)(r.A,{loading:H,type:"primary",onClick:function(){const e="seller/products",l={...U};if(F&&M.data){K(!0);const t={id:M.data.model_id,type:"product",data:M.data};g.A.requestChangeUpdate(M.data.request_id,t).then((()=>{B("/".concat(e),{state:{tab:"request"}}),j.oR.success(V("successfully.updated")),G((0,p.EK)({...M,nextUrl:e})),G((0,m.EN)(l))})).finally((()=>{K(!1)}))}else if(z&&"edit"===O&&"0"===(null===X||void 0===X?void 0:X.product_auto_approve)){K(!0);const t={type:"product",id:M.data.product_id,data:z};g.A.requestChange(t).then((()=>{j.oR.success(V("successfully.updated")),G((0,p.EK)({...M,nextUrl:e})),G((0,m.EN)(l)),B("/".concat(e),{state:{tab:"request"}})})).finally((()=>{K(!1)}))}else G((0,p.EK)({...M,nextUrl:e})),G((0,m.EN)(l)),B("/".concat(e))},children:V("finish")})]})})]})}},86779:(e,l,t)=>{t.d(l,{A:()=>k});var a=t(9950),i=t(59233),n=t(80737),d=t(92759),s=t(82706),o=t(23263),r=t(87094),u=t(41988),c=t(48538),v=t(52913),p=t(44070),m=t(91854),x=t(74623),h=t(67231),A=t(70030),g=t(28429),j=t(35116),y=t(29763),b=t(47992),f=t(44414);const k=e=>{let{next:l,prev:t}=e;const[k]=i.A.useForm(),{t:q}=(0,A.B)(),_=(0,m.wA)(),{uuid:w}=(0,g.g)(),{activeMenu:I}=(0,m.d4)((e=>e.menu),m.bN),[S,N]=(0,a.useState)([]),[C,F]=(0,a.useState)(!1),[O,V]=(0,a.useState)(!1),[M,E]=(0,a.useState)(null),L=[{key:"2",title:q("property.group"),dataIndex:"group",render:e=>{var l;return(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||"-"}},{key:"4",title:q("property.value"),dataIndex:"value",render:e=>(null===e||void 0===e?void 0:e.value)||"-"},{key:"5",title:q("options"),render:e=>(0,f.jsx)(n.A,{children:(0,f.jsx)(j.A,{type:"primary",danger:!0,icon:(0,f.jsx)(p.A,{}),onClick:()=>z(e)})})}];(0,a.useEffect)((()=>{if(S.length&&w){const e=S;_((0,x.Ok)({activeMenu:I,data:{...I.data,properties:e}}))}}),[S]);const B=e=>{h.A.properties(w,{properties:e}).then((()=>{d.Ay.success(q("product.properties.saved")),G(w)})).finally((()=>F(!1)))},z=e=>{s.A.confirm({title:q("delete.product"),okText:q("yes"),okType:"danger",onOk:()=>{var l;const t=null===S||void 0===S||null===(l=S.filter((l=>l.id!==e.id)))||void 0===l?void 0:l.map((e=>{var l;return null===e||void 0===e||null===(l=e.value)||void 0===l?void 0:l.id}));B(t)}})},G=e=>{V(!0),h.A.getById(e).then((e=>{var l;let{data:t}=e;N(null===t||void 0===t||null===(l=t.properties)||void 0===l?void 0:l.filter((e=>null===e||void 0===e?void 0:e.value))),k.resetFields()})).catch((e=>{console.log(e)})).finally((()=>{V(!1)}))};(0,a.useEffect)((()=>{w&&G(w)}),[]);return(0,f.jsxs)(o.A,{children:[(0,f.jsx)(i.A,{name:"property-form",layout:"vertical",form:k,onFinish:e=>{F(!0);const l=e.propertyValue.map((e=>e.value)),t=null===S||void 0===S?void 0:S.map((e=>{var l;return null===e||void 0===e||null===(l=e.value)||void 0===l?void 0:l.id})),a=new Set([...l,...t]),i=Array.from(a);B({...i})},children:(0,f.jsxs)(r.A,{gutter:24,className:"mb-3",style:{display:"flex",alignItems:"center"},children:[(0,f.jsx)(u.A,{span:10,children:(0,f.jsx)(i.A.Item,{name:"propertyGroup",label:q("property.group"),rules:[{required:!0,message:q("required")}],children:(0,f.jsx)(b.G,{fetchOptions:e=>{const l={search:e,perPage:10,page:1};return y.A.getAllGroups(l).then((e=>e.data.map((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))))},placeholder:q("select.group"),onSelect:e=>{E(e),k.setFieldsValue({propertyValue:[]})},onClear:()=>{E(null),k.setFieldsValue({propertyValue:[]})}})})}),(0,f.jsx)(u.A,{span:10,children:(0,f.jsx)(i.A.Item,{name:"propertyValue",label:q("property.value"),rules:[{required:!0,message:q("required")}],children:(0,f.jsx)(b.G,{fetchOptions:e=>{const l={search:e,perPage:10,page:1,group_id:null===M||void 0===M?void 0:M.value};return y.A.getAllValues(l).then((e=>e.data.map((e=>({label:null===e||void 0===e?void 0:e.value,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id})))))},placeholder:q("select.value"),refetchOptions:!0,disabled:!M,mode:"multiple"})})}),(0,f.jsx)(u.A,{span:4,children:(0,f.jsx)(c.A,{type:"primary",htmlType:"submit",loading:C,children:q("save")})})]})}),(0,f.jsx)(v.A,{scroll:{x:!0},columns:L,dataSource:S,pagination:!1,rowKey:e=>e.id,loading:O}),(0,f.jsxs)(n.A,{className:"mt-4",children:[(0,f.jsx)(c.A,{onClick:t,children:q("prev")}),(0,f.jsx)(c.A,{type:"primary",onClick:l,children:q("next")})]})]})}},9930:(e,l,t)=>{t.d(l,{A:()=>q});var a=t(9950),i=t(59233),n=t(23263),d=t(87094),s=t(41988),o=t(40577),r=t(40895),u=t(55902),c=t(48538),v=t(80737),p=t(91854),m=t(59621),x=t(67231),h=t(85023),A=t(70030),g=t(28429),j=t(81446),y=t(45321),b=t(44070),f=t(74623),k=t(44414);const q=e=>{var l;let{prev:t,next:q,isRequest:_}=e;const{t:w}=(0,A.B)(),[I]=i.A.useForm(),S=(0,p.wA)(),{uuid:N}=(0,g.g)(),{activeMenu:C}=(0,p.d4)((e=>e.menu),p.bN),{myShop:F}=(0,p.d4)((e=>e.myShop),p.bN),[O,V]=(0,a.useState)(null),M=(0,g.zy)(),{defaultLang:E}=(0,p.d4)((e=>e.formLang),p.bN),{defaultCurrency:L}=(0,p.d4)((e=>e.currency),p.bN),[B,z]=(0,a.useState)(null),[G,R]=(0,a.useState)([]);(0,a.useEffect)((()=>{var e;if(_)if(null!==(e=M.state)&&void 0!==e&&e.generate){var l,t,a,i,n;const e=(0,y.A)(null===C||void 0===C||null===(l=C.data.extras)||void 0===l?void 0:l.map((e=>e.values||[]))),u=e.map((e=>{var l,t;if(e.every((e=>"undefined"!==typeof e.stock_id))){var a,i,n;const l=null===(a=C.data)||void 0===a||null===(i=a.actualStocks)||void 0===i?void 0:i.find((l=>l.extras.every((l=>e.some((e=>{var t;return e.value===(null===l||void 0===l||null===(t=l.value)||void 0===t?void 0:t.id)}))))));return{galleries:(null===l||void 0===l?void 0:l.galleries)||[],price:(null===l||void 0===l?void 0:l.price)||0,quantity:(null===l||void 0===l?void 0:l.quantity)||0,stock_id:null===l||void 0===l?void 0:l.id,tax:(null===C||void 0===C?void 0:C.data.tax)||0,addons:(null===l||void 0===l||null===(n=l.addons)||void 0===n?void 0:n.map((e=>{var l,t,a;return{label:(null===e||void 0===e||null===(l=e.product)||void 0===l||null===(t=l.translation)||void 0===t?void 0:t.title)||(null===e||void 0===e?void 0:e.label),value:(null===e||void 0===e||null===(a=e.product)||void 0===a?void 0:a.id)||(null===e||void 0===e?void 0:e.value)}})))||[],...Object.assign({},...e.map(((e,l)=>({["extras[".concat(l,"]")]:{label:e.label,value:e.value,group:C.data.extras[l].label}}))))}}return{price:0,quantity:0,tax:(null===(l=C.data)||void 0===l?void 0:l.tax)||0,sku:null===C||void 0===C||null===(t=C.data)||void 0===t?void 0:t.sku,addons:[],...Object.assign({},...e.map(((e,l)=>({["extras[".concat(l,"]")]:{label:e.label,value:e.value}}))))}}));let c=[];if(0===e.length&&0!==(null===(t=C.data)||void 0===t||null===(a=t.actualStocks)||void 0===a?void 0:a.length)){var d,s,o;const e=null===(d=C.data.actualStocks)||void 0===d?void 0:d.at(0);c=[{price:(null===e||void 0===e?void 0:e.price)||0,quantity:(null===e||void 0===e?void 0:e.quantity)||0,sku:null===e||void 0===e?void 0:e.sku,tax:(null===(s=C.data)||void 0===s?void 0:s.tax)||0,addons:e?null===(o=e.addons)||void 0===o?void 0:o.map((e=>{var l,t,a;return{label:(null===e||void 0===e||null===(l=e.product)||void 0===l||null===(t=l.translation)||void 0===t?void 0:t.title)||(null===e||void 0===e?void 0:e.label),value:(null===e||void 0===e||null===(a=e.product)||void 0===a?void 0:a.id)||(null===e||void 0===e?void 0:e.value)}})):[]}]}var r;if(0===e.length&&0===(null===C||void 0===C||null===(i=C.data)||void 0===i||null===(n=i.actualStocks)||void 0===n?void 0:n.length))c=[{price:void 0,quantity:0,sku:null===C||void 0===C?void 0:C.data.sku,tax:(null===(r=C.data)||void 0===r?void 0:r.tax)||0,addons:[]}];const v=c.concat(u);R(C.data.actualStocks.map((e=>e.id))),I.setFieldsValue({stocks:v})}else{var u,c;const e=null===(u=C.data.stocks)||void 0===u?void 0:u.map((e=>({galleries:(null===e||void 0===e?void 0:e.galleries)||[],price:e.price,quantity:e.quantity,tax:C.data.tax,stock_id:e.stock_id,sku:e.sku,...Object.assign({},...e.ids.map(((e,l)=>({["extras[".concat(l,"]")]:{label:e.label,value:e.value,group:e.group}})))),addons:e.addons})));R((null===(c=C.data)||void 0===c?void 0:c.delete_ids)||[]),I.setFieldsValue({stocks:e})}else!function(e){V(!0),x.A.getById(e).then((e=>{var l,t,a;const i=(0,y.A)(null===C||void 0===C||null===(l=C.data.extras)||void 0===l?void 0:l.map((e=>e.values||[]))),n=i.map(((l,t)=>{var a,i;if(l.every((e=>"undefined"!==typeof e.stock_id))){var n,d,s;const t=e.data.stocks.find((e=>e.extras.every((e=>l.some((l=>{var t;return l.value===(null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.id)}))))));return{galleries:(null===t||void 0===t?void 0:t.galleries)||[],price:(null===t||void 0===t?void 0:t.price)||0,quantity:(null===t||void 0===t?void 0:t.quantity)||0,sku:null!==(n=null===(d=C.data)||void 0===d?void 0:d.sku)&&void 0!==n?n:null===t||void 0===t?void 0:t.sku,stock_id:null===t||void 0===t?void 0:t.id,tax:(null===C||void 0===C?void 0:C.data.tax)||0,addons:(null===t||void 0===t||null===(s=t.addons)||void 0===s?void 0:s.map((e=>{var l,t,a;return{label:(null===e||void 0===e||null===(l=e.product)||void 0===l||null===(t=l.translation)||void 0===t?void 0:t.title)||(null===e||void 0===e?void 0:e.label),value:(null===e||void 0===e||null===(a=e.product)||void 0===a?void 0:a.id)||(null===e||void 0===e?void 0:e.value)}})))||[],...Object.assign({},...l.map(((e,l)=>({["extras[".concat(l,"]")]:{label:e.label,value:e.value}}))))}}return{price:0,quantity:0,sku:null===(a=C.data)||void 0===a?void 0:a.sku,tax:(null===(i=C.data)||void 0===i?void 0:i.tax)||0,addons:[],...Object.assign({},...l.map(((e,l)=>({["extras[".concat(l,"]")]:{label:e.label,value:e.value}}))))}}));let d=[];if(0===i.length&&0!==(null===(t=e.data.stocks)||void 0===t?void 0:t.length)){var s,o,r,u,c;const l=null===(s=e.data.stocks)||void 0===s?void 0:s.at(0);d=[{price:(null===l||void 0===l?void 0:l.price)||0,quantity:(null===l||void 0===l?void 0:l.quantity)||0,sku:null!==(o=null===(r=C.data)||void 0===r?void 0:r.sku)&&void 0!==o?o:null===l||void 0===l?void 0:l.sku,tax:(null===(u=C.data)||void 0===u?void 0:u.tax)||0,addons:l?null===(c=l.addons)||void 0===c?void 0:c.map((e=>{var l,t,a;return{label:(null===e||void 0===e||null===(l=e.product)||void 0===l||null===(t=l.translation)||void 0===t?void 0:t.title)||(null===e||void 0===e?void 0:e.label),value:(null===e||void 0===e||null===(a=e.product)||void 0===a?void 0:a.id)||(null===e||void 0===e?void 0:e.value)}})):[]}]}var v,p;0===i.length&&0===(null===(a=e.data.stocks)||void 0===a?void 0:a.length)&&(d=[{price:void 0,quantity:0,sku:null===(v=C.data)||void 0===v?void 0:v.sku,tax:(null===(p=C.data)||void 0===p?void 0:p.tax)||0,addons:[]}]);const m=d.concat(n);R(e.data.stocks.map((e=>e.id))),I.setFieldsValue({stocks:m})})).finally((()=>{V(!1)}))}(N)}),[_,null===(l=M.state)||void 0===l?void 0:l.generate]);const T=(e,l,t)=>e.map((e=>Object.assign(e,{[l]:t})));return(0,k.jsx)(n.A,{title:C.data["title[".concat(E,"]")]?"".concat(C.data["title[".concat(E,"]")]):"",children:O?(0,k.jsx)(j.A,{}):(0,k.jsxs)(i.A,{layout:"vertical",form:I,onFinish:e=>{var l,t;const{stocks:a}=e,i=G.filter(((e,l)=>{var t;return!(null===(t=a[l])||void 0===t||!t.stock_id)&&!a.some((l=>(null===l||void 0===l?void 0:l.stock_id)===e))}));let n;if(n=!(null===(l=C.data)||void 0===l||null===(t=l.extras)||void 0===t||!t.length)?a.map((e=>{var l,t,a,i;return{galleries:e.galleries,price:e.price,quantity:e.quantity,sku:e.sku,ids:_?null===(l=C.data)||void 0===l?void 0:l.extras.map(((l,t)=>e["extras[".concat(t,"]")])):null===(t=C.data)||void 0===t?void 0:t.extras.map(((l,t)=>e["extras[".concat(t,"]")].value)),addons:e.addons?_?null===(a=e.addons)||void 0===a?void 0:a.map((e=>e)):null===(i=e.addons)||void 0===i?void 0:i.map((e=>e.value)):[],stock_id:e.stock_id}})):[{price:a[0].price,quantity:a[0].quantity,addons:a[0].addons?_?a[0].addons.map((e=>e)):a[0].addons.map((e=>e.value)):[],stock_id:a[0].stock_id,sku:a[0].sku,ids:[]}],_)return S((0,f.Ok)({activeMenu:C,data:{...C.data,stocks:n,delete_ids:i}})),void q();z(!0),x.A.stocks(N,{extras:n,delete_ids:i}).then((e=>{let{data:{stocks:l}}=e;const t=null===l||void 0===l?void 0:l.flatMap((e=>e.extras)),a=t.map((e=>({...e.value,stock_id:e.stock_id,group_type:e.group.type}))),n=null===t||void 0===t?void 0:t.find((e=>"color"===e.group.type)),d={};l.forEach((e=>{e.extras.forEach((l=>{var t,a,i,n,s;l.extra_group_id in d?null!==(t=d[l.extra_group_id].values)&&void 0!==t&&t.some((e=>{var t;return e.value===(null===(t=l.value)||void 0===t?void 0:t.id)}))||null===(a=d[l.extra_group_id].values)||void 0===a||a.push({value:l.value.id,label:null===(i=l.value)||void 0===i?void 0:i.value,stock_id:e.id}):d[l.extra_group_id]={group:l.group,label:null===(n=l.group.translation)||void 0===n?void 0:n.title,value:l.extra_group_id,id:l.extra_group_id,stock_id:e.id,values:[{value:l.value.id,label:null===(s=l.value)||void 0===s?void 0:s.value,stock_id:e.id}]}}))})),S((0,f.Ok)({activeMenu:C,data:{...C.data,newExtras:[{group:null===n||void 0===n?void 0:n.group,values:a}],delete_ids:i,stocks:l,stocksData:l,extras:Object.values(d)}})),q()})).finally((()=>z(!1)))},children:[(0,k.jsxs)(d.A,{gutter:12,align:"middle",children:[(0,k.jsx)(s.A,{span:4,children:(0,k.jsx)(i.A.Item,{label:w("price"),name:"set.all.price",rules:[{type:"number",min:0,message:w("must.be.positive.number")}],children:(0,k.jsx)(o.A,{className:"w-100",onChange:function(e){const{stocks:l}=I.getFieldsValue();I.setFieldsValue({stocks:T(l,"price",e)})}})})}),(0,k.jsx)(s.A,{span:4,children:(0,k.jsx)(i.A.Item,{label:w("quantity"),name:"set.all.quantity",rules:[{type:"number",min:0,message:w("must.be.positive.number")}],children:(0,k.jsx)(o.A,{className:"w-100",onChange:function(e){const{stocks:l}=I.getFieldsValue();I.setFieldsValue({stocks:T(l,"quantity",e)})}})})})]}),(0,k.jsx)(r.A,{}),(0,k.jsx)("h2",{children:w("values")}),(0,k.jsx)(i.A.List,{name:"stocks",children:(e,l)=>{let{add:t,remove:a}=l;return(0,k.jsx)("div",{children:e.map(((l,t)=>{var n,r,v,p;return(0,k.jsxs)(d.A,{gutter:12,align:"middle",style:{flexWrap:"nowrap",overflowX:"auto"},hidden:!(null!==(n=C.data)&&void 0!==n&&null!==(r=n.extras)&&void 0!==r&&r.length)&&l.key,children:[null===(v=C.data)||void 0===v||null===(p=v.extras)||void 0===p?void 0:p.map(((e,l)=>(0,k.jsx)(s.A,{children:(0,k.jsx)(i.A.Item,{label:null===e||void 0===e?void 0:e.label,name:[t,"extras[".concat(l,"]")],rules:[{required:!0,message:w("required")}],children:(0,k.jsx)(h.D,{fetchOptions:()=>{return l=e.value,m.A.getGroupById(l).then((e=>e.data.extra_values.map((e=>({label:e.value,value:e.id})))));var l},className:"w-100",disabled:!0,style:{minWidth:200}})})},"extra"+e.value))),(0,k.jsx)(s.A,{children:(0,k.jsx)(i.A.Item,{label:w("sku"),name:[t,"sku"],children:(0,k.jsx)(u.A,{className:"w-100",style:{minWidth:200}})})}),(0,k.jsx)(s.A,{children:(0,k.jsx)(i.A.Item,{label:w("quantity"),name:[t,"quantity"],rules:[{required:!0,message:w("required")}],children:(0,k.jsx)(o.A,{min:0,className:"w-100",style:{minWidth:200}})})}),(0,k.jsxs)(s.A,{children:[(0,k.jsx)(i.A.Item,{label:"".concat(w("price")," (").concat(null===L||void 0===L?void 0:L.symbol,")"),name:[t,"price"],rules:[{required:!0,message:w("requried")}],children:(0,k.jsx)(o.A,{min:0,className:"w-100",style:{minWidth:200}})}),(0,k.jsx)(i.A.Item,{hidden:!0,label:w("id"),name:[t,"stock_id"],children:(0,k.jsx)(o.A,{min:1,className:"w-100",disabled:!0,style:{minWidth:200},addonAfter:"%"})})]}),(0,k.jsxs)(s.A,{children:[(0,k.jsx)(i.A.Item,{label:w("tax"),name:[t,"tax"],children:(0,k.jsx)(o.A,{className:"w-100",disabled:!0,style:{minWidth:200},addonAfter:"%"})}),(0,k.jsx)(i.A.Item,{label:w("tax"),name:[t,"tax"],hidden:!0,children:(0,k.jsx)(o.A,{className:"w-100",disabled:!0,style:{minWidth:200},addonAfter:"%"})})]}),(0,k.jsx)(s.A,{children:(0,k.jsx)(i.A.Item,{noStyle:!0,shouldUpdate:(e,t)=>{var a,i;return(null===(a=e.stocks[l.name])||void 0===a?void 0:a.price)!==(null===(i=t.stocks[l.name])||void 0===i?void 0:i.price)},children:e=>{let{getFieldValue:t}=e;const a=t(["stocks",l.name,"tax"])||0,n=t(["stocks",l.name,"price"]),d=0===a?null===n||void 0===n?void 0:n.toFixed(2):(n*a/100+n).toFixed(2);return(0,k.jsx)(i.A.Item,{label:"".concat(w("total.price")," (").concat(null===L||void 0===L?void 0:L.symbol,")"),children:(0,k.jsx)(o.A,{min:1,disabled:!0,value:d,className:"w-100",style:{minWidth:200}})})}})}),(0,k.jsx)(s.A,{children:(null===e||void 0===e?void 0:e.length)>1?(0,k.jsx)(c.A,{type:"primary",className:"mt-2",danger:!0,icon:(0,k.jsx)(b.A,{}),onClick:()=>{a(l.name)}}):""})]},l.key)}))})}}),(0,k.jsxs)(v.A,{className:"mt-4",children:[(0,k.jsx)(c.A,{onClick:t,children:w("prev")}),(0,k.jsx)(c.A,{type:"primary",htmlType:"submit",loading:!!B,children:w("next")})]})]})})}},34293:(e,l,t)=>{t.d(l,{A:()=>C});var a=t(9950),i=t(59233),n=t(87094),d=t(41988),s=t(23263),o=t(55902),r=t(40577),u=t(25933),c=t(48538),v=t(47992),p=t(74827),m=t(78457),x=t(91854),h=t(67231),A=t(74623),g=t(31888),j=t(28429),y=t(70030),b=t(48970),f=t(15249),k=t(8750),q=t(62545),_=t(72345),w=t(12196),I=t(34537),S=t(31281),N=t(44414);const C=e=>{var l,t,C,F,O,V,M;let{next:E,action_type:L="",isRequest:B}=e;const{t:z}=(0,y.B)(),[G]=i.A.useForm(),R=(0,x.wA)(),{uuid:T}=(0,j.g)(),W=(0,j.Zp)(),{activeMenu:P}=(0,x.d4)((e=>e.menu),x.bN),[D,U]=(0,a.useState)((null===P||void 0===P||null===(l=P.data)||void 0===l?void 0:l.initialMediaFile)||{images:[],previews:[]}),{defaultLang:H,languages:K}=(0,x.d4)((e=>e.formLang),x.bN),[X,Z]=(0,a.useState)((null===(t=P.data)||void 0===t||null===(C=t.images)||void 0===C?void 0:C.filter((e=>!e.isVideo)))||[]),[Y,$]=(0,a.useState)(!1),{settings:J}=(0,x.d4)((e=>e.globalSettings));const Q=e=>{const l={images:[],previews:[]},t=e.filter((e=>e.preview)).map((e=>({uid:e.id,name:e.preview,url:e.preview}))),a=e.filter((e=>e.preview)).map((e=>({uid:e.id,name:e.path,url:e.path,isVideo:!0})));return l.previews=t,l.images=a,l};(0,a.useEffect)((()=>()=>{const e=G.getFieldsValue(!0);R((0,A.Ok)({activeMenu:P,data:{...P.data,...e}}))}),[]);const ee=()=>{R((0,A.X4)({url:"seller/category/add",id:"seller/category/add",name:z("edit.category")})),W("/seller/category/add")};return(0,N.jsxs)(i.A,{layout:"vertical",form:G,initialValues:{active:!0,vegetarian:!0,min_qty:1,max_qty:1,tax:0,interval:1,age_limit:12,digital:!1,sku:null!==(F=null===P||void 0===P||null===(O=P.data)||void 0===O||null===(V=O.stocks)||void 0===V||null===(M=V[0])||void 0===M?void 0:M.sku)&&void 0!==F?F:(0,I.A)(6),...P.data},onFinish:e=>{var l,t,a,i,n;$(!0);const d={title:(0,S.A)(K,e),description:(0,S.A)(K,e,"description"),min_qty:(null===e||void 0===e?void 0:e.min_qty)||0,max_qty:(null===e||void 0===e?void 0:e.max_qty)||0,tax:(null===e||void 0===e?void 0:e.tax)||0,age_limit:(null===e||void 0===e?void 0:e.age_limit)||0,active:Number(!(null===e||void 0===e||!e.active)),digital:Number(!(null===e||void 0===e||!e.digital)),category_id:(null===e||void 0===e||null===(l=e.category)||void 0===l?void 0:l.value)||(null===e||void 0===e?void 0:e.category),brand_id:(null===e||void 0===e||null===(t=e.brand)||void 0===t?void 0:t.value)||(null===e||void 0===e?void 0:e.brand),unit_id:(null===e||void 0===e||null===(a=e.unit)||void 0===a?void 0:a.value)||(null===e||void 0===e?void 0:e.unit),interval:(null===e||void 0===e?void 0:e.interval)||1,sku:null===e||void 0===e?void 0:e.sku,images:null===(i=[...null===D||void 0===D?void 0:D.images,...X])||void 0===i?void 0:i.map(((e,l)=>null===e||void 0===e?void 0:e.name)),previews:null===D||void 0===D||null===(n=D.previews)||void 0===n?void 0:n.map((e=>null===e||void 0===e?void 0:e.name))};var s,o,r,u;if(B)return R((0,A.Ok)({activeMenu:P,data:{...P.data,...e,active:Number(e.active),brand_id:null===(s=e.brand)||void 0===s?void 0:s.value,category_id:(null===(o=e.category)||void 0===o?void 0:o.value)||e.category,shop_id:null===(r=e.shop)||void 0===r?void 0:r.value,unit_id:null===(u=e.unit)||void 0===u?void 0:u.value,tax:e.tax||0,title:{...Object.assign({},...K.map((l=>({[l.locale]:e["title[".concat(l.locale,"]")]}))))},description:{...Object.assign({},...K.map((l=>({[l.locale]:e["description[".concat(l.locale,"]")]}))))},...Object.assign({},...X.map(((e,l)=>({["images[".concat(l,"]")]:e.name}))))}})),void E();let c=!1;if(Object.entries(e).forEach((e=>{var l,t;let[a,i]=e;var n,d,s,o;((a.startsWith("title")||a.startsWith("description"))&&P.data&&P.data[a]!==i&&(c=!0),"category"===a)&&((null===(n=P.data)||void 0===n||null===(d=n.category)||void 0===d?void 0:d.value)!==(null===i||void 0===i?void 0:i.value)&&(c=!0));"brand"===a&&((null===(s=P.data)||void 0===s||null===(o=s.brand)||void 0===o?void 0:o.value)!==(null===i||void 0===i?void 0:i.value)&&(c=!0));((null===X||void 0===X?void 0:X.find((e=>"done"===e.status)))||(null===X||void 0===X?void 0:X.length)!==(null===(l=P.data)||void 0===l||null===(t=l.images)||void 0===t?void 0:t.length))&&(c=!0)})),"edit"===L){const l={...d};if(l.title={...Object.assign({},...K.map((l=>({[l.locale]:e["title[".concat(l.locale,"]")]}))))},l.description={...Object.assign({},...K.map((l=>({[l.locale]:e["description[".concat(l.locale,"]")]}))))},(0,A.Ok)({activeMenu:P,data:l}),c&&"0"===(null===J||void 0===J?void 0:J.product_auto_approve))return void function(e){W("/seller/product/".concat(T,"?step=1"),{state:e})}(l);!function(e,l){var t;l.product_id=null===(t=P.data)||void 0===t?void 0:t.product_id,h.A.update(T,l).then((()=>{R((0,A.Ok)({activeMenu:P,data:{...l,...null===P||void 0===P?void 0:P.data}})),E()})).finally((()=>$(!1)))}(0,d)}else!function(e,l){h.A.create(l).then((l=>{let{data:t}=l;R((0,A.W6)({id:"product-".concat(t.uuid),url:"seller/product/".concat(t.uuid),name:z("add.product"),data:{...e,initialMediaFile:Q(t.galleries)},refetch:!1})),W("/seller/product/".concat(t.uuid,"?step=1"),{state:{create:!0}})})).finally((()=>$(!1)))}(e,d)},children:[(0,N.jsxs)(n.A,{gutter:12,children:[(0,N.jsx)(d.A,{span:16,children:(0,N.jsxs)(n.A,{children:[(0,N.jsx)(d.A,{span:24,children:(0,N.jsx)(s.A,{title:z("basic.info"),children:(0,N.jsxs)(n.A,{children:[(0,N.jsx)(d.A,{span:24,children:K.map((e=>(0,N.jsx)(i.A.Item,{label:z("name"),name:"title[".concat(e.locale,"]"),rules:[{required:e.locale===H,message:z("required")}],hidden:e.locale!==H,children:(0,N.jsx)(o.A,{})},"name"+e.id)))}),(0,N.jsx)(d.A,{span:24,children:K.map((e=>(0,N.jsx)(i.A.Item,{label:z("description"),name:"description[".concat(e.locale,"]"),rules:[{required:e.locale===H,message:z("required")}],hidden:e.locale!==H,children:(0,N.jsx)(f.A,{rows:3})},"description"+e.id)))})]})})}),(0,N.jsx)(d.A,{span:24,children:(0,N.jsx)(s.A,{title:z("pricing"),children:(0,N.jsxs)(n.A,{gutter:12,children:[(0,N.jsx)(d.A,{span:8,children:(0,N.jsx)(i.A.Item,{label:z("min.qty"),name:"min_qty",rules:[{required:!0,message:z("required")}],children:(0,N.jsx)(r.A,{min:1,className:"w-100"})})}),(0,N.jsx)(d.A,{span:8,children:(0,N.jsx)(i.A.Item,{label:z("max.qty"),name:"max_qty",rules:[{required:!0,message:z("required")}],children:(0,N.jsx)(r.A,{min:1,className:"w-100"})})}),(0,N.jsx)(d.A,{span:8,children:(0,N.jsx)(i.A.Item,{label:z("tax"),name:"tax",children:(0,N.jsx)(r.A,{min:0,className:"w-100",addonAfter:"%"})})})]})})}),(0,N.jsx)(d.A,{span:24,children:(0,N.jsx)(s.A,{title:z("additions"),children:(0,N.jsxs)(n.A,{gutter:12,children:[(0,N.jsx)(d.A,{span:24,children:(0,N.jsx)(i.A.Item,{label:z("age.limit"),name:"age_limit",rules:[{required:!0,message:z("required")}],children:(0,N.jsx)(r.A,{min:1,className:"w-100"})})}),(0,N.jsx)(d.A,{span:6,children:(0,N.jsx)(i.A.Item,{label:z("active"),name:"active",valuePropName:"checked",children:(0,N.jsx)(u.A,{})})}),(0,N.jsx)(d.A,{span:6,children:(0,N.jsx)(i.A.Item,{label:z("digital"),name:"digital",valuePropName:"checked",children:(0,N.jsx)(u.A,{})})})]})})}),(0,N.jsx)(d.A,{span:24,children:(0,N.jsx)(s.A,{title:z("video"),children:(0,N.jsx)(w.A,{form:G,mediaList:D,setMediaList:U})})})]})}),(0,N.jsx)(d.A,{span:8,children:(0,N.jsxs)(n.A,{children:[(0,N.jsx)(d.A,{span:24,children:(0,N.jsx)(s.A,{title:z("organization"),children:(0,N.jsxs)(n.A,{children:[(0,N.jsx)(d.A,{span:24,children:(0,N.jsx)(i.A.Item,{label:z("category"),name:"category",rules:[{required:!0,message:z("required")}],children:(0,N.jsx)(_.v,{fetchOptions:function(e){const l={search:e||null,type:"main"};return m.A.paginateSelect(l).then((e=>e.data.map((e=>{var l,t,a;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id,type:"main",disabled:null===e||void 0===e||null===(t=e.children)||void 0===t?void 0:t.length,children:null===e||void 0===e||null===(a=e.children)||void 0===a?void 0:a.map((e=>{var l,t,a;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id,type:"sub_main",disabled:null===e||void 0===e||null===(t=e.children)||void 0===t?void 0:t.length,children:null===e||void 0===e||null===(a=e.children)||void 0===a?void 0:a.map((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id,type:"child"}}))}}))}}))))},dropdownRender:e=>(0,N.jsxs)(N.Fragment,{children:[e,(0,N.jsx)("div",{className:"p-1",children:(0,N.jsx)(c.A,{icon:(0,N.jsx)(k.A,{}),className:"w-100",onClick:ee,children:z("add.category")})})]})})})}),(0,N.jsx)(d.A,{span:24,children:(0,N.jsx)(i.A.Item,{label:z("brand"),name:"brand",rules:[{required:!1,message:z("required")}],children:(0,N.jsx)(v.G,{fetchOptions:function(e){const l={search:e};return p.A.getAll(l).then((e=>e.data.map((e=>({label:null===e||void 0===e?void 0:e.title,value:null===e||void 0===e?void 0:e.id})))))}})})}),(0,N.jsx)(d.A,{span:24,children:(0,N.jsx)(i.A.Item,{label:z("unit"),name:"unit",rules:[{required:!0,message:z("required")}],children:(0,N.jsx)(v.G,{fetchOptions:function(e){const l={perPage:10,page:1,active:1,search:e};return g.A.getAll(l).then((e=>{let{data:l}=e;return function(e){return e.map((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}(l)}))}})})}),(0,N.jsx)(d.A,{span:24,children:(0,N.jsx)(i.A.Item,{label:z("interval"),name:"interval",rules:[{required:!0,message:z("required")},{type:"number",min:1,message:z("should.be.more.than.1")}],children:(0,N.jsx)(r.A,{className:"w-100"})})}),(0,N.jsx)(d.A,{span:20,style:{marginRight:"10px"},children:(0,N.jsx)(i.A.Item,{label:z("sku"),name:"sku",rules:[{required:!0,message:z("required")}],children:(0,N.jsx)(o.A,{className:"w-100"})})}),(0,N.jsx)(d.A,{span:3,children:(0,N.jsx)(i.A.Item,{label:" ",name:"sku",children:(0,N.jsx)(c.A,{icon:(0,N.jsx)(q.A,{}),onClick:()=>{const e=(0,I.A)(6);G.setFieldsValue({sku:e})}})})})]})})}),(0,N.jsx)(d.A,{span:24,children:(0,N.jsx)(s.A,{title:z("media"),children:(0,N.jsx)(n.A,{children:(0,N.jsx)(d.A,{span:24,children:(0,N.jsx)(i.A.Item,{name:"images",children:(0,N.jsx)(b.A,{type:"products",imageList:X,setImageList:Z,form:G,multiple:!0})})})})})})]})})]}),(0,N.jsx)(c.A,{type:"primary",htmlType:"submit",loading:Y,children:z("next")})]})}},26405:(e,l,t)=>{t.d(l,{C:()=>a});const a=[{title:"product",content:"First-content"},{title:"product.extras",content:"Second-content"},{title:"stocks",content:"Third-content"},{title:"wholesale",content:"wholesale-content"},{title:"gallery",content:"gallery-content"},{title:"product.property",content:"Fourth-content"},{title:"finish",content:"Finish-content"}]},62545:(e,l,t)=>{t.d(l,{A:()=>o});var a=t(89379),i=t(9950);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888.3 693.2c-42.5-24.6-94.3-18-129.2 12.8l-53-30.7V523.6c0-15.7-8.4-30.3-22-38.1l-136-78.3v-67.1c44.2-15 76-56.8 76-106.1 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 49.3 31.8 91.1 76 106.1v67.1l-136 78.3c-13.6 7.8-22 22.4-22 38.1v151.6l-53 30.7c-34.9-30.8-86.8-37.4-129.2-12.8-53.5 31-71.7 99.4-41 152.9 30.8 53.5 98.9 71.9 152.2 41 42.5-24.6 62.7-73 53.6-118.8l48.7-28.3 140.6 81c6.8 3.9 14.4 5.9 22 5.9s15.2-2 22-5.9L674.5 740l48.7 28.3c-9.1 45.7 11.2 94.2 53.6 118.8 53.3 30.9 121.5 12.6 152.2-41 30.8-53.6 12.6-122-40.7-152.9zm-673 138.4a47.6 47.6 0 01-65.2-17.6c-13.2-22.9-5.4-52.3 17.5-65.5a47.6 47.6 0 0165.2 17.6c13.2 22.9 5.4 52.3-17.5 65.5zM522 463.8zM464 234a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm170 446.2l-122 70.3-122-70.3V539.8l122-70.3 122 70.3v140.4zm239.9 133.9c-13.2 22.9-42.4 30.8-65.2 17.6-22.8-13.2-30.7-42.6-17.5-65.5s42.4-30.8 65.2-17.6c22.9 13.2 30.7 42.5 17.5 65.5z"}}]},name:"deployment-unit",theme:"outlined"};var d=t(25085),s=function(e,l){return i.createElement(d.A,(0,a.A)((0,a.A)({},e),{},{ref:l,icon:n}))};const o=i.forwardRef(s)}}]);