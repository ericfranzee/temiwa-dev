"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[7299],{27299:(e,t,i)=>{i.r(t),i.d(t,{default:()=>z});var a=i(9950),s=i(12678),l=i(44070),n=i(29633),d=i(80737),o=i(48538),r=i(23263),u=i(52913),c=i(85923),v=i(76083),x=i(55386),h=i(91854),m=i(74623),p=i(88986),g=i(8168),f=i(70030),y=i(12408),k=i(18583),w=i(59051),A=i.n(w),j=i(28429),C=i(35116),_=i(28645),I=i(1160),b=i(51066),S=i(44414);function z(){const{t:e}=(0,f.B)(),t=(0,h.wA)(),i=(0,j.Zp)(),w=(0,b.Q)(),z=a=>{t((0,m.X4)({url:"/users/user/".concat(a.uuid),id:"user_info",name:e("user.info")})),i("/users/user/".concat(a.uuid),{state:{user_id:a.id}})},[M,N]=(0,a.useState)([{title:e("id"),dataIndex:"id",key:"id",sorter:!0,is_show:!0},{title:e("user"),dataIndex:"user",key:"user",is_show:!0,render:e=>(0,S.jsxs)("div",{className:"text-hover",onClick:()=>z(e),children:[null===e||void 0===e?void 0:e.firstname," ",(null===e||void 0===e?void 0:e.lastname)||""]})},{title:e("deliveryman"),dataIndex:"deliveryman",key:"deliveryman",is_show:!0,render:e=>(0,S.jsxs)("div",{className:"text-hover",onClick:()=>z(e),children:[null===e||void 0===e?void 0:e.firstname," ",(null===e||void 0===e?void 0:e.lastname)||""]})},{title:e("rating"),dataIndex:"rating",key:"rating",is_show:!0,render:e=>(0,S.jsx)(n.A,{allowHalf:!0,disabled:!0,defaultValue:e})},{title:e("created.at"),dataIndex:"created_at",key:"created_at",is_show:!0,render:e=>A()(e).format("YYYY-MM-DD ".concat(w))},{title:e("options"),key:"options",dataIndex:"options",is_show:!0,render:(e,t)=>(0,S.jsxs)(d.A,{children:[(0,S.jsx)(o.A,{type:"primary",icon:(0,S.jsx)(s.A,{}),onClick:()=>O(t.id)}),(0,S.jsx)(C.A,{icon:(0,S.jsx)(l.A,{}),onClick:()=>{R([t.id]),P(!0),H(!0)}})]})}]),{setIsModalVisible:P}=(0,a.useContext)(x.o),[Y,R]=(0,a.useState)(null),[D,O]=(0,a.useState)(null),[V,B]=(0,a.useState)(!1),[E,H]=(0,a.useState)(null),{activeMenu:K}=(0,h.d4)((e=>e.menu),h.bN),{reviews:Q,meta:T,loading:X,params:Z}=(0,h.d4)((e=>e.deliveryboyReview),h.bN),q=K.data,F={sort:null===q||void 0===q?void 0:q.sort,column:null===q||void 0===q?void 0:q.column,perPage:null===q||void 0===q?void 0:q.perPage,page:null===q||void 0===q?void 0:q.page,assign:"deliveryman"};(0,a.useEffect)((()=>{K.refetch&&(0,h.vA)((()=>{t((0,I.iI)(F)),t((0,m.km)(K))}))}),[K.refetch]),(0,p.A)((()=>{t((0,I.iI)(F))}),[K.data]);const G={id:Y,onChange:e=>{R(e)}};return(0,S.jsxs)(r.A,{title:e("deliveryboy.reviews"),extra:(0,S.jsxs)(d.A,{wrap:!0,children:[(0,S.jsx)(C.A,{size:"",onClick:()=>{null===Y||0===Y.length?c.oR.warning(e("select.the.product")):(P(!0),H(!1))},children:e("delete.selected")}),(0,S.jsx)(_.A,{columns:M,setColumns:N})]}),children:[(0,S.jsx)(u.A,{scroll:{x:!0},rowSelection:G,columns:null===M||void 0===M?void 0:M.filter((e=>e.is_show)),dataSource:Q,pagination:{pageSize:Z.perPage,page:Z.page,total:T.total,defaultCurrent:Z.page},rowKey:e=>e.id,onChange:function(e,i,a){const{pageSize:s,current:l}=e,{field:n,order:d}=a,o=(0,g.A)(d);t((0,m.Ok)({activeMenu:K,data:{perPage:s,page:l,column:n,sort:o}}))},loading:X}),(0,S.jsx)(v.A,{click:()=>{B(!0);const i={...Object.assign({},...Y.map(((e,t)=>({["ids[".concat(t,"]")]:e}))))};y.A.delete(i).then((()=>{c.oR.success(e("successfully.deleted")),t((0,I.iI)()),P(!1)})).finally((()=>B(!1)))},text:e(E?"delete":"all.delete"),setText:R,loading:V}),D&&(0,S.jsx)(k.A,{id:D,handleCancel:()=>O(null)})]})}}}]);