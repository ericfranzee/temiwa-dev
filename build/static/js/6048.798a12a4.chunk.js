"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[6048],{31281:(e,l,a)=>{function t(e,l){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const t=e.map((e=>({[e.locale]:""===l["".concat(a,"[").concat(e.locale,"]")]?void 0:l["".concat(a,"[").concat(e.locale,"]")]})));return Object.assign({},...t)}a.d(l,{A:()=>t})},16048:(e,l,a)=>{a.r(l),a.d(l,{default:()=>I});var t=a(9950),i=a(28429),n=a(85923),c=a(55902),s=a(59233),o=a(23263),d=a(87094),r=a(41988),u=a(48538),m=a(90650),g=a(91854),p=a(74623),v=a(11933),f=a(70030),h=a(71999),x=a(31281),A=a(35242),j=a(32599),y=a(62466),b=a(44414);const w=c.A.TextArea,I=()=>{var e;const{t:l}=(0,f.B)(),{activeMenu:a}=(0,g.d4)((e=>e.menu),g.bN),I=(0,g.wA)(),[k]=s.A.useForm(),q=(0,i.Zp)(),[N,E]=(0,t.useState)(!1),[B,F]=(0,t.useState)(!1),{languages:O,defaultLang:S}=(0,g.d4)((e=>e.formLang),g.bN),{id:V}=(0,i.g)(),[z,L]=(0,t.useState)(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.img),[C,M]=(0,t.useState)(null!==a&&void 0!==a&&a.data?[null===a||void 0===a?void 0:a.data["features[0].img"],null===a||void 0===a?void 0:a.data["features[1].img"],null===a||void 0===a?void 0:a.data["features[2].img"]]:["","",""]);function P(e){if(!e)return{};const l={},a={};return O.forEach((t=>{l["title[".concat(t.locale,"]")]=e.title.hasOwnProperty(t.locale)?e.title[t.locale]:void 0,a["description[".concat(t.locale,"]")]=e.description.hasOwnProperty(t.locale)?e.description[t.locale]:void 0})),{...l,...a}}(0,t.useEffect)((()=>()=>{const e=k.getFieldsValue(!0);I((0,p.Ok)({activeMenu:a,data:e}))}),[]);return(0,t.useEffect)((()=>{var e;a.refetch&&(e=V,E(!0),A.A.getById(e).then((e=>{var l,a,t,i,n;let{data:c}=e;const s={...P(null===c||void 0===c?void 0:c.data),features:null===c||void 0===c||null===(l=c.data)||void 0===l||null===(a=l.features)||void 0===a?void 0:a.map((e=>({...P(e)})))};k.setFieldsValue(s),L((0,y.A)(null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.img)),M(null===c||void 0===c||null===(i=c.data)||void 0===i||null===(n=i.features)||void 0===n?void 0:n.map((e=>(0,y.A)(e.img))))})).finally((()=>{I((0,p.km)(a)),E(!1)})))}),[a.refetch]),(0,b.jsx)(o.A,{title:l("edit.landing.page"),className:"h-100",extra:(0,b.jsx)(h.A,{}),children:N?(0,b.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,b.jsx)(m.A,{size:"large",className:"py-5"})}):(0,b.jsxs)(s.A,{name:"landing-page-edit",layout:"vertical",onFinish:e=>{F(!0);const t={title:(0,x.A)(O,e,"title"),description:(0,x.A)(O,e,"description"),img:null===z||void 0===z?void 0:z.name,features:e.features.map(((e,l)=>{var a;return{img:null===(a=C[l])||void 0===a?void 0:a.name,title:(0,x.A)(O,e,"title"),description:(0,x.A)(O,e,"description")}}))};A.A.update(V,{data:t,type:"welcome"}).then((()=>{const e="settings/landing-page";n.oR.success(l("successfully.created")),I((0,p.EK)({...a,nextUrl:e})),q("/".concat(e)),I((0,v.E)())})).finally((()=>F(!1)))},form:k,initialValues:{features:["","",""],...a.data},className:"d-flex flex-column h-100",children:[(0,b.jsxs)(d.A,{gutter:12,children:[(0,b.jsxs)(r.A,{span:12,children:[O.map((e=>(0,b.jsx)(s.A.Item,{label:"".concat(l("title")," (").concat(e.locale,")"),name:"title[".concat(e.locale,"]"),rules:[{required:e.locale===S,message:l("required")}],hidden:e.locale!==S,children:(0,b.jsx)(c.A,{})},"title"+e.locale))),O.map((e=>(0,b.jsx)(s.A.Item,{label:"".concat(l("description")," (").concat(e.locale,")"),name:"description[".concat(e.locale,"]"),rules:[{required:e.locale===S,message:l("required")}],hidden:e.locale!==S,children:(0,b.jsx)(w,{rows:3})},"description"+e.locale)))]}),(0,b.jsx)(r.A,{span:12,children:(0,b.jsx)(s.A.Item,{label:l("background.image"),children:(0,b.jsx)(j.A,{type:"languages",image:z,setImage:L,form:k,name:"img"})})})]}),(0,b.jsx)(o.A,{title:l("features"),children:(0,b.jsx)(s.A.List,{name:"features",children:e=>(0,b.jsx)("div",{children:e.map(((e,a)=>(0,b.jsxs)(d.A,{gutter:12,align:"middle",style:{borderBottom:"1px solid var(--grey)",marginBottom:24,borderWidth:2===a?0:1},children:[(0,b.jsxs)(r.A,{span:20,children:[O.map((e=>(0,b.jsx)(s.A.Item,{label:"".concat(l("title")," (").concat(e.locale,")"),name:[a,"title[".concat(e.locale,"]")],rules:[{required:e.locale===S,message:l("required")}],hidden:e.locale!==S,children:(0,b.jsx)(c.A,{})},"title"+e.locale))),O.map((e=>(0,b.jsx)(s.A.Item,{label:"".concat(l("description")," (").concat(e.locale,")"),name:[a,"description[".concat(e.locale,"]")],rules:[{required:e.locale===S,message:l("required")}],hidden:e.locale!==S,children:(0,b.jsx)(w,{rows:3})},"description"+e.locale)))]}),(0,b.jsx)(r.A,{span:4,children:(0,b.jsx)(s.A.Item,{label:l("media"),children:(0,b.jsx)(j.A,{type:"languages",isVideo:!0,image:C[a],setImage:e=>((e,l)=>{const a=[...C];a[l]=e,M(a)})(e,a),form:k,name:"features[".concat(a,"].img")})})})]},e.key)))})})}),(0,b.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,b.jsx)("div",{className:"pb-5",children:(0,b.jsx)(u.A,{type:"primary",htmlType:"submit",loading:B,children:l("submit")})})})]})})}}}]);