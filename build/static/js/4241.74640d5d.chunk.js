"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[4241],{1514:(e,s,t)=>{t.d(s,{A:()=>w});var a=t(9950),d=t(87094),r=t(12916),n=t(41988),o=t(80737),l=t(48538),i=t(59233),m=t(40577),c=t(23263),u=t(57796),p=t(25933),h=t(70030),x=t(59051),y=t.n(x),A=t(50384),f=t(13239),g=t(94118),b=t(9213),j=t(91854),k=t(51066),H=t(44414);const w=e=>{let{onFinish:s,form:t,lines:x,loadingBtn:w,days:v,setDays:_,setLines:S,weeks:N}=e;const{t:D}=(0,h.B)(),C=[{from:new Date(1900,4,18),to:new Date(y()().subtract(1,"days"))}],Y=(0,j.d4)((e=>{var s,t;return null===(s=e.globalSettings)||void 0===s||null===(t=s.settings)||void 0===t?void 0:t.using_12_hour_format}),j.bN),F=(0,k.Q)(),[B,I]=(0,a.useState)(!0),O=v&&v.length>0?(0,H.jsxs)(d.A,{children:[(0,H.jsx)(r.A,{style:{fontSize:14,padding:"4px 10px",width:"100%",marginTop:"10px"},children:D("Your.existing.vacations")}),(0,H.jsxs)(n.A,{span:24,className:"mt-2",children:[v.slice(0,B?1:v.length).map(((e,s)=>(0,H.jsxs)(o.A,{className:"d-flex justify-content-between",style:{borderBottom:"1px solid #4D5B75"},children:[(0,H.jsx)(n.A,{span:24,style:{fontSize:14,marginTop:"8px"},children:y()(e).format("YYYY-MM-DD")}),(0,H.jsx)(n.A,{span:24,children:(0,H.jsx)(r.A,{color:"red",className:"cursor-pointer mt-3 mb-2",style:{fontSize:14},onClick:()=>{return s=e,_(v.filter((e=>e!==s)));var s},children:D("remove")})})]},s))),(0,H.jsx)(l.A,{className:"mt-3 w-100",onClick:()=>{I(!B)},children:B?(0,H.jsx)(A.U29,{}):(0,H.jsx)(A.ZXT,{})})]})]}):(0,H.jsx)(r.A,{style:{fontSize:14,padding:"4px 10px",width:"100%"},children:"Please pick one or more days."}),P=(e,s)=>{const t=[];for(let a=e;a<s;a++)t.push(a);return t},M=()=>({disabledHours:()=>P(0,1),disabledMinutes:()=>P(0,0),disabledSeconds:()=>P(0,60)});return(0,H.jsx)(i.A,{form:t,layout:"vertical",onFinish:s,children:(0,H.jsxs)(d.A,{gutter:12,children:[(0,H.jsx)(n.A,{span:12,children:(0,H.jsx)(i.A.Item,{label:D("max.time"),name:"max_time",rules:[{required:!0,message:D("required")},{type:"number",min:1,max:24,message:D("must.be.between.1.and.24")}],children:(0,H.jsx)(m.A,{className:"w-100"})})}),(0,H.jsx)(n.A,{span:12}),(0,H.jsx)(n.A,{span:12,children:(0,H.jsx)(c.A,{title:D("booking.working.days"),children:(0,H.jsx)(d.A,{gutter:8,children:(0,H.jsx)(n.A,{span:24,children:(0,H.jsx)(i.A.List,{name:"working_days",children:e=>(0,H.jsx)("div",{children:e.map(((e,s)=>(0,H.jsxs)(d.A,{gutter:12,align:"center",children:[(0,H.jsx)(n.A,{span:7,children:(0,H.jsx)(i.A.Item,{name:[s,"day"],children:(0,H.jsx)("span",{children:D(N[s].title)})})}),x[e.key]?(0,H.jsx)(n.A,{span:13,className:"mt-2",children:(0,H.jsx)("span",{children:D("shop.closed")})}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(n.A,{span:7,children:(0,H.jsx)(i.A.Item,{rules:[{required:!1===x[e.key]}],name:[s,"from"],children:(0,H.jsx)(u.A,{format:F,use12Hour:"1"===Y,disabledTime:M,picker:"time",placeholder:D("start.time")})})}),(0,H.jsx)(n.A,{span:6,children:(0,H.jsx)(i.A.Item,{rules:[{required:!1===x[e.key]}],name:[s,"to"],children:(0,H.jsx)(u.A,{format:F,use12Hour:"1"===Y,disabledTime:M,picker:"time",placeholder:D("end.time")})})})]}),(0,H.jsx)(n.A,{span:4,children:(0,H.jsx)(i.A.Item,{name:[s,"disabled"],valuePropName:"checked",children:(0,H.jsx)(p.A,{checkedChildren:(0,H.jsx)(f.A,{}),unCheckedChildren:(0,H.jsx)(g.A,{}),checked:x[e.key],onChange:()=>(e=>{const s=[...x];s[e]=!x[e],S(s)})(e.key)})})})]},e.key)))})})})})})}),(0,H.jsx)(n.A,{span:12,children:(0,H.jsxs)(c.A,{title:D("booking.closed.days"),children:[(0,H.jsx)("p",{children:D("booking.closed.days.text")}),(0,H.jsx)(i.A.Item,{rules:[{required:!1,message:D("required")}],children:(0,H.jsx)(b.hv,{className:"datepicker",mode:"multiple",disabled:C,min:1,selected:v,onSelect:_,footer:O,showOutsideDays:!0})})]})}),(0,H.jsx)(n.A,{span:24,children:(0,H.jsx)(o.A,{children:(0,H.jsx)(l.A,{type:"primary",htmlType:"submit",loading:w,children:D("save")})})})]})})}},34422:(e,s,t)=>{t.d(s,{Q:()=>r});var a=t(59051),d=t.n(a);const r=[{title:"monday",disabled:!1,from:d()("01:00:00","HH:mm:ss"),to:d()("23:00:00","HH:mm:ss")},{title:"tuesday",disabled:!1,from:d()("01:00:00","HH:mm:ss"),to:d()("23:00:00","HH:mm:ss")},{title:"wednesday",disabled:!1,from:d()("01:00:00","HH:mm:ss"),to:d()("23:00:00","HH:mm:ss")},{title:"thursday",disabled:!1,from:d()("01:00:00","HH:mm:ss"),to:d()("23:00:00","HH:mm:ss")},{title:"friday",disabled:!1,from:d()("01:00:00","HH:mm:ss"),to:d()("23:00:00","HH:mm:ss")},{title:"saturday",disabled:!1,from:d()("01:00:00","HH:mm:ss"),to:d()("23:00:00","HH:mm:ss")},{title:"sunday",disabled:!1,from:d()("01:00:00","HH:mm:ss"),to:d()("23:00:00","HH:mm:ss")}]},80415:(e,s,t)=>{t.d(s,{G:()=>n,HV:()=>d,LH:()=>a,PR:()=>r,wO:()=>l,xt:()=>o});const a={new:[1,2,3,4,5],accepted:[1,2,3,4,5],ready:[1,2,3,4,5],on_a_way:[1,2,3,4,5],delivered:[1,2,3,4,5],canceled:[1,2,3,4,5],cooking:[1,2,3,4,5]},d=(new Date,new Date,["new","accepted","ready","on_a_way","pause","delivered","canceled"]),r=30,n="HH:mm",o="hh:mm a",l=!0},51066:(e,s,t)=>{t.d(s,{Q:()=>r});var a=t(17706),d=t(80415);const r=()=>{var e,s,t,r;return null!==(e=null===(s=a.M.getState())||void 0===s||null===(t=s.globalSettings)||void 0===t||null===(r=t.settings)||void 0===r?void 0:r.hour_format)&&void 0!==e?e:d.G}},22668:(e,s,t)=>{t.d(s,{A:()=>d});var a=t(82371);const d={getById:e=>a.A.get("dashboard/seller/booking/shop-closed-dates/".concat(e)),create:e=>a.A.post("dashboard/seller/booking/shop-closed-dates",e,{}),update:(e,s)=>a.A.put("dashboard/seller/booking/shop-closed-dates/".concat(e),s,{}),delete:e=>a.A.delete("dashboard/seller/booking/shop-closed-dates/delete",{params:e})}},32615:(e,s,t)=>{t.d(s,{A:()=>d});var a=t(82371);const d={getById:e=>a.A.get("dashboard/seller/booking/shop-working-days/".concat(e)),create:e=>a.A.post("dashboard/seller/booking/shop-working-day",e,{}),update:(e,s)=>a.A.put("dashboard/seller/booking/shop-working-days/".concat(e),s,{}),delete:e=>a.A.delete("dashboard/seller/booking/shop-working-days",{params:e})}},74241:(e,s,t)=>{t.r(s),t.d(s,{default:()=>b});var a=t(9950),d=t(81446),r=t(59051),n=t.n(r),o=t(34422),l=t(1514),i=t(59233),m=t(98701),c=t(22668),u=t(91854),p=t(32615),h=t(74623),x=t(85923),y=t(28429),A=t(70030),f=t(81975),g=t(44414);const b=()=>{const{t:e}=(0,A.B)(),[s]=i.A.useForm(),[t,r]=(0,a.useState)([]),[b,j]=(0,a.useState)(new Array(7).fill(!1)),[k,H]=(0,a.useState)(!1),[w,v]=(0,a.useState)(!1),{myShop:_}=(0,u.d4)((e=>e.myShop),u.bN),{activeMenu:S}=(0,u.d4)((e=>e.menu),u.bN),N=(0,u.wA)(),D=(0,y.Zp)();return(0,a.useEffect)((()=>{s.setFieldsValue({working_days:o.Q})}),[]),(0,a.useEffect)((()=>{S.refetch&&(v(!0),m.A.getAll().then((e=>{s.setFieldsValue({max_time:e.data.max_time})})).finally((()=>{N((0,h.km)(S)),v(!1)})),c.A.getById(_.uuid).then((e=>{r(e.data.closed_dates.filter((e=>e.day>n()(new Date).format("YYYY-MM-DD"))).map((e=>new Date(e.day))))})).finally((()=>{N((0,h.km)(S)),v(!1)})),p.A.getById(_.uuid).then((e=>{j(0!==e.data.dates.length?e.data.dates.map((e=>e.disabled)):[]),0!==e.data.dates.length&&s.setFieldsValue({working_days:e.data.dates.map((e=>({title:e.day,from:n()(e.from,"HH:mm:ss"),to:n()(e.to,"HH:mm:ss"),disabled:Boolean(e.disabled)})))})})).finally((()=>{N((0,h.km)(S)),v(!1)})))}),[S.refetch]),(0,g.jsx)(g.Fragment,{children:w?(0,g.jsx)(d.A,{}):(0,g.jsx)(l.A,{onFinish:s=>{H(!0);const a={dates:t?t.map((e=>n()(e).format("YYYY-MM-DD"))):void 0},d={dates:s.working_days.map((e=>({day:e.title,from:n()(e.from?e.from:"00").format("HH-mm"),to:n()(e.to?e.to:"00").format("HH-mm"),disabled:e.disabled})))},r={max_time:s.max_time},o="seller/booking/time";Promise.all([m.A.create(r),c.A.update(_.uuid,a),0!==s.working_days.length?p.A.update(_.uuid,d):void 0]).then((()=>{x.oR.success(e("successfully.updated")),N((0,f.b)()),N((0,h.EK)({...S,nextUrl:o})),D("/".concat(o))}))},form:s,lines:b,loadingBtn:k,days:t,setDays:r,setLines:j,weeks:o.Q})})}},57796:(e,s,t)=>{t.d(s,{A:()=>c});var a=t(58168),d=t(9950),r=t(86971),n=function(e,s){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&s.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var d=0;for(a=Object.getOwnPropertySymbols(e);d<a.length;d++)s.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(e,a[d])&&(t[a[d]]=e[a[d]])}return t},o=r.A.TimePicker,l=r.A.RangePicker,i=d.forwardRef((function(e,s){return d.createElement(l,(0,a.A)({},e,{dropdownClassName:e.popupClassName,picker:"time",mode:void 0,ref:s}))})),m=d.forwardRef((function(e,s){var t=e.addon,r=e.renderExtraFooter,l=e.popupClassName,i=n(e,["addon","renderExtraFooter","popupClassName"]),m=d.useMemo((function(){return r||(t||void 0)}),[t,r]);return d.createElement(o,(0,a.A)({},i,{dropdownClassName:l,mode:void 0,ref:s,renderExtraFooter:m}))}));m.displayName="TimePicker",m.RangePicker=i;const c=m}}]);