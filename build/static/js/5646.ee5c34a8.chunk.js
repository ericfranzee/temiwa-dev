"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[5646],{35116:(e,t,n)=>{n.d(t,{A:()=>r});n(9950);var s=n(48538),a=n(44070),i=n(85923),l=n(70030),d=n(13311),o=n(44414);function r(e){let{size:t="",onClick:n,type:r="default",...c}=e;const{t:u}=(0,l.B)(),{isDemo:v}=(0,d.A)();return(0,o.jsx)(s.A,{size:t,icon:(0,o.jsx)(a.A,{}),onClick:e=>{v?i.oR.warning(u("cannot.work.demo")):n(e)},type:r,...c})}},28645:(e,t,n)=>{n.d(t,{A:()=>p});var s=n(9950),a=n(66362),i=n(69216),l=n(80737),d=n(25933),o=n(57811),r=n(81541),c=n(48538),u=n(89323),v=n(70030),h=n(44414);const{Text:x}=a.A,p=e=>{let{columns:t=[],setColumns:n,style:a,size:p="",iconOnly:A}=e;const{t:m}=(0,v.B)(),[j,g]=(0,s.useState)(!1),f=(0,h.jsx)(i.A,{children:null===t||void 0===t?void 0:t.map(((e,s)=>(0,h.jsx)(i.A.Item,{children:(0,h.jsxs)(l.A,{className:"d-flex justify-content-between",children:[(0,h.jsx)(x,{children:e.title}),(0,h.jsx)(d.A,{defaultChecked:!0,onClick:()=>function(e){const s=null===t||void 0===t?void 0:t.map((t=>(t.dataIndex===e.dataIndex&&(t.is_show=!(null!==t&&void 0!==t&&t.is_show)),t)));n(s)}(e),disabled:1===s})]})},e+s)))});return(0,h.jsx)(o.A,{overlay:f,trigger:["click"],onVisibleChange:e=>{g(e)},visible:j,children:(0,h.jsx)(r.A,{title:m("change.columns"),children:(0,h.jsx)(c.A,{style:{...a},size:p,icon:(0,h.jsx)(u.A,{}),children:A?null:m("Columns")})})})}},8168:(e,t,n)=>{function s(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}n.d(t,{A:()=>s})},73265:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var s=n(9950),a=n(72243),i=n(12916),l=n(52913),d=n(48538),o=n(80737),r=n(23263),c=n(24513),u=n(44070),v=n(91854),h=n(60355),x=n(55386),p=n(70030),A=n(85923),m=n(28645),j=n(74623),g=n(88986),f=n(35116),w=n(28429),y=n(76083),_=n(59233),b=n(82706),k=n(87094),C=n(41988),z=n(99674),S=n(39487),I=n(44414);const V=["new","approved","canceled"];function R(e){let{data:t,handleCancel:n,paramsData:a}=e;const{activeMenu:i}=(0,v.d4)((e=>e.menu),v.bN),[l]=_.A.useForm(),o=(0,v.wA)(),{t:r}=(0,p.B)(),[c,u]=(0,s.useState)(null),[x,m]=(0,s.useState)(!1),[g,f]=(0,s.useState)(!1);(0,s.useEffect)((()=>{f(!0),S.A.getById(null===t||void 0===t?void 0:t.id).then((e=>{let t=e.data;const n={ads_package_id:null===t||void 0===t?void 0:t.ads_package_id,banner_id:null===t||void 0===t?void 0:t.banner_id,active:null===t||void 0===t?void 0:t.active,position_page:null===t||void 0===t?void 0:t.position_page};u(n)})).catch((e=>A.oR.error(e.message))).finally((()=>f(!1)))}),[null===t||void 0===t?void 0:t.id]);return(0,I.jsx)(b.A,{visible:!!t,title:t.title,onCancel:n,footer:[(0,I.jsx)(d.A,{type:"primary",onClick:()=>l.submit(),loading:x,children:r("save")}),(0,I.jsx)(d.A,{type:"default",onClick:n,children:r("cancel")})],children:(0,I.jsx)(_.A,{form:l,layout:"vertical",onFinish:e=>{m(!0);const s={...e};console.log("shopAdData => ",c),!g&&S.A.update(t.id,{...c,status:null===s||void 0===s?void 0:s.status}).then((()=>{n(),o((0,h.z)(a)),o((0,j.km)(i))})).finally((()=>m(!1)))},initialValues:{status:t.status},children:(0,I.jsx)(k.A,{gutter:12,children:(0,I.jsx)(C.A,{span:24,children:(0,I.jsx)(_.A.Item,{label:r("status"),name:"status",rules:[{required:!0,message:r("required")}],children:(0,I.jsx)(z.A,{children:V.map((e=>(0,I.jsx)(z.A.Option,{children:r(e)},e)))})})})})})})}var H=n(8168),F=n(59051),B=n.n(F),D=n(63620);const M=["paid","canceled"];function E(e){let{data:t,handleCancel:n,paramsData:a}=e;const[i]=_.A.useForm(),l=(0,v.wA)(),{t:o}=(0,p.B)(),[r,c]=(0,s.useState)(!1);return(0,I.jsx)(b.A,{visible:!!t,title:o("transaction.status"),closable:!1,footer:[(0,I.jsx)(d.A,{type:"primary",onClick:()=>i.submit(),loading:r,children:o("save")},"save-form"),(0,I.jsx)(d.A,{type:"default",onClick:n,children:o("cancel")},"cansel-modal")],children:(0,I.jsx)(_.A,{form:i,layout:"vertical",onFinish:e=>{c(!0),S.A.transactionUpdate(null===t||void 0===t?void 0:t.payable_id,e).then((()=>{n(),l((0,h.z)(a))})).catch((e=>A.oR.error(e.message))).finally((()=>c(!1)))},initialValues:{status:t.status},children:(0,I.jsx)(k.A,{gutter:12,children:(0,I.jsx)(C.A,{span:24,children:(0,I.jsx)(_.A.Item,{label:o("status"),name:"status",rules:[{validator:(e,t)=>"paid"===t||"canceled"===t?Promise.resolve():Promise.reject(new Error(o("required")))}],children:(0,I.jsx)(z.A,{children:M.map(((e,t)=>(0,I.jsx)(z.A.Option,{value:e,children:o(e)},t)))})})})})})})}function N(){const{t:e}=(0,p.B)(),t=(0,v.wA)(),n=(0,w.Zp)(),{activeMenu:_}=(0,v.d4)((e=>e.menu),v.bN),{shopAdsList:b,loading:k,meta:C}=(0,v.d4)((e=>e.shopAds),v.bN),{setIsModalVisible:z}=(0,s.useContext)(x.o),[V,F]=(0,s.useState)(null),[M,N]=(0,s.useState)(null),[O,P]=(0,s.useState)(null),[K,Y]=(0,s.useState)(!1),[q,T]=(0,s.useState)(null),[L,U]=(0,s.useState)([]),[X,Z]=(0,s.useState)(!1),[G,J]=(0,s.useState)(null),[Q,W]=(0,s.useState)(null),$=_.data,ee={search:null===$||void 0===$?void 0:$.serach,perPage:null===$||void 0===$?void 0:$.perPage,page:null===$||void 0===$?void 0:$.page,sort:null===$||void 0===$?void 0:$.sort};(0,s.useEffect)((()=>{_.refetch&&(t((0,h.z)(ee)),t((0,j.km)(_)))}),[_.refetch]),(0,g.A)((()=>{t((0,h.z)(ee))}),[_.data]);const te=()=>{t((0,j.X4)({id:"transactions",url:"transactions",name:e("transactions")})),n("/transactions")},ne={selectedRowKeys:V,onChange:e=>{F(e)}},[se,ae]=(0,s.useState)([{title:e("id"),dataIndex:"id",is_show:!0,sorter:(e,t)=>e.id-t.id},{title:e("shop"),dataIndex:"title",is_show:!0,render:(e,t)=>{var n,s;return(0,I.jsx)("span",{children:null===t||void 0===t||null===(n=t.shop)||void 0===n||null===(s=n.translation)||void 0===s?void 0:s.title})}},{title:e("expire.at"),dataIndex:"expire_at",is_show:!0,render:(t,n)=>(0,I.jsx)(I.Fragment,{children:null!==n&&void 0!==n&&n.expired_at?B()(null===n||void 0===n?void 0:n.expired_at).format("YYYY-MM-DD hh:mm"):(0,I.jsx)("span",{children:e("not.expired")})})},{title:e("status"),is_show:!0,dataIndex:"status",key:"status",render:(t,n)=>(0,I.jsxs)("div",{children:["new"===t?(0,I.jsx)(i.A,{color:"blue",children:e(t)}):"canceled"===t?(0,I.jsx)(i.A,{color:"error",children:e(t)}):(0,I.jsx)(i.A,{color:"cyan",children:e(t)}),(0,I.jsx)(c.A,{onClick:()=>T(n)})]})},{title:e("transaction"),dataIndex:"transaction",is_show:!0,render:(t,n)=>{var s;return(0,I.jsx)(I.Fragment,{children:t?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(d.A,{onClick:te,color:"cyan",children:null===n||void 0===n||null===(s=n.transaction)||void 0===s?void 0:s.status}),"\xa0 \xa0 \xa0",(0,I.jsx)(c.A,{onClick:()=>W(null===n||void 0===n?void 0:n.transaction)})]}):(0,I.jsx)(d.A,{color:"error",children:e("not.paid")})})}},{title:e("options"),dataIndex:"options",is_show:!0,render:(e,t)=>(0,I.jsx)(o.A,{children:(0,I.jsx)(f.A,{icon:(0,I.jsx)(u.A,{}),onClick:()=>{z(!0),F([t.id]),N(!0),P(!1)}})})}]);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(r.A,{className:"p-0",children:(0,I.jsxs)(o.A,{wrap:!0,size:[14,20],children:[(0,I.jsx)(f.A,{size:"",onClick:()=>{null===V||0===V.length?A.oR.warning(e("select.the.product")):(z(!0),N(!1))},children:e("delete.selected")}),(0,I.jsx)(m.A,{columns:se,setColumns:ae})]})}),(0,I.jsx)(r.A,{children:(0,I.jsx)(l.A,{onExpand:(e,t)=>(e=>{let{expanded:t,record:n}=e;U([]),t?(Z(!0),J(null===n||void 0===n?void 0:n.id),S.A.getById(null===n||void 0===n?void 0:n.id).then((e=>{var t;U(null===(t=e.data)||void 0===t?void 0:t.shop_ads_products)})).finally((()=>Z(!1)))):J(null)})({expanded:e,record:t}),expandable:{expandedRowRender:()=>{const t=[{title:e("id"),dataIndex:"id",is_show:!0,sorter:(e,t)=>e.id-t.id},{title:e("image"),dataIndex:"img",is_show:!0,render:(e,t)=>{var n;return(0,I.jsx)(a.A,{width:100,height:100,src:D.sE+(null===(n=t.product)||void 0===n?void 0:n.img),placeholder:!0,style:{borderRadius:4,objectFit:"cover"}})}},{title:e("name"),dataIndex:"name",is_show:!0,render:(e,t)=>{var n,s;return null===(n=t.product)||void 0===n||null===(s=n.translation)||void 0===s?void 0:s.title}},{title:e("active"),dataIndex:"active",is_show:!0,render:(t,n)=>{var s;return null!==(s=n.product)&&void 0!==s&&s.active?e("active"):e("inactive")}},{title:e("status"),is_show:!0,dataIndex:"status",key:"status",render:(t,n)=>{var s,a,l,d,o;return(0,I.jsx)("div",{children:"pending"===(null===(s=n.product)||void 0===s?void 0:s.status)?(0,I.jsx)(i.A,{color:"blue",children:e(null===(a=n.product)||void 0===a?void 0:a.status)}):"unpublished"===(null===(l=n.product)||void 0===l?void 0:l.status)?(0,I.jsx)(i.A,{color:"error",children:e(null===(d=n.product)||void 0===d?void 0:d.status)}):(0,I.jsx)(i.A,{color:"cyan",children:e(null===(o=n.product)||void 0===o?void 0:o.status)})})}}];return(0,I.jsx)(l.A,{columns:t,dataSource:L,pagination:!1,loading:X})},defaultExpandedRowKeys:["0"],expandedRowKeys:[G]},scroll:{x:!0},dataSource:b,columns:null===se||void 0===se?void 0:se.filter((e=>null===e||void 0===e?void 0:e.is_show)),rowSelection:ne,rowKey:e=>e.id,loading:K||k,pagination:{pageSize:C.per_page,page:C.current_page,total:C.total},onChange:(e,n,s)=>{const{pageSize:a,current:i}=e,{field:l,order:d}=s,o=(0,H.A)(d);t((0,j.Ok)({activeMenu:_,data:{..._.data,perPage:a,page:i,column:l,sort:o}}))}})}),q&&(0,I.jsx)(R,{data:q,handleCancel:()=>T(null),paramsData:ee}),(0,I.jsx)(y.A,{click:O?()=>{Y(!0),S.A.setActive(V).then((()=>{z(!1),t((0,h.z)(ee)),A.oR.success(e("successfully.updated")),P(!1)})).finally((()=>Y(!1)))}:()=>{Y(!0);const n={...Object.assign({},...V.map(((e,t)=>({["ids[".concat(t,"]")]:e}))))};S.A.delete(n).then((()=>{z(!1),A.oR.success(e("successfully.deleted")),t((0,h.z)(ee)),N(null),P(!1)})).finally((()=>{Y(!1),F(null)}))},text:e(O?"set.active.advert":M?"delete":"all.delete"),setText:F,setActive:P}),Q&&(0,I.jsx)(E,{data:Q,handleCancel:()=>W(!1),paramsData:ee})]})}},89323:(e,t,n)=>{n.d(t,{A:()=>o});var s=n(89379),a=n(9950);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var l=n(25085),d=function(e,t){return a.createElement(l.A,(0,s.A)((0,s.A)({},e),{},{ref:t,icon:i}))};const o=a.forwardRef(d)}}]);