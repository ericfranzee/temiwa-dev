"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[326],{78498:(e,t,n)=>{n.d(t,{A:()=>m});var r=n(9950),o=n(97239);const l=n.p+"static/media/pin.0e41858db80c699cd8a2.png";var a=n(96011),i=n.n(a),u=n(63620);async function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.CJ,n={latlng:"".concat(null===e||void 0===e?void 0:e.lat,",").concat(null===e||void 0===e?void 0:e.lng),key:t};return i().get("https://maps.googleapis.com/maps/api/geocode/json",{params:n}).then((e=>{var t;let{data:n}=e;return null===(t=n.results[0])||void 0===t?void 0:t.formatted_address})).catch((e=>"not found"))}var s=n(39174),d=n(85923),f=n(70030),p=n(6566),g=n(44414);const v=(0,p.A)();const m=(0,o.GoogleApiWrapper)({apiKey:v,libraries:["places","geometry"]})((function(e){var t,n;const[a,i]=(0,r.useState)(),{t:u}=(0,f.B)(),p=async()=>{await navigator.geolocation.getCurrentPosition((function(e){const t={lat:e.coords.latitude,lng:e.coords.longitude};i(t)}),(function(e){d.oR.warning(u("turn.on.gps"))}))};(0,r.useEffect)((()=>{p()}),[]);const m=[{lat:Number(null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.lat)||0,lng:Number(null===e||void 0===e||null===(n=e.location)||void 0===n?void 0:n.lng)||0}];for(var b=new e.google.maps.LatLngBounds,y=0;y<m.length;y++)b.extend(m[y]);return(0,g.jsxs)("div",{className:"map-container",style:{height:400,width:"100%"},children:[(0,g.jsx)("button",{className:"map-button",type:"button",onClick:()=>{p(),a&&(async t=>{const n={lat:null===t||void 0===t?void 0:t.lat,lng:null===t||void 0===t?void 0:t.lng};e.setLocation(n);const r=await c(n,v);e.setAddress(r)})(a)},children:(0,g.jsx)(s.uFi,{})}),(0,g.jsx)(o.Map,{cursor:"pointer",onClick:async(t,n,r)=>{const{latLng:o}=r,l={lat:o.lat(),lng:o.lng()};e.setLocation(l);const a=await c(l,v);e.setAddress(a)},google:e.google,defaultZoom:12,zoom:10,className:"clickable",initialCenter:e.location,center:e.location,children:(0,g.jsx)(o.Marker,{position:e.location,icon:{url:l,scaledSize:new e.google.maps.Size(32,32)},className:"marker"})})]})}))},29597:(e,t,n)=>{function r(e){var t;if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const n=null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.split(", ");return{lat:Number(null===n||void 0===n?void 0:n[0]),lng:Number(null===n||void 0===n?void 0:n[1])}}n.d(t,{A:()=>r})},6566:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(17706);const o=()=>{var e,t;const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IS_DEMO:"false"}.MAP_API_KEY,{google_map_key:o}=null===(e=r.M.getState())||void 0===e||null===(t=e.globalSettings)||void 0===t?void 0:t.settings;return o||n}},31281:(e,t,n)=>{function r(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const r=e.map((e=>({[e.locale]:""===t["".concat(n,"[").concat(e.locale,"]")]?void 0:t["".concat(n,"[").concat(e.locale,"]")]})));return Object.assign({},...r)}n.d(t,{A:()=>r})},14713:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var r=n(9950),o=n(28429),l=n(85923),a=n(59233),i=n(23263),u=n(87094),c=n(41988),s=n(55902),d=n(48538),f=n(91854),p=n(74623),g=n(70030),v=n(71999),m=n(31281),b=n(78498),y=n(58962),O=n(37332),_=n(29597),j=n(56713),h=n(63620),P=n(44414);const S=()=>{const{t:e}=(0,g.B)(),{activeMenu:t}=(0,f.d4)((e=>e.menu),f.bN),n=(0,f.wA)(),[S]=a.A.useForm(),A=(0,o.Zp)(),{id:w}=(0,o.g)(),{settings:E}=(0,f.d4)((e=>e.globalSettings),f.bN),{google_map_key:M}=(0,f.d4)((e=>e.globalSettings.settings),f.bN),[x,L]=(0,r.useState)((0,_.A)(E)),[k,C]=(0,r.useState)(!1),[R,T]=(0,r.useState)(!1),{languages:N,defaultLang:B}=(0,f.d4)((e=>e.formLang),f.bN);function G(e){if(!e)return{};const{translations:t}=e,n=N.map((e=>{var n;return{["title[".concat(e.locale,"]")]:null===(n=t.find((t=>t.locale===e.locale)))||void 0===n?void 0:n.title}}));return Object.assign({},...n)}(0,r.useEffect)((()=>()=>{const e=S.getFieldsValue(!0);e.open_time=JSON.stringify(null===e||void 0===e?void 0:e.open_time),e.close_time=JSON.stringify(null===e||void 0===e?void 0:e.close_time),n((0,p.Ok)({activeMenu:t,data:e}))}),[]);(0,r.useEffect)((()=>{t.refetch&&(e=>{T(!0),y.A.getById(e).then((e=>{var t;let n=e.data;L({lat:Number(null===n||void 0===n?void 0:n.location.latitude),lng:Number(null===n||void 0===n?void 0:n.location.longitude)}),S.setFieldsValue({...n,...G(n),address:null===(t=n.address)||void 0===t?void 0:t.address})})).finally((()=>{n((0,p.km)(t)),T(!1)}))})(w)}),[t.refetch]);const{ref:I}=(0,j.usePlacesWidget)({apiKey:M||h.CJ,onPlaceSelected:e=>{const t={lat:null===e||void 0===e?void 0:e.geometry.location.lat(),lng:null===e||void 0===e?void 0:e.geometry.location.lng()};L(t),S.setFieldsValue({["address[".concat(B,"]")]:null===e||void 0===e?void 0:e.formatted_address})}});return(0,P.jsx)(i.A,{loading:R,title:e("edit.branch"),className:"h-100",extra:(0,P.jsx)(v.A,{}),children:(0,P.jsxs)(a.A,{name:"branch-add",layout:"vertical",onFinish:r=>{const o={title:(0,m.A)(N,r,"title"),address:{address:r.address,office:null,house:null,floor:null},location:{longitude:x.lng,latitude:x.lat}};C(!0);const a="seller/branch";y.A.update(w,o).then((()=>{l.oR.success(e("successfully.created")),n((0,p.EK)({...t,nextUrl:a})),A("/".concat(a)),n((0,O.D)())})).finally((()=>C(!1)))},form:S,initialValues:{...t.data},className:"d-flex flex-column h-100",children:[(0,P.jsxs)(u.A,{gutter:12,children:[(0,P.jsx)(c.A,{span:12,children:N.map(((t,n)=>(0,P.jsx)(a.A.Item,{label:e("title"),name:"title[".concat(t.locale,"]"),rules:[{required:t.locale===B,message:e("required")}],hidden:t.locale!==B,children:(0,P.jsx)(s.A,{})},"title"+n)))}),(0,P.jsx)(c.A,{span:12,children:(0,P.jsx)(a.A.Item,{label:e("address"),name:"address",rules:[{required:!0,message:e("required")}],children:(0,P.jsx)("input",{className:"address-input",ref:I,placeholder:""})})}),(0,P.jsx)(c.A,{span:24,children:(0,P.jsx)(b.A,{location:x,setLocation:L,setAddress:e=>S.setFieldsValue({address:e})})})]}),(0,P.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,P.jsx)("div",{className:"pb-5",children:(0,P.jsx)(d.A,{type:"primary",htmlType:"submit",loading:k,children:e("submit")})})})]})})}},56713:(e,t,n)=>{e.exports=n(1617)},14345:(e,t,n)=>{function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=l?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(o,a,i):o[a]=e[a]}o.default=e,n&&n.set(e,o);return o}(n(9950)),l=i(n(11942)),a=i(n(13870));function i(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function d(e){var t=e.onPlaceSelected,n=e.apiKey,r=e.libraries,l=e.inputAutocompleteValue,i=e.options,u=e.googleMapsScriptBaseUrl,d=e.refProp,f=e.language,p=s(e,["onPlaceSelected","apiKey","libraries","inputAutocompleteValue","options","googleMapsScriptBaseUrl","refProp","language"]),g=(0,a.default)({ref:d,googleMapsScriptBaseUrl:u,onPlaceSelected:t,apiKey:n,libraries:r,inputAutocompleteValue:l,options:i,language:f}).ref;return o.default.createElement("input",c({ref:g},p))}d.propTypes={apiKey:l.default.string,libraries:l.default.arrayOf(l.default.string),ref:l.default.oneOfType([l.default.func,l.default.shape({current:l.default.any})]),googleMapsScriptBaseUrl:l.default.string,onPlaceSelected:l.default.func,inputAutocompleteValue:l.default.string,options:l.default.shape({componentRestrictions:l.default.object,bounds:l.default.object,location:l.default.object,offset:l.default.number,origin:l.default.object,radius:l.default.number,sessionToken:l.default.object,types:l.default.arrayOf(l.default.string)}),language:l.default.string};var f=(0,o.forwardRef)((function(e,t){return o.default.createElement(d,c({},e,{refProp:t}))}));t.default=f},34040:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GOOGLE_MAP_SCRIPT_BASE_URL=void 0;t.GOOGLE_MAP_SCRIPT_BASE_URL="https://maps.googleapis.com/maps/api/js"},1617:(e,t,n)=>{Object.defineProperty(t,"usePlacesWidget",{enumerable:!0,get:function(){return o.default}});var r=l(n(14345)),o=l(n(13870));function l(e){return e&&e.__esModule?e:{default:e}}},13870:(e,t,n)=>{function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.ref,n=e.onPlaceSelected,r=e.apiKey,i=e.libraries,u=void 0===i?"places":i,s=e.inputAutocompleteValue,d=void 0===s?"new-password":s,f=e.options,p=(f=void 0===f?{}:f).types,g=void 0===p?["(cities)"]:p,v=f.componentRestrictions,m=f.fields,b=void 0===m?["address_components","geometry.location","place_id","formatted_address"]:m,y=f.bounds,O=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(f,["types","componentRestrictions","fields","bounds"]),_=e.googleMapsScriptBaseUrl,j=void 0===_?a.GOOGLE_MAP_SCRIPT_BASE_URL:_,h=e.language,P=(0,o.useRef)(null),S=(0,o.useRef)(null),A=(0,o.useRef)(null),w=(0,o.useRef)(null),E=h?"&language=".concat(h):"",M="".concat(j,"?libraries=").concat(u,"&key=").concat(r).concat(E),x=(0,o.useCallback)((function(){return(0,l.loadGoogleMapScript)(j,M)}),[j,M]);return(0,o.useEffect)((function(){var e=c(c({},O),{},{fields:b,types:g,bounds:y});if(v&&(e.componentRestrictions=v),!A.current&&P.current&&l.isBrowser){t&&!t.current&&(t.current=P.current);var o=function(){var t;return"undefined"===typeof google?console.error("Google has not been found. Make sure your provide apiKey prop."):null!==(t=google.maps)&&void 0!==t&&t.places?!P.current instanceof HTMLInputElement?console.error("Input ref must be HTMLInputElement."):(A.current=new google.maps.places.Autocomplete(P.current,e),void(A.current&&(S.current=A.current.addListener("place_changed",(function(){n&&A&&A.current&&n(A.current.getPlace(),P.current,A.current)}))))):console.error("Google maps places API must be loaded.")};return r?x().then((function(){return o()})):o(),function(){return S.current?S.current.remove():void 0}}}),[]),(0,o.useEffect)((function(){var e;(null===o.default||void 0===o.default||null===(e=o.default.version)||void 0===e||!e.startsWith("18"))&&l.isBrowser&&window.MutationObserver&&P.current&&P.current instanceof HTMLInputElement&&(w.current=new MutationObserver((function(){w.current.disconnect(),P.current&&(P.current.autocomplete=d)})),w.current.observe(P.current,{attributes:!0,attributeFilter:["autocomplete"]}))}),[d]),(0,o.useEffect)((function(){A.current&&A.current.setFields(b)}),[b]),(0,o.useEffect)((function(){A.current&&A.current.setBounds(y)}),[y]),(0,o.useEffect)((function(){A.current&&A.current.setComponentRestrictions(v)}),[v]),(0,o.useEffect)((function(){A.current&&A.current.setOptions(O)}),[O]),{ref:P,autocompleteRef:A}};var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var o={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=l?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(o,a,u):o[a]=e[a]}o.default=e,n&&n.set(e,o);return o}(n(9950)),l=n(8668),a=n(34040);function i(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},8668:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loadGoogleMapScript=t.isBrowser=void 0;var n="undefined"!==typeof window&&window.document;t.isBrowser=n;t.loadGoogleMapScript=function(e,t){if(!n)return Promise.resolve();if("undefined"!==typeof google&&google.maps&&google.maps.api)return Promise.resolve();var r=document.querySelectorAll('script[src*="'.concat(e,'"]'));if(r&&r.length)return new Promise((function(e){if("undefined"!==typeof google)return e();r[0].addEventListener("load",(function(){return e()}))}));var o=new URL(t);o.searchParams.set("callback","__REACT_GOOGLE_AUTOCOMPLETE_CALLBACK__");var l=document.createElement("script");return l.src=o.toString(),new Promise((function(e){window.__REACT_GOOGLE_AUTOCOMPLETE_CALLBACK__=e,document.body.appendChild(l)}))}}}]);