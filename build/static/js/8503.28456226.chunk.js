"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[8503],{47992:(e,t,s)=>{s.d(t,{G:()=>c});var r=s(9950),n=s(95491),i=s.n(n),a=s(99674),o=s(90650),l=s(44414);const c=e=>{let{fetchOptions:t,debounceTimeout:s=400,onClear:n,refetchOptions:c=!1,...d}=e;const[m,u]=(0,r.useState)(!1),[p,x]=(0,r.useState)([]),h=(0,r.useMemo)((()=>i()((e=>{x([]),u(!0),t(e).then((e=>{x(e),u(!1)}))}),s)),[t,s]);return(0,l.jsx)(a.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:h,onClear:()=>{h(""),n&&n()},notFoundContent:m?(0,l.jsx)(o.A,{size:"small"}):"no results",...d,options:p,onFocus:()=>{p.length&&!c||h("")}})}},31281:(e,t,s)=>{function r(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const r=e.map((e=>({[e.locale]:""===t["".concat(s,"[").concat(e.locale,"]")]?void 0:t["".concat(s,"[").concat(e.locale,"]")]})));return Object.assign({},...r)}s.d(t,{A:()=>r})},47574:(e,t,s)=>{s.d(t,{A:()=>c,b:()=>a});var r=s(9950),n=s(48049),i=s(44414);const a=(0,r.createContext)({}),o={activeItemIndex:0,formItemsList:[{answer_type:"short_answer",question:"New question",required:!0}]},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.TH.addNewFormItem:return{activeItemIndex:e.formItemsList.length,formItemsList:[...e.formItemsList,t.payload]};case n.TH.updateFormItem:{const s=[...e.formItemsList];return s[e.activeItemIndex]=t.payload,{activeItemIndex:-1,formItemsList:s}}case n.TH.cancelFormItem:return{activeItemIndex:-1,formItemsList:e.formItemsList};case n.TH.startUpdatingFormItem:return{activeItemIndex:t.payload,formItemsList:e.formItemsList};case n.TH.deleteActiveFormItem:{const t=[...e.formItemsList];return t.splice(e.activeItemIndex,1),{activeItemIndex:-1,formItemsList:t}}case n.TH.setFormItemsState:return{activeItemIndex:-1,formItemsList:t.payload};case n.TH.moveUpQuestion:{const t=[...e.formItemsList],s=t[e.activeItemIndex];return t[e.activeItemIndex]=t[e.activeItemIndex-1],t[e.activeItemIndex-1]=s,{activeItemIndex:e.activeItemIndex-1,formItemsList:t}}case n.TH.moveDownQuestion:{const t=[...e.formItemsList],s=t[e.activeItemIndex];return t[e.activeItemIndex]=t[e.activeItemIndex+1],t[e.activeItemIndex+1]=s,{activeItemIndex:e.activeItemIndex+1,formItemsList:t}}case n.TH.copyFormItem:{const s=[...e.formItemsList];return s.splice(e.activeItemIndex+1,0,t.payload),{activeItemIndex:e.activeItemIndex+1,formItemsList:s}}default:return e}};const c=function(e){let{children:t,value:s}=e;const[n,c]=(0,r.useReducer)(l,o);return(0,i.jsx)(a.Provider,{value:{formOptionsState:n,formOptionsDispatch:c},children:t})}},18503:(e,t,s)=>{s.d(t,{A:()=>Y});var r=s(70030),n=s(9950),i=s(48049),a=s(23263),o=s(59233),l=s(55902),c=s(87094),d=s(41988),m=s(25933),u=s(48538),p=s(24893),x=s(98591),h=s(99674),j=s(40895),v=s(80737),I=s(78840),A=s(94889),w=s(67376),y=s(44070),f=s(94118),b=s(13239),g=s(77484),_=s(8750),F=s(47574),N=s(44414);function q(e){let{answer_type:t}=e;const{t:s}=(0,r.B)();return"single_answer"===t||"multiple_choice"===t||"drop_down"===t?(0,N.jsx)(o.A.List,{name:"answer",label:"Answers",rules:[{validator:async(e,t)=>{if(!t||t.length<2)return Promise.reject(new Error("At least 2 passengers"))}}],children:(e,t,r)=>{let{add:n,remove:i}=t,{errors:a}=r;return(0,N.jsxs)(N.Fragment,{children:[e.map(((t,r)=>(0,N.jsx)(o.A.Item,{required:!1,className:"w-100",children:(0,N.jsxs)("div",{className:"d-flex",children:[(0,N.jsx)(o.A.Item,{label:"Answer ".concat(r+1),...t,rules:[{required:!0,message:s("required")}],noStyle:!0,children:(0,N.jsx)(l.A,{placeholder:s("option"),className:"w-100"})}),(0,N.jsx)(u.A,{icon:(0,N.jsx)(g.A,{}),type:"danger",onClick:()=>i(t.name),className:"ml-2",disabled:e.length<=2})]})},t.key))),(0,N.jsx)(o.A.Item,{className:"w-100",children:(0,N.jsx)(u.A,{type:"link",onClick:()=>n(),icon:(0,N.jsx)(_.A,{}),children:s("add.field")})})]})}}):null}const C=function(e){let{data:t}=e;const{t:s}=(0,r.B)(),[p]=o.A.useForm(),{formOptionsState:x,formOptionsDispatch:g}=(0,n.useContext)(F.b),_={question:t.question,answer_type:t.answer_type,answer:t.answer,required:t.required};return(0,N.jsx)(a.A,{className:"border",style:{background:"rgba(0, 0, 0, 0.1)"},children:(0,N.jsx)(o.A,{form:p,initialValues:_,onFinish:e=>{g({type:i.TH.updateFormItem,payload:e})},layout:"vertical",children:(0,N.jsxs)(c.A,{gutter:10,children:[(0,N.jsx)(d.A,{span:10,children:(0,N.jsx)(o.A.Item,{name:"answer_type",label:"answer.type",rules:[{required:!0}],children:(0,N.jsx)(h.A,{onChange:e=>{"single_answer"!==e&&"multiple_choice"!==e&&"drop_down"!==e||p.getFieldValue("answer")||p.setFieldsValue({answer:["Answer 1","Answer 2"]})},children:i.pU.map((e=>(0,N.jsx)(h.A.Option,{value:e,children:s(e)},e)))})})}),(0,N.jsx)(d.A,{span:14,children:(0,N.jsx)(o.A.Item,{name:"question",label:"question",rules:[{required:!0}],children:(0,N.jsx)(l.A,{})})}),(0,N.jsx)(o.A.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.answer_type!==t.answer_type,children:e=>{let{getFieldValue:t}=e;return(0,N.jsx)(q,{answer_type:t("answer_type")})}}),(0,N.jsx)(j.A,{className:"mt-0"}),(0,N.jsxs)("div",{className:"flex justify-content-between items-center w-100",children:[(0,N.jsx)("div",{children:(0,N.jsx)(o.A.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.answer_type!==t.answer_type,children:e=>{let{getFieldValue:t}=e;return"description_text"!==t("answer_type")?(0,N.jsx)(o.A.Item,{name:"required",valuePropName:"required",label:s("required"),className:"mb-0",children:(0,N.jsx)(m.A,{defaultChecked:_.required})}):null}})}),(0,N.jsxs)(v.A,{children:[(0,N.jsx)(u.A,{onClick:()=>{g({type:i.TH.moveUpQuestion})},htmlType:"button",icon:(0,N.jsx)(I.A,{}),disabled:0===x.activeItemIndex}),(0,N.jsx)(u.A,{onClick:()=>{g({type:i.TH.moveDownQuestion})},htmlType:"button",icon:(0,N.jsx)(A.A,{}),disabled:x.activeItemIndex===x.formItemsList.length-1}),(0,N.jsx)("div",{role:"separator"}),(0,N.jsx)(u.A,{onClick:()=>{const e=Object.assign({},x.formItemsList[x.activeItemIndex]);e.question+=" copy",g({type:i.TH.copyFormItem,payload:e})},htmlType:"button",icon:(0,N.jsx)(w.A,{})}),(0,N.jsx)(u.A,{onClick:()=>{g({type:i.TH.deleteActiveFormItem})},htmlType:"button",icon:(0,N.jsx)(y.A,{}),type:"danger",disabled:1===x.formItemsList.length}),(0,N.jsx)("div",{role:"separator"}),(0,N.jsx)(u.A,{onClick:()=>{g({type:i.TH.cancelFormItem})},htmlType:"button",icon:(0,N.jsx)(f.A,{})}),(0,N.jsx)(u.A,{htmlType:"submit",icon:(0,N.jsx)(b.A,{}),type:"primary"})]})]})]})})})};var k=s(52765),L=s(99985);function T(e){let{data:t}=e;switch(t.answer_type){case"short_answer":return(0,N.jsx)(l.A,{});case"long_answer":return(0,N.jsx)(x.A,{rows:2});case"single_answer":return(0,N.jsx)(p.Ay.Group,{children:(0,N.jsx)(v.A,{direction:"vertical",children:t.answer.map((e=>(0,N.jsx)(p.Ay,{value:e,children:e})))})});case"multiple_choice":return(0,N.jsx)(v.A,{direction:"vertical",children:t.answer.map((e=>(0,N.jsx)(k.A,{children:e})))});case"drop_down":return(0,N.jsx)(h.A,{placeholder:"Please select",children:t.answer.map(((e,t)=>(0,N.jsx)(h.A.Option,{value:e+t,children:e})))});case"yes_or_no":return(0,N.jsxs)(p.Ay.Group,{children:[(0,N.jsx)(p.Ay.Button,{value:"yes",children:"Yes"}),(0,N.jsx)(p.Ay.Button,{value:"no",children:"No"})]});case"description_text":return(0,N.jsx)("div",{className:"mb-4",children:(0,N.jsx)(L.A,{message:t.question,type:"info",className:"mt-3"})});default:return(0,N.jsx)("p",{children:"Unknown type"})}}const O=function(e){let{data:t,disabled:s,onClick:r}=e;return(0,N.jsx)(o.A,{layout:"vertical",onClick:r,children:"description_text"===t.answer_type?(0,N.jsx)(T,{data:t}):(0,N.jsx)(o.A.Item,{label:t.question,required:!!t.required,style:{pointerEvents:s?"none":"auto"},children:(0,N.jsx)(T,{data:t})})})};const S=function(e){let{active:t,data:s,index:r}=e;const{formOptionsDispatch:a}=(0,n.useContext)(F.b);return t?(0,N.jsx)(C,{data:s}):(0,N.jsx)(O,{data:s,disabled:!0,onClick:()=>{a({type:i.TH.startUpdatingFormItem,payload:r})}})};var H=s(53387),U=s(82706);const P=function(e){let{visible:t,onCancel:s,onOk:o}=e;const{t:l}=(0,r.B)(),[m,u]=(0,n.useState)(i.pU[0]);return(0,N.jsx)(U.A,{title:l("select.answer.type"),visible:t,onCancel:s,onOk:()=>{s(),o(m)},children:(0,N.jsx)(c.A,{gutter:[16],children:i.pU.map((e=>(0,N.jsx)(d.A,{span:8,onClick:()=>u(e),children:(0,N.jsx)(a.A,{className:"border text-center bg-primary ".concat(m===e?"border-white":""),children:(0,N.jsxs)("div",{className:"flex flex-column cursor-pointer",children:[(0,i.wX)(e),(0,N.jsx)("span",{children:e})]})})},e)))})})};var V=s(91854),z=s(31281),D=s(47992),B=s(55660),E=s(85923),Q=s(74623),G=s(28429),R=s(47777);const X=function(e){let{form:t}=e;const{defaultLang:s}=(0,V.d4)((e=>e.formLang),V.bN),{formOptionsState:r}=(0,n.useContext)(F.b),{current:i}=(0,n.useRef)(t.getFieldsValue()["title[".concat(s,"]")]),{current:o}=(0,n.useRef)(t.getFieldsValue()["description[".concat(s,"]")]);return(0,N.jsx)("div",{style:{maxWidth:600,margin:"0 auto"},children:(0,N.jsxs)("div",{className:"border rounded",children:[(0,N.jsxs)(a.A,{className:"mb-0",children:[(0,N.jsx)("h3",{children:i}),(0,N.jsx)("p",{children:o})]}),(0,N.jsx)("div",{className:"border-top",children:(0,N.jsx)(a.A,{className:"mb-0",children:r.formItemsList.map(((e,t)=>(0,N.jsx)(O,{data:e,index:t},t)))})})]})})};function M(e){let{onSubmit:t,form:s,isCreating:p}=e;const{t:h}=(0,r.B)(),j=(0,V.wA)(),v=(0,G.Zp)(),{activeMenu:I}=(0,V.d4)((e=>e.menu),V.bN),{defaultLang:A,languages:w}=(0,V.d4)((e=>e.formLang),V.bN),{formOptionsState:y,formOptionsDispatch:f}=(0,n.useContext)(F.b),[b,g]=(0,n.useState)(!1),[_,q]=(0,n.useState)(!1);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{style:{maxWidth:600,margin:"0 auto"},children:[(0,N.jsxs)("div",{className:"border rounded",children:[(0,N.jsx)(a.A,{className:"mb-0",children:(0,N.jsxs)(o.A,{form:s,layout:"vertical",onFinish:e=>{q(!0);const s={title:(0,z.A)(w,e,"title"),description:(0,z.A)(w,e,"description"),required:e.required?1:0,active:e.active?1:0,shop_id:e.shop.value,data:y.formItemsList.map((e=>({...e,required:e.required?1:0})))};t(s).then((()=>{const e="form-options";E.oR.success(h("successfully.added")),(0,V.vA)((()=>{j((0,Q.EK)({...I,nextUrl:e})),j((0,R.Vs)({}))})),v("/".concat(e))})).finally((()=>q(!1)))},children:[w.map((e=>(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(o.A.Item,{label:h("title"),name:"title[".concat(e.locale,"]"),hidden:e.locale!==A,rules:[{validator:(t,s)=>s||(null===e||void 0===e?void 0:e.locale)!==A?s&&""===(null===s||void 0===s?void 0:s.trim())?Promise.reject(new Error(h("no.empty.space"))):s&&(null===s||void 0===s?void 0:s.trim().length)<5?Promise.reject(new Error(h("must.be.at.least.5"))):Promise.resolve():Promise.reject(new Error(h("required")))}],children:(0,N.jsx)(l.A,{})},"title"+e.id),(0,N.jsx)(o.A.Item,{label:h("section.description"),name:"description[".concat(e.locale,"]"),rules:[{validator:(t,s)=>s||(null===e||void 0===e?void 0:e.locale)!==A?s&&""===(null===s||void 0===s?void 0:s.trim())?Promise.reject(new Error(h("no.empty.space"))):s&&(null===s||void 0===s?void 0:s.trim().length)<5?Promise.reject(new Error(h("must.be.at.least.5"))):Promise.resolve():Promise.reject(new Error(h("required")))}],hidden:e.locale!==A,children:(0,N.jsx)(x.A,{})},"description"+e.locale)]}))),(0,N.jsxs)(c.A,{gutter:20,className:"mb-0",size:"middle",children:[(0,N.jsx)(d.A,{span:10,children:(0,N.jsx)(o.A.Item,{label:h("shop"),name:"shop",rules:[{required:!0,message:"required"}],children:(0,N.jsx)(D.G,{fetchOptions:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t={search:e,perPage:10,page:1};return null!==e&&void 0!==e&&e.trim()||null===t||void 0===t||delete t.search,B.A.getAll(t).then((e=>{var t;return null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.map((e=>{var t;return{label:null===e||void 0===e||null===(t=e.translation)||void 0===t?void 0:t.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},refetchOptions:!0})})}),(0,N.jsx)(d.A,{children:(0,N.jsx)(o.A.Item,{name:"required",label:h("required"),className:"mb-0",valuePropName:"required",children:(0,N.jsx)(m.A,{defaultChecked:!!p||s.getFieldValue("required")})})}),(0,N.jsx)(d.A,{children:(0,N.jsx)(o.A.Item,{name:"active",label:h("active"),className:"mb-0",children:(0,N.jsx)(m.A,{defaultChecked:!!p||s.getFieldValue("active")})})})]})]})}),(0,N.jsx)("div",{className:"border-top",children:(0,N.jsx)(a.A,{className:"mb-0",children:y.formItemsList.map(((e,t)=>(0,N.jsx)(S,{active:t===y.activeItemIndex,data:e,index:t})))})}),(0,N.jsx)("div",{className:"border-top",children:(0,N.jsx)(a.A,{className:"mb-0",children:(0,N.jsx)(u.A,{icon:(0,N.jsx)(H.A,{}),type:"link",onClick:()=>g(!0),children:h("add.form.item")})})})]}),(0,N.jsx)(u.A,{loading:_,className:"mt-3 w-100",type:"primary",onClick:s.submit,children:h("submit")})]}),b&&(0,N.jsx)(P,{visible:b,onCancel:()=>g(!1),onOk:e=>{const t=(0,i.sD)(e);f({type:i.TH.addNewFormItem,payload:t})}})]})}const Y=function(e){const[t,s]=(0,n.useState)("form");return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{className:"flex justify-content-center mb-5",children:(0,N.jsxs)(p.Ay.Group,{defaultValue:"form",onChange:e=>{s(e.target.value)},children:[(0,N.jsx)(p.Ay.Button,{value:"form",children:"Builder"}),(0,N.jsx)(p.Ay.Button,{value:"preview",children:"Preview"})]})}),"form"===t?(0,N.jsx)(M,{...e}):(0,N.jsx)(X,{form:e.form})]})}},48049:(e,t,s)=>{s.d(t,{TH:()=>d,pU:()=>c,sD:()=>m,wX:()=>u});var r=s(31222),n=s(8394),i=s(1199),a=s(50384),o=s(54826),l=s(44414);const c=["short_answer","long_answer","single_answer","multiple_choice","drop_down","yes_or_no","description_text"],d={addNewFormItem:"addNewFormItem",updateFormItem:"updateFormItem",cancelFormItem:"cancelFormItem",deleteActiveFormItem:"deleteActiveFormItem",startUpdatingFormItem:"startUpdatingFormItem",setFormItemsState:"setFormItemsState",moveUpQuestion:"moveUpQuestion",moveDownQuestion:"moveDownQuestion",copyFormItem:"copyFormItem"};function m(e){const t={answerType:e};switch(e){case"short_answer":case"long_answer":case"yes_or_no":return{answer_type:e,question:"New question",required:!0};case"single_answer":case"multiple_choice":case"drop_down":return{answer_type:e,question:"New question",answer:["New answer 1","New answer 2"],required:!0};case"description_text":return{answer_type:e,question:"New text description"}}return t}function u(e){switch(e){case"short_answer":return(0,l.jsx)(r.v2K,{size:24});case"long_answer":return(0,l.jsx)(n.xYT,{size:24});case"single_answer":return(0,l.jsx)(i.MYX,{size:24});case"multiple_choice":return(0,l.jsx)(a.CTR,{size:24});case"drop_down":return(0,l.jsx)(r.s4V,{size:24});case"yes_or_no":return(0,l.jsx)(a.TSp,{size:24});case"description_text":return(0,l.jsx)(o.gXU,{size:24});default:console.error("Unknown answerType")}}}}]);