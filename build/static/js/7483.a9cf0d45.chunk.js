"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[7483],{27276:(e,r,t)=>{t.d(r,{v:()=>n});var l=t(9950),i=t(90777),a=t(90650),s=t(44414);const n=e=>{let{fetchOptions:r,refetch:t=!1,...n}=e;const[o,d]=(0,l.useState)(!1),[c,u]=(0,l.useState)([]);return(0,s.jsx)(i.A,{treeLine:!0,treeData:o?[]:c,treeDefaultExpandAll:!0,labelInValue:!0,onFocus:()=>{c.length&&!t||(d(!0),r().then((e=>{u(e),d(!1)})))},notFoundContent:o?(0,s.jsx)(a.A,{size:"small"}):"no results",...n})}},77483:(e,r,t)=>{t.r(r),t.d(r,{default:()=>w});var l=t(9950),i=t(59233),a=t(23263),s=t(87094),n=t(41988),o=t(55902),d=t(99674),c=t(25933),u=t(48538),v=t(85923),m=t(28429),p=t(71999),h=t(98591),j=t(91854),A=t(74623),g=t(62572),x=t(70030),y=t(48970),b=t(27276),f=t(44414);const w=()=>{var e,r;const{t:t}=(0,x.B)(),w=(0,m.Zp)(),k=((0,m.zy)(),(0,j.wA)()),{activeMenu:P}=(0,j.d4)((e=>e.menu),j.bN),[_,E]=(0,l.useState)("service"),[q,I]=(0,l.useState)(null!==(e=P.data)&&void 0!==e&&e.image?[null===(r=P.data)||void 0===r?void 0:r.image]:[]),[S]=i.A.useForm(),[F,L]=(0,l.useState)(!1),[z,C]=(0,l.useState)(null),{defaultLang:N,languages:O}=(0,j.d4)((e=>e.formLang),j.bN);(0,l.useEffect)((()=>()=>{const e=S.getFieldsValue(!0);k((0,A.Ok)({activeMenu:P,data:e}))}),[]);return(0,f.jsx)(a.A,{title:t("add.service.category"),extra:(0,f.jsx)(p.A,{}),children:(0,f.jsxs)(i.A,{name:"basic",layout:"vertical",onFinish:e=>{var r,l,i;L(!0);const a={...e,active:e.active?1:0,keywords:e.keywords.join(","),parent_id:null===(r=e.parent_id)||void 0===r?void 0:r.value,"images[0]":null===(l=q[0])||void 0===l?void 0:l.name,type:null!==(i=e.parent_id)&&void 0!==i&&i.value?"sub_service":"service"},s="catalog/service-categories";g.A.create(a).then((()=>{v.oR.success(t("successfully.created")),k((0,A.EK)({...P,nextUrl:s})),w("/".concat(s))})).catch((e=>C(e.response.data.params))).finally((()=>L(!1)))},initialValues:{active:!0,...P.data},form:S,children:[(0,f.jsxs)(s.A,{gutter:12,children:[(0,f.jsx)(n.A,{span:12,children:O.map(((e,r)=>(0,f.jsx)(i.A.Item,{label:t("name"),name:"title[".concat(e.locale,"]"),help:z&&z["title.".concat(N)]?z["title.".concat(N)][0]:null,validateStatus:z?"error":"success",rules:[{required:!0,validator:(r,l)=>l||(null===e||void 0===e?void 0:e.locale)!==N?l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(new Error(t("no.empty.space"))):l&&(null===l||void 0===l?void 0:l.trim().length)<2?Promise.reject(new Error(t("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(t("required")))}],hidden:e.locale!==N,children:(0,f.jsx)(o.A,{placeholder:t("name")})},e.title+r)))}),(0,f.jsx)(n.A,{span:12,children:O.map(((e,r)=>(0,f.jsx)(i.A.Item,{label:t("description"),name:"description[".concat(e.locale,"]"),rules:[{required:!0,validator:(r,l)=>l||(null===e||void 0===e?void 0:e.locale)!==N?l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(new Error(t("no.empty.space"))):l&&(null===l||void 0===l?void 0:l.trim().length)<5?Promise.reject(new Error(t("must.be.at.least.5"))):Promise.resolve():Promise.reject(new Error(t("required")))}],hidden:e.locale!==N,children:(0,f.jsx)(h.A,{rows:4})},e.locale+r)))}),(0,f.jsx)(n.A,{span:12,children:(0,f.jsx)(i.A.Item,{label:t("keywords"),name:"keywords",rules:[{required:!0,message:t("required")}],children:(0,f.jsx)(d.A,{mode:"tags",style:{width:"100%"}})})}),(0,f.jsx)(n.A,{span:12,children:(0,f.jsx)(i.A.Item,{label:t("parent.category"),name:"parent_id",rules:[{required:!1,message:t("required")}],children:(0,f.jsx)(b.v,{refetch:!0,fetchOptions:async function(){return g.A.getAll({perPage:100,type:"service"}).then((e=>e.data.map((e=>{var r,t;return{label:null===(r=e.translation)||void 0===r?void 0:r.title,value:e.id,key:e.id,type:"service",children:null===(t=e.children)||void 0===t?void 0:t.map((e=>{var r,t;return{label:null===(r=e.translation)||void 0===r?void 0:r.title,value:e.id,key:e.id,type:"sub_service",disabled:"child_service"===e.type,children:null===(t=e.children)||void 0===t?void 0:t.map((e=>{var r;return{label:null===(r=e.translation)||void 0===r?void 0:r.title,value:e.id,key:e.id,disabled:!0,type:"child_service"}}))}}))}}))))},onSelect:(e,r,t)=>{const{type:l}=r||{};E("service"===l?"sub_service":"sub_service"===l?"child_service":"service")},allowClear:!0})})}),(0,f.jsx)(n.A,{span:4,children:(0,f.jsx)(i.A.Item,{label:t("image"),name:"images",rules:[{validator:()=>0===(null===q||void 0===q?void 0:q.length)?Promise.reject(new Error(t("required"))):Promise.resolve()}],children:(0,f.jsx)(y.A,{type:"categories",imageList:q,setImageList:I,form:S,multiple:!1})})}),(0,f.jsx)(n.A,{span:2,children:(0,f.jsx)(i.A.Item,{label:t("active"),name:"active",valuePropName:"checked",children:(0,f.jsx)(c.A,{})})})]}),(0,f.jsx)(u.A,{type:"primary",htmlType:"submit",loading:F,children:t("submit")})]})})}}}]);