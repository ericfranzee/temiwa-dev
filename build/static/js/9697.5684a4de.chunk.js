"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[9697],{12970:(e,l,i)=>{function n(e){var l,i;let n=null===e||void 0===e?void 0:e.slice(0,1),a=null===e||void 0===e?void 0:e.lastIndexOf("@"),d=null===e||void 0===e?void 0:e.slice(1,a-1);d=null===(l=d)||void 0===l?void 0:l.replace(/./g,"*");let t=null===e||void 0===e?void 0:e.slice(a-1,e.length);return null===n||void 0===n||null===(i=n.concat(d))||void 0===i?void 0:i.concat(t)}i.d(l,{A:()=>n})},35973:(e,l,i)=>{function n(e){const l="".concat(e),i="*".repeat(l.length-2);return(null===l||void 0===l?void 0:l[0])+i+(null===l||void 0===l?void 0:l[(null===l||void 0===l?void 0:l.length)-1])}i.d(l,{A:()=>n})},8297:(e,l,i)=>{i.d(l,{A:()=>s});var n=i(9950),a=i(55902),d=i(41397),t=i(60767),o=i(44414);function s(e){let{handleChange:l,defaultValue:i,resetSearch:s,...r}=e;const[v,u]=(0,n.useState)(i),c=(0,n.useMemo)((()=>(0,d.debounce)((e=>{l(e)}),800)),[]);return(0,n.useEffect)((()=>{u(i)}),[s]),(0,o.jsx)(a.A,{value:v,onChange:e=>{u(e.target.value),c(e.target.value)},prefix:(0,o.jsx)(t.A,{}),...r})}},9697:(e,l,i)=>{i.r(l),i.d(l,{default:()=>F});var n=i(9950),a=i(54909),d=i(72243),t=i(12916),o=i(80737),s=i(48538),r=i(23263),v=i(52913),u=i(70030),c=i(88986),h=i(91854),m=i(29514),p=i(74623),x=i(13311),y=i(12970),A=i(63620),j=i(24513),g=i(8297),f=i(59233),b=i(82706),k=i(87094),w=i(41988),_=i(99674);const C=[{label:"new",value:1,key:1},{label:"accepted",value:2,key:2},{label:"canceled",value:3,key:3},{label:"rejected",value:4,key:4}];var I=i(66209),S=i(44414);const z=e=>{var l,i;let{data:a,handleCancel:d,paramsData:t}=e;const{t:o}=(0,u.B)(),[r]=f.A.useForm(),v=(0,h.wA)(),{activeMenu:c}=(0,h.d4)((e=>e.menu),h.bN),[x,y]=(0,n.useState)(!1);return(0,S.jsx)(b.A,{visible:!!a,title:o(null===a||void 0===a?void 0:a.name),onCancel:d,footer:[(0,S.jsx)(s.A,{type:"primary",onClick:()=>r.submit(),loading:x,children:o("save")}),(0,S.jsx)(s.A,{type:"default",onClick:d,children:o("cancel")})],children:(0,S.jsx)(f.A,{form:r,layout:"vertical",onFinish:e=>{var l;y(!0),console.log(e);const i={...e};I.A.statusChange(null===a||void 0===a||null===(l=a.invite)||void 0===l?void 0:l.id,i).then((()=>{d(),(0,h.vA)((()=>{v((0,m.d8)(t)),v((0,p.km)(c))}))})).finally((()=>y(!1)))},initialValues:{status:null===(i=C.filter((e=>{var l;return e.label===(null===a||void 0===a||null===(l=a.invite)||void 0===l?void 0:l.status)})))||void 0===i?void 0:i[0]},children:(0,S.jsx)(k.A,{gutter:12,children:(0,S.jsx)(w.A,{span:24,children:(0,S.jsx)(f.A.Item,{label:o("status"),name:"status",rules:[{required:!0,message:o("required")}],children:(0,S.jsx)(_.A,{children:C.map((e=>(0,S.jsx)(_.A.Option,{value:null===e||void 0===e?void 0:e.label,children:o(null===e||void 0===e?void 0:e.label)},null===e||void 0===e?void 0:e.key)))})})})})})},null===a||void 0===a||null===(l=a.invite)||void 0===l?void 0:l.id)};var D=i(28429),N=i(35973);const{TabPane:M}=a.A,E=["all",...C.map((e=>e.label))];const F=function(){var e,l,i,f,b;const{t:k}=(0,u.B)(),w=(0,h.wA)(),_=(0,D.Zp)(),{isDemo:C}=(0,x.A)(),{activeMenu:I}=(0,h.d4)((e=>e.menu),h.bN),{deliverymans:F,params:O,loading:q,meta:B}=(0,h.d4)((e=>e.deliveryman),h.bN),{myShop:K}=(0,h.d4)((e=>e.myShop),h.bN),[P,V]=(0,n.useState)(null),[X,R]=(0,n.useState)((null===(e=I.data)||void 0===e?void 0:e.role)||E[0]),T={search:null!==(l=null===I||void 0===I||null===(i=I.data)||void 0===i?void 0:i.search)&&void 0!==l?l:null,invite_status:"all"!==X?X:null,...O};null!==T&&void 0!==T&&null!==(f=T.search)&&void 0!==f&&f.length||null===T||void 0===T||delete T.search;const Z=[{title:k("id"),is_show:!0,dataIndex:"id",key:"id"},{title:k("image"),dataIndex:"img",is_show:!0,render:e=>(0,S.jsx)(d.A,{width:100,src:A.sE+e,placeholder:!0,style:{borderRadius:4}})},{title:k("fullname"),dataIndex:"full_name",key:"full_name",is_show:!0,render:(e,l)=>((null===l||void 0===l?void 0:l.firstname)||"")+" "+((null===l||void 0===l?void 0:l.lastname)||"")},{title:k("phone"),dataIndex:"phone",is_show:!0,render:e=>e?C?(0,S.jsx)("a",{href:"tel:".concat(e),children:(0,N.A)(e)}):(0,S.jsx)("a",{href:"tel:".concat(e),children:e}):"--"},{title:k("email"),dataIndex:"email",key:"email",is_show:!0,render:e=>C?(0,S.jsx)("a",{href:"mailto:".concat(e),children:(0,y.A)(e)}):(0,S.jsx)("a",{href:"mailto:".concat(e),children:e})},{title:k("gender"),dataIndex:"gender",is_show:!0},{title:k("status"),dataIndex:"status",key:"status",is_show:!0,render:(e,l)=>{var i,n;const a=null===l||void 0===l||null===(i=l.invitations)||void 0===i||null===(n=i.filter((e=>(null===e||void 0===e?void 0:e.shop_id)===(null===K||void 0===K?void 0:K.id))))||void 0===n?void 0:n[0];return(0,S.jsxs)("div",{children:["new"===(null===a||void 0===a?void 0:a.status)?(0,S.jsx)(t.A,{color:"blue",children:k(null===a||void 0===a?void 0:a.status)}):"rejected"===(null===a||void 0===a?void 0:a.status)||"canceled"===(null===a||void 0===a?void 0:a.status)?(0,S.jsx)(t.A,{color:"error",children:k(null===a||void 0===a?void 0:a.status)}):(0,S.jsx)(t.A,{color:"cyan",children:k(null===a||void 0===a?void 0:a.status)}),2===(null===K||void 0===K?void 0:K.delivery_type)&&(0,S.jsx)(j.A,{onClick:()=>V({...l,invite:a})})]})}},{title:k("options"),dataIndex:"options",key:"options",is_show:!0,render:(e,l)=>(0,S.jsx)(o.A,{children:(0,S.jsx)(s.A,{type:"primary",icon:(0,S.jsx)(j.A,{}),onClick:()=>H(null===l||void 0===l?void 0:l.uuid)})})}];(0,c.A)((()=>{w((0,m.d8)(T))}),[null===(b=I.data)||void 0===b?void 0:b.search,X]),(0,n.useEffect)((()=>{I.refetch&&(0,h.vA)((()=>{w((0,m.d8)(T)),w((0,p.km)(I))}))}),[I.refetch]);const G=e=>{const l=I.data;w((0,p.Ok)({activeMenu:I,data:{...l,...e}}))},H=e=>{w((0,p.X4)({id:"seller-deliveryman-edit",url:"seller/invitations/deliverymen/edit/".concat(e),name:k("edit.deliveryman")})),_("/seller/invitations/deliverymen/edit/".concat(e),{state:{paramsData:T}})};return(0,S.jsxs)(n.Fragment,{children:[(0,S.jsxs)(r.A,{children:[(0,S.jsx)(o.A,{wrap:!0,size:[14,20],children:(0,S.jsx)(g.A,{placeholder:k("search"),handleChange:e=>G({search:e})})}),2===(null===K||void 0===K?void 0:K.delivery_type)&&(0,S.jsx)(s.A,{style:{float:"right"},type:"primary",onClick:()=>{w((0,p.X4)({id:"seller-invitations-deliverymen-add",url:"seller/invitations/deliverymen/add",name:k("add.deliveryman")})),_("add",{state:{paramsData:T}})},children:k("add.deliveryman")})]}),(0,S.jsxs)(r.A,{children:[(0,S.jsx)(a.A,{className:"mt-3",activeKey:X,onChange:e=>{G({role:e,page:1}),R(e)},type:"card",children:E.map((e=>(0,S.jsx)(M,{tab:k(e)},e)))}),(0,S.jsx)(v.A,{loading:q,dataSource:F||[],columns:null===Z||void 0===Z?void 0:Z.filter((e=>null===e||void 0===e?void 0:e.is_show)),scroll:{x:!0},rowKey:e=>e.id,pagination:{pageSize:null===B||void 0===B?void 0:B.per_page,page:null===B||void 0===B?void 0:B.current_page,total:null===B||void 0===B?void 0:B.total,current:null===B||void 0===B?void 0:B.current_page},onChange:e=>{let{pageSize:l,current:i}=e;const n={...T,perPage:l,page:i};w((0,m.d8)(n))}})]}),P&&(0,S.jsx)(z,{data:P,handleCancel:()=>V(null),paramsData:T})]})}}}]);