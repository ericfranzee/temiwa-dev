"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[5770],{47992:(e,i,n)=>{n.d(i,{G:()=>r});var l=n(9950),t=n(95491),o=n.n(t),s=n(99674),d=n(90650),a=n(44414);const r=e=>{let{fetchOptions:i,debounceTimeout:n=400,onClear:t,refetchOptions:r=!1,...u}=e;const[c,v]=(0,l.useState)(!1),[p,h]=(0,l.useState)([]),m=(0,l.useMemo)((()=>o()((e=>{h([]),v(!0),i(e).then((e=>{h(e),v(!1)}))}),n)),[i,n]);return(0,a.jsx)(s.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:m,onClear:()=>{m(""),t&&t()},notFoundContent:c?(0,a.jsx)(d.A,{size:"small"}):"no results",...u,options:p,onFocus:()=>{p.length&&!r||m("")}})}},8168:(e,i,n)=>{function l(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}n.d(i,{A:()=>l})},53774:(e,i,n)=>{function l(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const n=Number(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===i?"".concat(n," ").concat(e):"".concat(e," ").concat(n)}n.r(i),n.d(i,{default:()=>l})},65770:(e,i,n)=>{n.r(i),n.d(i,{default:()=>S});var l=n(70030),t=n(12916),o=n(48538),s=n(23263),d=n(52913),a=n(9950),r=n(91854),u=n(74623),c=n(86031),v=n(8168),p=n(88986),h=n(53774),m=n(12678),x=n(82706),b=n(91524),f=n(81446),g=n(44555),A=n(44414);function j(e){var i,n,t,s,d,u;let{id:c,handleCancel:v}=e;const[p,m]=(0,a.useState)({}),[j,_]=(0,a.useState)(!1),{t:w}=(0,l.B)(),{defaultCurrency:y}=(0,r.d4)((e=>e.currency),r.bN);return(0,a.useEffect)((()=>{!function(e){_(!0),g.A.getById(e).then((e=>m(e.data))).finally((()=>_(!1)))}(c)}),[c]),(0,A.jsx)(x.A,{visible:!!c,title:w("membership"),onCancel:v,footer:(0,A.jsx)(o.A,{type:"default",onClick:v,children:w("cancel")}),children:j?(0,A.jsx)(f.A,{}):(0,A.jsxs)(b.A,{bordered:!0,children:[(0,A.jsx)(b.A.Item,{span:3,label:w("id"),children:p.id}),(0,A.jsx)(b.A.Item,{span:3,label:w("membership.id"),children:null===(i=p.member_ship)||void 0===i?void 0:i.id}),(0,A.jsx)(b.A.Item,{span:3,label:w("membership"),children:null===(n=p.member_ship)||void 0===n||null===(t=n.translation)||void 0===t?void 0:t.title}),(0,A.jsx)(b.A.Item,{span:3,label:w("price"),children:(0,h.default)(null===p||void 0===p?void 0:p.price,null===y||void 0===y?void 0:y.symbol,null===y||void 0===y?void 0:y.position)}),(0,A.jsx)(b.A.Item,{span:3,label:w("sessions"),children:p.sessions}),(0,A.jsx)(b.A.Item,{span:3,label:w("sessions.count"),children:p.sessions_count}),(0,A.jsx)(b.A.Item,{span:3,label:w("user.id"),children:null===(s=p.user)||void 0===s?void 0:s.id}),(0,A.jsxs)(b.A.Item,{span:3,label:w("user"),children:[null===(d=p.user)||void 0===d?void 0:d.firstname," ",null===(u=p.user)||void 0===u?void 0:u.lastname]})]})})}var _=n(80737),w=n(47992),y=n(55660),k=n(54764),C=n(53271);const I=()=>{const{t:e}=(0,l.B)(),i=(0,r.wA)(),{activeMenu:n}=(0,r.d4)((e=>e.menu),r.bN),t=e=>{const l=n.data;i((0,u.Ok)({activeMenu:n,data:{...l,...e}}))};return(0,A.jsxs)(_.A,{wrap:!0,children:[(0,A.jsx)(w.G,{fetchOptions:e=>{const i={perPage:10,page:1,search:e};return y.A.getAll(i).then((e=>{var i;return null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.map((e=>{var i;return{label:null===e||void 0===e||null===(i=e.translation)||void 0===i?void 0:i.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},className:"w-200px",placeholder:e("select.shop"),onChange:e=>t({shop_id:null===e||void 0===e?void 0:e.value})}),(0,A.jsx)(w.G,{fetchOptions:e=>{const i={perPage:10,page:1,search:e};return k.A.getAll(i).then((e=>{var i;return null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.map((e=>{var i;return{label:null===e||void 0===e||null===(i=e.translation)||void 0===i?void 0:i.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},className:"w-200px",placeholder:e("select.service"),onChange:e=>t({service_id:null===e||void 0===e?void 0:e.value})}),(0,A.jsx)(w.G,{fetchOptions:e=>{const i={parPage:10,page:1,search:e};return C.A.getAll(i).then((e=>{var i;return null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.map((e=>({label:"".concat(null===e||void 0===e?void 0:e.firstname," ").concat(null===e||void 0===e?void 0:e.lastname),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id})))}))},className:"w-200px",placeholder:e("select.user"),onChange:e=>t({user_id:null===e||void 0===e?void 0:e.value})})]})};const S=function(){var e,i,n;const{t:x}=(0,l.B)(),b=(0,r.wA)(),{activeMenu:f}=(0,r.d4)((e=>e.menu),r.bN),[g,_]=(0,a.useState)({shop:{}}),{defaultCurrency:w}=(0,r.d4)((e=>e.currency),r.bN),{userMemberships:y,loading:k,meta:C,params:S}=(0,r.d4)((e=>e.userMemberships),r.bN),[N,O]=(0,a.useState)(null),M=f.data,P={sort:null===M||void 0===M?void 0:M.sort,column:null===M||void 0===M?void 0:M.column,perPage:null===M||void 0===M?void 0:M.perPage,page:null===M||void 0===M?void 0:M.page,shop_id:null===M||void 0===M?void 0:M.shop_id,service_id:null===M||void 0===M?void 0:M.service_id,user_id:null===M||void 0===M?void 0:M.user_id},z=[{title:x("id"),dataIndex:"id",key:"id",sorter:!0,is_show:!0},{title:x("user_id"),dataIndex:"user_id",key:"user_id",is_show:!0},{title:x("membership"),dataIndex:"membership",key:"membership",is_show:!0,render:(e,i)=>{var n,l;return null===i||void 0===i||null===(n=i.member_ship)||void 0===n||null===(l=n.translation)||void 0===l?void 0:l.title}},{title:x("shop"),dataIndex:"shop",key:"shop",is_show:!0,render:(e,i)=>{var n,l;return null===i||void 0===i||null===(n=i.member_ship.shop)||void 0===n||null===(l=n.translation)||void 0===l?void 0:l.title}},{title:x("price"),dataIndex:"price",key:"price",is_show:!0,render:(e,i)=>(0,h.default)(null===i||void 0===i?void 0:i.price,null===w||void 0===w?void 0:w.symbol,null===w||void 0===w?void 0:w.position)},{title:x("sessions"),dataIndex:"sessions",key:"sessions",is_show:!0},{title:x("transaction"),dataIndex:"transaction",key:"transaction",is_show:!0,render:(e,i)=>{var n;const l=(null===(n=i.transaction)||void 0===n?void 0:n.status)||"not.paid";return"not.paid"===l?(0,A.jsx)(t.A,{children:x(l)}):"paid"===l?(0,A.jsx)(t.A,{color:"cyan",children:x(l)}):(0,A.jsx)(t.A,{color:"warning",children:x(l)})}},{title:x("options"),key:"options",is_show:!0,render:(e,i)=>(0,A.jsx)(o.A,{icon:(0,A.jsx)(m.A,{}),onClick:()=>F(i)})}],F=e=>{O(e.id)};return(0,p.A)((()=>{b((0,c.L1)(P))}),[f.data]),(0,a.useEffect)((()=>{f.refetch&&(b((0,u.km)(f)),b((0,c.L1)()))}),[f.refetch]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(s.A,{children:(0,A.jsx)(I,{filters:g,setFilters:_})}),(0,A.jsx)(s.A,{title:x("user.memberships"),children:(0,A.jsx)(d.A,{scroll:{x:!0},columns:null===z||void 0===z?void 0:z.filter((e=>e.is_show)),dataSource:y,loading:k,pagination:{pageSize:S.perPage,page:(null===(e=f.data)||void 0===e?void 0:e.page)||1,total:C.total,defaultCurrent:null===(i=f.data)||void 0===i?void 0:i.page,current:null===(n=f.data)||void 0===n?void 0:n.page},rowKey:e=>e.id,onChange:function(e,i,n){const{pageSize:l,current:t}=e,{field:o,order:s}=n,d=(0,v.A)(s);b((0,u.Ok)({activeMenu:f,data:{...M,perPage:l,page:t,column:o,sort:d}}))}})}),N&&(0,A.jsx)(j,{id:N,handleCancel:()=>O(null)})]})}}}]);