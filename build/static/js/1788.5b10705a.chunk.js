"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[1788],{47992:(e,t,a)=>{a.d(t,{G:()=>o});var s=a(9950),l=a(95491),n=a.n(l),i=a(99674),d=a(90650),c=a(44414);const o=e=>{let{fetchOptions:t,debounceTimeout:a=400,onClear:l,refetchOptions:o=!1,...u}=e;const[r,v]=(0,s.useState)(!1),[h,p]=(0,s.useState)([]),m=(0,s.useMemo)((()=>n()((e=>{p([]),v(!0),t(e).then((e=>{p(e),v(!1)}))}),a)),[t,a]);return(0,c.jsx)(i.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:m,onClear:()=>{m(""),l&&l()},notFoundContent:r?(0,c.jsx)(d.A,{size:"small"}):"no results",...u,options:h,onFocus:()=>{h.length&&!o||m("")}})}},91788:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var s=a(9950),l=a(28429),n=a(91854),i=a(70030),d=a(59233),c=a(23263),o=a(90650),u=a(87094),r=a(41988),v=a(99674),h=a(25933),p=a(48538),m=a(39487),x=a(85923),A=a(71999),j=a(47992),f=a(74623),g=a(75114),b=a(44414);const k=e=>{let{id:t}=e;const{t:a}=(0,i.B)(),k=(0,n.wA)(),y=(0,l.Zp)(),[_]=d.A.useForm(),{activeMenu:S}=(0,n.d4)((e=>e.menu),n.bN),[w,C]=(0,s.useState)(!1),[O,F]=(0,s.useState)(!1),[I,N]=(0,s.useState)(null),q=e=>{C(!0);const s="catalog/shop-ads";m.A.update(t,e).then((()=>{y("/".concat(s)),x.oR.success(a("successfully.updated")),k((0,f.EK)({...S,nextUrl:s}))})).finally((()=>C(!1)))};const z=e=>{F(!0),m.A.getById(e).then((e=>{var t;F(!1);const a=e.data,s=null===a||void 0===a?void 0:a.ads_package;N(a.ads_package_id);const l={...a,ads_package_id:{label:null===s||void 0===s||null===(t=s.translation)||void 0===t?void 0:t.title,value:null===s||void 0===s?void 0:s.id,key:null===s||void 0===s?void 0:s.id},status:null===a||void 0===a?void 0:a.status,active:null===a||void 0===a?void 0:a.active};_.setFieldsValue(l),k((0,f.Ok)({activeMenu:S,data:l}))})).finally((()=>{}))};return(0,s.useEffect)((()=>{t&&z(t)}),[t]),(0,s.useEffect)((()=>{S.refetch&&(z(t),k((0,f.km)(S)))}),[S.refetch]),O?(0,b.jsx)(c.A,{title:a("edit.ad"),children:(0,b.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,b.jsx)(o.A,{size:"large",className:"py-5"})})}):(0,b.jsxs)(d.A,{layout:"vertical",form:_,initialValues:{active:!0,...null===S||void 0===S?void 0:S.data},onFinish:e=>{var t;const a={...e,banner_id:null===e||void 0===e||null===(t=e.banner_id)||void 0===t?void 0:t.value,active:Number(null===e||void 0===e?void 0:e.active),ads_package_id:I};q(a)},children:[(0,b.jsx)(c.A,{title:a(t?"edit.shop.ads":"add.shop.ads"),extra:(0,b.jsx)(A.A,{}),children:(0,b.jsxs)(u.A,{gutter:12,children:[(0,b.jsx)(r.A,{span:12,children:(0,b.jsx)(d.A.Item,{label:a("ads.package"),name:"ads_package_id",rules:[{required:!0,message:a("required")}],children:(0,b.jsx)(j.G,{fetchOptions:async function(e){const t={search:e,perPage:10,active:1};return g.A.getAll(t).then((e=>e.data.map((e=>({label:null===e||void 0===e?void 0:e.translation.title,value:e.id,self:e,key:e.id})))))},debounceTimeout:200})})}),(0,b.jsx)(r.A,{span:12,children:(0,b.jsx)(d.A.Item,{label:a("status"),name:"status",rules:[{required:!0,message:a("required")}],children:(0,b.jsx)(v.A,{children:["new","approved","canceled"].map((e=>(0,b.jsx)(v.A.Option,{children:a(e)},e)))})})}),(0,b.jsx)(r.A,{span:6,children:(0,b.jsx)(d.A.Item,{label:a("active"),name:"active",valuePropName:"checked",children:(0,b.jsx)(h.A,{})})})]})}),(0,b.jsx)(p.A,{type:"primary",htmlType:"submit",loading:w,children:a("submit")})]})},y=()=>{const{id:e}=(0,l.g)();return(0,b.jsx)(k,{id:e})}}}]);