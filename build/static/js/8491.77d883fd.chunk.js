"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[8491],{35116:(e,l,t)=>{t.d(l,{A:()=>c});t(9950);var a=t(48538),n=t(44070),s=t(85923),i=t(70030),o=t(13311),r=t(44414);function c(e){let{size:l="",onClick:t,type:c="default",...d}=e;const{t:u}=(0,i.B)(),{isDemo:h}=(0,o.A)();return(0,r.jsx)(a.A,{size:l,icon:(0,r.jsx)(n.A,{}),onClick:e=>{h?s.oR.warning(u("cannot.work.demo")):t(e)},type:c,...d})}},28645:(e,l,t)=>{t.d(l,{A:()=>p});var a=t(9950),n=t(66362),s=t(69216),i=t(80737),o=t(25933),r=t(57811),c=t(81541),d=t(48538),u=t(89323),h=t(70030),v=t(44414);const{Text:m}=n.A,p=e=>{let{columns:l=[],setColumns:t,style:n,size:p="",iconOnly:A}=e;const{t:x}=(0,h.B)(),[f,j]=(0,a.useState)(!1),g=(0,v.jsx)(s.A,{children:null===l||void 0===l?void 0:l.map(((e,a)=>(0,v.jsx)(s.A.Item,{children:(0,v.jsxs)(i.A,{className:"d-flex justify-content-between",children:[(0,v.jsx)(m,{children:e.title}),(0,v.jsx)(o.A,{defaultChecked:!0,onClick:()=>function(e){const a=null===l||void 0===l?void 0:l.map((l=>(l.dataIndex===e.dataIndex&&(l.is_show=!(null!==l&&void 0!==l&&l.is_show)),l)));t(a)}(e),disabled:1===a})]})},e+a)))});return(0,v.jsx)(r.A,{overlay:g,trigger:["click"],onVisibleChange:e=>{j(e)},visible:f,children:(0,v.jsx)(c.A,{title:x("change.columns"),children:(0,v.jsx)(d.A,{style:{...n},size:p,icon:(0,v.jsx)(u.A,{}),children:A?null:x("Columns")})})})}},12970:(e,l,t)=>{function a(e){var l,t;let a=null===e||void 0===e?void 0:e.slice(0,1),n=null===e||void 0===e?void 0:e.lastIndexOf("@"),s=null===e||void 0===e?void 0:e.slice(1,n-1);s=null===(l=s)||void 0===l?void 0:l.replace(/./g,"*");let i=null===e||void 0===e?void 0:e.slice(n-1,e.length);return null===a||void 0===a||null===(t=a.concat(s))||void 0===t?void 0:t.concat(i)}t.d(l,{A:()=>a})},8297:(e,l,t)=>{t.d(l,{A:()=>r});var a=t(9950),n=t(55902),s=t(41397),i=t(60767),o=t(44414);function r(e){let{handleChange:l,defaultValue:t,resetSearch:r,...c}=e;const[d,u]=(0,a.useState)(t),h=(0,a.useMemo)((()=>(0,s.debounce)((e=>{l(e)}),800)),[]);return(0,a.useEffect)((()=>{u(t)}),[r]),(0,o.jsx)(n.A,{value:d,onChange:e=>{u(e.target.value),h(e.target.value)},prefix:(0,o.jsx)(i.A,{}),...c})}},47992:(e,l,t)=>{t.d(l,{G:()=>c});var a=t(9950),n=t(95491),s=t.n(n),i=t(99674),o=t(90650),r=t(44414);const c=e=>{let{fetchOptions:l,debounceTimeout:t=400,onClear:n,refetchOptions:c=!1,...d}=e;const[u,h]=(0,a.useState)(!1),[v,m]=(0,a.useState)([]),p=(0,a.useMemo)((()=>s()((e=>{m([]),h(!0),l(e).then((e=>{m(e),h(!1)}))}),t)),[l,t]);return(0,r.jsx)(i.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:p,onClear:()=>{p(""),n&&n()},notFoundContent:u?(0,r.jsx)(o.A,{size:"small"}):"no results",...d,options:v,onFocus:()=>{v.length&&!c||p("")}})}},8168:(e,l,t)=>{function a(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}t.d(l,{A:()=>a})},53774:(e,l,t)=>{function a(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const t=Number(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===l?"".concat(t," ").concat(e):"".concat(e," ").concat(t)}t.r(l),t.d(l,{default:()=>a})},48491:(e,l,t)=>{t.r(l),t.d(l,{default:()=>N});var a=t(9950),n=t(12678),s=t(29190),i=t(24513),o=t(44070),r=t(53387),c=t(80737),d=t(48538),u=t(81541),h=t(23263),v=t(52913),m=t(28429),p=t(54826),A=t(91854),x=t(74623),f=t(70030),j=t(8168),g=t(88986),b=t(69398),y=t(54318),C=t(3855),w=t(8297),k=t(28645),I=t(35116),z=t(85923),S=t(55386),V=t(76083),_=t(64272),H=t(13311),M=t(44414);const N=()=>{var e,l,t,N,B;const{t:O}=(0,f.B)(),R=(0,A.wA)(),E=(0,m.Zp)(),[$,F]=(0,a.useState)(null),{setIsModalVisible:q}=(0,a.useContext)(S.o),[P,D]=(0,a.useState)(!1),{activeMenu:T}=(0,A.d4)((e=>e.menu),A.bN),{clients:X,loading:G,meta:K,params:U}=(0,A.d4)((e=>e.client),A.bN),{isDemo:Z}=(0,H.A)(),[J,L]=(0,a.useState)(null),[Q,W]=(0,a.useState)(null),Y=T.data,ee={sort:null===Y||void 0===Y?void 0:Y.sort,column:null===Y||void 0===Y?void 0:Y.column,perPage:null===Y||void 0===Y?void 0:Y.perPage,page:null===Y||void 0===Y?void 0:Y.page,search:null===Y||void 0===Y?void 0:Y.search,status:"published"},[le,te]=(0,a.useState)([{title:O("id"),dataIndex:"id",key:"id",sorter:!0,is_show:!0},{title:O("firstname"),dataIndex:"firstname",key:"firstname",is_show:!0},{title:O("lastname"),dataIndex:"lastname",key:"lastname",is_show:!0},{title:O("email"),dataIndex:"email",key:"email",is_show:!0,render:e=>(0,M.jsx)("div",{children:Z?"":e})},{title:O("role"),dataIndex:"role",key:"role",is_show:!0},{title:O("options"),dataIndex:"options",key:"options",is_show:!0,render:(e,l)=>(0,M.jsxs)(c.A,{children:[(0,M.jsx)(d.A,{icon:(0,M.jsx)(n.A,{}),onClick:()=>(e=>{R((0,x.X4)({url:"users/user/".concat(e.uuid),id:"user_info",name:O("user.info")})),E("/users/user/".concat(e.uuid),{state:{user_id:e.id}})})(l)}),(0,M.jsx)(d.A,{icon:(0,M.jsx)(s.A,{}),onClick:()=>L(l.uuid)}),(0,M.jsx)(d.A,{type:"primary",icon:(0,M.jsx)(i.A,{}),onClick:()=>(e=>{R((0,x.X4)({url:"user/".concat(e.uuid),id:"user_edit",name:"User edit"})),E("/user/".concat(e.uuid),{state:"user"})})(l)}),(0,M.jsx)(u.A,{title:O("change.user.role"),children:(0,M.jsx)(d.A,{onClick:()=>W(l),icon:(0,M.jsx)(p.aBc,{})})}),(0,M.jsx)(I.A,{icon:(0,M.jsx)(o.A,{}),onClick:()=>{F([l.id]),q(!0)}})]})}]);(0,a.useEffect)((()=>{T.refetch&&(R((0,C.$3)(ee)),R((0,x.km)(T)))}),[T.refetch]),(0,g.A)((()=>{R((0,C.$3)(ee))}),[T.data]);const ae={selectedRowKeys:$,onChange:e=>{F(e)}};return(0,M.jsxs)(h.A,{title:O("clients"),extra:(0,M.jsxs)(c.A,{wrap:!0,children:[(0,M.jsxs)(c.A,{children:[(0,M.jsx)(d.A,{type:"primary",icon:(0,M.jsx)(r.A,{}),onClick:()=>{R((0,x.X4)({id:"user-add",url:"user/add",name:O("add.client")})),E("/user/add")},children:O("add.client")}),(0,M.jsx)(I.A,{size:"",onClick:()=>{null===$||0===$.length?z.oR.warning(O("select.the.product")):q(!0)},children:O("delete.selected")})]}),(0,M.jsx)(k.A,{columns:le,setColumns:te})]}),children:[(0,M.jsx)("div",{className:"d-flex justify-content-between",children:(0,M.jsx)(w.A,{placeholder:O("search"),className:"w-25",handleChange:e=>(e=>{const l=T.data;R((0,x.Ok)({activeMenu:T,data:{...l,...e}}))})({search:e}),defaultValue:null===(e=T.data)||void 0===e?void 0:e.search,resetSearch:!(null!==(l=T.data)&&void 0!==l&&l.search)})}),(0,M.jsx)(v.A,{scroll:{x:!0},rowSelection:ae,columns:null===le||void 0===le?void 0:le.filter((e=>e.is_show)),dataSource:X,loading:G,pagination:{pageSize:U.perPage,page:(null===(t=T.data)||void 0===t?void 0:t.page)||1,total:K.total,defaultCurrent:null===(N=T.data)||void 0===N?void 0:N.page,current:null===(B=T.data)||void 0===B?void 0:B.page},rowKey:e=>e.id,onChange:function(e,l,t){const{pageSize:a,current:n}=e,{field:s,order:i}=t,o=(0,j.A)(i);R((0,x.Ok)({activeMenu:T,data:{...T.data,perPage:a,page:n,column:s,sort:o}}))}}),(0,M.jsx)(V.A,{click:()=>{D(!0);const e={...Object.assign({},...$.map(((e,l)=>({["ids[".concat(l,"]")]:e}))))};_.A.delete(e).then((()=>{z.oR.success(O("successfully.deleted")),R((0,C.$3)(ee)),q(!1)})).finally((()=>{F(null),D(!1)}))},text:O("delete"),loading:P,setText:F}),J&&(0,M.jsx)(b.A,{uuid:J,handleCancel:()=>L(null)}),Q&&(0,M.jsx)(y.A,{data:Q,handleCancel:()=>W(null)})]})}},54318:(e,l,t)=>{t.d(l,{A:()=>x});var a=t(9950),n=t(59233),s=t(82706),i=t(48538),o=t(99674),r=t(53271),c=t(91854),d=t(39539),u=t(85923),h=t(70030),v=t(3855),m=t(47992),p=t(58547),A=t(44414);function x(e){let{data:l,handleCancel:t}=e;const{t:x}=(0,h.B)(),[f]=n.A.useForm(),j=(0,c.wA)(),[g,b]=(0,a.useState)(!1),[y,C]=(0,a.useState)(l.role),{user:w}=(0,c.d4)((e=>e.auth),c.bN),k=[{label:x("user"),value:"user",key:1},{label:x("manager"),value:"manager",key:2},{label:x("moderator"),value:"moderator",key:3}],I=[{label:x("user"),value:"user",key:4},{label:x("moderator"),value:"moderator",key:5}];return(0,A.jsx)(s.A,{visible:!!l,title:x("change.user.role"),onCancel:t,footer:[(0,A.jsx)(i.A,{type:"primary",onClick:()=>f.submit(),loading:g,children:x("save")}),(0,A.jsx)(i.A,{type:"default",onClick:t,children:x("cancel")})],children:(0,A.jsxs)(n.A,{layout:"vertical",name:"user-role",form:f,onFinish:e=>{!function(e,a){b(!0),r.A.updateRole(e,{role:a}).then((()=>{u.oR.success(x("successfully.updated")),"user"===l.role?j((0,v.$3)()):j((0,d.hU)({role:l.role})),t()})).finally((()=>b(!1)))}(l.uuid,e.role)},initialValues:l,children:[(0,A.jsx)(n.A.Item,{name:"role",label:x("role"),rules:[{required:!0,message:x("required")}],children:(0,A.jsx)(o.A,{className:"w-100",options:"manager"===w.role?I:k,onChange:e=>C(e)})}),"manager"!==y&&"user"!==y?(0,A.jsx)(n.A.Item,{label:x("shop"),name:"shop_id",rules:[{required:!0,message:x("required")}],children:(0,A.jsx)(m.G,{className:"w-100",placeholder:x("select.shop"),fetchOptions:async function(e){const l={search:e,status:"approved"};return p.A.search(l).then((e=>e.data.map((e=>({label:null!==e.translation?e.translation.title:"no name",value:e.id})))))},allowClear:!1})}):void 0]})})}},69398:(e,l,t)=>{t.d(l,{A:()=>j});var a=t(9950),n=t(82706),s=t(48538),i=t(87094),o=t(41988),r=t(91524),c=t(72243),d=t(53271),u=t(69554),h=t(70030),v=t(81446),m=t(91854),p=t(53774),A=t(13311),x=t(12970),f=t(44414);function j(e){var l,t,j;let{uuid:g,handleCancel:b}=e;const[y,C]=(0,a.useState)({}),[w,k]=(0,a.useState)(!1),{t:I}=(0,h.B)(),{defaultCurrency:z}=(0,m.d4)((e=>e.currency),m.bN),{isDemo:S}=(0,A.A)();return(0,a.useEffect)((()=>{!function(e){k(!0),d.A.getById(e).then((e=>C(e.data))).finally((()=>k(!1)))}(g)}),[g]),(0,f.jsx)(n.A,{visible:!!g,title:I("user"),onCancel:b,footer:[(0,f.jsx)(s.A,{type:"default",onClick:b,children:I("cancel")},"cancel")],className:y.shop?"large-modal":"",children:w?(0,f.jsx)(v.A,{}):(0,f.jsxs)(i.A,{gutter:24,children:[(0,f.jsx)(o.A,{span:y.shop?12:24,children:(0,f.jsxs)(r.A,{bordered:!0,children:[(0,f.jsx)(r.A.Item,{span:3,label:I("avatar"),children:(0,f.jsx)(c.A,{src:(0,u.A)(y.img),alt:y.firstname,width:80,className:"rounded"})}),(0,f.jsx)(r.A.Item,{span:3,label:I("user.id"),children:y.id}),(0,f.jsxs)(r.A.Item,{span:3,label:I("name"),children:[y.firstname," ",y.lastname||""]}),(0,f.jsx)(r.A.Item,{span:3,label:I("gender"),children:y.gender}),(0,f.jsx)(r.A.Item,{span:3,label:I("birthday"),children:y.birthday}),(0,f.jsx)(r.A.Item,{span:3,label:I("email"),children:S?(0,x.A)(null===y||void 0===y?void 0:y.email):null===y||void 0===y?void 0:y.email}),(0,f.jsx)(r.A.Item,{span:3,label:I("phone"),children:S?"":y.phone}),(0,f.jsx)(r.A.Item,{span:3,label:I("role"),children:y.role}),(0,f.jsx)(r.A.Item,{span:3,label:I("wallet"),children:(0,p.default)(null===(l=y.wallet)||void 0===l?void 0:l.price,null===z||void 0===z?void 0:z.symbol)})]})}),y.shop?(0,f.jsx)(o.A,{span:12,children:(0,f.jsxs)(r.A,{bordered:!0,children:[(0,f.jsx)(r.A.Item,{span:3,label:I("shop.id"),children:y.shop.id}),(0,f.jsx)(r.A.Item,{span:3,label:I("shop.name"),children:null===(t=y.shop.translation)||void 0===t?void 0:t.title}),(0,f.jsx)(r.A.Item,{span:3,label:I("shop.logo"),children:(0,f.jsx)("img",{src:(0,u.A)(y.shop.logo_img),alt:null===(j=y.shop.translation)||void 0===j?void 0:j.title,width:100,className:"rounded"})}),(0,f.jsx)(r.A.Item,{span:3,label:I("shop.phone"),children:y.shop.phone}),(0,f.jsxs)(r.A.Item,{span:3,label:I("shop.open_close.time"),children:[y.shop.open_time," - ",y.shop.close_time]}),(0,f.jsx)(r.A.Item,{span:3,label:I("delivery.range"),children:y.shop.delivery_range})]})}):""]})})}},29190:(e,l,t)=>{t.d(l,{A:()=>r});var a=t(89379),n=t(9950);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M342 88H120c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V168h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zm578 576h-48c-8.8 0-16 7.2-16 16v176H682c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V680c0-8.8-7.2-16-16-16zM342 856H168V680c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zM904 88H682c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V120c0-17.7-14.3-32-32-32z"}}]},name:"expand",theme:"outlined"};var i=t(25085),o=function(e,l){return n.createElement(i.A,(0,a.A)((0,a.A)({},e),{},{ref:l,icon:s}))};const r=n.forwardRef(o)},53387:(e,l,t)=>{t.d(l,{A:()=>r});var a=t(89379),n=t(9950);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};var i=t(25085),o=function(e,l){return n.createElement(i.A,(0,a.A)((0,a.A)({},e),{},{ref:l,icon:s}))};const r=n.forwardRef(o)},89323:(e,l,t)=>{t.d(l,{A:()=>r});var a=t(89379),n=t(9950);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var i=t(25085),o=function(e,l){return n.createElement(i.A,(0,a.A)((0,a.A)({},e),{},{ref:l,icon:s}))};const r=n.forwardRef(o)}}]);