"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[6883],{47992:(e,l,t)=>{t.d(l,{G:()=>r});var i=t(9950),o=t(95491),n=t.n(o),a=t(99674),d=t(90650),s=t(44414);const r=e=>{let{fetchOptions:l,debounceTimeout:t=400,onClear:o,refetchOptions:r=!1,...u}=e;const[c,v]=(0,i.useState)(!1),[p,m]=(0,i.useState)([]),h=(0,i.useMemo)((()=>n()((e=>{m([]),v(!0),l(e).then((e=>{m(e),v(!1)}))}),t)),[l,t]);return(0,s.jsx)(a.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:h,onClear:()=>{h(""),o&&o()},notFoundContent:c?(0,s.jsx)(d.A,{size:"small"}):"no results",...u,options:p,onFocus:()=>{p.length&&!r||h("")}})}},31281:(e,l,t)=>{function i(e,l){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const i=e.map((e=>({[e.locale]:""===l["".concat(t,"[").concat(e.locale,"]")]?void 0:l["".concat(t,"[").concat(e.locale,"]")]})));return Object.assign({},...i)}t.d(l,{A:()=>i})},6883:(e,l,t)=>{t.r(l),t.d(l,{default:()=>p});var i=t(9950),o=t(59233),n=t(76585),a=t(31281),d=t(5302),s=t(91854),r=t(28429),u=t(81446),c=t(74623),v=t(44414);function p(){const e=(0,s.wA)(),[l]=o.A.useForm(),{activeMenu:t}=(0,s.d4)((e=>e.menu),s.bN),{languages:p}=(0,s.d4)((e=>e.formLang),s.bN),{id:m}=(0,r.g)(),[h,A]=(0,i.useState)(!1);(0,i.useEffect)((()=>{t.refetch&&(i=>{A(!0),d.A.getById(i,{type:"look"}).then((i=>{var o,n,a,d,s,r,u,v,p,m;const h=null===i||void 0===i?void 0:i.data,A={["title[".concat(null===h||void 0===h||null===(o=h.translation)||void 0===o?void 0:o.locale,"]")]:null===h||void 0===h||null===(n=h.translation)||void 0===n?void 0:n.title,["description[".concat(null===h||void 0===h||null===(a=h.translation)||void 0===a?void 0:a.locale,"]")]:null===h||void 0===h||null===(d=h.translation)||void 0===d?void 0:d.description,shop:{label:null===h||void 0===h||null===(s=h.shop)||void 0===s||null===(r=s.translation)||void 0===r?void 0:r.title,value:null===h||void 0===h||null===(u=h.shop)||void 0===u?void 0:u.id,key:null===h||void 0===h||null===(v=h.shop)||void 0===v?void 0:v.id},products:null===h||void 0===h||null===(p=h.products)||void 0===p?void 0:p.map((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}})),image:null===h||void 0===h||null===(m=h.galleries)||void 0===m?void 0:m.map((e=>({uid:e.id,name:e.path,url:e.path}))),active:Boolean(null===h||void 0===h?void 0:h.active)};l.setFieldsValue(A),e((0,c.Ok)({activeMenu:t,data:A}))})).finally((()=>{A(!1),e((0,c.km)(t))}))})(m)}),[t.refetch]);return(0,v.jsx)(i.Fragment,{children:h?(0,v.jsx)(u.A,{}):(0,v.jsx)(n.A,{form:l,handleSubmit:(e,l)=>{const t={type:"look",active:Number(e.active),shop_id:e.shop.value,title:(0,a.A)(p,e,"title"),description:(0,a.A)(p,e,"description"),products:e.products.map((e=>e.value)),images:l.map((e=>e.name))};return d.A.update(m,t)}})})}},76585:(e,l,t)=>{t.d(l,{A:()=>w});var i=t(9950),o=t(23263),n=t(59233),a=t(87094),d=t(41988),s=t(55902),r=t(25933),u=t(48538),c=t(70030),v=t(71999),p=t(91854),m=t(28429),h=t(98591),A=t(47992),g=t(47933),j=t(48970),x=t(74623),f=t(85923),b=t(86918),y=t(55660),k=t(44414);function w(e){var l,t,w,S;let{form:I,handleSubmit:P}=e;const C=(0,p.wA)(),F=(0,m.Zp)(),{t:O}=(0,c.B)(),{defaultLang:q,languages:E}=(0,p.d4)((e=>e.formLang),p.bN),{activeMenu:L}=(0,p.d4)((e=>e.menu),p.bN),[N,M]=(0,i.useState)(!1),[V,z]=(0,i.useState)(null!==(l=null===L||void 0===L||null===(t=L.data)||void 0===t?void 0:t.image)&&void 0!==l?l:[]),[B,G]=(0,i.useState)(null!==(w=null===L||void 0===L||null===(S=L.data)||void 0===S?void 0:S.shop)&&void 0!==w?w:{}),[_,T]=(0,i.useState)(!1);function K(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return(l?!e&&(null===l||void 0===l?void 0:l.locale)===q:!e)?Promise.reject(new Error(O("required"))):e&&""===(null===e||void 0===e?void 0:e.trim())?Promise.reject(new Error(O("no.empty.space"))):e&&(null===e||void 0===e?void 0:e.trim().length)<t?Promise.reject(new Error(O("must.be.at.least.".concat(t)))):Promise.resolve()}return(0,k.jsx)(i.Fragment,{children:(0,k.jsx)(o.A,{title:O("add.look"),extra:(0,k.jsx)(v.A,{}),children:(0,k.jsxs)(n.A,{form:I,onFinish:e=>{M(!0);const l="catalog/looks";P(e,V).then((()=>{f.oR.success(O("successfully.added")),(0,p.vA)((()=>{C((0,x.EK)({...L,nextUrl:l})),C((0,b.x_)({}))})),F("/".concat(l))})).finally((()=>M(!1)))},layout:"vertical",initialValues:{active:!0,...null===L||void 0===L?void 0:L.data},children:[(0,k.jsxs)(a.A,{gutter:12,children:[(0,k.jsx)(d.A,{span:12,children:E.map((e=>(0,k.jsx)(n.A.Item,{label:O("title"),name:"title[".concat(e.locale,"]"),hidden:e.locale!==q,rules:[{validator:(l,t)=>K(t,e)}],children:(0,k.jsx)(s.A,{})},"title"+e.id)))}),(0,k.jsx)(d.A,{span:12,children:E.map((e=>(0,k.jsx)(n.A.Item,{label:O("description"),name:"description[".concat(e.locale,"]"),hidden:e.locale!==q,rules:[{validator:(l,t)=>K(t,e,5)}],children:(0,k.jsx)(h.A,{rows:3,maxLength:300})},"description"+e.id)))}),(0,k.jsx)(d.A,{span:12,children:(0,k.jsx)(n.A.Item,{label:O("shop"),name:"shop",rules:[{required:!0,message:O("required")}],children:(0,k.jsx)(A.G,{allowClear:!1,fetchOptions:e=>{const l={page:1,perPage:10,status:"approved",search:e||null};return y.A.getAll(l).then((e=>e.data.map((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))))},onSelect:e=>{T(!0),G(e),I.setFieldsValue({products:[]})}})},"shop")}),(0,k.jsx)(d.A,{span:12,children:(0,k.jsx)(n.A.Item,{label:O("products"),name:"products",rules:[{required:!0,message:O("required")}],children:(0,k.jsx)(A.G,{mode:"multiple",fetchOptions:e=>{const l={page:1,perPage:10,active:1,status:"published",shop_id:null===B||void 0===B?void 0:B.value,search:e||null};return g.A.getAll(l).then((e=>e.data.map((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}})))).finally((()=>T(!1)))},disabled:!(null!==B&&void 0!==B&&B.value),refetchOptions:_})})}),(0,k.jsx)(d.A,{span:4,children:(0,k.jsx)(n.A.Item,{name:"images",label:O("image"),rules:[{validator:()=>0===V.length?Promise.reject(new Error(O("required"))):Promise.resolve()}],children:(0,k.jsx)(j.A,{type:"products",imageList:V,setImageList:z,form:I,multiple:!1})})}),(0,k.jsx)(d.A,{span:4,children:(0,k.jsx)(n.A.Item,{label:O("active"),name:"active",valuePropName:"checked",children:(0,k.jsx)(r.A,{defaultChecked:!0})})})]}),(0,k.jsx)(u.A,{type:"primary",htmlType:"submit",loading:N,children:O("submit")})]})})})}}}]);