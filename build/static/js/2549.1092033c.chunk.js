"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[2549],{17456:(e,s,t)=>{t.d(s,{A:()=>a});t(9950);const a=t.p+"static/media/paystack.6d6a77c8d6bfc75061ec651e5c2e74eb.svg"},99122:(e,s,t)=>{t.d(s,{A:()=>n});var a=t(82371);const n={getAll:e=>a.A.get("dashboard/seller/subscriptions",{params:e}),attach:(e,s)=>a.A.post("dashboard/seller/subscriptions/".concat(e,"/attach"),s),transactionCreate:(e,s)=>a.A.post("payments/subscription/".concat(e,"/transactions"),s)}},42549:(e,s,t)=>{t.r(s),t.d(s,{default:()=>S});var a=t(9950),n=t(23263),l=t(87094),i=t(41988),c=t(74947),r=t(48538),d=t(90650),o=t(99122),h=t(91854),u=t(70030),p=t(82706),m=t(53496),x=t(81446),v=t(85923),j=t(73242),f=t(17456),y=t(54826),b=t(70283),A=t(68873),g=t(76214),N=t(44414);function w(e){var s;let{modal:t,handleCancel:c}=e;const{t:d}=(0,u.B)(),w=(0,h.wA)(),{seller:k}=(0,h.d4)((e=>e.myShop.myShop),h.bN),[C,S]=(0,a.useState)(!1),[z,E]=(0,a.useState)({}),{payments:R,loading:_}=(0,h.d4)((e=>e.payment),h.bN);(0,a.useEffect)((()=>{w((0,m.kK)({}))}),[]);const B=()=>{S(!0),g.A.payExternal(z.tag,{subscription_id:t.id}).then((e=>{var s;let{data:t}=e;window.location.replace(null===t||void 0===t||null===(s=t.data)||void 0===s?void 0:s.url),c(),w((0,j.v)({}))})).finally((()=>S(!1)))};const K=e=>{switch(e){case"wallet":default:return(0,N.jsx)(A.c8K,{size:80});case"paypal":return(0,N.jsx)(y.SnG,{size:80});case"stripe":return(0,N.jsx)(b.kDV,{size:80});case"razorpay":return(0,N.jsx)(b.NVb,{size:80});case"paystack":return(0,N.jsx)("img",{src:f.A,alt:"img",width:"80",height:"80"})}};return(0,N.jsx)(p.A,{visible:!!t,title:d("purchase.subscription"),onCancel:c,footer:[(0,N.jsx)(r.A,{type:"primary",onClick:()=>{if(z.id){var e;if("wallet"===z.tag)return(null===k||void 0===k||null===(e=k.wallet)||void 0===e?void 0:e.price)<t.price?void v.oR.warning(d("insufficient.balance")):(S(!0),o.A.attach(t.id).then((e=>{let{data:s}=e;return function(e){const s={payment_sys_id:z.id};o.A.transactionCreate(e,s).then((()=>{c(),v.oR.success(d("successfully.purchased")),w((0,j.v)({}))})).finally((()=>S(!1)))}(s.id)})).finally((()=>S(!1))));B()}else v.oR.warning(d("please.select.payment.type"))},loading:C,children:d("save")},"save-btn"),(0,N.jsx)(r.A,{type:"default",onClick:c,children:d("cancel")},"cancel-btn")],children:_?(0,N.jsx)(x.A,{}):(0,N.jsx)(l.A,{gutter:12,children:null===R||void 0===R||null===(s=R.filter((e=>"cash"!==(null===e||void 0===e?void 0:e.tag))))||void 0===s?void 0:s.map(((e,s)=>(0,N.jsx)(i.A,{span:8,children:(0,N.jsxs)(n.A,{className:"payment-card ".concat((null===z||void 0===z?void 0:z.tag)===e.tag?"active":""),onClick:()=>{E(e)},children:[(0,N.jsx)("div",{className:"payment-icon",children:K(null===e||void 0===e?void 0:e.tag)}),(0,N.jsx)("div",{className:"font-weight-bold mt-2",children:d(null===e||void 0===e?void 0:e.tag)})]})},s)))})})}var k=t(74623);const C=[];function S(){const{t:e}=(0,u.B)(),{defaultCurrency:s}=(0,h.d4)((e=>e.currency),h.bN),{myShop:t}=(0,h.d4)((e=>e.myShop),h.bN),[p,m]=(0,a.useState)(null),[x,v]=(0,a.useState)(!1),[j,f]=(0,a.useState)([]),y=j.length,{activeMenu:b}=(0,h.d4)((e=>e.menu),h.bN),A=(0,h.wA)(),g=()=>{v(!0),o.A.getAll().then((e=>{f(e.data)})).finally((()=>{v(!1),A((0,k.km)(b))}))};return(0,a.useEffect)((()=>{b.refetch&&g()}),[b.refetch]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(n.A,{className:"h-100",children:x?(0,N.jsx)(i.A,{className:"ant-col-spin d-flex justify-content-center",children:(0,N.jsx)(d.A,{size:"large"})}):(0,N.jsxs)("div",{children:[(0,N.jsxs)("div",{className:"text-center mb-4",children:[(0,N.jsx)("h2",{className:"font-weight-semibold",children:"Pick a base plan"}),(0,N.jsx)(l.A,{type:"flex",justify:"center",children:(0,N.jsx)(i.A,{sm:24,md:12,lg:8,children:(0,N.jsx)("p",{children:"Space, the final frontier. These are the voyages of the Starship Enterprise. Its five-year mission."})})})]}),(0,N.jsx)(l.A,{children:j.map(((a,n)=>{var l,d;return(0,N.jsx)(i.A,{span:6,className:y===n+1?"":"border-right",children:(0,N.jsx)(c.A.Ribbon,{text:e("active"),color:"red",className:(null===t||void 0===t||null===(l=t.subscription)||void 0===l||null===(d=l.subscription)||void 0===d?void 0:d.id)===a.id?"":"d-none",children:(0,N.jsxs)("div",{className:"p-3",children:[(0,N.jsxs)("div",{className:"text-center",children:[(0,N.jsxs)("h1",{className:"display-4 mt-4",children:[(0,N.jsx)("span",{className:"font-size-md d-inline-block mr-1",style:{transform:"translate(0px, -17px)"},children:null===s||void 0===s?void 0:s.symbol}),(0,N.jsx)("span",{children:a.price})]}),(0,N.jsxs)("p",{className:"mb-0 text-lowercase",children:[a.month," ",e("month")]})]}),(0,N.jsx)("div",{className:"mt-4",children:(0,N.jsx)("h2",{className:"text-center font-weight-semibold",children:a.type})}),(0,N.jsx)("div",{className:"d-flex justify-content-center mt-3",children:(0,N.jsx)("div",{children:null===C||void 0===C?void 0:C.map(((e,s)=>(0,N.jsxs)("p",{children:[(0,N.jsx)(c.A,{color:"blue"}),(0,N.jsx)("span",{children:e})]},"pricing-feature-".concat(s))))})}),(0,N.jsx)("div",{className:"mt-3 text-center",children:(0,N.jsx)(r.A,{type:"default",onClick:()=>m(a),children:e("purchase")})})]})})},"price-column-".concat(n))}))})]})}),p&&(0,N.jsx)(w,{modal:p,handleCancel:()=>m(null),refetch:g})]})}}}]);