"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[6885],{73041:(e,t,l)=>{l.d(t,{A:()=>o});var a=l(23263),n=l(74522),s=(l(9950),l(44414));const o=e=>{let{loading:t}=e;return(0,s.jsx)(a.A,{className:"order-card",children:(0,s.jsx)(n.A,{loading:t,avatar:!0,active:!0})})}},8297:(e,t,l)=>{l.d(t,{A:()=>i});var a=l(9950),n=l(55902),s=l(41397),o=l(60767),d=l(44414);function i(e){let{handleChange:t,defaultValue:l,resetSearch:i,...r}=e;const[c,u]=(0,a.useState)(l),v=(0,a.useMemo)((()=>(0,s.debounce)((e=>{t(e)}),800)),[]);return(0,a.useEffect)((()=>{u(l)}),[i]),(0,d.jsx)(n.A,{value:c,onChange:e=>{u(e.target.value),v(e.target.value)},prefix:(0,d.jsx)(o.A,{}),...r})}},47992:(e,t,l)=>{l.d(t,{G:()=>r});var a=l(9950),n=l(95491),s=l.n(n),o=l(99674),d=l(90650),i=l(44414);const r=e=>{let{fetchOptions:t,debounceTimeout:l=400,onClear:n,refetchOptions:r=!1,...c}=e;const[u,v]=(0,a.useState)(!1),[h,p]=(0,a.useState)([]),m=(0,a.useMemo)((()=>s()((e=>{p([]),v(!0),t(e).then((e=>{p(e),v(!1)}))}),l)),[t,l]);return(0,i.jsx)(o.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:m,onClear:()=>{m(""),n&&n()},notFoundContent:u?(0,i.jsx)(d.A,{size:"small"}):"no results",...c,options:h,onFocus:()=>{h.length&&!r||m("")}})}},80415:(e,t,l)=>{l.d(t,{G:()=>o,HV:()=>n,LH:()=>a,PR:()=>s,wO:()=>i,xt:()=>d});const a={new:[1,2,3,4,5],accepted:[1,2,3,4,5],ready:[1,2,3,4,5],on_a_way:[1,2,3,4,5],delivered:[1,2,3,4,5],canceled:[1,2,3,4,5],cooking:[1,2,3,4,5]},n=(new Date,new Date,["new","accepted","ready","on_a_way","pause","delivered","canceled"]),s=30,o="HH:mm",d="hh:mm a",i=!0},83645:(e,t,l)=>{l.d(t,{A:()=>o});var a=l(17706),n=l(80415);const s=2147483647;function o(e){let t=((e,t,l)=>{const s=Number(null===(e=a.M.getState())||void 0===e||null===(t=e.globalSettings)||void 0===t||null===(l=t.settings)||void 0===l?void 0:l.order_refresh_timeout);return!isNaN(s)?s:n.PR})();return t?(t>s&&(t=s),setInterval((()=>{e()}),1e3*Number(t))):null}},29597:(e,t,l)=>{function a(e){var t;if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const l=null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.split(", ");return{lat:Number(null===l||void 0===l?void 0:l[0]),lng:Number(null===l||void 0===l?void 0:l[1])}}l.d(t,{A:()=>a})},51066:(e,t,l)=>{l.d(t,{Q:()=>s});var a=l(17706),n=l(80415);const s=()=>{var e,t,l,s;return null!==(e=null===(t=a.M.getState())||void 0===t||null===(l=t.globalSettings)||void 0===l||null===(s=l.settings)||void 0===s?void 0:s.hour_format)&&void 0!==e?e:n.G}},53774:(e,t,l)=>{function a(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const l=Number(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===t?"".concat(l," ").concat(e):"".concat(e," ").concat(l)}l.r(t),l.d(t,{default:()=>a})},48946:(e,t,l)=>{l.d(t,{A:()=>n});var a=l(82371);const n={orderExport:(e,t)=>a.A.get("dashboard/user/export/order/".concat(e,"/pdf"),{params:t,responseType:"blob"})}},46726:(e,t,l)=>{l.d(t,{A:()=>p});var a=l(9950),n=l(59233),s=l(82706),o=l(48538),d=l(87094),i=l(41988),r=l(55902),c=l(70030),u=l(23758),v=l(85923),h=l(44414);function p(e){let{result:t,changeColumnData:l,statusChangedOrder:p,setStatusChangedOrder:m,modalNoteType:x}=e;const[g]=n.A.useForm(),{t:j}=(0,c.B)(),[A,y]=(0,a.useState)(!1),f=()=>m((e=>!e));return(0,h.jsx)(s.A,{visible:!!p,onCancel:f,footer:[(0,h.jsx)(o.A,{type:"primary",onClick:()=>g.submit(),loading:A,children:j("save")},"save-form"),(0,h.jsx)(o.A,{type:"default",onClick:f,children:j("cancel")},"cansel-modal")],children:(0,h.jsx)(n.A,{form:g,layout:"vertical",onFinish:e=>{y(!0);const a={...e,status:x};u.A.updateStatus(p,a).then((e=>{let{data:a}=e;f(),l(t),v.oR.success("#".concat(a.id," order status changed"))})).finally((()=>y(!1)))},children:(0,h.jsx)(d.A,{gutter:12,children:(0,h.jsx)(i.A,{span:24,children:(0,h.jsx)(n.A.Item,{label:j("pause"===x?"pause.note":"canceled.note"),name:"pause"===x?"pause_note":"canceled_note",rules:[{required:"canceled"===x,message:j("required")}],children:(0,h.jsx)(r.A.TextArea,{})})})})})})}},58891:(e,t,l)=>{l.d(t,{A:()=>r});var a=l(24893),n=(l(9950),l(50384)),s=l(26678),o=l(28429),d=l(44414);const i=[{value:"seller/orders-board",title:"Board",icon:(0,d.jsx)(s.oeo,{size:20})},{value:"seller/orders",title:"List",icon:(0,d.jsx)(n.AyK,{size:20})}],r=e=>{let{listType:t}=e;const{type:l}=(0,o.g)(),n=(0,o.Zp)();return(0,d.jsx)(a.Ay.Group,{value:t,onChange:e=>{n("/".concat(e.target.value).concat(l?"/".concat(l):""))},className:"float-right",buttonStyle:"solid",children:null===i||void 0===i?void 0:i.map((e=>(0,d.jsx)(a.Ay.Button,{value:e.value,children:(0,d.jsxs)("div",{className:"d-flex align-items-center",style:{gap:"10px"},children:[e.icon,e.title]})},e.value)))})}},10156:(e,t,l)=>{l.d(t,{A:()=>g});var a=l(9950),n=l(59233),s=l(82706),o=l(48538),d=l(87094),i=l(41988),r=l(91854),c=l(57056),u=l(74623),v=l(70030),h=l(29514),p=l(47992),m=l(66209),x=l(44414);function g(e){var t;let{orderDetails:l,handleCancel:g}=e;const{t:j}=(0,v.B)(),{activeMenu:A}=(0,r.d4)((e=>e.menu),r.bN),{deliverymans:y}=(0,r.d4)((e=>e.deliveryman),r.bN),[f]=n.A.useForm(),b=(0,r.wA)(),[S,w]=(0,a.useState)(!1);(0,a.useEffect)((()=>{b((0,h.d8)())}),[]);return(0,x.jsx)(s.A,{visible:!!l,title:l.title,onCancel:g,footer:[(0,x.jsx)(o.A,{type:"primary",onClick:()=>f.submit(),loading:S,children:j("save")}),(0,x.jsx)(o.A,{type:"default",onClick:g,children:j("cancel")})],children:(0,x.jsx)(n.A,{form:f,layout:"vertical",onFinish:e=>{const t={deliveryman:e.deliveryman.value};w(!0),c.A.updateDelivery(l.id,t).then((()=>{g(),b((0,u.Ms)(A))})).finally((()=>w(!1)))},initialValues:{deliveryman:null===(t=l.deliveryman)||void 0===t?void 0:t.id},children:(0,x.jsx)(d.A,{gutter:12,children:(0,x.jsx)(i.A,{span:24,children:(0,x.jsx)(n.A.Item,{label:j("deliveryman"),name:"deliveryman",rules:[{required:!0,message:j("required")}],children:(0,x.jsx)(p.G,{fetchOptions:e=>{const t={perPage:10,page:1,search:e};return m.A.getDeliverymans(t).then((e=>e.data.map((e=>({label:e.firstname,value:e.id})))))}})})})})})})}},36885:(e,t,l)=>{l.r(t),l.d(t,{default:()=>fe});var a=l(9950),n=l(86971),s=l(80737),o=l(48538),d=l(23263),i=l(28429),r=l(53387),c=l(13700),u=l(91854),v=l(74623),h=l(70030),p=l(88986),m=l(20626),x=l(8297),g=l(47992),j=l(66209),A=l(90352),y=l(55386),f=l(85923),b=l(57056),S=l(54209),w=l(99985),C=l(12916),_=l(69355),M=l(44414);const D=e=>{let{children:t,title:l,name:a,isDropDisabled:n,total:o=0,loading:d=!1,reloadOrder:i}=e;const{t:r}=(0,h.B)();return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(w.A,{message:(0,M.jsxs)(s.A,{children:[(0,M.jsx)(S.A,{size:20,style:{cursor:"pointer"},spin:d,onClick:i}),r(l),(0,M.jsx)(C.A,{children:d?(0,M.jsx)(S.A,{spin:!0}):o})]}),className:"mb-4 ".concat(a),style:{textAlign:"center",fontSize:16,textTransform:"capitalize"}}),(0,M.jsx)(_.gL,{droppableId:a,isDropDisabled:n,children:e=>(0,M.jsx)("div",{ref:e.innerRef,className:"h-screen",style:{opacity:n?.6:1},children:(0,M.jsxs)(M.Fragment,{children:[t,e.placeholder]})})})]})};var k=l(90650),N=l(69466),I=l(2260),T=l(80415),Y=l(73041),z=l(50198),H=l(76074),O=l(18411),V=l(46809),B=l(4399),E=l(19826),F=l(12678),P=l(44070),R=l(98114),L=l(79378),G=l(74522),Z=l(98252),q=l(63611),J=l(63620),W=l(53774),X=l(59051),K=l.n(X),Q=l(39174),U=l(13311);const{Meta:$}=d.A,ee=e=>{var t,l,a,n,o,i,r,c,u,v;let{data:p,goToShow:m,loading:x,setLocationsMap:g,setId:j,setIsModalVisible:A,setText:y,setDowloadModal:f,setType:b,orderType:S}=e;const{isDemo:w,demoFunc:C}=(0,U.A)(),{t:_}=(0,h.B)(),D=[{title:"Number of products",icon:(0,M.jsx)(z.A,{}),data:null===p||void 0===p?void 0:p.order_details_count},{title:S?"Table":"Deliveryman",icon:(0,M.jsx)(H.A,{}),data:S?"".concat((null===p||void 0===p||null===(t=p.table)||void 0===t?void 0:t.name)||"-"):"".concat((null===(l=p.deliveryman)||void 0===l?void 0:l.firstname)||"-"," ").concat((null===(a=p.deliveryman)||void 0===a?void 0:a.lastname)||"-")},{title:"Amount",icon:(0,M.jsx)(O.A,{}),data:(0,W.default)(p.total_price,null===(n=p.currency)||void 0===n?void 0:n.symbol)},{title:"Payment type",icon:(0,M.jsx)(V.A,{}),data:(null===(o=p.transaction)||void 0===o||null===(i=o.payment_system)||void 0===i?void 0:i.tag)||"-"},{title:"Payment status",icon:(0,M.jsx)(B.A,{}),data:(null===(r=p.transaction)||void 0===r?void 0:r.status)||"-"},{title:_("delivery.type"),icon:(0,M.jsx)(E.A,{}),data:(null===p||void 0===p?void 0:p.delivery_type)||"-"},{title:"Delivery date",icon:(0,M.jsx)(E.A,{}),data:K()(null===p||void 0===p?void 0:p.delivery_date).format("YYYY-MM-DD")||"-"},{title:"Created at",icon:(0,M.jsx)(E.A,{}),data:K()(null===p||void 0===p?void 0:p.created_at).format("YYYY-MM-DD")||"-"}];return(0,M.jsx)(d.A,{actions:[(0,M.jsx)(Q.kMs,{size:20,onClick:e=>{e.stopPropagation(),g(p.id)}}),(0,M.jsx)(F.A,{onClick:()=>m(p)},"setting"),(0,M.jsx)(P.A,{onClick:e=>{w?C():(e.stopPropagation(),j([p.id]),A(!0),y(!0),b(p.status))}}),(0,M.jsx)(R.A,{onClick:()=>f(p.id)},"ellipsis")],className:"order-card",children:(0,M.jsxs)(G.A,{loading:x,avatar:!0,active:!0,children:[(0,M.jsx)($,{avatar:(0,M.jsx)(Z.A,{src:J.sE+(null===(c=p.user)||void 0===c?void 0:c.img),icon:(0,M.jsx)(L.A,{})}),description:"#".concat(p.id),title:null!==p&&void 0!==p&&p.user?"".concat((null===(u=p.user)||void 0===u?void 0:u.firstname)||"-"," ").concat((null===(v=p.user)||void 0===v?void 0:v.lastname)||"-"):_("deleted.user")}),(0,M.jsx)(q.Ay,{itemLayout:"horizontal",dataSource:D,renderItem:(e,t)=>(0,M.jsx)(q.Ay.Item,{children:(0,M.jsxs)(s.A,{children:[e.icon,"".concat(e.title,":  ").concat(e.data)]})},t)})]})})};var te=l(81446),le=l(46726);const ae=e=>{let{goToEdit:t,goToShow:l,fetchOrderAllItem:n,fetchOrders:s,setLocationsMap:o,setId:d,setIsModalVisible:i,setText:r,setDowloadModal:c,setType:v,orderType:h}=e;const p=(0,u.wA)(),{statusList:x,loading:g}=(0,u.d4)((e=>e.orderStatus),u.bN),j=null===x||void 0===x?void 0:x.map((e=>null===e||void 0===e?void 0:e.name)),{items:A}=(0,u.d4)((e=>e.sellerOrders),u.bN),{isEnabledStatusChange:y}=(0,u.d4)((e=>e.myShop),u.bN),S=(0,u.d4)((e=>e.sellerOrders),u.bN),[w,C]=(0,a.useState)(""),[z,H]=(0,a.useState)({}),[O,V]=(0,a.useState)({}),[B,E]=(0,a.useState)(null),[F,P]=(0,a.useState)(""),[R,L]=(0,a.useState)({}),G=e=>{const t={...A},l=t[e.source.droppableId],[a,n]=((e,t)=>{const l=Array.from(e),[a]=l.splice(t,1);return[a,l]})(l,e.source.index);t[e.source.droppableId]=n;const s=t[e.destination.droppableId];t[e.destination.droppableId]=((e,t,l)=>{const a=Array.from(e);return a.splice(t,0,l),a})(s,e.destination.index,a),p((0,m.jb)(t)),V(null)},Z=e=>{var t,l;e.destination&&(L(e),"pause"===e.destination.droppableId?(P("pause"),E(e.draggableId)):e.destination&&z.source.droppableId!==e.destination.droppableId&&(t=e.draggableId,l={status:e.destination.droppableId},b.A.updateStatus(t,l).then((()=>{f.oR.success("#".concat(t," order status changed"))})),G(e)))},q=e=>(0!==e||O!==(null===j||void 0===j?void 0:j.length)-1)&&Boolean(O>e);(0,a.useEffect)((()=>{p((0,m.gw)()),n()}),[]);return(0,M.jsxs)(M.Fragment,{children:[g?(0,M.jsx)("div",{children:(0,M.jsx)(te.A,{})}):(0,M.jsx)(_.JY,{onDragEnd:Z,onDragStart:e=>{const t=null===j||void 0===j?void 0:j.findIndex((t=>{var l;return t===(null===e||void 0===e||null===(l=e.source)||void 0===l?void 0:l.droppableId)}));H(e),V(t)},children:(0,M.jsx)("div",{className:"order-board",children:null===j||void 0===j?void 0:j.map(((e,a)=>{var n,u,x,g,j,f,b;return(0,M.jsx)("div",{className:"dnd-column",children:(0,M.jsx)(D,{title:e,onDragEnd:Z,name:e,isDropDisabled:q(a),total:null===(n=A[e])||void 0===n?void 0:n.length,loading:null===(u=S[e])||void 0===u?void 0:u.loading,reloadOrder:()=>(e=>{p((0,m.yT)(e)),s({status:e})})(e),children:(0,M.jsxs)(N.Ay,{onScroll:t=>((e,t)=>{const l=e.target.lastChild,a=e.target.clientHeight+e.target.scrollTop;var n;l&&a>l.offsetTop+l.clientHeight+19.9&&S[t].meta.last_page>S[t].meta.current_page&&(null===(n=S[t])||void 0===n||!n.loading)&&(C(t),s({page:S[t].meta.current_page+1,perPage:5,status:t}))})(t,e),autoHeight:!0,autoHeightMin:"75vh",autoHeightMax:"75vh",autoHide:!0,id:e,children:[Boolean((null===(x=S[e])||void 0===x?void 0:x.loading)&&!(null!==(g=A[e])&&void 0!==g&&g.length))?null===(f=T.LH[e])||void 0===f?void 0:f.map((()=>(0,M.jsx)(Y.A,{loading:!0}))):null===(j=A[e])||void 0===j?void 0:j.map(((e,a)=>(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(_.sx,{draggableId:e.id.toString(),index:a,isDragDisabled:!y,children:a=>(0,M.jsx)("div",{ref:a.innerRef,...a.draggableProps,...a.dragHandleProps,children:(0,M.jsx)(ee,{data:e,goToEdit:t,goToShow:l,setLocationsMap:o,setId:d,setIsModalVisible:i,setText:r,setDowloadModal:c,setType:v,orderType:h})})},e.id)}))),(null===(b=S[e])||void 0===b?void 0:b.loading)&&e===w&&(0,M.jsx)(k.A,{indicator:(0,M.jsx)(I.A,{style:{fontSize:24},spin:!0})})]})})},e)}))})}),B&&(0,M.jsx)(le.A,{result:R,changeColumnData:G,statusChangedOrder:B,setStatusChangedOrder:E,modalNoteType:F})]})};var ne=l(10156),se=l(58891),oe=l(51242),de=l(42220),ie=l(48946),re=l(39362),ce=l.n(re),ue=l(82706),ve=l(87094),he=l(41988),pe=l(50384),me=l(68873);const xe=d.A.Meta,ge=e=>{let{id:t,handleCancel:l}=e;const[n,s]=(0,a.useState)(null),{t:r}=(0,h.B)(),c=(0,i.Zp)();return(0,M.jsx)(M.Fragment,{children:n?(0,M.jsx)(te.A,{}):(0,M.jsx)(ue.A,{visible:!!t,title:r("selected.download"),closable:!1,handleCancel:l,footer:[(0,M.jsx)(o.A,{type:"default",onClick:l,children:r("cancel")},"cancelBtn")],children:(0,M.jsxs)(ve.A,{children:[(0,M.jsx)(he.A,{span:12,children:(0,M.jsx)(d.A,{title:r("download.pdf"),onClick:()=>function(e){s(!0),ie.A.orderExport(e).then((t=>{ce()(t,"invoice_".concat(e,".pdf"),"application/pdf"),l()})).finally((()=>s(!1)))}(t),className:"text-center cursor-pointer",children:(0,M.jsx)(xe,{className:"d-flex align-items-center justify-content-center",title:(0,M.jsx)(pe.yos,{size:80})})})}),(0,M.jsx)(he.A,{span:12,children:(0,M.jsx)(d.A,{title:r("download.check"),onClick:()=>(e=>{c("/seller/generate-invoice/".concat(e))})(t),className:"text-center cursor-pointer",children:(0,M.jsx)(xe,{className:"d-flex align-items-center justify-content-center",title:(0,M.jsx)(me.TBA,{size:85})})})})]})})})};var je=l(76083),Ae=l(83645);const{RangePicker:ye}=n.A;function fe(){var e;const t=(0,u.wA)(),l=(0,i.Zp)(),{t:n}=(0,h.B)(),[S,w]=(0,a.useState)(null),{setIsModalVisible:C}=(0,a.useContext)(y.o),[_,D]=(0,a.useState)(null),[k,N]=(0,a.useState)(!1),[I,T]=(0,a.useState)(null),[Y,z]=(0,a.useState)(null),[H,O]=(0,a.useState)(null),[V,B]=(0,a.useState)(null),[E,F]=(0,a.useState)(null),{activeMenu:P}=(0,u.d4)((e=>e.menu),u.bN),R=(0,i.g)(),L=null===R||void 0===R?void 0:R.type,G=null===P||void 0===P?void 0:P.data;(0,p.A)((()=>{t((0,m.gw)()),J()}),[G]),(0,a.useEffect)((()=>{if(null!==P&&void 0!==P&&P.refetch){const e={status:null===G||void 0===G?void 0:G.status,perPage:10,delivery_type:L};t((0,m.Gb)(e)),t((0,A.nr)({})),t((0,v.km)(P))}const e=(0,Ae.A)((()=>{t((0,m.gw)()),J()}));return()=>clearInterval(e)}),[null===P||void 0===P?void 0:P.refetch]);const Z=(e,l)=>{(0,u.vA)((()=>{t((0,m.gw)()),t((0,v.Ok)({activeMenu:P,data:{...G,[l]:e}}))}))};const q=e=>{var l,a,n,s;const o={...e,delivery_type:L,delivery_date_from:"scheduled"===V?K()().add(1,"day").format("YYYY-MM-DD"):void 0,search:null!==G&&void 0!==G&&G.search?G.search:void 0,user_id:null===G||void 0===G?void 0:G.client_id,status:null===e||void 0===e?void 0:e.status,shop_id:null!==(null===(l=P.data)||void 0===l?void 0:l.shop_id)?null===(a=P.data)||void 0===a?void 0:a.shop_id:null,date_from:(null===E||void 0===E||null===(n=E[0])||void 0===n?void 0:n.format("YYYY-MM-DD"))||void 0,date_to:(null===E||void 0===E||null===(s=E[1])||void 0===s?void 0:s.format("YYYY-MM-DD"))||void 0};switch(e.status){case"new":t((0,m.wy)(o));break;case"accepted":t((0,m.tB)(o));break;case"ready":t((0,m.xR)(o));break;case"on_a_way":t((0,m.n7)(o));break;case"delivered":t((0,m.Cg)(o));break;case"canceled":t((0,m.xm)(o));break;case"cooking":t((0,m.yC)(o));break;case"pause":t((0,m.S7)(o));break;default:console.log("Sorry, we are out of")}},J=()=>{q({status:"new"}),q({status:"accepted"}),q({status:"ready"}),q({status:"on_a_way"}),q({status:"delivered"}),q({status:"canceled"}),q({status:"cooking"}),q({status:"pause"})},W=()=>{O(null),T(null),z(null)};return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(s.A,{className:"justify-content-end w-100 mb-3",children:[(0,M.jsx)(se.A,{listType:"seller/orders-board"}),(0,M.jsx)(o.A,{type:"primary",icon:(0,M.jsx)(r.A,{}),onClick:()=>{t((0,oe.Uy)()),t((0,v.X4)({id:"pos.system",url:"seller/pos-system",name:n("add.order")})),l("/seller/pos-system",{state:{delivery_type:L}})},style:{width:"100%"},children:n("add.order")})]}),(0,M.jsx)(d.A,{children:(0,M.jsxs)(s.A,{wrap:!0,children:[(0,M.jsx)(x.A,{placeholder:n("search"),handleChange:e=>Z(e,"search"),defaultValue:null===(e=P.data)||void 0===e?void 0:e.search,resetSearch:!(null!==G&&void 0!==G&&G.search)}),(0,M.jsx)(g.G,{placeholder:n("select.client"),fetchOptions:async function(e){const t={search:e,perPage:10};return j.A.getAll(t).then((e=>{let{data:t}=e;return t.map((e=>({label:"".concat(e.firstname," ").concat(e.lastname||""),value:e.id})))}))},onSelect:e=>Z(e.value,"client_id"),onDeselect:()=>Z(null,"client_id"),style:{minWidth:200},value:null===G||void 0===G?void 0:G.client_id}),"scheduled"!==V&&(0,M.jsx)(ye,{defaultValue:E,onChange:e=>{Z(JSON.stringify(e),"data_time"),F(e)},disabledDate:e=>e&&e>K()().endOf("day"),allowClear:!0,style:{width:"100%"},onClear:()=>{t((0,m.gw)()),F(null)}}),(0,M.jsx)(o.A,{icon:(0,M.jsx)(c.A,{}),onClick:()=>{(0,u.vA)((()=>{t((0,m.gw)()),t((0,v.Ok)({activeMenu:P,data:null}))})),J()},children:n("clear")})]})}),(0,M.jsx)(ae,{goToShow:e=>{t((0,v.X4)({url:"seller/order/details/".concat(e.id),id:"order_details",name:n("order.details")})),l("/seller/order/details/".concat(e.id))},fetchOrderAllItem:J,fetchOrders:q,setLocationsMap:T,setId:w,setIsModalVisible:C,setText:D,setDowloadModal:z,type:V,setType:B,orderType:L}),(0,M.jsx)(je.A,{click:()=>{N(!0);const e={...Object.assign({},...S.map(((e,t)=>({["ids[".concat(t,"]")]:e}))))};b.A.delete(e).then((()=>{t((0,m.gw)()),f.oR.success(n("successfully.deleted")),C(!1),J({status:V}),D(null)})).finally((()=>{w(null),N(!1)}))},text:n(_?"delete":"all.delete"),loading:k,setText:w,setActive:w}),H&&(0,M.jsx)(ne.A,{orderDetails:H,handleCancel:W}),I&&(0,M.jsx)(de.A,{id:I,handleCancel:W}),Y&&(0,M.jsx)(ge,{id:Y,handleCancel:W})]})}},42220:(e,t,l)=>{l.d(t,{A:()=>N});var a=l(69286),n=l(86366),s=l(82706),o=l(48538),d=l(23263),i=l(87094),r=l(41988),c=l(12916),u=l(9950),v=l(70030),h=l(57056),p=l(81446),m=l(50384),x=l(91854),g=l(63620),j=l(41478),A=l(29597),y=l(47965),f=l(31222),b=l(6604),S=l(68873),w=l(59051),C=l.n(w),_=l(51066),M=l(44414);const{Step:D}=n.A,k=()=>(0,M.jsx)("div",{style:{position:"absolute",transform:"translate(-50%, -100%)"},children:(0,M.jsx)("img",{src:j,width:"50",alt:"Pin"})}),N=e=>{var t,l,j;let{id:w,handleCancel:N}=e;const{t:I}=(0,v.B)(),[T,Y]=(0,u.useState)(null),[z,H]=(0,u.useState)(null),[O,V]=(0,u.useState)(null),{settings:B}=(0,x.d4)((e=>e.globalSettings),x.bN),E=(0,A.A)(B),[F,P]=(0,u.useState)(0),[R,L]=(0,u.useState)({lat:null===E||void 0===E?void 0:E.lat,lng:null===E||void 0===E?void 0:E.lng}),[G,Z]=(0,u.useState)([{id:0,name:"new",icon:(0,M.jsx)(y.A,{})},{id:1,name:"accepted",icon:(0,M.jsx)(m.LW,{})},{id:2,name:"ready",icon:(0,M.jsx)(f.NtI,{})},{id:3,name:"on_a_way",icon:(0,M.jsx)(b.o2P,{})},{id:4,name:"delivered",icon:(0,M.jsx)(b.eDZ,{})}]),q=(0,_.Q)();const{google_map_key:J}=(0,x.d4)((e=>e.globalSettings.settings),x.bN);return(0,u.useEffect)((()=>{Y(!0),h.A.getById(w).then((e=>{var t,l,a,n,s,o,d;let{data:i}=e;Z("canceled"===i.status?[{id:1,name:"new",icon:(0,M.jsx)(y.A,{})},{id:5,name:"canceled",icon:(0,M.jsx)(S.XfH,{})}]:G),P("canceled"===i.status?1:null===(t=G.find((e=>e.name===i.status)))||void 0===t?void 0:t.id);const r=null!==(l=null!==(a=null!==(n=null===i||void 0===i||null===(s=i.address)||void 0===s?void 0:s.location)&&void 0!==n?n:null===i||void 0===i||null===(o=i.my_address)||void 0===o?void 0:o.location)&&void 0!==a?a:null===i||void 0===i||null===(d=i.delivery_point)||void 0===d?void 0:d.location)&&void 0!==l?l:{latitude:null===E||void 0===E?void 0:E.lat,longitude:null===E||void 0===E?void 0:E.lng};L({lat:Number(null===r||void 0===r?void 0:r.latitude),lng:Number(null===r||void 0===r?void 0:r.longitude)}),V("canceled"===i.status?"error":"success"),H(i)})).finally((()=>{Y(!1)}))}),[]),(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(s.A,{visible:!!w,title:I("show.locations"),closable:!0,onCancel:N,style:{minWidth:"80vw"},footer:[(0,M.jsx)(o.A,{type:"default",onClick:N,children:I("cancel")},"cancelBtn")],children:T?(0,M.jsx)(p.A,{}):(0,M.jsxs)(d.A,{children:[(0,M.jsx)(n.A,{current:F,status:O,className:"mb-5",children:null===G||void 0===G?void 0:G.map(((e,t)=>(0,M.jsx)(D,{title:I(e.name),icon:null===e||void 0===e?void 0:e.icon},e.id+t)))}),(0,M.jsxs)(i.A,{gutter:12,children:[(0,M.jsxs)(r.A,{span:12,children:[(0,M.jsxs)("h3",{children:[I("order.id")," #",null===z||void 0===z?void 0:z.id]}),(0,M.jsxs)("p",{children:[(0,M.jsx)(m.A5h,{})," ",C()(null===z||void 0===z?void 0:z.created_at).format("YYYY-MM-DD ".concat(q))]}),(0,M.jsxs)("p",{children:[I("scheduled.at")," ",C()(null===z||void 0===z?void 0:z.delivery_date).format("YYYY-MM-DD ".concat(q))]})]}),(0,M.jsxs)(r.A,{span:12,children:[(0,M.jsxs)("p",{children:[I("status")," ","new"===(null===z||void 0===z?void 0:z.status)?(0,M.jsx)(c.A,{color:"blue",children:I(null===z||void 0===z?void 0:z.status)}):"canceled"===(null===z||void 0===z?void 0:z.status)?(0,M.jsx)(c.A,{color:"error",children:I(null===z||void 0===z?void 0:z.status)}):(0,M.jsx)(c.A,{color:"cyan",children:I(null===z||void 0===z?void 0:z.status)})]}),(0,M.jsxs)("p",{children:[I("payment.method")," ",(0,M.jsx)("strong",{children:null===z||void 0===z||null===(t=z.transaction)||void 0===t||null===(l=t.payment_system)||void 0===l?void 0:l.tag})]}),(0,M.jsxs)("p",{children:[I("order.type")," ",(0,M.jsx)("strong",{children:null===z||void 0===z?void 0:z.delivery_type})]}),(0,M.jsxs)("p",{children:[I("payment.type")," ",(0,M.jsx)("strong",{children:null===z||void 0===z||null===(j=z.transaction)||void 0===j?void 0:j.status})]})]}),(0,M.jsxs)(r.A,{span:24,className:"mt-5",children:[(0,M.jsx)("h4",{children:I("map")}),(0,M.jsx)("div",{className:"map-container",style:{height:400,width:"100%"},children:(0,M.jsx)(a.Ay,{bootstrapURLKeys:{key:J?g.CJ:J},defaultZoom:10,center:null!==R&&void 0!==R?R:E,options:{fullscreenControl:!1},children:(0,M.jsx)(k,{lat:null===R||void 0===R?void 0:R.lat,lng:null===R||void 0===R?void 0:R.lng})})})]})]})]})})})}},4399:(e,t,l)=>{l.d(t,{A:()=>i});var a=l(89379),n=l(9950);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M117 368h231v64H117zm559 0h241v64H676zm-264 0h200v64H412zm0 224h200v64H412zm264 0h241v64H676zm-559 0h231v64H117zm295-160V179h-64v666h64V592zm264-64V179h-64v666h64V432z"}}]},name:"borderless-table",theme:"outlined"};var o=l(25085),d=function(e,t){return n.createElement(o.A,(0,a.A)((0,a.A)({},e),{},{ref:t,icon:s}))};const i=n.forwardRef(d)},50198:(e,t,l)=>{l.d(t,{A:()=>i});var a=l(89379),n=l(9950);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-40 824H232V687h97.9c11.6 32.8 32 62.3 59.1 84.7 34.5 28.5 78.2 44.3 123 44.3s88.5-15.7 123-44.3c27.1-22.4 47.5-51.9 59.1-84.7H792v-63H643.6l-5.2 24.7C626.4 708.5 573.2 752 512 752s-114.4-43.5-126.5-103.3l-5.2-24.7H232V136h560v752zM320 341h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 160h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}}]},name:"container",theme:"outlined"};var o=l(25085),d=function(e,t){return n.createElement(o.A,(0,a.A)((0,a.A)({},e),{},{ref:t,icon:s}))};const i=n.forwardRef(d)},53387:(e,t,l)=>{l.d(t,{A:()=>i});var a=l(89379),n=l(9950);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};var o=l(25085),d=function(e,t){return n.createElement(o.A,(0,a.A)((0,a.A)({},e),{},{ref:t,icon:s}))};const i=n.forwardRef(d)},41478:(e,t,l)=>{e.exports=l.p+"static/media/user.fbe7078c52acde79652d.jpg"}}]);