"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[9312],{39312:(e,a,t)=>{t.r(a),t.d(a,{default:()=>q});var l=t(9950),s=t(59233),i=t(23263),n=t(87094),r=t(41988),c=t(55902),d=t(99674),o=t(25933),u=t(48538),m=t(90650),p=t(85923),v=t(28429),h=t(71999),g=t(98591),x=t(91854),A=t(74623),j=t(63620),y=t(70030),f=t(48970),b=t(61707),k=t(12598),w=t(44414);const q=()=>{var e,a;const{t:t}=(0,y.B)(),q=(0,v.Zp)(),I=(0,x.wA)(),{activeMenu:_}=(0,x.d4)((e=>e.menu),x.bN),[N,S]=(0,l.useState)(!1),[E,z]=(0,l.useState)(null!==(e=_.data)&&void 0!==e&&e.image?[null===(a=_.data)||void 0===a?void 0:a.image]:[]),[F]=s.A.useForm(),[L,O]=(0,l.useState)(!1),[V,B]=(0,l.useState)(null),C=(0,v.zy)(),{uuid:K}=(0,v.g)(),{params:M}=(0,x.d4)((e=>e.category),x.bN),{defaultLang:R,languages:U}=(0,x.d4)((e=>e.formLang),x.bN);(0,l.useEffect)((()=>()=>{const e=F.getFieldsValue(!0);I((0,A.Ok)({activeMenu:_,data:e}))}),[]);const P=e=>({name:e,url:j.sE+e});function T(e){if(!e)return{};const{translations:a}=e,t=U.map((e=>{var t,l;return{["title[".concat(e.locale,"]")]:null===(t=a.find((a=>a.locale===e.locale)))||void 0===t?void 0:t.title,["description[".concat(e.locale,"]")]:null===(l=a.find((a=>a.locale===e.locale)))||void 0===l?void 0:l.description}}));return Object.assign({},...t)}return(0,l.useEffect)((()=>{var e;_.refetch&&(e=K,S(!0),k.A.getById(e).then((e=>{var a;let t=e.data;const l={...t,...T(t),image:[P(t.img)],keywords:t.keywords.split(","),parent_id:{label:t.parent?null===t||void 0===t||null===(a=t.translation)||void 0===a?void 0:a.title:"---",value:t.parent?null===t||void 0===t?void 0:t.id:0,key:t.parent?null===t||void 0===t?void 0:t.id:0}};F.setFieldsValue(l),z([P(t.img)])})).finally((()=>{S(!1),I((0,A.km)(_))})))}),[_.refetch]),(0,w.jsx)(i.A,{title:t("edit.category"),extra:(0,w.jsx)(h.A,{}),children:N?(0,w.jsx)("div",{className:"d-flex justify-content-center align-items-center py-5",children:(0,w.jsx)(m.A,{size:"large",className:"mt-5 pt-5"})}):(0,w.jsxs)(s.A,{name:"basic",layout:"vertical",onFinish:e=>{var a,l,s;O(!0);const i={...e,type:"receipt",active:e.active?1:0,keywords:e.keywords.join(","),parent_id:0===(null===(a=e.parent_id)||void 0===a?void 0:a.value)?null:null===(l=e.parent_id)||void 0===l?void 0:l.value,"images[0]":null===(s=E[0])||void 0===s?void 0:s.name},n="seller/recipe-categories";"edit"===C.state?k.A.update(K,i).then((()=>{p.oR.success(t("successfully.updated")),I((0,A.EK)({..._,nextUrl:n})),I((0,b.ss)()),q("/".concat(n))})).catch((e=>B(e.response.data.params))).finally((()=>O(!1))):k.A.create(i).then((()=>{p.oR.success(t("successfully.updated")),I((0,A.EK)({..._,nextUrl:n})),I((0,b.ss)()),q("/".concat(n))})).catch((e=>B(e.response.data.params))).finally((()=>O(!1)))},initialValues:{parent_id:{title:"---",value:0,key:0},active:!0,..._.data},form:F,children:[(0,w.jsxs)(n.A,{gutter:12,children:[(0,w.jsx)(r.A,{span:12,children:U.map(((e,a)=>(0,w.jsx)(s.A.Item,{label:t("name"),name:"title[".concat(e.locale,"]"),help:V&&V["title.".concat(R)]?V["title.".concat(R)][0]:null,validateStatus:V?"error":"success",rules:[{required:e.locale===R,message:t("required")}],hidden:e.locale!==R,children:(0,w.jsx)(c.A,{})},e.title+a)))}),(0,w.jsx)(r.A,{span:12,children:U.map(((e,a)=>(0,w.jsx)(s.A.Item,{label:t("description"),name:"description[".concat(e.locale,"]"),rules:[{required:e.locale===R,message:t("required")}],hidden:e.locale!==R,children:(0,w.jsx)(g.A,{rows:4})},e.locale+a)))}),(0,w.jsx)(r.A,{span:12,children:(0,w.jsx)(s.A.Item,{label:t("keywords"),name:"keywords",rules:[{required:!0,message:t("required")}],children:(0,w.jsx)(d.A,{mode:"tags",style:{width:"100%"}})})}),(0,w.jsx)(r.A,{span:12,children:(0,w.jsx)(s.A.Item,{label:t("parent.category"),name:"parent_id",rules:[{required:!0,message:t("required")}],help:V&&V.parent_id?V.parent_id[0]:null,validateStatus:V?"error":"success",children:(0,w.jsx)(d.A,{children:(0,w.jsx)(d.A.Option,{value:0,children:"---"})})})}),(0,w.jsx)(r.A,{span:4,children:(0,w.jsx)(s.A.Item,{label:t("image"),children:(0,w.jsx)(f.A,{type:"categories",imageList:E,setImageList:z,form:F,multiple:!1})})}),(0,w.jsx)(r.A,{span:2,children:(0,w.jsx)(s.A.Item,{label:t("active"),name:"active",valuePropName:"checked",children:(0,w.jsx)(o.A,{})})})]}),(0,w.jsx)(u.A,{type:"primary",htmlType:"submit",loading:L,children:t("submit")})]})})}}}]);