"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[3929],{79406:(e,l,s)=>{s.d(l,{a:()=>d});var n=s(9950),a=s(95491),i=s.n(a),t=s(99674),r=s(90650),o=s(44414);const d=e=>{let{fetchOptions:l,debounceTimeout:s=400,refetch:a=!1,...d}=e;const[u,c]=(0,n.useState)(!1),[m,v]=(0,n.useState)([]),h=(0,n.useMemo)((()=>i()((e=>{v([]),c(!0),l(e).then((e=>{v(e),c(!1)}))}),s)),[l,s]);return(0,o.jsx)(t.A,{showSearch:!0,allowClear:!0,labelInValue:!0,onClear:()=>h(""),filterOption:!1,onSearch:h,notFoundContent:u?(0,o.jsx)(r.A,{size:"small"}):"no results",...d,options:m,onFocus:()=>{m.length&&!a||h("")}})}},47992:(e,l,s)=>{s.d(l,{G:()=>d});var n=s(9950),a=s(95491),i=s.n(a),t=s(99674),r=s(90650),o=s(44414);const d=e=>{let{fetchOptions:l,debounceTimeout:s=400,onClear:a,refetchOptions:d=!1,...u}=e;const[c,m]=(0,n.useState)(!1),[v,h]=(0,n.useState)([]),p=(0,n.useMemo)((()=>i()((e=>{h([]),m(!0),l(e).then((e=>{h(e),m(!1)}))}),s)),[l,s]);return(0,o.jsx)(t.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:p,onClear:()=>{p(""),a&&a()},notFoundContent:c?(0,o.jsx)(r.A,{size:"small"}):"no results",...u,options:v,onFocus:()=>{v.length&&!d||p("")}})}},23929:(e,l,s)=>{s.r(l),s.d(l,{default:()=>v});var n=s(70030),a=s(91854),i=s(59233),t=s(23263),r=s(28429),o=s(9950),d=s(74623),u=s(30020),c=s(50971),m=s(44414);const v=function(){const{t:e}=(0,n.B)(),l=(0,a.wA)(),[s]=i.A.useForm(),{id:v}=(0,r.g)(),{activeMenu:h}=(0,a.d4)((e=>e.menu)),[p,A]=(0,o.useState)(!0);return(0,o.useEffect)((()=>{h.refetch&&((e=>{A(!0),u.A.getById(e).then((e=>{var l,n,a,i,t;let{data:r}=e;s.setFieldsValue({master:{value:null===(l=r.master)||void 0===l?void 0:l.id,label:"".concat(r.master.firstname," ").concat(r.master.lastname)},shop:{value:r.shop_id,label:null===(n=r.shop)||void 0===n||null===(a=n.translation)||void 0===a?void 0:a.title,key:r.shop_id},service:{value:null===r||void 0===r?void 0:r.service_id,label:null===r||void 0===r||null===(i=r.service)||void 0===i||null===(t=i.translation)||void 0===t?void 0:t.title,key:null===r||void 0===r?void 0:r.service_id},price:r.price,interval:r.interval,pause:r.pause,commission_fee:r.commission_fee,active:r.active,discount:r.discount,type:r.type,gender:r.gender})})).finally((()=>A(!1)))})(v),l((0,d.km)(h)))}),[h.refetch]),(0,m.jsx)(t.A,{title:e("add.service.master"),loading:p,children:!p&&(0,m.jsx)(c.A,{form:s,onSubmit:e=>u.A.update(v,e)})})}},50971:(e,l,s)=>{s.d(l,{A:()=>_});var n=s(70030),a=s(91854),i=s(28429),t=s(9950),r=s(85923),o=s(74623),d=s(59233),u=s(87094),c=s(41988),m=s(40577),v=s(99674),h=s(25933),p=s(48538),A=s(47992),j=s(79406),x=s(54764),f=s(75751),b=s(55660),g=s(53271),y=s(44414);const q=["online","offline_in","offline_out"],w=[{value:1,label:"male"},{value:2,label:"female"},{value:3,label:"all"}];const _=function(e){let{form:l,onSubmit:s,initialValues:_={}}=e;const{t:I}=(0,n.B)(),S=(0,a.wA)(),k=(0,i.Zp)(),{activeMenu:C}=(0,a.d4)((e=>e.menu)),{defaultCurrency:O}=(0,a.d4)((e=>e.currency),a.bN),F=(0,t.useRef)([]),[N,P]=(0,t.useState)(!1);return(0,y.jsxs)(d.A,{onFinish:e=>{var l;P(!0);const n="service-master",i={...e,shop_id:e.shop.value,service_id:e.service.value,active:e.active?1:0,master_id:null===(l=e.master)||void 0===l?void 0:l.value,shop:void 0,service:void 0,master:void 0};return s(i).then((()=>{r.oR.success("successfully.added"),(0,a.vA)((()=>{S((0,o.EK)({...C,nextUrl:n})),S((0,f.hP)({})),k("/"+n)}))})).finally((()=>{P(!1)}))},form:l,layout:"vertical",initialValues:{active:!0},children:[(0,y.jsxs)(u.A,{gutter:24,children:[(0,y.jsx)(c.A,{span:8,children:(0,y.jsx)(d.A.Item,{label:I("master"),name:"master",rules:[{required:!0,message:I("required")}],children:(0,y.jsx)(A.G,{fetchOptions:e=>{var l;const s={page:1,perPage:20,search:null!==e&&void 0!==e&&e.length?e:void 0,role:"master",invite_status:"accepted"};return null!==e&&void 0!==e&&null!==(l=e.trim())&&void 0!==l&&l.length||delete s.search,g.A.getAll(s).then((e=>e.data.map((e=>({label:"".concat(e.firstname," ").concat(e.lastname),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id})))))}})})}),(0,y.jsx)(c.A,{span:8,children:(0,y.jsx)(d.A.Item,{label:I("shop"),name:"shop",rules:[{required:!0,message:I("required")}],children:(0,y.jsx)(A.G,{fetchOptions:e=>{var l;const s={page:1,perPage:20,status:"approved",search:e};return null!==e&&void 0!==e&&null!==(l=e.trim())&&void 0!==l&&l.length||delete s.search,b.A.getAll(s).then((e=>e.data.map((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))))}})})}),(0,y.jsx)(c.A,{span:8,children:(0,y.jsx)(d.A.Item,{label:I("service"),name:"service",rules:[{required:!0,message:I("required")}],children:(0,y.jsx)(j.a,{fetchOptions:e=>{const l={search:e,active:1};return x.A.getAll(l).then((e=>{const l=e.data.map((e=>({label:e.translation?e.translation.title:"no name",value:e.id,key:e.id,price:e.price,interval:e.interval,pause:e.pause,commission_fee:e.commission_fee,type:e.type,gender:e.gender})));return F.current=l,l}))},refetch:!0,onChange:e=>{var s;const n=null===(s=F.current)||void 0===s?void 0:s.find((l=>l.value===e.value));l.setFieldsValue({service:e,...n})}})})}),(0,y.jsx)(c.A,{span:8,children:(0,y.jsx)(d.A.Item,{label:I("price"),name:"price",rules:[{required:!0,message:I("required")}],children:(0,y.jsx)(m.A,{min:0,className:"w-100",addonAfter:null===O||void 0===O?void 0:O.symbol})})}),(0,y.jsx)(c.A,{span:8,children:(0,y.jsx)(d.A.Item,{label:I("interval"),name:"interval",rules:[{required:!0,message:I("required")}],children:(0,y.jsx)(m.A,{min:0,className:"w-100"})})}),(0,y.jsx)(c.A,{span:8,children:(0,y.jsx)(d.A.Item,{label:I("pause"),name:"pause",rules:[{required:!0,message:I("required")}],children:(0,y.jsx)(m.A,{min:0,className:"w-100"})})}),(0,y.jsx)(c.A,{span:8,children:(0,y.jsx)(d.A.Item,{label:"type",name:"type",rules:[{required:!0,message:I("required")}],children:(0,y.jsx)(v.A,{children:q.map(((e,l)=>(0,y.jsx)(v.A.Option,{value:e,children:e},e)))})})}),(0,y.jsx)(c.A,{span:8,children:(0,y.jsx)(d.A.Item,{label:I("commission.fee"),name:"commission_fee",children:(0,y.jsx)(m.A,{min:1,className:"w-100"})})}),(0,y.jsx)(c.A,{span:8,children:(0,y.jsx)(d.A.Item,{label:I("discount"),name:"discount",rules:[{validator:(e,l)=>void 0!==l&&(l<0||l>100)?Promise.reject(new Error(I("must.be.between.0.and.100"))):Promise.resolve()}],children:(0,y.jsx)(m.A,{min:0,className:"w-100",addonAfter:(null===O||void 0===O?void 0:O.symbol)||"$"})})}),(0,y.jsx)(c.A,{span:8,children:(0,y.jsx)(d.A.Item,{label:I("gender"),name:"gender",rules:[{required:!0,message:I("required")}],children:(0,y.jsx)(v.A,{children:w.map(((e,l)=>(0,y.jsx)(v.A.Option,{value:e.value,children:I(e.label)},e.value)))})})}),(0,y.jsx)(c.A,{span:8,children:(0,y.jsx)(d.A.Item,{label:I("active"),name:"active",valuePropName:"checked",children:(0,y.jsx)(h.A,{})})})]}),(0,y.jsx)(p.A,{type:"primary",htmlType:"submit",loading:N,children:I("submit")})]})}}}]);