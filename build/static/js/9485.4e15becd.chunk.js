"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[9485],{69485:(e,t,a)=>{a.r(t),a.d(t,{default:()=>E});var l=a(9950),r=a(59233),s=a(23263),i=a(87094),n=a(41988),c=a(55902),o=a(99674),d=a(25933),u=a(48538),m=a(90650),v=a(85923),p=a(28429),h=a(71999),g=a(98591),j=a(91854),y=a(74623),x=a(62572),A=a(63620),f=a(70030),w=a(48970),b=a(61707),k=a(44414);const E=()=>{var e,t;const{t:a}=(0,f.B)(),E=(0,p.Zp)(),P=(0,j.wA)(),{activeMenu:I}=(0,j.d4)((e=>e.menu),j.bN),[N,q]=(0,l.useState)(!1),[S,z]=(0,l.useState)(null!==(e=I.data)&&void 0!==e&&e.image?[null===(t=I.data)||void 0===t?void 0:t.image]:[]),[F]=r.A.useForm(),[L,V]=(0,l.useState)(!1),[B,C]=(0,l.useState)(null),K=(0,p.zy)(),{uuid:M}=(0,p.g)(),{params:O}=(0,j.d4)((e=>e.category),j.bN),{defaultLang:R,languages:U}=(0,j.d4)((e=>e.formLang),j.bN);(0,l.useEffect)((()=>()=>{const e=F.getFieldsValue(!0);P((0,y.Ok)({activeMenu:I,data:e}))}),[]);const _=e=>({name:e,url:A.sE+e});function T(e){if(!e)return{};const{translations:t}=e,a=U.map((e=>{var a,l;return{["title[".concat(e.locale,"]")]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.title,["description[".concat(e.locale,"]")]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.description}}));return Object.assign({},...a)}return(0,l.useEffect)((()=>{var e;I.refetch&&(e=M,q(!0),x.A.getById(e).then((e=>{let t=e.data;const a={...t,...T(t),image:[_(t.img)],keywords:t.keywords.split(",")};F.setFieldsValue(a),z([_(t.img)])})).finally((()=>{q(!1),P((0,y.km)(I))})))}),[I.refetch]),(0,k.jsx)(s.A,{title:a("edit.category"),extra:(0,k.jsx)(h.A,{}),children:N?(0,k.jsx)("div",{className:"d-flex justify-content-center align-items-center py-5",children:(0,k.jsx)(m.A,{size:"large",className:"mt-5 pt-5"})}):(0,k.jsxs)(r.A,{name:"basic",layout:"vertical",onFinish:e=>{var t;V(!0);const l={...e,type:"receipt",active:e.active?1:0,keywords:e.keywords.join(","),parent_id:null,"images[0]":null===(t=S[0])||void 0===t?void 0:t.name},r="catalog/recipe-categories";"edit"===K.state?x.A.update(M,l).then((()=>{v.oR.success(a("successfully.updated")),P((0,y.EK)({...I,nextUrl:r})),P((0,b.rn)()),E("/".concat(r))})).catch((e=>C(e.response.data.params))).finally((()=>V(!1))):x.A.create(l).then((()=>{v.oR.success(a("successfully.updated")),P((0,y.EK)({...I,nextUrl:r})),P((0,b.rn)()),E("/".concat(r))})).catch((e=>C(e.response.data.params))).finally((()=>V(!1)))},initialValues:{parent_id:{title:"---",value:0,key:0},active:!0,...I.data},form:F,children:[(0,k.jsxs)(i.A,{gutter:12,children:[(0,k.jsx)(n.A,{span:12,children:U.map(((e,t)=>(0,k.jsx)(r.A.Item,{label:a("name"),name:"title[".concat(e.locale,"]"),help:B&&B["title.".concat(R)]?B["title.".concat(R)][0]:null,validateStatus:B?"error":"success",rules:[{validator:(t,l)=>l||(null===e||void 0===e?void 0:e.locale)!==R?l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(new Error(a("no.empty.space"))):l&&(null===l||void 0===l?void 0:l.trim().length)<2?Promise.reject(new Error(a("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(a("required")))}],hidden:e.locale!==R,children:(0,k.jsx)(c.A,{})},e.title+t)))}),(0,k.jsx)(n.A,{span:12,children:U.map(((e,t)=>(0,k.jsx)(r.A.Item,{label:a("description"),name:"description[".concat(e.locale,"]"),rules:[{validator:(t,l)=>l||(null===e||void 0===e?void 0:e.locale)!==R?l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(new Error(a("no.empty.space"))):l&&(null===l||void 0===l?void 0:l.trim().length)<5?Promise.reject(new Error(a("must.be.at.least.5"))):Promise.resolve():Promise.reject(new Error(a("required")))}],hidden:e.locale!==R,children:(0,k.jsx)(g.A,{rows:4})},e.locale+t)))}),(0,k.jsx)(n.A,{span:12,children:(0,k.jsx)(r.A.Item,{label:a("keywords"),name:"keywords",rules:[{required:!0,message:a("required")}],children:(0,k.jsx)(o.A,{mode:"tags",style:{width:"100%"}})})}),(0,k.jsx)(n.A,{span:4,children:(0,k.jsx)(r.A.Item,{label:a("image"),name:"images",rules:[{validator:()=>0===(null===S||void 0===S?void 0:S.length)?Promise.reject(new Error(a("required"))):Promise.resolve()}],children:(0,k.jsx)(w.A,{type:"categories",imageList:S,setImageList:z,form:F,multiple:!1})})}),(0,k.jsx)(n.A,{span:2,children:(0,k.jsx)(r.A.Item,{label:a("active"),name:"active",valuePropName:"checked",children:(0,k.jsx)(d.A,{})})})]}),(0,k.jsx)(u.A,{type:"primary",htmlType:"submit",loading:L,children:a("submit")})]})})}}}]);