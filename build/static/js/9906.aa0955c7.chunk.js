"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[9906],{39906:(e,t,s)=>{s.r(t),s.d(t,{default:()=>b});var a=s(9950),i=s(28429),l=s(85923),r=s(59233),n=s(23263),c=s(87094),d=s(41988),m=s(55902),u=s(25933),o=s(48538),v=s(90650),h=s(63620),j=s(91854),g=s(74623),p=s(37963),x=s(59759),A=s(70030),f=s(48970),y=s(44414);const b=()=>{var e,t;const{t:s}=(0,A.B)(),{activeMenu:b}=(0,j.d4)((e=>e.menu),j.bN),{id:E}=(0,i.g)(),k=(0,j.wA)(),[w,P]=(0,a.useState)(null!==(e=b.data)&&void 0!==e&&e.image?[null===(t=b.data)||void 0===t?void 0:t.image]:[]),[F]=r.A.useForm(),I=(0,i.Zp)(),N=(0,i.zy)(),[z,S]=(0,a.useState)(!1),[V,q]=(0,a.useState)(!1);(0,a.useEffect)((()=>()=>{const e=F.getFieldsValue(!0);k((0,g.Ok)({activeMenu:b,data:e}))}),[]);const B=e=>({name:e,url:h.sE+e});return(0,a.useEffect)((()=>{b.refetch&&(e=>{S(!0),p.A.getById(e).then((e=>{let t=e.data;F.setFieldsValue({...t,image:[B(t.img)]}),P([B(t.img)])})).finally((()=>{S(!1),k((0,g.km)(b))}))})(E)}),[b.refetch]),(0,y.jsx)(n.A,{title:s("edit.brand"),children:z?(0,y.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,y.jsx)(v.A,{size:"large",className:"py-5"})}):(0,y.jsxs)(r.A,{name:"basic",layout:"vertical",onFinish:e=>{var t;const a={...e,active:e.active?1:0,"images[0]":null===(t=w[0])||void 0===t?void 0:t.name};q(!0);const i="catalog/brands";"edit"===N.state?p.A.update(E,a).then((()=>{l.oR.success(s("successfully.updated")),k((0,g.EK)({...b,nextUrl:i})),I("/".concat(i)),k((0,x.$F)({}))})).finally((()=>q(!1))):p.A.create(a).then((()=>{l.oR.success(s("successfully.updated")),k((0,g.EK)({...b,nextUrl:i})),I("/".concat(i)),k((0,x.$F)({}))})).finally((()=>q(!1)))},form:F,initialValues:{...b.data},children:[(0,y.jsxs)(c.A,{gutter:12,children:[(0,y.jsx)(d.A,{span:12,children:(0,y.jsx)(r.A.Item,{label:s("title"),name:"title",rules:[{validator:(e,t)=>t?t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(s("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<2?Promise.reject(new Error(s("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(s("required")))}],children:(0,y.jsx)(m.A,{})})}),(0,y.jsx)(d.A,{span:6,children:(0,y.jsx)(r.A.Item,{label:s("image"),name:"images",rules:[{validator:(e,t)=>0===(null===w||void 0===w?void 0:w.length)?Promise.reject(new Error(s("required"))):Promise.resolve()}],children:(0,y.jsx)(f.A,{type:"brands",imageList:w,setImageList:P,form:F,multiple:!1})})}),(0,y.jsx)(d.A,{span:6,children:(0,y.jsx)("div",{className:"col-md-12 col-sm-6",children:(0,y.jsx)(r.A.Item,{label:s("active"),name:"active",valuePropName:"checked",children:(0,y.jsx)(u.A,{})})})})]}),(0,y.jsx)(o.A,{type:"primary",htmlType:"submit",loading:V,children:s("submit")})]})})}}}]);