"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[9838],{75670:(e,t,a)=>{a.d(t,{A:()=>v});var l=a(9950),n=a(59233),r=a(70030),o=a(36455),i=a(19181),s=a.n(i),c=a(63620),d=a(64924),u=a(85923),m=a(44414);function v(e){let{form:t,lang:a,languages:i}=e;const{t:v}=(0,r.B)();function p(e){e.plugins.get("FileRepository").createUploadAdapter=e=>function(e){return{upload:()=>new Promise(((t,a)=>{const l=new FormData;e.file.then((e=>{e.size/1024/1024<2||(u.oR.error(v("min.2.mb")),a()),l.append("image",e),l.append("type","blogs"),d.A.upload(l).then((e=>{let{data:a}=e;t({default:"".concat(c.sE+a.title)})})).catch((e=>{a(e)}))}))}))}}(e)}return(0,m.jsx)(l.Fragment,{children:i.map((e=>(0,m.jsx)(n.A.Item,{label:v("description"),name:"description[".concat(e.locale,"]"),valuePropName:"data",getValueFromEvent:(e,t)=>t.getData(),rules:[{required:e.locale===a,message:v("required")},{validator:(e,t)=>t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(v("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<5?Promise.reject(new Error(v("must.be.at.least.5"))):t&&(null===t||void 0===t?void 0:t.trim().length)>200?Promise.reject(new Error(v("must.be.less.200"))):Promise.resolve()}],hidden:e.locale!==a,children:(0,m.jsx)(o.CKEditor,{editor:s(),config:{extraPlugins:[p]},onBlur:(a,l)=>{const n=l.getData();t.setFieldsValue({["description[".concat(e.value,"]")]:n})}})},"desc"+e.locale)))})}},47992:(e,t,a)=>{a.d(t,{G:()=>c});var l=a(9950),n=a(95491),r=a.n(n),o=a(99674),i=a(90650),s=a(44414);const c=e=>{let{fetchOptions:t,debounceTimeout:a=400,onClear:n,refetchOptions:c=!1,...d}=e;const[u,m]=(0,l.useState)(!1),[v,p]=(0,l.useState)([]),h=(0,l.useMemo)((()=>r()((e=>{p([]),m(!0),t(e).then((e=>{p(e),m(!1)}))}),a)),[t,a]);return(0,s.jsx)(o.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:h,onClear:()=>{h(""),n&&n()},notFoundContent:u?(0,s.jsx)(i.A,{size:"small"}):"no results",...d,options:v,onFocus:()=>{v.length&&!c||h("")}})}},31281:(e,t,a)=>{function l(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const l=e.map((e=>({[e.locale]:""===t["".concat(a,"[").concat(e.locale,"]")]?void 0:t["".concat(a,"[").concat(e.locale,"]")]})));return Object.assign({},...l)}a.d(t,{A:()=>l})},99838:(e,t,a)=>{a.r(t),a.d(t,{default:()=>E});var l=a(9950),n=a(59233),r=a(23263),o=a(87094),i=a(41988),s=a(55902),c=a(25933),d=a(48538),u=a(90650),m=a(85923),v=a(28429),p=a(71999),h=a(91854),g=a(74623),j=a(33774),A=a(70030),f=a(42362),x=a(47992),b=a(62572),y=a(75670),w=a(31281),P=a(44414);const E=()=>{const{t:e}=(0,A.B)(),t=(0,v.Zp)(),a=(0,h.wA)(),{activeMenu:E}=(0,h.d4)((e=>e.menu),h.bN),[F,N]=(0,l.useState)(!1),[k]=n.A.useForm(),[C,I]=(0,l.useState)(!1),{id:O}=(0,v.g)(),{params:q}=(0,h.d4)((e=>e.career),h.bN),{defaultLang:S,languages:V}=(0,h.d4)((e=>e.formLang),h.bN);function z(e){if(!e)return{};const{translations:t}=e,a=V.map((e=>{var a,l,n;return{["title[".concat(e.locale,"]")]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.title,["description[".concat(e.locale,"]")]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.description,["address[".concat(e.locale,"]")]:null===(n=t.find((t=>t.locale===e.locale)))||void 0===n?void 0:n.address}}));return Object.assign({},...a)}(0,l.useEffect)((()=>()=>{const e=k.getFieldsValue(!0);a((0,g.Ok)({activeMenu:E,data:e}))}),[]);return(0,l.useEffect)((()=>{var e;E.refetch&&(e=O,N(!0),j.A.getById(e).then((e=>{var t,a;let l=e.data;const n={...l,...z(l),category_id:{label:l.category.translation.title,value:l.category.id},active:!(null===e||void 0===e||null===(t=e.data)||void 0===t||!t.active)&&(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.active)};k.setFieldsValue(n)})).finally((()=>{N(!1),a((0,g.km)(E))})))}),[E.refetch]),(0,P.jsx)(r.A,{title:e("edit.career"),extra:(0,P.jsx)(p.A,{}),children:F?(0,P.jsx)("div",{className:"d-flex justify-content-center align-items-center py-5",children:(0,P.jsx)(u.A,{size:"large",className:"mt-5 pt-5"})}):(0,P.jsxs)(n.A,{name:"basic",layout:"vertical",onFinish:l=>{I(!0);const n={...l,active:Number(l.active),category_id:l.category_id.value,type:l.type,title:(0,w.A)(V,l,"title"),description:(0,w.A)(V,l,"description"),address:(0,w.A)(V,l,"address")},r="catalog/career";j.A.update(O,n).then((()=>{m.oR.success(e("successfully.updated")),a((0,g.EK)({...E,nextUrl:r})),a((0,f.R)(q)),t("/".concat(r))})).catch((e=>console.error(e.response.data.params))).finally((()=>I(!1)))},initialValues:{parent_id:{title:"---",value:0,key:0},active:!0,...E.data},form:k,children:[(0,P.jsxs)(o.A,{gutter:12,children:[(0,P.jsx)(i.A,{span:12,children:V.map(((t,a)=>(0,P.jsx)(n.A.Item,{label:e("name"),name:"title[".concat(t.locale,"]"),rules:[{validator:(a,l)=>l||(null===t||void 0===t?void 0:t.locale)!==S?l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(new Error(e("no.empty.space"))):l&&(null===l||void 0===l?void 0:l.trim().length)<2?Promise.reject(new Error(e("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(e("required")))}],hidden:t.locale!==S,children:(0,P.jsx)(s.A,{placeholder:e("name")})},t.title+a)))}),(0,P.jsx)(i.A,{span:12}),(0,P.jsx)(i.A,{span:24,children:(0,P.jsx)(y.A,{form:k,lang:S,languages:V})}),(0,P.jsx)(i.A,{span:12,children:(0,P.jsx)(n.A.Item,{label:e("category"),name:"category_id",rules:[{required:!0,message:e("required")}],children:(0,P.jsx)(x.G,{fetchOptions:async function(e){const t={search:e.lenght>0?e:void 0,type:"career",active:1};return b.A.getAll(t).then((e=>e.data.map((e=>({label:e.translation?e.translation.title:"no name",value:e.id})))))}})})}),(0,P.jsx)(i.A,{span:12,children:V.map(((t,a)=>(0,P.jsx)(n.A.Item,{label:e("location"),name:"address[".concat(t.locale,"]"),rules:[{validator:(a,l)=>l||(null===t||void 0===t?void 0:t.locale)!==S?l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(new Error(e("no.empty.space"))):l&&(null===l||void 0===l?void 0:l.trim().length)<2?Promise.reject(new Error(e("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(e("required")))}],hidden:t.locale!==S,children:(0,P.jsx)(s.A,{})},t.locale+a)))}),(0,P.jsx)(i.A,{span:12,children:(0,P.jsx)(n.A.Item,{label:e("active"),name:"active",valuePropName:"checked",children:(0,P.jsx)(c.A,{})})}),(0,P.jsx)(i.A,{span:12}),(0,P.jsx)(i.A,{span:24,className:"mb-5"})]}),(0,P.jsx)(d.A,{type:"primary",htmlType:"submit",loading:C,children:e("submit")})]})})}}}]);