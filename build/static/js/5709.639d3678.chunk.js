"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[5709],{35116:(e,l,t)=>{t.d(l,{A:()=>r});t(9950);var a=t(48538),n=t(44070),s=t(85923),d=t(70030),i=t(13311),o=t(44414);function r(e){let{size:l="",onClick:t,type:r="default",...c}=e;const{t:u}=(0,d.B)(),{isDemo:v}=(0,i.A)();return(0,o.jsx)(a.A,{size:l,icon:(0,o.jsx)(n.A,{}),onClick:e=>{v?s.oR.warning(u("cannot.work.demo")):t(e)},type:r,...c})}},69091:(e,l,t)=>{t.d(l,{A:()=>c});t(9950);var a=t(87094),n=t(41988),s=t(91854),d=t(70030),i=t(74704),o=t(89627),r=t(44414);const c=e=>{let{data:l}=e;const{t:t}=(0,d.B)(),{defaultCurrency:c}=(0,s.d4)((e=>e.currency),s.bN);return(0,r.jsxs)(a.A,{gutter:16,className:"mt-3",children:[(0,r.jsx)(n.A,{flex:"0 0 16.6%",children:(0,r.jsx)(i.A,{title:t("all.orders"),value:null===l||void 0===l?void 0:l.orders_count})}),(0,r.jsx)(n.A,{flex:"0 0 16.6%",children:(0,r.jsx)(i.A,{title:t("ready.orders"),value:null===l||void 0===l?void 0:l.ready_orders_count})}),(0,r.jsx)(n.A,{flex:"0 0 16.6%",children:(0,r.jsx)(i.A,{title:t("on.a.way.orders"),value:null===l||void 0===l?void 0:l.on_a_way_orders_count})}),(0,r.jsx)(n.A,{flex:"0 0 16.6%",children:(0,r.jsx)(i.A,{title:t("cancelled.orders"),value:null===l||void 0===l?void 0:l.cancel_orders_count})}),(0,r.jsx)(n.A,{flex:"0 0 16.6%",children:(0,r.jsx)(i.A,{title:t("delivered.orders"),value:null===l||void 0===l?void 0:l.delivered_orders_count})}),(0,r.jsx)(n.A,{flex:"0 0 16.6%",children:(0,r.jsx)(i.A,{title:t("total.price"),value:(0,o.r)(null===l||void 0===l?void 0:l.total_price,null===c||void 0===c?void 0:c.symbol)})})]})}},28645:(e,l,t)=>{t.d(l,{A:()=>m});var a=t(9950),n=t(66362),s=t(69216),d=t(80737),i=t(25933),o=t(57811),r=t(81541),c=t(48538),u=t(89323),v=t(70030),h=t(44414);const{Text:x}=n.A,m=e=>{let{columns:l=[],setColumns:t,style:n,size:m="",iconOnly:A}=e;const{t:j}=(0,v.B)(),[f,p]=(0,a.useState)(!1),y=(0,h.jsx)(s.A,{children:null===l||void 0===l?void 0:l.map(((e,a)=>(0,h.jsx)(s.A.Item,{children:(0,h.jsxs)(d.A,{className:"d-flex justify-content-between",children:[(0,h.jsx)(x,{children:e.title}),(0,h.jsx)(i.A,{defaultChecked:!0,onClick:()=>function(e){const a=null===l||void 0===l?void 0:l.map((l=>(l.dataIndex===e.dataIndex&&(l.is_show=!(null!==l&&void 0!==l&&l.is_show)),l)));t(a)}(e),disabled:1===a})]})},e+a)))});return(0,h.jsx)(o.A,{overlay:y,trigger:["click"],onVisibleChange:e=>{p(e)},visible:f,children:(0,h.jsx)(r.A,{title:j("change.columns"),children:(0,h.jsx)(c.A,{style:{...n},size:m,icon:(0,h.jsx)(u.A,{}),children:A?null:j("Columns")})})})}},8297:(e,l,t)=>{t.d(l,{A:()=>o});var a=t(9950),n=t(55902),s=t(41397),d=t(60767),i=t(44414);function o(e){let{handleChange:l,defaultValue:t,resetSearch:o,...r}=e;const[c,u]=(0,a.useState)(t),v=(0,a.useMemo)((()=>(0,s.debounce)((e=>{l(e)}),800)),[]);return(0,a.useEffect)((()=>{u(t)}),[o]),(0,i.jsx)(n.A,{value:c,onChange:e=>{u(e.target.value),v(e.target.value)},prefix:(0,i.jsx)(d.A,{}),...r})}},8168:(e,l,t)=>{function a(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}t.d(l,{A:()=>a})},89627:(e,l,t)=>{function a(e,l){var t=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}].slice().reverse().find((function(l){return e>=l.value}));return t?"$"+(e/t.value).toFixed(l).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+t.symbol:"0"}t.d(l,{r:()=>a})},48946:(e,l,t)=>{t.d(l,{A:()=>n});var a=t(82371);const n={orderExport:(e,l)=>a.A.get("dashboard/user/export/order/".concat(e,"/pdf"),{params:l,responseType:"blob"})}},74704:(e,l,t)=>{t.d(l,{A:()=>s});t(9950);var a=t(23263),n=t(44414);function s(e){let{title:l="Orders",value:t=0,color:s="grey",onClick:d}=e;return(0,n.jsx)(a.A,{className:"statistics-card",hoverable:!!d,onClick:d,children:(0,n.jsxs)("div",{className:"card-wrapper",children:[(0,n.jsx)("div",{className:"space"}),(0,n.jsx)("div",{className:"content",children:(0,n.jsx)("h1",{className:"number",children:t})}),(0,n.jsx)("span",{className:"highlighter ".concat(s)}),l&&(0,n.jsx)("h4",{className:"title",children:l})]})})}},40471:(e,l,t)=>{t.r(l),t.d(l,{default:()=>J});var a=t(9950),n=t(86971),s=t(54909),d=t(12916),i=t(48538),o=t(80737),r=t(23263),c=t(52913),u=t(28429),v=t(24513),h=t(12678),x=t(44070),m=t(98114),A=t(89379);const j={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};var f=t(25085),p=function(e,l){return a.createElement(f.A,(0,A.A)((0,A.A)({},e),{},{ref:l,icon:j}))};const y=a.forwardRef(p);var g=t(13700),_=t(91854),k=t(74623),b=t(70030),C=t(47992),w=t(88986),M=t(53177),S=t(8168),N=t(8297),z=t(53774),Y=t(56592),V=t(23283),I=t(28645),D=t(39174),H=t(38635),B=t(26714),O=t(85923),P=t(35116),E=t(23758),R=t(55386),T=t(76083),G=t(63620),$=t(81446),K=t(69091),F=t(64272),W=t(59051),Z=t.n(W),L=t(51066),Q=t(44414);const{RangePicker:X}=n.A,{TabPane:q}=s.A;function J(){var e,l,t,n;const A=(0,_.wA)(),j=(0,u.Zp)(),{t:f}=(0,b.B)(),{defaultCurrency:p}=(0,_.d4)((e=>e.currency),_.bN),[W,J]=(0,a.useState)(null),[U,ee]=(0,a.useState)(null),[le,te]=(0,a.useState)(null),[ae,ne]=(0,a.useState)(null),se=(0,L.Q)(),de=[{id:7,name:"all"},{id:8,name:"un_assigned_order"},{id:3,name:"ready"},{id:4,name:"on_a_way"},{id:5,name:"delivered"},{id:6,name:"canceled"}],[ie,oe]=(0,a.useState)([{title:f("id"),is_show:!0,dataIndex:"id",key:"id",sorter:!0},{title:f("client"),is_show:!0,dataIndex:"user",key:"user",render:e=>(0,Q.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]})},{title:f("number.of.products"),is_show:!0,dataIndex:"order_details_count",key:"order_details_count",render:e=>(0,Q.jsxs)("div",{className:"text-lowercase",children:[e||0," ",f("products")]})},{title:f("status"),is_show:!0,dataIndex:"status",key:"status",render:(e,l)=>(0,Q.jsxs)("div",{children:["new"===e?(0,Q.jsx)(d.A,{color:"blue",children:f(e)}):"canceled"===e?(0,Q.jsx)(d.A,{color:"error",children:f(e)}):(0,Q.jsx)(d.A,{color:"cyan",children:f(e)}),"delivered"!==e&&"canceled"!==e?(0,Q.jsx)(v.A,{onClick:()=>J(l)}):""]})},{title:f("deliveryman"),is_show:!0,dataIndex:"deliveryman",key:"deliveryman",render:(e,l)=>(0,Q.jsx)("div",{children:"ready"===l.status&&"pickup"!==l.delivery_type?(0,Q.jsx)(i.A,{type:"link",onClick:()=>ne(l),children:(0,Q.jsxs)(o.A,{children:[e?"".concat(e.firstname," ").concat(e.lastname):f("add.deliveryman"),(0,Q.jsx)(v.A,{})]})}):(0,Q.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]})})},{title:f("amount"),is_show:!0,dataIndex:"total_price",key:"total_price",render:e=>(0,z.default)(e,p.symbol)},{title:f("payment.type"),is_show:!0,dataIndex:"transaction",key:"transaction",render:e=>{var l;return f(null===e||void 0===e||null===(l=e.payment_system)||void 0===l?void 0:l.tag)||"-"}},{title:f("created.at"),is_show:!0,dataIndex:"created_at",key:"created_at",render:e=>Z()(e).format("YYYY-MM-DD ".concat(se))},{title:f("options"),is_show:!0,key:"options",render:(e,l)=>(0,Q.jsxs)(o.A,{children:[(0,Q.jsx)(i.A,{icon:(0,Q.jsx)(D.kMs,{}),onClick:()=>ee(l.id)}),(0,Q.jsx)(i.A,{icon:(0,Q.jsx)(h.A,{}),onClick:()=>(e=>{A((0,k.X4)({url:"order/details/".concat(e.id),id:"order_details",name:f("order.details")})),j("/order/details/".concat(e.id))})(l)}),(0,Q.jsx)(P.A,{icon:(0,Q.jsx)(x.A,{}),onClick:()=>{je([l.id]),re(!0),pe(!0)}}),(0,Q.jsx)(i.A,{icon:(0,Q.jsx)(m.A,{}),onClick:()=>te(l.id)})]})}]),{setIsModalVisible:re}=(0,a.useContext)(R.o),[ce,ue]=(0,a.useState)(!1),{activeMenu:ve}=(0,_.d4)((e=>e.menu),_.bN),[he,xe]=(0,a.useState)("all"),me=(null===(e=ve.data)||void 0===e?void 0:e.role)||he,[Ae,je]=(0,a.useState)(null),[fe,pe]=(0,a.useState)(null),[ye,ge]=(0,a.useState)(!1),{orders:_e,meta:ke,loading:be,params:Ce,statistic:we}=(0,_.d4)((e=>e.orders),_.bN),Me=null===ve||void 0===ve?void 0:ve.data;(0,w.A)((()=>{var e;const l={search:null===Me||void 0===Me?void 0:Me.search,sort:null===Me||void 0===Me?void 0:Me.sort,column:null===Me||void 0===Me?void 0:Me.column,perPage:null===Me||void 0===Me?void 0:Me.perPage,page:null===Me||void 0===Me?void 0:Me.page,deliveryman:null===Me||void 0===Me||null===(e=Me.deliveryman)||void 0===e?void 0:e.value,date_from:null===Me||void 0===Me?void 0:Me.date_from,date_to:null===Me||void 0===Me?void 0:Me.date_to,status:"un_assigned_order"===(null===Me||void 0===Me?void 0:Me.status)||null===Me||void 0===Me?void 0:Me.status,"isset-deliveryman":"un_assigned_order"===(null===Me||void 0===Me?void 0:Me.status)?1:0};A((0,M.Gb)(l))}),[null===ve||void 0===ve?void 0:ve.data]);const Se=e=>{const l=ve.data;A((0,k.Ok)({activeMenu:ve,data:{...l,...e}}))},Ne=()=>{J(null),ne(null),ee(null),te(null)};(0,a.useEffect)((()=>{if(null!==ve&&void 0!==ve&&ve.refetch){const e={status:null===Me||void 0===Me?void 0:Me.status,page:null===Me||void 0===Me?void 0:Me.page,perPage:10,type:"delivery"};A((0,M.Gb)(e)),A((0,k.km)(ve))}}),[null===ve||void 0===ve?void 0:ve.refetch]);const ze={selectedRowKeys:Ae,onChange:e=>{je(e)}};return(0,Q.jsxs)("div",{children:[(0,Q.jsx)("div",{children:be?(0,Q.jsx)($.A,{}):(0,Q.jsx)(K.A,{data:we,orders:_e})}),(0,Q.jsx)(r.A,{className:"p-0",children:(0,Q.jsxs)(o.A,{wrap:!0,size:[12,20],children:[(0,Q.jsx)(N.A,{placeholder:f("search"),handleChange:e=>Se({search:e}),defaultValue:null===(l=ve.data)||void 0===l?void 0:l.search,resetSearch:!(null!==(t=ve.data)&&void 0!==t&&t.search),style:{minWidth:300}}),(0,Q.jsx)(X,{format:"YYYY-MM-DD",onChange:e=>{return l=e,void A((0,k.Ok)({activeMenu:ve,data:{...Me,date_from:l?Z()(null===l||void 0===l?void 0:l[0]).format("YYYY-MM-DD").toString():void 0,date_to:l?Z()(null===l||void 0===l?void 0:l[1]).format("YYYY-MM-DD").toString():void 0}}));var l}}),(0,Q.jsx)(C.G,{className:"w-100",debounceTimeout:500,placeholder:f("select.deliveryman"),fetchOptions:e=>{const l={search:e};return F.A.getAll(l).then((e=>e.data.map((e=>({label:e.firstname+" "+e.lastname,value:e.id})))))},allowClear:!0,onChange:e=>Se({deliveryman:e}),value:null===(n=ve.data)||void 0===n?void 0:n.deliveryman}),(0,Q.jsxs)(i.A,{onClick:()=>{ue(!0),E.A.export().then((e=>{const l=G.bb+e.data.file_name;window.location.href=l})).finally((()=>ue(!1)))},loading:ce,children:[(0,Q.jsx)(y,{}),f("export")]}),(0,Q.jsx)(P.A,{size:"",onClick:()=>{null===Ae||0===Ae.length?O.oR.warning(f("select.the.product")):(re(!0),pe(!1))},children:f("delete.selected")}),(0,Q.jsx)(i.A,{icon:(0,Q.jsx)(g.A,{}),onClick:()=>{A((0,k.Ok)({activeMenu:ve,data:void 0}))},disabled:!ve.data,style:{minWidth:100}}),(0,Q.jsx)(I.A,{setColumns:oe,columns:ie})]})}),(0,Q.jsxs)(r.A,{title:f("orders"),children:[(0,Q.jsx)(s.A,{onChange:e=>{Se({role:e,page:1}),xe(e)},type:"card",activeKey:me,children:de.map((e=>(0,Q.jsx)(q,{tab:f(e.name)},e.name)))}),(0,Q.jsx)(c.A,{scroll:{x:!0},rowSelection:ze,columns:null===ie||void 0===ie?void 0:ie.filter((e=>e.is_show)),dataSource:_e,loading:be,pagination:{pageSize:Ce.perPage,page:Ce.page,total:ke.total,defaultCurrent:Ce.page},rowKey:e=>e.id,onChange:function(e,l,t){const{pageSize:a,current:n}=e,{field:s,order:d}=t,i=(0,S.A)(d);A((0,k.Ok)({activeMenu:ve,data:{...ve.data,perPage:a,page:n,column:s,sort:i}}))}})]}),(0,Q.jsx)(T.A,{click:()=>{ge(!0);const e={...Object.assign({},...Ae.map(((e,l)=>({["ids[".concat(l,"]")]:e}))))};E.A.delete(e).then((()=>{O.oR.success(f("successfully.deleted")),re(!1),A((0,M.Gb)()),pe(null)})).finally((()=>ge(!1)))},text:f(fe?"delete":"all.delete"),loading:ye,setText:je}),W&&(0,Q.jsx)(Y.A,{orderDetails:W,handleCancel:Ne,status:de}),ae&&(0,Q.jsx)(V.A,{orderDetails:ae,handleCancel:Ne}),U&&(0,Q.jsx)(H.A,{id:U,handleCancel:Ne}),le&&(0,Q.jsx)(B.A,{id:le,handleCancel:Ne})]})}},26714:(e,l,t)=>{t.d(l,{A:()=>p});var a=t(9950),n=t(48946),s=t(39362),d=t.n(s),i=t(81446),o=t(23263),r=t(82706),c=t(48538),u=t(87094),v=t(41988),h=t(70030),x=t(50384),m=t(68873),A=t(28429),j=t(44414);const f=o.A.Meta,p=e=>{let{id:l,handleCancel:t}=e;const[s,p]=(0,a.useState)(null),{t:y}=(0,h.B)(),g=(0,A.Zp)();return(0,j.jsx)(j.Fragment,{children:s?(0,j.jsx)(i.A,{}):(0,j.jsx)(r.A,{visible:!!l,title:y("selected.download"),closable:!1,handleCancel:t,footer:[(0,j.jsx)(c.A,{type:"default",onClick:t,children:y("cancel")},"cancelBtn")],children:(0,j.jsxs)(u.A,{children:[(0,j.jsx)(v.A,{span:12,children:(0,j.jsx)(o.A,{title:y("download.pdf"),onClick:()=>function(e){p(!0),n.A.orderExport(e).then((l=>{d()(l,"invoice_".concat(e,".pdf"),"application/pdf"),t()})).finally((()=>p(!1)))}(l),className:"text-center cursor-pointer",children:(0,j.jsx)(f,{className:"d-flex align-items-center justify-content-center",title:(0,j.jsx)(x.yos,{size:80})})})}),(0,j.jsx)(v.A,{span:12,children:(0,j.jsx)(o.A,{title:y("download.check"),onClick:()=>(e=>{g("/orders/generate-invoice/".concat(e))})(l),className:"text-center cursor-pointer",children:(0,j.jsx)(f,{className:"d-flex align-items-center justify-content-center",title:(0,j.jsx)(m.TBA,{size:85})})})})]})})})}},13700:(e,l,t)=>{t.d(l,{A:()=>o});var a=t(89379),n=t(9950);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"};var d=t(25085),i=function(e,l){return n.createElement(d.A,(0,a.A)((0,a.A)({},e),{},{ref:l,icon:s}))};const o=n.forwardRef(i)}}]);