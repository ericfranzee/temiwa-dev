"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[4912],{47992:(e,s,t)=>{t.d(s,{G:()=>o});var a=t(9950),n=t(95491),l=t.n(n),r=t(99674),i=t(90650),d=t(44414);const o=e=>{let{fetchOptions:s,debounceTimeout:t=400,onClear:n,refetchOptions:o=!1,...u}=e;const[c,m]=(0,a.useState)(!1),[h,g]=(0,a.useState)([]),p=(0,a.useMemo)((()=>l()((e=>{g([]),m(!0),s(e).then((e=>{g(e),m(!1)}))}),t)),[s,t]);return(0,d.jsx)(r.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:p,onClear:()=>{p(""),n&&n()},notFoundContent:c?(0,d.jsx)(i.A,{size:"small"}):"no results",...u,options:h,onFocus:()=>{h.length&&!o||p("")}})}},54912:(e,s,t)=>{t.r(s),t.d(s,{default:()=>q});var a=t(9950),n=t(28429),l=t(85923),r=t(59233),i=t(23263),d=t(87094),o=t(41988),u=t(55902),c=t(99674),m=t(86971),h=t(48538),g=t(91854),p=t(74623),b=t(70030),x=t(31594),f=t(59051),j=t.n(f),A=t(24611),y=t(81499),v=t(7843),w=t(47992),N=t(44414);const _=[{title:"order",value:"order"},{title:"subscribe",value:"subscribe"},{title:"verify",value:"verify"}],q=()=>{const{t:e}=(0,b.B)(),{activeMenu:s}=(0,g.d4)((e=>e.menu),g.bN),t=(0,g.wA)(),[f]=r.A.useForm(),q=(0,n.Zp)(),[D,F]=(0,a.useState)(!1),{defaultLang:C,languages:Y}=(0,g.d4)((e=>e.formLang),g.bN),{subscribers:I}=(0,g.d4)((e=>e.messageSubscriber),g.bN);(0,a.useEffect)((()=>()=>{const e=f.getFieldsValue(!0);t((0,p.Ok)({activeMenu:s,data:e}))}),[]);return(0,N.jsx)(i.A,{title:e("add.subscriber"),className:"h-100",children:(0,N.jsxs)(r.A,{name:"subscriber-add",layout:"vertical",onFinish:a=>{const n={...a,type:a.type,email_setting_id:a.email_setting_id.value,send_to:j()(a.send_to).format("YYYY-MM-DD HH:mm:ss")};F(!0);const r="message/subscriber";A.A.create(n).then((()=>{l.oR.success(e("successfully.created")),t((0,p.EK)({...s,nextUrl:r})),q("/".concat(r)),t((0,y.e)())})).finally((()=>F(!1)))},form:f,initialValues:{...s.data,...(()=>{const e=s.data;if(null===e||void 0===e||!e.send_to)return e;const t=e.send_to;return{...e,send_to:j()(t,"YYYY-MM-DD")}})()},className:"d-flex flex-column h-100",children:[(0,N.jsxs)(d.A,{gutter:12,children:[(0,N.jsx)(o.A,{span:12,children:(0,N.jsx)(r.A.Item,{label:e("subject"),name:"subject",rules:[{required:!0,message:e("required")}],children:(0,N.jsx)(u.A,{})})}),(0,N.jsx)(o.A,{span:12,children:(0,N.jsx)(r.A.Item,{label:e("type"),name:"type",rules:[{required:!0,message:e("required")}],children:(0,N.jsx)(c.A,{options:_.filter((e=>!I.some((s=>s.type===e.value)))),className:"w-100"})})}),(0,N.jsx)(o.A,{span:12,children:(0,N.jsx)(r.A.Item,{label:e("email.setting.id"),name:"email_setting_id",rules:[{required:!0,message:e("required")}],children:(0,N.jsx)(w.G,{fetchOptions:()=>v.A.get().then((e=>{let{data:s}=e;return s.map((e=>({label:e.host,value:e.id})))})),className:"w-100",placeholder:e("email.setting.id")})})}),(0,N.jsx)(o.A,{span:24,children:(0,N.jsx)(x.A,{languages:Y,form:f,lang:C})}),(0,N.jsx)(o.A,{span:12,children:(0,N.jsx)(r.A.Item,{label:e("alt.body"),name:"alt_body",rules:[{required:!0,message:e("required")}],children:(0,N.jsx)(u.A,{})})}),(0,N.jsx)(o.A,{span:12,children:(0,N.jsx)(r.A.Item,{label:e("send.to"),name:"send_to",rules:[{required:!0,message:e("required")}],children:(0,N.jsx)(m.A,{showTime:!0,className:"w-100",disabledDate:e=>j()().add(-1,"days")>=e})})})]}),(0,N.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,N.jsx)("div",{className:"pb-5",children:(0,N.jsx)(h.A,{type:"primary",htmlType:"submit",loading:D,children:e("send")})})})]})})}},31594:(e,s,t)=>{t.d(s,{A:()=>c});t(9950);var a=t(59233),n=t(70030),l=t(36455),r=t(19181),i=t.n(r),d=t(63620),o=t(64924),u=t(44414);function c(e){let{form:s,lang:t,languages:r}=e;const{t:c}=(0,n.B)();return(0,u.jsx)("div",{className:"textEditor",children:(0,u.jsx)(a.A.Item,{label:c("newsletter.content"),name:"body",valuePropName:"data",getValueFromEvent:(e,s)=>s.getData(),rules:[{required:!0,message:c("required")}],className:"description-editor",children:(0,u.jsx)(l.CKEditor,{editor:i(),config:{extraPlugins:[function(e){e.plugins.get("FileRepository").createUploadAdapter=e=>function(e){return{upload:()=>new Promise(((s,t)=>{const a=new FormData;e.file.then((e=>{a.append("image",e),a.append("type","blogs"),o.A.upload(a).then((e=>{let{data:t}=e;s({default:"".concat(d.sE+t.title)})})).catch((e=>{t(e)}))}))}))}}(e)}]},onChange:(e,s)=>{s.getData()},onBlur:(e,t)=>{const a=t.getData();s.setFieldsValue({body:a})}})})})}}}]);