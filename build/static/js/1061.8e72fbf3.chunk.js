"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[1061],{85023:(e,t,i)=>{i.d(t,{D:()=>a});var n=i(9950),s=i(99674),r=i(90650),l=i(44414);const a=e=>{let{fetchOptions:t,refetch:i=!1,value:a,...d}=e;const[o,c]=(0,n.useState)(!1),[m,u]=(0,n.useState)([]);"object"===typeof(null===a||void 0===a?void 0:a.label)&&null!==(null===a||void 0===a?void 0:a.label)&&(a.label=a.label.value);return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(s.A,{labelInValue:!0,filterOption:!1,notFoundContent:o?(0,l.jsx)(r.A,{size:"small"}):"no results",value:a,...d,options:o?[]:m,onFocus:()=>{m.length&&!i||(c(!0),t().then((e=>{u(e),c(!1)})))},getPopupContainer:e=>e.parentNode})})}},61061:(e,t,i)=>{i.r(t),i.d(t,{default:()=>g});var n=i(9950),s=i(28429),r=i(85923),l=i(86366),a=i(59233),d=i(23263),o=i(91854),c=i(74623),m=i(70030),u=i(71999),p=i(69292),x=i(64986),h=i(44414);const{Step:j}=l.A,g=()=>{var e,t,i;const{t:g}=(0,m.B)(),{activeMenu:v}=(0,o.d4)((e=>e.menu),o.bN),A=(0,o.wA)(),[b]=a.A.useForm(),y=(0,s.Zp)(),[k,q]=(0,n.useState)(null!==(e=v.data)&&void 0!==e&&e.image?[null===(t=v.data)||void 0===t?void 0:t.image]:[]),[f,w]=(0,n.useState)((null===(i=v.data)||void 0===i?void 0:i.step)||0),_=()=>{w(f+1)},I=()=>{w(f-1)},[F,C]=(0,n.useState)(!1);(0,n.useEffect)((()=>()=>{const e=b.getFieldsValue(!0);A((0,c.Ok)({activeMenu:v,data:e}))}),[]);return(0,h.jsx)(d.A,{title:g("add.recepe"),extra:(0,h.jsx)(u.A,{}),children:(0,h.jsxs)(a.A,{layout:"vertical",onFinish:e=>{var t,i;b.validateFields();const n={...e,total_time:e.total_time.toString(),active_time:e.active_time.toString(),images:null===k||void 0===k?void 0:k.map((e=>e.name)),category_id:e.category_id.value,stocks:null===(t=e.stocks)||void 0===t?void 0:t.map((e=>({min_quantity:e.min_quantity,stock_id:e.stock_id.value}))),nutrition:null===(i=e.nutrition)||void 0===i?void 0:i.map((e=>({...e,percentage:e.percentage.toString(),weight:e.weight.toString()})))};C(!0);const s="seller/recept";p.A.create(n).then((()=>{r.oR.success(g("successfully.created")),y("/".concat(s)),A((0,c.EK)({...v,nextUrl:s}))})).finally((()=>C(!1)))},form:b,initialValues:{active:!0,...v.data},children:[(0,h.jsx)(l.A,{current:f,children:x.C.map((e=>(0,h.jsx)(j,{title:g(e.title)},e.title)))}),x.C.map((e=>{const t=e.content;return(0,h.jsx)("div",{className:"steps-content ".concat(e.step!==f+1&&"hidden"),children:(0,h.jsx)(t,{next:_,prev:I,loading:F,image:k,setImage:q})},e.title)}))]})})}},64986:(e,t,i)=>{i.d(t,{C:()=>F});var n=i(59233),s=i(87094),r=i(41988),l=i(80737),a=i(48538),d=(i(9950),i(91854)),o=i(36455),c=i(19181),m=i.n(c),u=i(70030),p=i(44414);const x=e=>{let{next:t,prev:i}=e;const{t:c}=(0,u.B)(),x=n.A.useFormInstance(),{defaultLang:h,languages:j}=(0,d.d4)((e=>e.formLang),d.bN);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(s.A,{gutter:12,children:(0,p.jsx)(r.A,{span:24,children:j.map((e=>(0,p.jsx)(n.A.Item,{label:c("ingredients"),name:["ingredient",e.locale],valuePropName:"data",getValueFromEvent:(e,t)=>t.getData(),rules:[{required:e.locale===h,message:c("required")}],hidden:e.locale!==h,children:(0,p.jsx)(o.CKEditor,{editor:m()})})))})}),(0,p.jsxs)(l.A,{children:[(0,p.jsx)(a.A,{type:"primary",htmlType:"button",onClick:()=>i(),children:c("prev")}),(0,p.jsx)(a.A,{type:"primary",htmlType:"button",onClick:()=>{x.validateFields([["ingredient",h]]).then((()=>{t()}))},children:c("next")})]})]})},h=e=>{let{next:t,prev:i}=e;const{t:c}=(0,u.B)(),x=n.A.useFormInstance(),{defaultLang:h,languages:j}=(0,d.d4)((e=>e.formLang),d.bN);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(s.A,{gutter:12,children:(0,p.jsx)(r.A,{span:24,children:j.map((e=>(0,p.jsx)(n.A.Item,{label:c("instructions"),name:["instruction",e.locale],valuePropName:"data",getValueFromEvent:(e,t)=>t.getData(),rules:[{required:e.locale===h,message:c("required")}],hidden:e.locale!==h,children:(0,p.jsx)(o.CKEditor,{editor:m()})})))})}),(0,p.jsxs)(l.A,{children:[(0,p.jsx)(a.A,{type:"primary",htmlType:"button",onClick:()=>i(),children:c("prev")}),(0,p.jsx)(a.A,{type:"primary",htmlType:"button",onClick:()=>{x.validateFields([["instruction",h]]).then((()=>{t()}))},children:c("next")})]})]})};var j=i(55902),g=i(40577),v=i(99674),A=i(48970),b=i(12598),y=i(85023);const{TextArea:k}=j.A,q=e=>{let{next:t,image:i,setImage:l}=e;const{t:o}=(0,u.B)(),c=n.A.useFormInstance(),{defaultLang:m,languages:x}=(0,d.d4)((e=>e.formLang),d.bN);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(s.A,{gutter:12,children:[(0,p.jsx)(r.A,{span:12,children:x.map((e=>(0,p.jsx)(n.A.Item,{label:o("name"),name:["title",e.locale],rules:[{validator:(t,i)=>i||(null===e||void 0===e?void 0:e.locale)!==m?i&&""===(null===i||void 0===i?void 0:i.trim())?Promise.reject(new Error(o("no.empty.space"))):i&&(null===i||void 0===i?void 0:i.trim().length)<2?Promise.reject(new Error(o("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(o("required")))}],hidden:e.locale!==m,children:(0,p.jsx)(j.A,{})},"name"+e.id)))}),(0,p.jsx)(r.A,{span:12,children:(0,p.jsx)(n.A.Item,{label:o("category"),name:"category_id",rules:[{required:!0,message:o("required")}],children:(0,p.jsx)(y.D,{fetchOptions:function(){return b.A.getAll({active:1,type:"receipt"}).then((e=>e.data.map((e=>({label:e.translation.title,value:e.id})))))},debounceTimeout:200})},"category_id")}),(0,p.jsx)(r.A,{span:12,children:x.map((e=>(0,p.jsx)(n.A.Item,{label:o("description"),name:["description",e.locale],rules:[{validator:(t,i)=>i||(null===e||void 0===e?void 0:e.locale)!==m?i&&""===(null===i||void 0===i?void 0:i.trim())?Promise.reject(new Error(o("no.empty.space"))):i&&(null===i||void 0===i?void 0:i.trim().length)<5?Promise.reject(new Error(o("must.be.at.least.5"))):Promise.resolve():Promise.reject(new Error(o("required")))}],hidden:e.locale!==m,children:(0,p.jsx)(k,{rows:3})},"description"+e.id)))}),(0,p.jsx)(r.A,{span:6,children:(0,p.jsx)(n.A.Item,{label:o("calories"),name:"calories",rules:[{required:!0,message:o("required")},{type:"number",min:0,message:o("must.be.positive")}],children:(0,p.jsx)(g.A,{className:"w-100"})},"calories")}),(0,p.jsx)(r.A,{span:6,children:(0,p.jsx)(n.A.Item,{label:o("servings"),name:"servings",rules:[{required:!0,message:o("required")},{type:"number",min:0,message:o("must.be.positive")}],children:(0,p.jsx)(g.A,{className:"w-100"})},"servings")}),(0,p.jsx)(r.A,{span:6,children:(0,p.jsx)(n.A.Item,{label:o("active.time"),name:"active_time",rules:[{required:!0,message:o("required")},{type:"number",min:0,message:o("must.be.positive")}],children:(0,p.jsx)(g.A,{className:"w-100"})},"active_time")}),(0,p.jsx)(r.A,{span:6,children:(0,p.jsx)(n.A.Item,{label:o("total.time"),name:"total_time",rules:[{required:!0,message:o("required")},{type:"number",min:0,message:o("must.be.positive")}],children:(0,p.jsx)(g.A,{className:"w-100"})},"total_time")}),(0,p.jsx)(r.A,{span:12,children:(0,p.jsx)(n.A.Item,{label:o("discount.type"),name:"discount_type",rules:[{required:!0,message:o("required")}],children:(0,p.jsx)(v.A,{options:[{label:o("fix"),value:"fix"},{label:o("percent"),value:"percent"}]})})}),(0,p.jsx)(r.A,{span:12,children:(0,p.jsx)(n.A.Item,{label:o("discount.price"),name:"discount_price",rules:[{required:!0,message:o("required")},{type:"number",min:0,message:o("must.be.positive")}],children:(0,p.jsx)(g.A,{className:"w-100"})})}),(0,p.jsx)(r.A,{span:12,children:(0,p.jsx)(n.A.Item,{label:o("image"),name:"images",rules:[{validator:()=>0===(null===i||void 0===i?void 0:i.length)?Promise.reject(new Error(o("required"))):Promise.resolve()}],children:(0,p.jsx)(A.A,{type:"receipts",imageList:i,setImageList:l,form:c,multiple:!1})})})]}),(0,p.jsx)(a.A,{type:"primary",htmlType:"button",onClick:()=>{c.validateFields([["title",m],["description",m],"calories","servings","active_time","total_time","discount_type","discount_price","category_id","images"]).then((e=>{t()}))},children:o("next")})]})};var f=i(44070),w=i(8750);const _=e=>{let{prev:t,loading:i}=e;const{t:o}=(0,u.B)(),{defaultLang:c,languages:m}=(0,d.d4)((e=>e.formLang),d.bN);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(s.A,{gutter:12,children:(0,p.jsx)(r.A,{span:24,children:(0,p.jsx)(n.A.List,{name:"nutrition",initialValue:[{weight:void 0,percentage:void 0,en:void 0,ru:void 0}],children:(e,t)=>{let{add:i,remove:l}=t;return(0,p.jsxs)(p.Fragment,{children:[e.map(((e,t)=>{let{key:i,name:d,...u}=e;return(0,p.jsxs)(s.A,{gutter:12,align:"middle",children:[(0,p.jsx)(r.A,{span:7,children:m.map((e=>(0,p.jsx)(n.A.Item,{label:o("name"),name:[d,e.locale],rules:[{validator:(t,i)=>i||(null===e||void 0===e?void 0:e.locale)!==c?i&&""===(null===i||void 0===i?void 0:i.trim())?Promise.reject(new Error(o("no.empty.space"))):i&&(null===i||void 0===i?void 0:i.trim().length)<2?Promise.reject(new Error(o("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(o("required")))}],hidden:e.locale!==c,children:(0,p.jsx)(j.A,{})},"name"+e.id)))}),(0,p.jsx)(r.A,{span:7,children:(0,p.jsx)(n.A.Item,{...u,label:o("weight"),name:[d,"weight"],rules:[{required:!0,message:o("required")},{type:"number",min:0,message:o("must.be.positive")}],children:(0,p.jsx)(g.A,{className:"w-100",addonAfter:"g"})})}),(0,p.jsx)(r.A,{span:7,children:(0,p.jsx)(n.A.Item,{...u,label:o("percentage"),name:[d,"percentage"],rules:[{required:!0,message:o("required")},{type:"number",min:0,max:100,message:o("must.be.between.0.and.100")}],children:(0,p.jsx)(g.A,{className:"w-100",addonAfter:"%"})})}),0!==t&&(0,p.jsx)(r.A,{span:3,className:"d-flex justify-content-end",children:(0,p.jsx)(a.A,{onClick:()=>l(d),danger:!0,className:"w-100",type:"primary",icon:(0,p.jsx)(f.A,{})})})]})})),(0,p.jsx)(n.A.Item,{children:(0,p.jsx)(a.A,{onClick:()=>i(),block:!0,icon:(0,p.jsx)(w.A,{}),children:o("add.nutrition")})})]})}})})}),(0,p.jsxs)(l.A,{children:[(0,p.jsx)(a.A,{type:"primary",htmlType:"button",onClick:()=>t(),children:o("prev")}),(0,p.jsx)(a.A,{type:"primary",htmlType:"submit",loading:i,children:o("submit")})]})]})};var I=i(67231);const F=[{step:1,title:"recipe",content:q},{step:2,title:"instructions",content:h},{step:3,title:"ingredients",content:x},{step:4,title:"stocks",content:e=>{let{next:t,prev:i}=e;const{t:d}=(0,u.B)(),o=n.A.useFormInstance(),c=n.A.useWatch("stocks",o);function m(e){const t={perPage:10,page:1,search:e,active:1};return I.A.getStock(t).then((e=>e.data.filter((e=>!c.map((e=>{var t;return null===e||void 0===e||null===(t=e.stock_id)||void 0===t?void 0:t.value})).includes(e.id))).map((e=>({label:e.product.translation.title+" "+e.extras.map((e=>e.value)).join(", "),value:e.id})))))}return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(s.A,{gutter:12,children:(0,p.jsx)(r.A,{span:24,children:(0,p.jsx)(n.A.List,{name:"stocks",initialValue:[{stock_id:void 0,min_quantity:void 0}],children:(e,t)=>{let{add:i,remove:l}=t;return(0,p.jsxs)(p.Fragment,{children:[e.map(((e,t)=>{let{key:i,name:o,...c}=e;return(0,p.jsxs)(s.A,{gutter:12,align:"middle",children:[(0,p.jsx)(r.A,{span:11,children:(0,p.jsx)(n.A.Item,{...c,label:d("stock"),name:[o,"stock_id"],rules:[{required:!0,message:d("required")}],children:(0,p.jsx)(y.D,{fetchOptions:m,debounceTimeout:200})})}),(0,p.jsx)(r.A,{span:11,children:(0,p.jsx)(n.A.Item,{...c,label:d("min.quantity"),name:[o,"min_quantity"],rules:[{required:!0,message:d("required")},{type:"number",min:1,message:d("must.be.at.least.1")}],children:(0,p.jsx)(g.A,{className:"w-100"})})}),0!==t&&(0,p.jsx)(r.A,{span:2,className:"d-flex justify-content-end",children:(0,p.jsx)(a.A,{onClick:()=>l(o),danger:!0,className:"w-100",type:"primary",icon:(0,p.jsx)(f.A,{})})})]})})),(0,p.jsx)(n.A.Item,{children:(0,p.jsx)(a.A,{onClick:()=>i(),block:!0,icon:(0,p.jsx)(w.A,{}),children:d("add.stock")})})]})}})})}),(0,p.jsxs)(l.A,{children:[(0,p.jsx)(a.A,{type:"primary",htmlType:"button",onClick:()=>i(),children:d("prev")}),(0,p.jsx)(a.A,{type:"primary",htmlType:"button",onClick:()=>{o.validateFields(c.flatMap(((e,t)=>[["stocks",t,"stock_id"],["stocks",t,"min_quantity"]]))).then((()=>{t()}))},children:d("next")})]})]})}},{step:5,title:"nutritions",content:_}]}}]);