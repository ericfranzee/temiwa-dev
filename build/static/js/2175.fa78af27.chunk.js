"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[2175],{12196:(e,i,s)=>{s.d(i,{A:()=>f});var l=s(9950),a=s(59233),t=s(72243),r=s(87094),n=s(41988),d=s(80737),o=s(66876),c=s(82706),u=s(48538),m=s(8750),v=s(44070),p=s(48970),h=s(64924),g=s(70030),A=s(44414);const f=e=>{var i;let{mediaList:s,setMediaList:f,name:x="products"}=e;const{t:j}=(0,g.B)(),[w]=a.A.useForm(),[y,b]=(0,l.useState)(null),[k,N]=(0,l.useState)([]),[L,S]=(0,l.useState)(!1),[C,F]=(0,l.useState)(!1),I=async e=>{let{file:i,type:s}=e;i.name?(b("video"===s?(0,A.jsx)("video",{controls:!0,src:i.name,width:450,height:450}):(0,A.jsx)(t.A,{src:i.name,width:"100%",height:450,alt:"preview-img"})),S(!0)):b(null)},M=e=>({uid:e.title,name:e.title,status:"done",url:e.title,created:!0});return(0,A.jsxs)(r.A,{gutter:[24,24],children:[(0,A.jsx)(n.A,{span:24,children:(0,A.jsx)(d.A,{className:"align-items-start",children:(0,A.jsx)(o.A,{customRequest:e=>{let{file:i,onSuccess:s}=e;F(!0);const l=new FormData;l.append("image",i),l.append("type",x),h.A.upload(l).then((e=>{let{data:i}=e;f((e=>({...e,images:[...e.images,{...M(i),isVideo:!0}]}))),s("ok")}))},accept:"video/*",listType:"text",className:"video-upload",multiple:!1,fileList:[],children:(0,A.jsxs)("div",{className:"media-upload",children:[(0,A.jsx)(m.A,{})," ",(0,A.jsx)("span",{children:j("upload.video")})]})})})}),(0,A.jsx)(n.A,{span:24,children:null===s||void 0===s||null===(i=s.previews)||void 0===i?void 0:i.map(((e,i)=>{var l,a;return(0,A.jsxs)(d.A,{className:"uploaded-file",wrap:!0,children:[(0,A.jsx)("span",{className:"media-item",onClick:()=>I({type:"img",file:null===s||void 0===s?void 0:s.previews[i]}),children:null===s||void 0===s||null===(l=s.previews[i])||void 0===l?void 0:l.name}),(0,A.jsx)("span",{className:"media-item",onClick:()=>I({type:"video",file:null===s||void 0===s?void 0:s.images[i]}),children:null===s||void 0===s||null===(a=s.images[i])||void 0===a?void 0:a.name}),(0,A.jsx)(v.A,{className:"delete-media-item",onClick:()=>(e=>{const i=s.images.filter(((i,s)=>{if(s!==e)return i})),l=s.previews.filter(((i,s)=>{if(s!==e)return i}));f({images:i,previews:l})})(i)})]})}))}),(0,A.jsx)(c.A,{title:"Video Preview",visible:L,onCancel:()=>{S(!1)},footer:null,children:y}),(0,A.jsx)(c.A,{title:"Preview image",visible:C,footer:null,onCancel:()=>F(!1),children:(0,A.jsx)(a.A,{form:w,onFinish:()=>{f((e=>({...e,previews:[...e.previews,...k]}))),N([]),F(!1)},layout:"vertical",children:(0,A.jsxs)(r.A,{gutter:[24,24],children:[(0,A.jsx)(n.A,{span:24,children:(0,A.jsx)(a.A.Item,{label:j("preview.image"),name:"preview-image",rules:[{required:!(null!==k&&void 0!==k&&k.length),message:j("required")}],children:(0,A.jsx)(p.A,{type:x,imageList:k,setImageList:N,multiple:!1,text:"upload.image",form:w})})}),(0,A.jsx)(n.A,{span:24,className:"d-flex justify-content-end",children:(0,A.jsx)(u.A,{type:"primary",onClick:()=>w.submit(),children:j("save")})})]})})})]})}},65820:(e,i,s)=>{s.d(i,{s:()=>r});var l=s(28429),a=s(21215),t=s.n(a);const r=()=>{const e=(0,l.Zp)(),i=(0,l.zy)(),s=t().parse(i.search,{ignoreQueryPrefix:!0});return{values:s,set:(i,l)=>e({search:t().stringify({...s,[i]:l})}),reset:i=>{const l={...s};l[i]&&delete l[i],e({search:t().stringify({...l})})},clear:()=>e({search:t().stringify({})}),merge:i=>e({search:t().stringify({...s,...i})})}}},22799:(e,i,s)=>{s.d(i,{A:()=>t});var l=s(82371);const a="dashboard/admin/galleries",t={getAll:e=>l.A.get("".concat(a),{params:e}),create:e=>l.A.post("".concat(a),e)}},92175:(e,i,s)=>{s.r(i),s.d(i,{default:()=>y});var l=s(59233),a=s(23263),t=s(87094),r=s(41988),n=s(40895),d=s(80737),o=s(48538),c=s(70030),u=s(91854),m=s(65820),v=s(9950),p=(s(22799),s(74623)),h=s(48970),g=s(12196),A=s(82371);const f="dashboard/master/galleries",x={getAll:e=>A.A.get("".concat(f),{params:e}),create:e=>A.A.post("".concat(f),e)};var j=s(85923),w=s(44414);const y=function(){var e;const{t:i}=(0,c.B)(),s=(0,u.wA)(),[A]=l.A.useForm(),f=(0,m.s)(),{activeMenu:y}=(0,u.d4)((e=>e.menu),u.bN),[b,k]=(0,v.useState)(!1),[N,L]=(0,v.useState)(!1),[S,C]=(0,v.useState)([]),[F,I]=(0,v.useState)({images:[],previews:[]}),M=()=>{k(!0),x.getAll().then((e=>{var i;const s=(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.flatMap((e=>e)))||[];C((e=>{var i;return null===e||void 0===e||null===(i=e.filter((e=>!(null!==e&&void 0!==e&&e.preview))))||void 0===i?void 0:i.map((e=>({uid:e.id,name:e.path,url:e.path})))})(s)),I((e=>{var i,s;const l={images:[],previews:[]},a=null===e||void 0===e||null===(i=e.filter((e=>!(null===e||void 0===e||!e.preview))))||void 0===i?void 0:i.map((e=>({uid:e.id,name:e.preview,url:e.preview}))),t=null===e||void 0===e||null===(s=e.filter((e=>!(null===e||void 0===e||!e.preview))))||void 0===s?void 0:s.map((e=>({uid:e.id,name:e.path,url:e.path})));return l.previews=a,l.images=t,l})(s))})).finally((()=>{k(!1),s((0,p.km)(y))}))};return(0,v.useEffect)((()=>{M()}),[null===(e=f.values)||void 0===e?void 0:e.step]),(0,v.useEffect)((()=>{y.refetch&&M()}),[y.refetch]),(0,w.jsx)(a.A,{loading:b,children:(0,w.jsxs)(l.A,{form:A,onFinish:()=>{var e;L(!0);const s={images:[...null===F||void 0===F?void 0:F.images,...S].map((e=>e.name)),previews:null===F||void 0===F||null===(e=F.previews)||void 0===e?void 0:e.map((e=>e.name)),active:1};x.create(s).then((()=>{j.oR.success(i("successfully.created"))})).finally((()=>{k(!1),L(!1)}))},layout:"vertical",children:[(0,w.jsx)(t.A,{gutter:12,children:(0,w.jsx)(r.A,{span:24,children:(0,w.jsx)(l.A.Item,{label:i("images"),name:"images",children:(0,w.jsx)(h.A,{title:i("upload.image"),imageList:S,setImageList:C,form:A,multiple:!0,type:"master-galleries"})})})}),(0,w.jsx)(n.A,{}),(0,w.jsx)(t.A,{gutter:12,children:(0,w.jsx)(r.A,{span:24,children:(0,w.jsx)(l.A.Item,{label:i("videos"),name:"videos",children:(0,w.jsx)(g.A,{mediaList:F,setMediaList:I,name:"master-galleries"})})})}),(0,w.jsx)(d.A,{className:"mt-4",children:(0,w.jsx)(o.A,{type:"primary",htmlType:"submit",loading:N,children:i("submit")})})]})})}}}]);