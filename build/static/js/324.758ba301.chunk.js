"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[324],{47992:(e,t,s)=>{s.d(t,{G:()=>i});var n=s(9950),a=s(95491),l=s.n(a),r=s(99674),u=s(90650),o=s(44414);const i=e=>{let{fetchOptions:t,debounceTimeout:s=400,onClear:a,refetchOptions:i=!1,...d}=e;const[c,m]=(0,n.useState)(!1),[p,h]=(0,n.useState)([]),v=(0,n.useMemo)((()=>l()((e=>{h([]),m(!0),t(e).then((e=>{h(e),m(!1)}))}),s)),[t,s]);return(0,o.jsx)(r.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:v,onClear:()=>{v(""),a&&a()},notFoundContent:c?(0,o.jsx)(u.A,{size:"small"}):"no results",...d,options:p,onFocus:()=>{p.length&&!i||v("")}})}},20324:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});s(9950);var n=s(28429),a=s(85923),l=s(59233),r=s(23263),u=s(91854),o=s(74623),i=s(70030),d=s(96591),c=s(39095),m=s(10557),p=s(44414);const h=()=>{const{t:e}=(0,i.B)(),{activeMenu:t}=(0,u.d4)((e=>e.menu),u.bN),[s]=l.A.useForm(),h=(0,u.wA)(),v=(0,n.Zp)();return(0,p.jsx)(r.A,{title:e("add.bonus"),className:"h-100",children:(0,p.jsx)(m.A,{form:s,handleSubmit:s=>{const n="seller/bonus/product";return c.A.create(s).then((()=>{a.oR.success(e("successfully.created")),(0,u.vA)((()=>{h((0,o.EK)({...t,nextUrl:n})),h((0,d.q)({}))})),v("/".concat(n))}))}})})}},10557:(e,t,s)=>{s.d(t,{A:()=>j});var n=s(9950),a=s(70030),l=s(91854),r=s(59233),u=s(87094),o=s(41988),i=s(40577),d=s(86971),c=s(25933),m=s(48538),p=s(47992),h=s(67231),v=s(74623),x=s(59051),b=s.n(x),A=s(44414);function j(e){let{form:t,handleSubmit:s}=e;const{t:x}=(0,a.B)(),{activeMenu:j}=(0,l.d4)((e=>e.menu),l.bN),k=(0,l.wA)(),[f,y]=(0,n.useState)(!1),q=e=>{const t={search:e,page:1,perPage:20};return h.A.getStock(t).then((e=>{let{data:t}=e;return null===t||void 0===t?void 0:t.map((e=>{var t,s,n,a;return{label:(null===e||void 0===e||null===(t=e.product)||void 0===t||null===(s=t.translation)||void 0===s?void 0:s.title)+"".concat((null===e||void 0===e||null===(n=e.extras)||void 0===n?void 0:n.length)>0?": ".concat(null===e||void 0===e||null===(a=e.extras)||void 0===a?void 0:a.map((e=>{var t;return null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.value})).join(", ")):""),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))};(0,n.useEffect)((()=>()=>{const e=t.getFieldsValue(!0),s={...e,expired_at:null===e||void 0===e?void 0:e.expired_at};k((0,v.Ok)({activeMenu:j,data:s}))}),[]);return(0,A.jsxs)(r.A,{form:t,name:"product_bonus_form",layout:"vertical",onFinish:e=>{var t,n;y(!0);const a={stock_id:null===(t=e.stock)||void 0===t?void 0:t.value,value:e.stock_quantity,bonus_stock_id:null===(n=e.bonus_stock)||void 0===n?void 0:n.value,bonus_quantity:e.bonus_stock_quantity,expired_at:b()(e.expired_at).format("YYYY-MM-DD"),status:e.status,type:"count"};s(a).finally((()=>y(!1)))},initialValues:{status:!0,...j.data},children:[(0,A.jsxs)(u.A,{gutter:12,children:[(0,A.jsx)(o.A,{span:12,children:(0,A.jsx)(r.A.Item,{label:x("products.stock"),name:"stock",rules:[{required:!0,message:x("required")}],children:(0,A.jsx)(p.G,{fetchOptions:q,placeholder:x("select.product.stock")})})}),(0,A.jsx)(o.A,{span:12,children:(0,A.jsx)(r.A.Item,{label:x("product.stock.quantity"),name:"stock_quantity",rules:[{required:!0,message:x("required")},{type:"number",min:0,message:x("must.be.greater.than.0")}],children:(0,A.jsx)(i.A,{className:"w-100",placeholder:x("input.product.stock.quantity")})})}),(0,A.jsx)(o.A,{span:12,children:(0,A.jsx)(r.A.Item,{label:x("bonus.product.stock"),name:"bonus_stock",rules:[{required:!0,message:x("required")}],children:(0,A.jsx)(p.G,{fetchOptions:q,placeholder:x("select.product.stock")})})}),(0,A.jsx)(o.A,{span:12,children:(0,A.jsx)(r.A.Item,{label:x("bonus.product.stock.quantity"),name:"bonus_stock_quantity",rules:[{required:!0,message:x("required")},{type:"number",min:0,message:x("must.be.greater.than.0")}],children:(0,A.jsx)(i.A,{className:"w-100",placeholder:x("input.bonus.product.stock.quantity")})})}),(0,A.jsx)(o.A,{span:12,children:(0,A.jsx)(r.A.Item,{label:x("expired.at"),name:"expired_at",rules:[{required:!0,message:x("required")}],children:(0,A.jsx)(d.A,{className:"w-100",placeholder:x("select.expired.at"),disabledDate:e=>b()().add(-1,"days")>=e})})}),(0,A.jsx)(o.A,{span:8,children:(0,A.jsx)(r.A.Item,{label:x("active"),name:"status",valuePropName:"checked",children:(0,A.jsx)(c.A,{})})})]}),(0,A.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,A.jsx)("div",{className:"pb-5",children:(0,A.jsx)(m.A,{type:"primary",htmlType:"submit",loading:f,children:x("submit")})})})]})}}}]);