"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[813],{47992:(e,t,n)=>{n.d(t,{G:()=>d});var a=n(9950),l=n(95491),i=n.n(l),s=n(99674),r=n(90650),o=n(44414);const d=e=>{let{fetchOptions:t,debounceTimeout:n=400,onClear:l,refetchOptions:d=!1,...c}=e;const[u,m]=(0,a.useState)(!1),[h,p]=(0,a.useState)([]),v=(0,a.useMemo)((()=>i()((e=>{p([]),m(!0),t(e).then((e=>{p(e),m(!1)}))}),n)),[t,n]);return(0,o.jsx)(s.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:v,onClear:()=>{v(""),l&&l()},notFoundContent:u?(0,o.jsx)(r.A,{size:"small"}):"no results",...c,options:h,onFocus:()=>{h.length&&!d||v("")}})}},90813:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var a=n(9950),l=n(88565),i=n(86366),s=n(23263),r=n(60837),o=n(27720),d=n(3678),c=n(71999),u=n(91854),m=n(70030),h=n(44414);const{Step:p}=i.A,v=()=>{var e;const{t:t}=(0,m.B)(),{activeMenu:n}=(0,u.d4)((e=>e.menu),u.bN),[v,x]=(0,a.useState)((null===(e=n.data)||void 0===e?void 0:e.step)||0),j=()=>{x(v+1)},A=()=>{x(v-1)};return(0,h.jsxs)(s.A,{title:t("addon.add"),extra:(0,h.jsx)(c.A,{}),children:[(0,h.jsx)(i.A,{current:v,children:l.C.map((e=>(0,h.jsx)(p,{title:t(e.title)},e.title)))}),(0,h.jsxs)("div",{className:"steps-content",children:["First-content"===l.C[v].content&&(0,h.jsx)(d.A,{next:j}),"Third-content"===l.C[v].content&&(0,h.jsx)(o.A,{next:j,prev:A}),"Finish-content"===l.C[v].content&&(0,h.jsx)(r.A,{prev:A})]})]})}},60837:(e,t,n)=>{n.d(t,{A:()=>v});var a=n(9950),l=n(91524),i=n(80737),s=n(48538),r=n(90650),o=n(91854),d=n(28429),c=n(74623),u=n(70030),m=n(47933),h=n(14863),p=n(44414);const v=e=>{var t,n,v;let{prev:x}=e;const{t:j}=(0,u.B)(),{activeMenu:A}=(0,o.d4)((e=>e.menu),o.bN),{defaultLang:f,languages:b}=(0,o.d4)((e=>e.formLang),o.bN),y=(0,d.Zp)(),g=(0,o.wA)(),[k,q]=(0,a.useState)({}),[w,I]=(0,a.useState)(null),{uuid:N}=(0,d.g)(),{params:C}=(0,o.d4)((e=>e.addons),o.bN);function E(e){if(null===e||void 0===e||!e.translations)return{};const{translations:t}=e,n=b.map((e=>{var n,a;return{["title[".concat(e.locale,"]")]:null===(n=t.find((t=>t.locale===e.locale)))||void 0===n?void 0:n.title,["description[".concat(e.locale,"]")]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.description}}));return Object.assign({},...n)}return(0,a.useEffect)((()=>{!function(e){I(!0),m.A.getById(e).then((e=>{const t={...e.data,...E(e.data),properties:e.data.properties.map(((e,t)=>({id:t,["key[".concat(e.locale,"]")]:e.key,["value[".concat(e.locale,"]")]:e.value}))),translation:void 0,translations:void 0};q(t)})).finally((()=>I(!1)))}(N)}),[]),w?(0,p.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,p.jsx)(r.A,{size:"large",className:"py-5"})}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(l.A,{title:j("product.info"),bordered:!0,children:[(0,p.jsx)(l.A.Item,{label:"".concat(j("title")," (").concat(f,")"),span:3,children:k["title[".concat(f,"]")]}),(0,p.jsx)(l.A.Item,{label:"".concat(j("description")," (").concat(f,")"),span:3,children:k["description[".concat(f,"]")]}),(0,p.jsx)(l.A.Item,{label:j("shop"),span:1.5,children:null===(t=k.shop)||void 0===t?void 0:t.translation.title}),(0,p.jsx)(l.A.Item,{label:j("unit"),span:1.5,children:null===(n=k.unit)||void 0===n?void 0:n.translation.title}),(0,p.jsx)(l.A.Item,{label:j("tax"),children:k.tax}),(0,p.jsx)(l.A.Item,{label:j("min.quantity"),children:k.min_qty}),(0,p.jsx)(l.A.Item,{label:j("max.quantity"),children:k.max_qty})]}),null===(v=k.stocks)||void 0===v?void 0:v.map(((e,t)=>e?(0,p.jsxs)(l.A,{bordered:!0,className:"mt-4",children:[(0,p.jsx)(l.A.Item,{label:j("price"),span:2,children:e.price}),(0,p.jsx)(l.A.Item,{label:j("quantity"),span:2,children:e.quantity}),e.extras.map(((e,t)=>{var n,a;return(0,p.jsx)(l.A.Item,{label:null===e||void 0===e||null===(n=e.group)||void 0===n||null===(a=n.translation)||void 0===a?void 0:a.title,children:null===e||void 0===e?void 0:e.value},"extra"+t)}))]},"desc"+t):"")),(0,p.jsx)("div",{className:"d-flex justify-content-end mt-4",children:(0,p.jsxs)(i.A,{wrap:!0,children:[(0,p.jsx)(s.A,{onClick:x,children:j("prev")}),(0,p.jsx)(s.A,{type:"primary",onClick:function(){const e={status:void 0,...C},t="catalog/addons";g((0,c.EK)({...A,nextUrl:t})),g((0,h.uC)(e)),y("/".concat(t))},children:j("finish")})]})})]})}},3678:(e,t,n)=>{n.d(t,{A:()=>k});var a=n(9950),l=n(59233),i=n(87094),s=n(41988),r=n(23263),o=n(55902),d=n(40577),c=n(25933),u=n(99674),m=n(48538),h=n(47992),p=n(58547),v=n(91854),x=n(47933),j=n(74623),A=n(63010),f=n(28429),b=n(70030),y=n(15249),g=n(44414);const k=e=>{let{next:t,action_type:n=""}=e;const{t:k}=(0,b.B)(),[q]=l.A.useForm(),w=(0,v.wA)(),{uuid:I}=(0,f.g)(),N=(0,f.Zp)(),[C,E]=(0,a.useState)(null),{activeMenu:F}=(0,v.d4)((e=>e.menu),v.bN),{defaultLang:P,languages:S}=(0,v.d4)((e=>e.formLang),v.bN),[M,O]=(0,a.useState)(!1),[_,B]=(0,a.useState)([]);(0,a.useEffect)((()=>()=>{const e=q.getFieldsValue(!0);w((0,j.Ok)({activeMenu:F,data:{...F.data,...e}}))}),[]);return(0,a.useEffect)((()=>{A.A.getAll({perPage:100,page:1,active:1}).then((e=>{let{data:t}=e;return B(function(e){return e.map((e=>{var t;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id}}))}(t))}))}),[]),(0,g.jsxs)(l.A,{layout:"vertical",form:q,initialValues:{active:!0,...F.data},onFinish:e=>{var a,l;O(!0);const i={...e,min_qty:1,max_qty:1e3,active:Number(e.active),shop_id:null===(a=e.shop)||void 0===a?void 0:a.value,unit_id:null===(l=e.unit)||void 0===l?void 0:l.value,unit:void 0,addon:Number(1),shop:void 0};"edit"===n?function(e,n){x.A.update(I,n).then((()=>{w((0,j.Ok)({activeMenu:F,data:e})),t()})).catch((e=>E(e.response.data.params))).finally((()=>O(!1)))}(e,i):function(e,t){x.A.create(t).then((t=>{let{data:n}=t;w((0,j.W6)({id:"product-".concat(n.uuid),url:"product/".concat(n.uuid),name:k("add.product"),data:e,refetch:!1})),N("/addon/".concat(n.uuid,"?step=1"))})).catch((e=>E(e.response.data.params))).finally((()=>O(!1)))}(e,i)},className:"addon-menu",children:[(0,g.jsxs)(i.A,{gutter:12,children:[(0,g.jsx)(s.A,{xs:24,sm:24,md:16,children:(0,g.jsx)(r.A,{title:k("basic.info"),children:(0,g.jsxs)(i.A,{gutter:24,children:[(0,g.jsx)(s.A,{span:24,children:S.map((e=>(0,g.jsx)(l.A.Item,{label:k("name"),name:"title[".concat(e.locale,"]"),rules:[{validator:(t,n)=>n||(null===e||void 0===e?void 0:e.locale)!==P?n&&""===(null===n||void 0===n?void 0:n.trim())?Promise.reject(new Error(k("no.empty.space"))):n&&(null===n||void 0===n?void 0:n.trim().length)<2?Promise.reject(new Error(k("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(k("required")))}],hidden:e.locale!==P,children:(0,g.jsx)(o.A,{})},"name"+e.id)))}),(0,g.jsx)(s.A,{span:24,children:S.map((e=>(0,g.jsx)(l.A.Item,{label:k("description"),name:"description[".concat(e.locale,"]"),rules:[{validator:(t,n)=>n||(null===e||void 0===e?void 0:e.locale)!==P?n&&""===(null===n||void 0===n?void 0:n.trim())?Promise.reject(new Error(k("no.empty.space"))):n&&(null===n||void 0===n?void 0:n.trim().length)<5?Promise.reject(new Error(k("must.be.at.least.5"))):Promise.resolve():Promise.reject(new Error(k("required")))}],hidden:e.locale!==P,children:(0,g.jsx)(y.A,{rows:4,span:4})},"description"+e.id)))}),(0,g.jsx)(s.A,{span:12,children:(0,g.jsx)(l.A.Item,{label:k("tax"),name:"tax",rules:[{validator:(e,t)=>t||0===t?t&&(t<0||t>100)?Promise.reject(new Error(k("must.be.between.0.and.100"))):Promise.resolve():Promise.reject(new Error(k("required")))}],children:(0,g.jsx)(d.A,{className:"w-100",addonAfter:"%"})})}),(0,g.jsx)(s.A,{span:12,children:(0,g.jsx)(l.A.Item,{label:k("active"),name:"active",valuePropName:"checked",children:(0,g.jsx)(c.A,{})})})]})})}),(0,g.jsxs)(s.A,{xs:24,sm:24,md:8,children:[(0,g.jsx)(r.A,{title:k("shop/restaurant"),children:(0,g.jsx)(l.A.Item,{name:"shop",rules:[{required:!0,message:k("required")}],children:(0,g.jsx)(h.G,{fetchOptions:async function(e){const t={search:e};return p.A.get(t).then((e=>e.data.map((e=>({label:e.translation?e.translation.title:"no name",value:e.id})))))},disabled:"edit"===n})})}),(0,g.jsx)(r.A,{title:k("addition"),children:(0,g.jsx)(l.A.Item,{label:k("unit"),name:"unit",rules:[{required:!0,message:k("required")}],children:(0,g.jsx)(u.A,{labelInValue:!0,filterOption:!1,options:_})})})]})]}),(0,g.jsx)(m.A,{type:"primary",htmlType:"submit",loading:M,children:k("next")})]})}},27720:(e,t,n)=>{n.d(t,{A:()=>j});var a=n(9950),l=n(59233),i=n(87094),s=n(41988),r=n(40577),o=n(55902),d=n(80737),c=n(48538),u=n(91854),m=n(47933),h=n(70030),p=n(28429),v=n(74623),x=n(44414);const j=e=>{let{prev:t,next:n,current:j}=e;const{t:A}=(0,h.B)(),[f]=l.A.useForm(),{uuid:b}=(0,p.g)(),{activeMenu:y}=(0,u.d4)((e=>e.menu),u.bN),[g,k]=(0,a.useState)(null),q=(0,u.wA)();return(0,a.useEffect)((()=>{var e,t,n,a,l,i;q((0,v.Ms)(y)),f.setFieldsValue({price:null!==(e=y.data)&&void 0!==e&&null!==(t=e.stocks)&&void 0!==t&&t.length?y.data.stocks[0].price:[],quantity:null!==(n=y.data)&&void 0!==n&&null!==(a=n.stocks)&&void 0!==a&&a.length?y.data.stocks[0].quantity:[],sku:null!==(l=y.data)&&void 0!==l&&null!==(i=l.stocks)&&void 0!==i&&i.length?y.data.stocks[0].sku:[]})}),[]),(0,x.jsxs)(l.A,{layout:"vertical",form:f,onFinish:e=>{let t;k(!0),t=[{price:e.price,quantity:e.quantity,sku:e.sku}],m.A.stocks(b,{extras:t}).then((()=>n())).finally((()=>k(!1)))},children:[(0,x.jsxs)(i.A,{gutter:12,align:"middle",style:{flexWrap:"nowrap",overflowX:"auto"},children:[(0,x.jsx)(s.A,{children:(0,x.jsx)(l.A.Item,{label:A("price"),name:"price",rules:[{required:!0,message:A("required")}],children:(0,x.jsx)(r.A,{min:0,className:"w-100",style:{minWidth:200}})})}),(0,x.jsx)(s.A,{children:(0,x.jsx)(l.A.Item,{label:A("quantity"),name:"quantity",rules:[{required:!0,message:A("required")}],children:(0,x.jsx)(r.A,{min:1,className:"w-100",style:{minWidth:200}})})}),(0,x.jsx)(s.A,{children:(0,x.jsx)(l.A.Item,{label:A("sku"),name:"sku",children:(0,x.jsx)(o.A,{style:{minWidth:200}})})})]}),(0,x.jsxs)(d.A,{className:"mt-4",children:[(0,x.jsx)(c.A,{onClick:t,children:A("prev")}),(0,x.jsx)(c.A,{type:"primary",htmlType:"submit",loading:!!g,children:A("next")})]})]})}},88565:(e,t,n)=>{n.d(t,{C:()=>a});const a=[{title:"addons",content:"First-content"},{title:"stocks",content:"Third-content"},{title:"finish",content:"Finish-content"}]}}]);