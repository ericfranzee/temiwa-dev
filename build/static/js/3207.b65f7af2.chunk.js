"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[3207],{47992:(e,t,l)=>{l.d(t,{G:()=>d});var n=l(9950),o=l(95491),s=l.n(o),u=l(99674),i=l(90650),a=l(44414);const d=e=>{let{fetchOptions:t,debounceTimeout:l=400,onClear:o,refetchOptions:d=!1,...r}=e;const[c,v]=(0,n.useState)(!1),[p,m]=(0,n.useState)([]),h=(0,n.useMemo)((()=>s()((e=>{m([]),v(!0),t(e).then((e=>{m(e),v(!1)}))}),l)),[t,l]);return(0,a.jsx)(u.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:h,onClear:()=>{h(""),o&&o()},notFoundContent:c?(0,a.jsx)(i.A,{size:"small"}):"no results",...r,options:p,onFocus:()=>{p.length&&!d||h("")}})}},33207:(e,t,l)=>{l.r(t),l.d(t,{default:()=>k});var n=l(9950),o=l(28429),s=l(85923),u=l(59233),i=l(23263),a=l(91854),d=l(74623),r=l(70030),c=l(59051),v=l.n(c),p=l(96591),m=l(39095),h=l(81446),x=l(10557),b=l(44414);const k=()=>{const{t:e}=(0,r.B)(),{activeMenu:t}=(0,a.d4)((e=>e.menu),a.bN),l=(0,a.wA)(),[c]=u.A.useForm(),k=(0,o.Zp)(),[j,A]=(0,n.useState)(!1),{id:f}=(0,o.g)();const y=e=>{A(!0),m.A.getById(e).then((e=>function(e){var n,o,s,u,i,a,r,p,m,h,x,b,k,j,f,y,_,g;const q={status:null===e||void 0===e?void 0:e.status,expired_at:v()(null===e||void 0===e?void 0:e.expired_at,"YYYY-MM-DD"),stock:{label:(null===e||void 0===e||null===(n=e.stock)||void 0===n||null===(o=n.product)||void 0===o||null===(s=o.translation)||void 0===s?void 0:s.title)+"".concat((null===e||void 0===e||null===(u=e.stock)||void 0===u||null===(i=u.extras)||void 0===i?void 0:i.length)>0?": ".concat(null===e||void 0===e||null===(a=e.stock)||void 0===a||null===(r=a.extras)||void 0===r?void 0:r.map((e=>{var t;return null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.value})).join(", ")):""),value:null===e||void 0===e||null===(p=e.stock)||void 0===p?void 0:p.id,key:null===e||void 0===e||null===(m=e.stock)||void 0===m?void 0:m.id},stock_quantity:null===e||void 0===e?void 0:e.value,bonus_stock:{label:(null===e||void 0===e||null===(h=e.bonusStock)||void 0===h||null===(x=h.product)||void 0===x||null===(b=x.translation)||void 0===b?void 0:b.title)+"".concat((null===e||void 0===e||null===(k=e.bonusStock)||void 0===k||null===(j=k.extras)||void 0===j?void 0:j.length)>0?": ".concat(null===e||void 0===e||null===(f=e.bonusStock)||void 0===f||null===(y=f.extras)||void 0===y?void 0:y.map((e=>{var t;return null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.value})).join(", ")):""),value:null===e||void 0===e||null===(_=e.bonusStock)||void 0===_?void 0:_.id,key:null===e||void 0===e||null===(g=e.bonusStock)||void 0===g?void 0:g.id},bonus_stock_quantity:null===e||void 0===e?void 0:e.bonus_quantity};console.log("data",q),c.setFieldsValue(q),l((0,d.Ok)({activeMenu:t,data:{...q,expired_at:null===e||void 0===e?void 0:e.expired_at}})),A(!1)}(e.data))).finally((()=>l((0,d.km)(t))))};(0,n.useEffect)((()=>{t.refetch&&y(f)}),[t.refetch]);return(0,b.jsx)(i.A,{title:e("edit.bonus"),className:"h-100",children:j?(0,b.jsx)(h.A,{}):(0,b.jsx)(x.A,{form:c,handleSubmit:n=>{const o="seller/bonus/product";return m.A.update(f,n).then((()=>{s.oR.success(e("successfully.created")),(0,a.vA)((()=>{l((0,d.EK)({...t,nextUrl:o})),l((0,p.q)({}))})),k("/".concat(o))}))}})})}},10557:(e,t,l)=>{l.d(t,{A:()=>j});var n=l(9950),o=l(70030),s=l(91854),u=l(59233),i=l(87094),a=l(41988),d=l(40577),r=l(86971),c=l(25933),v=l(48538),p=l(47992),m=l(67231),h=l(74623),x=l(59051),b=l.n(x),k=l(44414);function j(e){let{form:t,handleSubmit:l}=e;const{t:x}=(0,o.B)(),{activeMenu:j}=(0,s.d4)((e=>e.menu),s.bN),A=(0,s.wA)(),[f,y]=(0,n.useState)(!1),_=e=>{const t={search:e,page:1,perPage:20};return m.A.getStock(t).then((e=>{let{data:t}=e;return null===t||void 0===t?void 0:t.map((e=>{var t,l,n,o;return{label:(null===e||void 0===e||null===(t=e.product)||void 0===t||null===(l=t.translation)||void 0===l?void 0:l.title)+"".concat((null===e||void 0===e||null===(n=e.extras)||void 0===n?void 0:n.length)>0?": ".concat(null===e||void 0===e||null===(o=e.extras)||void 0===o?void 0:o.map((e=>{var t;return null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.value})).join(", ")):""),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))};(0,n.useEffect)((()=>()=>{const e=t.getFieldsValue(!0),l={...e,expired_at:null===e||void 0===e?void 0:e.expired_at};A((0,h.Ok)({activeMenu:j,data:l}))}),[]);return(0,k.jsxs)(u.A,{form:t,name:"product_bonus_form",layout:"vertical",onFinish:e=>{var t,n;y(!0);const o={stock_id:null===(t=e.stock)||void 0===t?void 0:t.value,value:e.stock_quantity,bonus_stock_id:null===(n=e.bonus_stock)||void 0===n?void 0:n.value,bonus_quantity:e.bonus_stock_quantity,expired_at:b()(e.expired_at).format("YYYY-MM-DD"),status:e.status,type:"count"};l(o).finally((()=>y(!1)))},initialValues:{status:!0,...j.data},children:[(0,k.jsxs)(i.A,{gutter:12,children:[(0,k.jsx)(a.A,{span:12,children:(0,k.jsx)(u.A.Item,{label:x("products.stock"),name:"stock",rules:[{required:!0,message:x("required")}],children:(0,k.jsx)(p.G,{fetchOptions:_,placeholder:x("select.product.stock")})})}),(0,k.jsx)(a.A,{span:12,children:(0,k.jsx)(u.A.Item,{label:x("product.stock.quantity"),name:"stock_quantity",rules:[{required:!0,message:x("required")},{type:"number",min:0,message:x("must.be.greater.than.0")}],children:(0,k.jsx)(d.A,{className:"w-100",placeholder:x("input.product.stock.quantity")})})}),(0,k.jsx)(a.A,{span:12,children:(0,k.jsx)(u.A.Item,{label:x("bonus.product.stock"),name:"bonus_stock",rules:[{required:!0,message:x("required")}],children:(0,k.jsx)(p.G,{fetchOptions:_,placeholder:x("select.product.stock")})})}),(0,k.jsx)(a.A,{span:12,children:(0,k.jsx)(u.A.Item,{label:x("bonus.product.stock.quantity"),name:"bonus_stock_quantity",rules:[{required:!0,message:x("required")},{type:"number",min:0,message:x("must.be.greater.than.0")}],children:(0,k.jsx)(d.A,{className:"w-100",placeholder:x("input.bonus.product.stock.quantity")})})}),(0,k.jsx)(a.A,{span:12,children:(0,k.jsx)(u.A.Item,{label:x("expired.at"),name:"expired_at",rules:[{required:!0,message:x("required")}],children:(0,k.jsx)(r.A,{className:"w-100",placeholder:x("select.expired.at"),disabledDate:e=>b()().add(-1,"days")>=e})})}),(0,k.jsx)(a.A,{span:8,children:(0,k.jsx)(u.A.Item,{label:x("active"),name:"status",valuePropName:"checked",children:(0,k.jsx)(c.A,{})})})]}),(0,k.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,k.jsx)("div",{className:"pb-5",children:(0,k.jsx)(v.A,{type:"primary",htmlType:"submit",loading:f,children:x("submit")})})})]})}}}]);