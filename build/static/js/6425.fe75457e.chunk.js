"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[6425],{8297:(e,t,l)=>{l.d(t,{A:()=>c});var a=l(9950),i=l(55902),n=l(41397),s=l(60767),d=l(44414);function c(e){let{handleChange:t,defaultValue:l,resetSearch:c,...o}=e;const[r,u]=(0,a.useState)(l),v=(0,a.useMemo)((()=>(0,n.debounce)((e=>{t(e)}),800)),[]);return(0,a.useEffect)((()=>{u(l)}),[c]),(0,d.jsx)(i.A,{value:r,onChange:e=>{u(e.target.value),v(e.target.value)},prefix:(0,d.jsx)(s.A,{}),...o})}},6425:(e,t,l)=>{l.r(t),l.d(t,{default:()=>F});var a=l(9950),i=l(25933),n=l(80737),s=l(48538),d=l(23263),c=l(52913),o=l(55386),r=l(91854),u=l(74623),v=l(85923),h=l(70030),A=l(61621),g=l(8297),p=l(88986),x=l(2905),f=l(28429),j=l(59233),y=l(82706),m=l(90650),b=l(87094),k=l(41988),C=l(55902),S=l(71999),I=l(44414);function w(e){let{visible:t,setVisible:l,id:n,setId:d}=e;const[c]=j.A.useForm(),o=(0,r.wA)(),{t:u}=(0,h.B)(),{defaultLang:g,languages:p}=(0,r.d4)((e=>e.formLang),r.bN),[f,w]=(0,a.useState)(!1),[V,z]=(0,a.useState)(!1),[F,O]=(0,a.useState)(null),R=()=>{O(null),l(!1),c.resetFields(),d(null)};function _(e){if(null===e||void 0===e||!e.translations)return{};const{translations:t}=e,l=p.map((e=>{var l;return{["title[".concat(e.locale,"]")]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.title}}));return Object.assign({},...l)}return(0,a.useEffect)((()=>{n&&(z(!0),x.A.show(n).then((e=>{let{data:t}=e;O(t),c.setFieldsValue({active:null===t||void 0===t?void 0:t.active,..._(t)})})).finally((()=>z(!1))))}),[n]),(0,I.jsx)(y.A,{visible:t,onCancel:R,onOk:R,footer:null,loading:V,title:u("add.region"),children:(0,I.jsxs)(j.A,{form:c,onFinish:e=>{w(!0),null!==F&&void 0!==F&&F.id?(e=>{x.A.update(F.id,{active:e.active,title:{...Object.assign({},...p.map((t=>({[t.locale]:e["title[".concat(t.locale,"]")]}))))}}).then((()=>{v.oR.success(u("successfully.updated")),(0,r.vA)((()=>{o((0,A.l)({}))})),l(!1),c.resetFields(),O(null)})).finally((()=>w(!1)))})(e):(e=>{x.A.create({active:e.active,title:{...Object.assign({},...p.map((t=>({[t.locale]:e["title[".concat(t.locale,"]")]}))))}}).then((()=>{v.oR.success(u("successfully.added")),(0,r.vA)((()=>{o((0,A.l)({}))})),l(!1),c.resetFields(),O(null)})).finally((()=>w(!1)))})(e)},layout:"vertical",initialValues:{active:!0},children:[(0,I.jsx)(m.A,{spinning:V,children:(0,I.jsxs)(b.A,{gutter:24,children:[(0,I.jsx)(k.A,{span:24,children:(0,I.jsx)(S.A,{})}),(0,I.jsx)(k.A,{span:24,children:p.map((e=>(0,I.jsx)(j.A.Item,{label:u("title"),name:"title[".concat(e.locale,"]"),hidden:e.locale!==g,rules:[{required:(null===e||void 0===e?void 0:e.locale)===g,message:u("required")}],children:(0,I.jsx)(C.A,{})},"title"+e.id)))}),(0,I.jsx)(k.A,{span:4,children:(0,I.jsx)(j.A.Item,{label:u("active"),name:"active",valuePropName:"checked",children:(0,I.jsx)(i.A,{defaultChecked:!0})})})]})}),(0,I.jsx)(s.A,{type:"primary",htmlType:"submit",loading:f,children:u("submit")})]})})}var V=l(24513),z=l(44070);const F=()=>{const{t:e}=(0,h.B)(),t=(0,r.wA)(),l=(0,f.Zp)(),{setIsModalVisible:j}=(0,a.useContext)(o.o),{activeMenu:y}=(0,r.d4)((e=>e.menu),r.bN),m=null===y||void 0===y?void 0:y.data,{list:b,meta:k,loading:C}=(0,r.d4)((e=>e.deliveryRegion),r.bN),[S,F]=(0,a.useState)(!1),[O,R]=(0,a.useState)(!1),[_,B]=(0,a.useState)(!1),[M,N]=(0,a.useState)(null),E=[{title:e("id"),dataIndex:"id",key:"id"},{title:e("name"),dataIndex:"translation",key:"translation",render:(a,i)=>(0,I.jsx)("div",{style:{cursor:"pointer",textDecoration:"underline"},onClick:()=>(a=>{t((0,u.X4)({url:"deliveryzone/country?region_id=".concat(a.id),id:"country",name:e("country")})),l("/deliveryzone/country?region_id=".concat(a.id))})(i),children:(null===a||void 0===a?void 0:a.title)||"-"})},{title:e("active"),dataIndex:"active",key:"active",render:(l,a)=>(0,I.jsx)(i.A,{onChange:()=>(l=>{F(l),x.A.status(l).then((()=>{j(!1),t((0,A.l)()),v.oR.success(e("successfully.updated"))})).finally((()=>{F(null)}))})(a.id),checked:l,loading:Boolean(S===a.id)},a.id)},{title:e("options"),dataIndex:"options",is_show:!0,render:(l,a)=>(0,I.jsxs)(n.A,{children:[(0,I.jsx)(s.A,{type:"primary",icon:(0,I.jsx)(V.A,{}),onClick:()=>(e=>{R(!0),N(e)})(a.id)}),(0,I.jsx)(s.A,{loading:Boolean(_===a.id),icon:(0,I.jsx)(z.A,{onClick:()=>(l=>{B(l),x.A.delete(l).then((()=>{t((0,A.l)()),v.oR.success(e("successfully.deleted"))})).finally((()=>{B(!1)}))})(a.id)})})]})}];(0,a.useEffect)((()=>{y.refetch&&(t((0,A.l)()),t((0,u.km)(y)))}),[y.refetch]),(0,p.A)((()=>{const e={search:null===m||void 0===m?void 0:m.search};t((0,A.l)(e))}),[null===y||void 0===y?void 0:y.data]);return(0,I.jsxs)(d.A,{title:e("regions"),extra:(0,I.jsxs)(n.A,{children:[(0,I.jsx)(g.A,{placeholder:e("search"),handleChange:e=>{return l=e,a="search",void t((0,u.Ok)({activeMenu:y,data:{...m,[a]:l}}));var l,a},defaultValue:null===m||void 0===m?void 0:m.search,resetSearch:!(null!==m&&void 0!==m&&m.search)}),(0,I.jsx)(s.A,{type:"primary",onClick:()=>R(!0),children:e("add.region")})]}),children:[(0,I.jsx)(c.A,{columns:E,dataSource:b,pagination:{pageSize:k.per_page,page:k.current_page,total:k.total},rowKey:e=>e.id,loading:C,onChange:e=>{const{pageSize:l,current:a}=e;t((0,A.l)({perPage:l,page:a}))}}),(0,I.jsx)(w,{visible:O,setVisible:R,id:M,setId:N})]})}}}]);