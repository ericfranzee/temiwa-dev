"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[9492],{47992:(e,t,s)=>{s.d(t,{G:()=>o});var a=s(9950),l=s(95491),n=s.n(l),i=s(99674),r=s(90650),c=s(44414);const o=e=>{let{fetchOptions:t,debounceTimeout:s=400,onClear:l,refetchOptions:o=!1,...u}=e;const[d,m]=(0,a.useState)(!1),[h,p]=(0,a.useState)([]),f=(0,a.useMemo)((()=>n()((e=>{p([]),m(!0),t(e).then((e=>{p(e),m(!1)}))}),s)),[t,s]);return(0,c.jsx)(i.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:f,onClear:()=>{f(""),l&&l()},notFoundContent:d?(0,c.jsx)(r.A,{size:"small"}):"no results",...u,options:h,onFocus:()=>{h.length&&!o||f("")}})}},19492:(e,t,s)=>{s.r(t),s.d(t,{default:()=>j});var a=s(9950),l=s(28429),n=s(85923),i=s(59233),r=s(23263),c=s(87094),o=s(41988),u=s(48538),d=s(91854),m=s(74623),h=s(67231),p=s(47992),f=s(70030),x=s(40337),A=s(74115),b=s(48970),g=s(44414);const j=()=>{var e,t;const{t:s}=(0,f.B)(),{activeMenu:j}=(0,d.d4)((e=>e.menu),d.bN),v=(0,d.wA)(),[y]=i.A.useForm(),S=(0,l.Zp)(),{myShop:w}=(0,d.d4)((e=>e.myShop),d.bN),[C,N]=(0,a.useState)(null!==(e=j.data)&&void 0!==e&&e.images?[null===(t=j.data)||void 0===t?void 0:t.images[0]]:[]),[O,k]=(0,a.useState)(!1);(0,a.useEffect)((()=>()=>{const e=y.getFieldsValue(!0);v((0,m.Ok)({activeMenu:j,data:e}))}),[]);return(0,g.jsx)(r.A,{title:s("add.story"),className:"h-100",children:(0,g.jsxs)(i.A,{name:"story-add",layout:"vertical",onFinish:e=>{const t={...Object.assign({},...C.map(((e,t)=>({["file_urls[".concat(t,"]")]:e.name})))),product_id:e.products.value};k(!0);const a="seller/stories";x.A.create(t).then((()=>{const e={shop_id:w.id};n.oR.success(s("successfully.created")),(0,d.vA)((()=>{v((0,m.EK)({...j,nextUrl:a})),v((0,A.I$)(e))})),S("/".concat(a))})).finally((()=>k(!1)))},form:y,initialValues:{active:!0,...j.data},className:"d-flex flex-column h-100",children:[(0,g.jsxs)(c.A,{gutter:12,children:[(0,g.jsx)(o.A,{span:12,children:(0,g.jsx)(i.A.Item,{label:s("products"),name:"products",rules:[{required:!1,message:s("required")}],children:(0,g.jsx)(p.G,{fetchOptions:function(e){const t={search:e,shop_id:w.id,status:"published",active:1,rest:1};return h.A.getAll(t).then((e=>e.data.map((e=>({label:e.translation.title,value:e.id})))))},debounceTimeout:200})})}),(0,g.jsx)(o.A,{span:12,children:(0,g.jsx)(i.A.Item,{label:s("image"),name:"image",rules:[{required:0===C.length,message:s("required")}],children:(0,g.jsx)(b.A,{type:"banners",imageList:C,setImageList:N,form:y,multiple:!1})})})]}),(0,g.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,g.jsx)("div",{className:"pb-5",children:(0,g.jsx)(u.A,{type:"primary",htmlType:"submit",loading:O,children:s("submit")})})})]})})}}}]);