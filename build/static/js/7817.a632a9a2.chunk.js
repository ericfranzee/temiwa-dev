"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[7817],{4587:(e,t,a)=>{a.d(t,{A:()=>h});var s=a(9950),l=a(23263),n=a(39452),i=a(94116),o=a(53439),r=a(44414);const c={position:"absolute",zIndex:"1"},d={position:"absolute",zIndex:"1",right:"0",top:"-2px"},u=e=>{let{title:t,series:a,width:u,height:h,xAxis:v,customOptions:x,card:p,type:m,extra:f,direction:g,bodyClass:y}=e,A=JSON.parse(JSON.stringify((e=>{switch(e){case"line":default:return o.V3;case"bar":return o.ck;case"area":return o.cZ;case"pie":return o.vX}})(m)));const j=window.innerWidth<768,b=()=>{if(_.current){var e;const t=_.current.querySelectorAll("div.apexcharts-legend")[0];t.style.marginRight="".concat(j?0:null===(e=w.current)||void 0===e?void 0:e.offsetWidth,"px"),"rtl"===g&&(t.style.right="auto",t.style.left="0"),j&&(t.style.position="relative",t.style.top=0,t.style.justifyContent="start",t.style.padding=0)}};(0,s.useEffect)((()=>{b()}),[]);const w=(0,s.useRef)(null),_=(0,s.useRef)();A.xaxis={categories:v},x&&(A={...A,...x});const z=()=>(0,r.jsx)(i.Ay,{onResize:void setTimeout((()=>{b()}),600),children:(0,r.jsx)("div",{style:"rtl"===g?{direction:"ltr"}:{},className:"chartRef",ref:_,children:(0,r.jsx)(n.A,{options:A,type:m,series:a,width:u,height:h})})});return(0,r.jsx)(r.Fragment,{children:p?(0,r.jsx)(l.A,{children:(0,r.jsxs)("div",{className:"position-relative ".concat(y),children:[(0,r.jsx)("div",{style:j?{}:c,children:t})&&(0,r.jsx)("h4",{className:"font-weight-bold",style:j?{}:c,children:t}),f&&(0,r.jsx)("div",{ref:w,style:j?{}:d,children:f}),z()]})}):z()})};u.defaultProps={series:[],height:300,width:"100%",card:!0,type:"line"};const h=u},28645:(e,t,a)=>{a.d(t,{A:()=>p});var s=a(9950),l=a(66362),n=a(69216),i=a(80737),o=a(25933),r=a(57811),c=a(81541),d=a(48538),u=a(89323),h=a(70030),v=a(44414);const{Text:x}=l.A,p=e=>{let{columns:t=[],setColumns:a,style:l,size:p="",iconOnly:m}=e;const{t:f}=(0,h.B)(),[g,y]=(0,s.useState)(!1),A=(0,v.jsx)(n.A,{children:null===t||void 0===t?void 0:t.map(((e,s)=>(0,v.jsx)(n.A.Item,{children:(0,v.jsxs)(i.A,{className:"d-flex justify-content-between",children:[(0,v.jsx)(x,{children:e.title}),(0,v.jsx)(o.A,{defaultChecked:!0,onClick:()=>function(e){const s=null===t||void 0===t?void 0:t.map((t=>(t.dataIndex===e.dataIndex&&(t.is_show=!(null!==t&&void 0!==t&&t.is_show)),t)));a(s)}(e),disabled:1===s})]})},e+s)))});return(0,v.jsx)(r.A,{overlay:A,trigger:["click"],onVisibleChange:e=>{y(e)},visible:g,children:(0,v.jsx)(c.A,{title:f("change.columns"),children:(0,v.jsx)(d.A,{style:{...l},size:p,icon:(0,v.jsx)(u.A,{}),children:m?null:f("Columns")})})})}},31397:(e,t,a)=>{a.d(t,{A:()=>y});var s=a(66362),l=a(87094),n=a(41988),i=a(23263),o=a(80737),r=a(99674),c=a(40895),d=a(9950),u=a(27109),h=a(31598),v=a(4587),x=a(53439),p=a(70030),m=a(71795),f=a(44414);const{Title:g}=s.A,y=e=>{let{reportData:t={}}=e;const{by_time:a,options:s,handleByTime:y,chart_type:A,setChartType:j}=(0,d.useContext)(m.M),{t:b}=(0,p.B)(),w=(0,d.useMemo)((()=>{var e;return null===t||void 0===t||null===(e=t.chart)||void 0===e?void 0:e.map((e=>e.time))}),[null===t||void 0===t?void 0:t.chart]),_=(0,d.useMemo)((()=>{var e;return Boolean(t.charts)?t.charts.map((e=>{var t;return{name:e.translation.title,data:(null===(t=e.stocks)||void 0===t?void 0:t.map((e=>e.total_order_quantity||e.avg_quantity||e.quantity||e.count||e.price||e.order_details_sum_quantity||0)))||[]}})):[{name:b("orders"),data:(null===t||void 0===t||null===(e=t.chart)||void 0===e?void 0:e.map((e=>parseInt(e.count||e.total_price||e.quantity||e.price||e.products_count||e.order_details_avg_quantity||e.order_details_avg_total_price||e.order_details_sum_quantity||e.avg_price||e.avg_quantity||0,10))))||[]}]}),[null===t||void 0===t?void 0:t.chart]);return(0,f.jsx)(l.A,{gutter:24,children:(0,f.jsx)(n.A,{span:24,children:(0,f.jsxs)(i.A,{children:[(0,f.jsx)(l.A,{gutter:24,className:"w-100",children:(0,f.jsxs)("div",{className:"d-flex justify-content-between w-100",children:[(0,f.jsx)(o.A,{size:"large",className:"d-flex",children:(0,f.jsx)(g,{level:3,className:"mb-0",children:b("item.sold")})}),(0,f.jsxs)("div",{className:"d-flex",children:[(0,f.jsx)(r.A,{style:{width:100},onChange:y,options:s,defaultValue:a}),(0,f.jsx)(c.A,{type:"vertical",style:{height:"100%"}}),(0,f.jsxs)(o.A,{children:[(0,f.jsx)(u.A,{style:{fontSize:"22px",cursor:"pointer",color:"area"===A?"green":""},onClick:()=>j("area")}),(0,f.jsx)(h.A,{style:{fontSize:"22px",cursor:"pointer",color:"bar"===A?"green":""},onClick:()=>j("bar")})]})]})]})}),(0,f.jsx)(c.A,{}),(0,f.jsx)(v.A,{type:A||"area",card:!1,series:_,xAxis:w,height:280,customOptions:{colors:[x.lm[1],x.lm[2],x.lm[3],x.lm[4],x.lm[5],x.lm[6],x.lm[0]],legend:{show:!1},stroke:{width:2.5,curve:"smooth"}}})]})})})}},53439:(e,t,a)=>{a.d(t,{V3:()=>l,cZ:()=>n,ck:()=>i,lm:()=>s,vX:()=>o});const s=["#3e82f7","#04d182","#ff6b72","#ffc107","#a461d8","#fa8c16","#17bcff"],l={chart:{zoom:{enabled:!1},toolbar:{show:!1}},colors:[...s],dataLabels:{enabled:!1},stroke:{width:3,curve:"smooth",lineCap:"round"},legend:{position:"top",horizontalAlign:"right",offsetY:-15,itemMargin:{vertical:20},tooltipHoverFormatter:function(e,t){return e+" - "+t.w.globals.series[t.seriesIndex][t.dataPointIndex]}},xaxis:{categories:[]},grid:{xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}}},n={...l},i={chart:{zoom:{enabled:!1},toolbar:{show:!1}},plotOptions:{bar:{horizontal:!1,columnWidth:"25px",startingShapre:"rounded",endingShape:"rounded"}},colors:[...s],dataLabels:{enabled:!1},stroke:{show:!0,width:6,curve:"smooth",colors:["transparent"]},legend:{position:"top",horizontalAlign:"right",offsetY:-15,inverseOrder:!0,itemMargin:{vertical:20},tooltipHoverFormatter:function(e,t){return e+" - "+t.w.globals.series[t.seriesIndex][t.dataPointIndex]}},xaxis:{categories:[]},fill:{opacity:1},tooltip:{y:{formatter:e=>"".concat(e)}}},o={colors:[...s],plotOptions:{pie:{size:200,donut:{labels:{show:!0,total:{show:!1,showAlways:!0,label:"",fontSize:"18px",fontFamily:"Roboto",fontWeight:"bold",color:"#1a3353",formatter:function(e){return e.globals.seriesTotals.reduce(((e,t)=>e+t),0)+"Orders count"}}},size:"100%"}}},labels:[],dataLabels:{enabled:!0},legend:{show:!0}}},53774:(e,t,a)=>{function s(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const a=Number(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===t?"".concat(a," ").concat(e):"".concat(e," ").concat(a)}a.r(t),a.d(t,{default:()=>s})},47817:(e,t,a)=>{a.r(t),a.d(t,{default:()=>R});var s=a(66362),l=a(86971),n=a(12916),i=a(90650),o=a(87094),r=a(41988),c=a(80737),d=a(23263),u=a(48538),h=a(52913),v=a(9950),x=a(40841),p=a(19973),m=a(74623),f=a(91854),g=a(59051),y=a.n(g),A=a(71795),j=a(28645),b=a(88986),w=a(28429),_=a(21215),z=a.n(_),C=a(74635),k=a(53774),q=a(96722),N=a(31397),S=a(44414);const{Text:V,Title:H}=s.A,{RangePicker:I}=l.A,R=()=>{const e=(0,f.wA)(),t=(0,w.zy)(),a=z().parse(t.search,[])["?category_id"],l=z().parse(t.search,[])["?product_id"],{date_from:g,date_to:_,by_time:R,chart:M,handleChart:O,handleDateRange:T}=(0,v.useContext)(A.M),{activeMenu:B}=(0,f.d4)((e=>e.menu),f.bN),{loading:L,chartData:E,extrasList:P}=(0,f.d4)((e=>e.extrasReport),f.bN),[F,D]=(0,v.useState)([]),[W,J]=(0,v.useState)(!1),[K,X]=(0,v.useState)(""),{defaultCurrency:Y}=(0,f.d4)((e=>e.currency),f.bN),[Z,$]=(0,v.useState)([{title:(0,C.t)("title"),dataIndex:"translation_title",key:"translation_title",render:(e,t)=>null===t||void 0===t?void 0:t.title,is_show:!0,sorter:(e,t)=>{var a,s;return null===e||void 0===e||null===(a=e.translation)||void 0===a?void 0:a.title.localeCompare(null===t||void 0===t||null===(s=t.translation)||void 0===s?void 0:s.title)}},{title:(0,C.t)("order.count"),key:"count",dataIndex:"count",is_show:!0,sorter:(e,t)=>e.quantity-t.quantity},{title:(0,C.t)("price"),dataIndex:"price",key:"price",is_show:!0,render:(e,t)=>(0,k.default)(null===t||void 0===t?void 0:t.total_price,null===Y||void 0===Y?void 0:Y.symbol,null===Y||void 0===Y?void 0:Y.position),sorter:(e,t)=>e.price-t.price},{title:(0,C.t)("quantity"),key:"quantity",dataIndex:"quantity",is_show:!0,sorter:(e,t)=>e.quantity-t.quantity},{title:(0,C.t)("status"),key:"active",dataIndex:"active",render:(e,t)=>{const a=Boolean(null===t||void 0===t?void 0:t.active);return(0,S.jsx)(n.A,{color:a?"green":"red",children:a?"Active":"Inactive"},t.id)},is_show:!0}]),G=(0,v.useMemo)((()=>[{label:"item.sold",value:"avg_quantity",qty:"quantity",price:!1},{label:"net.sales",value:"price",qty:"price",price:!0},{label:"Orders",value:"count",qty:"count",price:!1}]),[]),Q=()=>{const t={date_from:g,date_to:_,type:R,chart:M};a&&(t.categories=[a]),l&&(t.products=[l]),e((0,q.sJ)(t))},U=(t,s)=>{const n={date_from:g,date_to:_,type:R,page:t,perPage:s,search:K||null};a&&(n.categories=[a]),l&&(n.products=[l]),e((0,q.C0)(n))};(0,v.useEffect)((()=>{O(G[0].value)}),[]),(0,v.useEffect)((()=>{B.refetch&&(U(),Q(),e((0,m.km)(B)))}),[B.refetch]),(0,b.A)((()=>{U()}),[_,K,a,l,g]),(0,b.A)((()=>{Q()}),[_,R,M,a,l,g]);const ee={selectedRowKeys:F,onChange:e=>{D(e)}};return(0,S.jsxs)(i.A,{size:"large",spinning:L,children:[(0,S.jsx)(o.A,{gutter:24,className:"mb-3",children:(0,S.jsx)(r.A,{span:12,children:(0,S.jsx)(c.A,{size:"large",children:(0,S.jsx)(I,{defaultValue:[y()(g),y()(_)],onChange:T})})})}),(0,S.jsx)(o.A,{gutter:24,className:"report-products",children:null===G||void 0===G?void 0:G.map((e=>(0,S.jsx)(r.A,{span:8,onClick:()=>O(e.value),children:(0,S.jsxs)(d.A,{className:M===e.value&&"active",children:[(0,S.jsx)(o.A,{className:"mb-5",children:(0,S.jsx)(r.A,{children:(0,S.jsx)(V,{children:(0,C.t)(e.label)})})}),(0,S.jsxs)(o.A,{gutter:24,children:[(0,S.jsx)(r.A,{span:12,children:(0,S.jsx)(H,{level:2,children:e.price?(0,k.default)(E[e.qty],null===Y||void 0===Y?void 0:Y.symbol,null===Y||void 0===Y?void 0:Y.position):E[e.qty]})}),(0,S.jsx)(r.A,{span:12,className:"d-flex justify-content-end",children:(0,S.jsx)(n.A,{color:"geekblue",className:"d-flex align-items-center",children:"5%"})})]})]})},e.label)))}),(0,S.jsx)(N.A,{reportData:E,chart_data:"quantities_sum"}),(0,S.jsxs)(d.A,{children:[(0,S.jsxs)(c.A,{className:"d-flex justify-content-between align-center",children:[(0,S.jsx)(s.A.Text,{strong:!0,level:3,children:"Extras"}),(0,S.jsxs)(c.A,{className:"d-flex justify-content-between",children:[(0,S.jsx)(u.A,{icon:(0,S.jsx)(x.A,{}),loading:W,onClick:()=>{J(!0),p.A.getReportProductList({date_from:g,date_to:_,type:R,export:"excel",products:null===ee||void 0===ee?void 0:ee.selectedRowKeys}).then((e=>{const t=e.data.link;t&&(window.location.href=t)})).finally((()=>J(!1)))},children:(0,C.t)("download")}),(0,S.jsx)(j.A,{columns:Z,setColumns:$})]})]}),(0,S.jsx)(h.A,{columns:null===Z||void 0===Z?void 0:Z.filter((e=>e.is_show)),dataSource:null===P||void 0===P?void 0:P.data,rowKey:e=>e.id,loading:L,pagination:{pageSize:10,page:(null===P||void 0===P?void 0:P.page)||1,total:null===P||void 0===P?void 0:P.total,defaultCurrent:1},onChange:e=>{const{pageSize:t,current:a}=e;U(a,t)},scroll:{x:1500}})]})]})}},40841:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(89379),l=a(9950);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"};var i=a(25085),o=function(e,t){return l.createElement(i.A,(0,s.A)((0,s.A)({},e),{},{ref:t,icon:n}))};const r=l.forwardRef(o)},27109:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(89379),l=a(9950);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6a8.03 8.03 0 00-11.3 0l-230 229.9L461.4 404a8.03 8.03 0 00-11.3 0L266.3 586.7a8.03 8.03 0 000 11.3l39.5 39.7z"}}]},name:"line-chart",theme:"outlined"};var i=a(25085),o=function(e,t){return l.createElement(i.A,(0,s.A)((0,s.A)({},e),{},{ref:t,icon:n}))};const r=l.forwardRef(o)},89323:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(89379),l=a(9950);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var i=a(25085),o=function(e,t){return l.createElement(i.A,(0,s.A)((0,s.A)({},e),{},{ref:t,icon:n}))};const r=l.forwardRef(o)}}]);