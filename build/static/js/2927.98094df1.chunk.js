"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[2927],{8297:(e,l,t)=>{t.d(l,{A:()=>r});var n=t(9950),i=t(55902),s=t(41397),a=t(60767),o=t(44414);function r(e){let{handleChange:l,defaultValue:t,resetSearch:r,...d}=e;const[c,u]=(0,n.useState)(t),v=(0,n.useMemo)((()=>(0,s.debounce)((e=>{l(e)}),800)),[]);return(0,n.useEffect)((()=>{u(t)}),[r]),(0,o.jsx)(i.A,{value:c,onChange:e=>{u(e.target.value),v(e.target.value)},prefix:(0,o.jsx)(a.A,{}),...d})}},47992:(e,l,t)=>{t.d(l,{G:()=>d});var n=t(9950),i=t(95491),s=t.n(i),a=t(99674),o=t(90650),r=t(44414);const d=e=>{let{fetchOptions:l,debounceTimeout:t=400,onClear:i,refetchOptions:d=!1,...c}=e;const[u,v]=(0,n.useState)(!1),[h,p]=(0,n.useState)([]),g=(0,n.useMemo)((()=>s()((e=>{p([]),v(!0),l(e).then((e=>{p(e),v(!1)}))}),t)),[l,t]);return(0,r.jsx)(a.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:g,onClear:()=>{g(""),i&&i()},notFoundContent:u?(0,r.jsx)(o.A,{size:"small"}):"no results",...c,options:h,onFocus:()=>{h.length&&!d||g("")}})}},22927:(e,l,t)=>{t.r(l),t.d(l,{default:()=>V});var n=t(9950),i=t(72243),s=t(80737),a=t(12916),o=t(48538),r=t(23263),d=t(52913),c=t(70030),u=t(98178),v=t(91854),h=t(88986),p=t(28429),g=t(5478),x=t(74623),m=t(24513),A=t(44070),j=t(12598),y=t(47992),f=t(8297),b=t(44414);const w=e=>{let{filters:l,setFilters:t}=e;const{t:n}=(0,c.B)();return(0,b.jsxs)(s.A,{wrap:!0,children:[(0,b.jsx)(f.A,{placeholder:n("search"),className:"w-200px",onChange:e=>{var n;return t({...l,search:null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value})}}),(0,b.jsx)(y.G,{fetchOptions:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const l={type:"service",perPage:10,page:1,search:null!==e&&void 0!==e&&e.length?e:void 0};return j.A.getAll(l).then((e=>{var l;return null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.map((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},className:"w-200px",placeholder:n("select.category"),onChange:e=>t({...l,category:e})})]})};var C=t(59233),k=t(82706),S=t(41988),_=t(99674),I=t(98591);const F=e=>{let{statuses:l,visible:t,data:i,handleSubmit:s,handleCancel:a}=e;const{t:r}=(0,c.B)(),[d]=C.A.useForm(),[u,v]=(0,n.useState)(!1),[h,p]=(0,n.useState)(null===i||void 0===i?void 0:i.status);return(0,b.jsx)(k.A,{title:r("change.status"),visible:t,onCancel:a,footer:[(0,b.jsx)(o.A,{type:"primary",onClick:()=>d.submit(),loading:u,children:r("save")}),(0,b.jsx)(o.A,{type:"default",onClick:a,children:r("cancel")})],children:(0,b.jsxs)(C.A,{form:d,onFinish:e=>{v(!0);const l={status:null===e||void 0===e?void 0:e.status,id:null===i||void 0===i?void 0:i.id,status_note:null===e||void 0===e?void 0:e.status_note};s(l).finally((()=>{v(!1),a()}))},layout:"vertical",initialValues:{status:null===i||void 0===i?void 0:i.status},children:[(0,b.jsx)(S.A,{span:24,children:(0,b.jsx)(C.A.Item,{label:r("status"),name:"status",rules:[{required:!0,message:r("please.select.status")}],children:(0,b.jsx)(_.A,{onChange:e=>p(e),children:l.map(((e,l)=>(0,b.jsx)(_.A.Option,{value:e,children:r(e)},e+l)))})})}),h===l[2]&&(0,b.jsx)(S.A,{span:24,children:(0,b.jsx)(C.A.Item,{label:r("status.note"),name:"status_note",rules:[{required:h===l[2],message:r("required")}],children:(0,b.jsx)(I.A,{rows:2})})})]})})};var O=t(55386),K=t(76083),N=t(85923),z=t(2654),T=t(63620),B=t(87094),E=t(62466);const M=e=>{let{visible:l,handleClose:t,handleSubmit:i}=e;const{t:s}=(0,c.B)(),[a]=C.A.useForm(),[r,d]=(0,n.useState)([]),{languages:h}=(0,v.d4)((e=>e.formLang),v.bN);function p(e){if(!e)return{};const{translations:l}=e,t=h.map((e=>{var t,n;return{["title[".concat(e.locale,"]")]:null===l||void 0===l||null===(t=l.find((l=>l.locale===e.locale)))||void 0===t?void 0:t.title,["description[".concat(e.locale,"]")]:null===l||void 0===l||null===(n=l.find((l=>l.locale===e.locale)))||void 0===n?void 0:n.description}}));return Object.assign({},...t)}return(0,b.jsx)(k.A,{visible:l,title:s("all.services"),onCancel:t,footer:[(0,b.jsx)(o.A,{type:"primary",onClick:()=>a.submit(),children:s("next")}),(0,b.jsx)(o.A,{type:"default",onClick:t,children:s("cancel")})],children:(0,b.jsx)(C.A,{form:a,onFinish:e=>{var l,t,n,s,a,o;if(null===e||void 0===e||!e.service)return i();const d=null===e||void 0===e||null===(l=e.service)||void 0===l?void 0:l.value,c=null===r||void 0===r||null===(t=r.filter((e=>(null===e||void 0===e?void 0:e.id)===d)))||void 0===t?void 0:t[0],u={...c,...p(c),commission_fee:(null===c||void 0===c?void 0:c.commission_fee)||0,image:[(0,E.A)(c.img)],category:{label:null===c||void 0===c||null===(n=c.category)||void 0===n||null===(s=n.translation)||void 0===s?void 0:s.title,value:null===c||void 0===c||null===(a=c.category)||void 0===a?void 0:a.id,key:null===c||void 0===c||null===(o=c.category)||void 0===o?void 0:o.id}};i(u)},layout:"vertical",children:(0,b.jsx)(B.A,{gutter:12,children:(0,b.jsx)(S.A,{span:24,children:(0,b.jsx)(C.A.Item,{name:"service",label:s("services"),children:(0,b.jsx)(y.G,{fetchOptions:async e=>{const l={search:e,perPage:10,page:1,empty_shop:1};return null!==e&&void 0!==e&&e.trim().length||delete l.search,await u.A.getAll(l).then((e=>{let{data:l}=e;return d(l),null===l||void 0===l?void 0:l.map((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))}})})})})})})},R=["blue","red","gold","volcano","cyan","lime"],V=()=>{var e,l;const{t:t}=(0,c.B)(),j=(0,p.Zp)(),y=(0,v.wA)(),{services:f,loading:C,meta:k,params:S}=(0,v.d4)((e=>e.servicesSlice),v.bN),{activeMenu:_}=(0,v.d4)((e=>e.menu),v.bN),{setIsModalVisible:I}=(0,n.useContext)(O.o),[B,E]=(0,n.useState)(null),[V,q]=(0,n.useState)(null),[G,P]=(0,n.useState)(null),[X,L]=(0,n.useState)({search:"",category:{}}),[Z,D]=(0,n.useState)(X),[H,J]=(0,n.useState)(!1),[Q,U]=(0,n.useState)(!1),W={...S,search:null===X||void 0===X?void 0:X.search,category_id:null===X||void 0===X||null===(e=X.category)||void 0===e?void 0:e.value};null!==X&&void 0!==X&&null!==(l=X.search)&&void 0!==l&&l.length||null===W||void 0===W||delete W.search;const Y={selectedRowKeys:B,onChange:e=>{E(e)}},$=[{title:t("id"),dataIndex:"id",is_show:!0,key:"id"},{title:t("image"),dataIndex:"img",is_show:!1,render:e=>(0,b.jsx)(i.A,{width:100,src:e?T.sE+e:"https://via.placeholder.com/150",placeholder:!0,style:{borderRadius:4}})},{title:t("title"),dataIndex:"slug",is_show:!0,key:"translation",render:(e,l)=>{var t;return null===l||void 0===l||null===(t=l.translation)||void 0===t?void 0:t.title}},{title:t("translations"),dataIndex:"translations",is_show:!1,key:"translations",render:(e,l)=>{var t;return(0,b.jsx)(s.A,{children:null===(t=l.locales)||void 0===t?void 0:t.map(((e,l)=>(0,b.jsx)(a.A,{className:"text-uppercase",color:[R[l]],children:e})))})}},{title:t("status"),dataIndex:"status",key:"status",is_show:!0,render:(e,l)=>(0,b.jsxs)(s.A,{wrap:!0,children:["new"===e?(0,b.jsx)(a.A,{color:"blue",children:t(e)}):"canceled"===e?(0,b.jsx)(a.A,{color:"error",children:t(e)}):(0,b.jsx)(a.A,{color:"cyan",children:t(e)}),(0,b.jsx)(m.A,{onClick:()=>P(l)})]})},{title:t("interval"),dataIndex:"interval",key:"interval",is_show:!0},{title:t("type"),dataIndex:"type",key:"type",is_show:!0},{title:t("category"),dataIndex:"category",key:"category",is_show:!0,render:(e,l)=>{var t,n;return null===l||void 0===l||null===(t=l.category)||void 0===t||null===(n=t.translation)||void 0===n?void 0:n.title}},{title:t("options"),is_show:!0,key:"options",render:(e,l)=>(0,b.jsxs)(s.A,{wrap:!0,children:[(0,b.jsx)(o.A,{type:"primary",icon:(0,b.jsx)(m.A,{}),onClick:()=>ee(null===l||void 0===l?void 0:l.id)}),(0,b.jsx)(o.A,{icon:(0,b.jsx)(A.A,{}),onClick:()=>{E([null===l||void 0===l?void 0:l.id]),I(!0),q(!0)}})]})}];(0,n.useEffect)((()=>{_.refetch&&(0,v.vA)((()=>{y((0,g.K4)(W)),y((0,x.km)(_))}))}),[_.refetch]),(0,n.useEffect)((()=>{const e=setTimeout((()=>{D(X)}),400);return()=>{clearTimeout(e)}}),[X,400]),(0,h.A)((()=>{y((0,g.K4)(W))}),[Z]);const ee=e=>{const l="seller/services/".concat(e);y((0,x.X4)({id:"edit.service",url:l,name:t("edit.service")})),j("/".concat(l),{state:{params:W}})};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r.A,{children:(0,b.jsxs)(s.A,{wrap:!0,children:[(0,b.jsx)(w,{filters:X,setFilters:L}),(0,b.jsx)(o.A,{onClick:()=>{null===B||0===B.length?N.oR.warning(t("select.the.product")):(I(!0),q(!1))},children:t("delete.selected")}),(0,b.jsx)(o.A,{type:"primary",onClick:()=>U(!0),children:t("add.service")})]})}),(0,b.jsx)(r.A,{children:(0,b.jsx)(d.A,{scroll:{x:!0},rowSelection:Y,columns:null===$||void 0===$?void 0:$.filter((e=>e.is_show)),rowKey:e=>null===e||void 0===e?void 0:e.id,dataSource:f,loading:C,pagination:{pageSize:(null===k||void 0===k?void 0:k.per_page)||10,page:k.current_page||1,total:k.total||0,current:(null===k||void 0===k?void 0:k.current_page)||1},onChange:e=>{const{pageSize:l,current:t}=e,n={...W,perPage:l,page:t};y((0,g.K4)(n))}})}),G&&(0,b.jsx)(F,{statuses:z.b,data:G,visible:G,handleSubmit:e=>{var l;const t={category_id:null===e||void 0===e||null===(l=e.category)||void 0===l?void 0:l.id,status:null===e||void 0===e?void 0:e.status,status_note:null===e||void 0===e?void 0:e.status_note};return u.A.statusChange(null===e||void 0===e?void 0:e.id,t).then((()=>y((0,g.K4)(W))))},handleCancel:()=>P(null)}),Q&&(0,b.jsx)(M,{visible:Q,handleClose:()=>U(!1),handleSubmit:e=>(e=>{const l="seller/services/add";y((0,x.X4)({id:"create.service",url:l,name:t("add.service"),data:e})),j("/".concat(l),{state:{params:W,selectedService:e}})})(e)}),(0,b.jsx)(K.A,{click:()=>{J(!0);const e={...Object.assign({},...B.map(((e,l)=>({["ids[".concat(l,"]")]:e}))))};u.A.delete(e).then((()=>{N.oR.success(t("successfully.deleted")),E(null),I(!1),q(!1),y((0,g.K4)(W))})).finally((()=>J(!1)))},text:t(V?"delete":"all.delete"),setText:E,loading:H})]})}},2654:(e,l,t)=>{t.d(l,{T:()=>i,b:()=>n});const n=["new","accepted","canceled"],i=[{value:1,label:"male"},{value:2,label:"female"},{value:3,label:"all"}]}}]);