"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[3579],{85023:(e,t,n)=>{n.d(t,{D:()=>r});var a=n(9950),s=n(99674),l=n(90650),i=n(44414);const r=e=>{let{fetchOptions:t,refetch:n=!1,value:r,...c}=e;const[o,d]=(0,a.useState)(!1),[u,m]=(0,a.useState)([]);"object"===typeof(null===r||void 0===r?void 0:r.label)&&null!==(null===r||void 0===r?void 0:r.label)&&(r.label=r.label.value);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(s.A,{labelInValue:!0,filterOption:!1,notFoundContent:o?(0,i.jsx)(l.A,{size:"small"}):"no results",value:r,...c,options:o?[]:u,onFocus:()=>{u.length&&!n||(d(!0),t().then((e=>{m(e),d(!1)})))},getPopupContainer:e=>e.parentNode})})}},65820:(e,t,n)=>{n.d(t,{s:()=>i});var a=n(28429),s=n(21215),l=n.n(s);const i=()=>{const e=(0,a.Zp)(),t=(0,a.zy)(),n=l().parse(t.search,{ignoreQueryPrefix:!0});return{values:n,set:(t,a)=>e({search:l().stringify({...n,[t]:a})}),reset:t=>{const a={...n};a[t]&&delete a[t],e({search:l().stringify({...a})})},clear:()=>e({search:l().stringify({})}),merge:t=>e({search:l().stringify({...n,...t})})}}},31888:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(82371);const s={getAll:e=>a.A.get("dashboard/seller/units/paginate",{params:e}),getById:(e,t)=>a.A.get("dashboard/seller/units/".concat(e),{params:t})}},63579:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var a=n(9950),s=n(68218),l=n(86366),i=n(23263),r=n(90650),c=n(28116),o=n(64361),d=n(26107),u=n(71999),m=n(28429),p=n(67231),v=n(91854),h=n(74623),x=n(70030),A=n(65820),j=n(44414);const{Step:y}=l.A,f=()=>{var e;const{t:t}=(0,x.B)(),{uuid:n}=(0,m.g)(),f=(0,A.s)(),{activeMenu:g}=(0,v.d4)((e=>e.menu),v.bN),{languages:b}=(0,v.d4)((e=>e.formLang),v.bN),k=(0,v.wA)(),q=Number((null===(e=f.values)||void 0===e?void 0:e.step)||0),[N,I]=(0,a.useState)(g.refetch),w=()=>{const e=q+1;f.set("step",e)},F=()=>{const e=q-1;f.set("step",e)},C=e=>e?{label:e.translation?e.translation.title:e.title,value:e.id}:null;function E(e){if(null===e||void 0===e||!e.translations)return{};const{translations:t}=e,n=b.map((e=>{var n,a;return{["title[".concat(e.locale,"]")]:null===(n=t.find((t=>t.locale===e.locale)))||void 0===n?void 0:n.title,["description[".concat(e.locale,"]")]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.description}}));return Object.assign({},...n)}(0,a.useEffect)((()=>{g.refetch&&function(e){I(!0),p.A.getById(e).then((e=>{var t;const n={...e.data,...E(e.data),shop:C(e.data.shop),unit:C(e.data.unit),extras:null===(t=e.data.stocks[0])||void 0===t?void 0:t.extras.map((e=>e.extra_group_id)),stocks:e.data.stocks.map((e=>({...e,...Object.assign({},...e.extras.map(((e,t)=>({["extras[".concat(t,"]")]:e.id})))),quantity:e.quantity||0,extras:void 0}))),properties:e.data.properties.map(((e,t)=>({id:t,["key[".concat(e.locale,"]")]:e.key,["value[".concat(e.locale,"]")]:e.value}))),translation:void 0,translations:void 0};k((0,h.Ok)({activeMenu:g,data:n}))})).finally((()=>{I(!1),k((0,h.km)(g))}))}(n)}),[g.refetch]);return(0,j.jsxs)(i.A,{title:t("addon.edit"),extra:(0,j.jsx)(u.A,{}),children:[(0,j.jsx)(l.A,{current:q,onChange:e=>{k((0,h.Ok)({activeMenu:g,data:{...g.data,step:e}})),f.set("step",e)},children:s.C.map((e=>(0,j.jsx)(y,{title:t(e.title)},e.title)))}),N?(0,j.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,j.jsx)(r.A,{size:"large",className:"py-5"})}):(0,j.jsxs)("div",{className:"steps-content",children:["First-content"===s.C[q].content&&(0,j.jsx)(d.A,{next:w,action_type:"edit"}),"Third-content"===s.C[q].content&&(0,j.jsx)(o.A,{next:w,prev:F,current:q}),"Finish-content"===s.C[q].content&&(0,j.jsx)(c.A,{prev:F})]})]})}},28116:(e,t,n)=>{n.d(t,{A:()=>h});var a=n(9950),s=n(91524),l=n(80737),i=n(48538),r=n(90650),c=n(91854),o=n(28429),d=n(74623),u=n(70030),m=n(67231),p=n(14863),v=n(44414);const h=e=>{var t,n,h;let{prev:x}=e;const{t:A}=(0,u.B)(),{activeMenu:j}=(0,c.d4)((e=>e.menu),c.bN),{defaultLang:y,languages:f}=(0,c.d4)((e=>e.formLang),c.bN),g=(0,o.Zp)(),b=(0,c.wA)(),[k,q]=(0,a.useState)({}),[N,I]=(0,a.useState)(null),{uuid:w}=(0,o.g)(),{params:F}=(0,c.d4)((e=>e.addons),c.bN);function C(e){if(null===e||void 0===e||!e.translations)return{};const{translations:t}=e,n=f.map((e=>{var n,a;return{["title[".concat(e.locale,"]")]:null===(n=t.find((t=>t.locale===e.locale)))||void 0===n?void 0:n.title,["description[".concat(e.locale,"]")]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.description}}));return Object.assign({},...n)}return(0,a.useEffect)((()=>{!function(e){I(!0),m.A.getById(e).then((e=>{const t={...e.data,...C(e.data),properties:e.data.properties.map(((e,t)=>({id:t,["key[".concat(e.locale,"]")]:e.key,["value[".concat(e.locale,"]")]:e.value}))),translation:void 0,translations:void 0};q(t)})).finally((()=>I(!1)))}(w)}),[]),N?(0,v.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,v.jsx)(r.A,{size:"large",className:"py-5"})}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(s.A,{title:A("product.info"),bordered:!0,children:[(0,v.jsx)(s.A.Item,{label:"".concat(A("title")," (").concat(y,")"),span:3,children:k["title[".concat(y,"]")]}),(0,v.jsx)(s.A.Item,{label:"".concat(A("description")," (").concat(y,")"),span:3,children:k["description[".concat(y,"]")]}),(0,v.jsx)(s.A.Item,{label:A("shop"),span:1.5,children:null===(t=k.shop)||void 0===t?void 0:t.translation.title}),(0,v.jsx)(s.A.Item,{label:A("unit"),span:1.5,children:null===(n=k.unit)||void 0===n?void 0:n.translation.title}),(0,v.jsx)(s.A.Item,{label:A("tax"),children:k.tax}),(0,v.jsx)(s.A.Item,{label:A("min.quantity"),children:k.min_qty}),(0,v.jsx)(s.A.Item,{label:A("max.quantity"),children:k.max_qty})]}),null===(h=k.stocks)||void 0===h?void 0:h.map(((e,t)=>e?(0,v.jsxs)(s.A,{bordered:!0,className:"mt-4",children:[(0,v.jsx)(s.A.Item,{label:A("price"),span:2,children:e.price}),(0,v.jsx)(s.A.Item,{label:A("quantity"),span:2,children:e.quantity}),e.extras.map(((e,t)=>{var n,a;return(0,v.jsx)(s.A.Item,{label:null===e||void 0===e||null===(n=e.group)||void 0===n||null===(a=n.translation)||void 0===a?void 0:a.title,children:null===e||void 0===e?void 0:e.value},"extra"+t)}))]},"desc"+t):"")),(0,v.jsx)("div",{className:"d-flex justify-content-end mt-4",children:(0,v.jsxs)(l.A,{children:[(0,v.jsx)(i.A,{onClick:x,children:A("prev")}),(0,v.jsx)(i.A,{type:"primary",onClick:function(){const e={...F},t="seller/addons";g("/".concat(t)),b((0,d.EK)({...j,nextUrl:t})),b((0,p.fw)(e)),b((0,d.km)(j))},children:A("finish")})]})})]})}},26107:(e,t,n)=>{n.d(t,{A:()=>g});var a=n(9950),s=n(59233),l=n(87094),i=n(41988),r=n(23263),c=n(55902),o=n(40577),d=n(25933),u=n(48538),m=n(91854),p=n(67231),v=n(74623),h=n(28429),x=n(70030),A=n(31888),j=n(15249),y=n(85023),f=n(44414);const g=e=>{let{next:t,action_type:n=""}=e;const{t:g}=(0,x.B)(),[b]=s.A.useForm(),k=(0,m.wA)(),{uuid:q}=(0,h.g)(),N=(0,h.Zp)(),[I,w]=(0,a.useState)(null),{myShop:F}=(0,m.d4)((e=>e.myShop),m.bN),{activeMenu:C}=(0,m.d4)((e=>e.menu),m.bN),{defaultLang:E,languages:P}=(0,m.d4)((e=>e.formLang),m.bN),[S,O]=(0,a.useState)(!1);(0,a.useEffect)((()=>()=>{const e=b.getFieldsValue(!0);k((0,v.Ok)({activeMenu:C,data:{...C.data,...e}}))}),[]);return(0,f.jsxs)(s.A,{layout:"vertical",form:b,initialValues:{active:!0,...C.data},onFinish:e=>{var a;O(!0);const s={...e,active:Number(e.active),shop_id:F.id,unit_id:null===(a=e.unit)||void 0===a?void 0:a.value,shop:void 0,addon:Number(1)};"edit"===n?function(e,n){p.A.update(q,n).then((()=>{k((0,v.Ok)({activeMenu:C,data:e})),t()})).catch((e=>w(e.response.data.params))).finally((()=>O(!1)))}(e,s):function(e,t){p.A.create(t).then((t=>{let{data:n}=t;k((0,v.W6)({id:"addons-".concat(n.uuid),url:"seller/addon/".concat(n.uuid),name:g("add.addons"),data:e,refetch:!1})),N("/seller/addon/".concat(n.uuid,"?step=1"))})).catch((e=>w(e.response.data.params))).finally((()=>O(!1)))}(e,s)},className:"addon-menu",children:[(0,f.jsxs)(l.A,{gutter:12,children:[(0,f.jsxs)(i.A,{xs:24,sm:24,md:16,children:[(0,f.jsxs)(r.A,{title:g("basic.info"),children:[P.map((e=>(0,f.jsx)(s.A.Item,{label:g("name"),name:"title[".concat(e.locale,"]"),rules:[{validator:(t,n)=>n||(null===e||void 0===e?void 0:e.locale)!==E?n&&""===(null===n||void 0===n?void 0:n.trim())?Promise.reject(new Error(g("no.empty.space"))):n&&(null===n||void 0===n?void 0:n.trim().length)<2?Promise.reject(new Error(g("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(g("required")))}],hidden:e.locale!==E,children:(0,f.jsx)(c.A,{})},"name"+e.id))),P.map((e=>(0,f.jsx)(s.A.Item,{label:g("description"),name:"description[".concat(e.locale,"]"),rules:[{validator:(t,n)=>n||(null===e||void 0===e?void 0:e.locale)!==E?n&&""===(null===n||void 0===n?void 0:n.trim())?Promise.reject(new Error(g("no.empty.space"))):n&&(null===n||void 0===n?void 0:n.trim().length)<5?Promise.reject(new Error(g("must.be.at.least.5"))):Promise.resolve():Promise.reject(new Error(g("required")))}],hidden:e.locale!==E,children:(0,f.jsx)(j.A,{rows:4,span:4})},"description"+e.id)))]}),(0,f.jsx)(r.A,{title:g("price"),children:(0,f.jsxs)(l.A,{gutter:12,children:[(0,f.jsx)(i.A,{span:12,children:(0,f.jsx)(s.A.Item,{label:g("min.qty"),name:"min_qty",rules:[{required:!0,message:g("required")},{type:"number",min:0,message:g("must.be.positive")}],children:(0,f.jsx)(o.A,{className:"w-100"})})}),(0,f.jsx)(i.A,{span:12,children:(0,f.jsx)(s.A.Item,{label:g("max.qty"),name:"max_qty",rules:[{required:!0,message:g("required")},{type:"number",min:0,message:g("must.be.positive")}],children:(0,f.jsx)(o.A,{className:"w-100"})})}),(0,f.jsx)(i.A,{span:12,children:(0,f.jsx)(s.A.Item,{label:g("tax"),name:"tax",rules:[{required:!0,message:g("required")},{type:"number",min:0,max:100,message:g("must.be.between.0.and.100")}],children:(0,f.jsx)(o.A,{className:"w-100",addonAfter:"%"})})}),(0,f.jsx)(i.A,{span:12,children:(0,f.jsx)(s.A.Item,{label:g("active"),name:"active",valuePropName:"checked",children:(0,f.jsx)(d.A,{})})})]})})]}),(0,f.jsx)(i.A,{xs:24,sm:24,md:8,children:(0,f.jsx)(r.A,{title:g("addition"),children:(0,f.jsx)(s.A.Item,{label:g("unit"),name:"unit",rules:[{required:!0,message:g("required")}],children:(0,f.jsx)(y.D,{style:{width:"100%"},fetchOptions:function(e){const t={search:e,active:1};return A.A.getAll(t).then((e=>{let{data:t}=e;return function(e){return e.map((e=>{var t;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id}}))}(t)}))}})})})})]}),(0,f.jsx)(u.A,{type:"primary",htmlType:"submit",loading:S,children:g("next")})]})}},64361:(e,t,n)=>{n.d(t,{A:()=>A});var a=n(9950),s=n(59233),l=n(87094),i=n(41988),r=n(40577),c=n(55902),o=n(80737),d=n(48538),u=n(91854),m=n(67231),p=n(70030),v=n(28429),h=n(74623),x=n(44414);const A=e=>{let{prev:t,next:n,current:A}=e;const{t:j}=(0,p.B)(),[y]=s.A.useForm(),{uuid:f}=(0,v.g)(),{activeMenu:g}=(0,u.d4)((e=>e.menu),u.bN),[b,k]=(0,a.useState)(null),q=(0,u.wA)();return(0,a.useEffect)((()=>{var e,t,n,a,s,l;q((0,h.Ms)(g)),y.setFieldsValue({price:null!==(e=g.data)&&void 0!==e&&null!==(t=e.stocks)&&void 0!==t&&t.length?g.data.stocks[0].price:null,quantity:null!==(n=g.data)&&void 0!==n&&null!==(a=n.stocks)&&void 0!==a&&a.length?g.data.stocks[0].quantity:null,sku:null!==(s=g.data)&&void 0!==s&&null!==(l=s.stocks)&&void 0!==l&&l.length?g.data.stocks[0].sku:null})}),[]),(0,x.jsxs)(s.A,{layout:"vertical",form:y,onFinish:e=>{let t;k(!0),t=[{price:e.price,quantity:e.quantity,sku:e.sku}],m.A.stocks(f,{extras:t}).then((()=>n())).finally((()=>k(!1)))},children:[(0,x.jsxs)(l.A,{gutter:12,align:"middle",style:{flexWrap:"nowrap",overflowX:"auto"},children:[(0,x.jsx)(i.A,{children:(0,x.jsx)(s.A.Item,{label:j("price"),name:"price",rules:[{required:!0,message:j("required")},{type:"number",min:1,message:j("must.be.at.least.1")}],children:(0,x.jsx)(r.A,{className:"w-100",style:{minWidth:200}})})}),(0,x.jsx)(i.A,{children:(0,x.jsx)(s.A.Item,{label:j("quantity"),name:"quantity",rules:[{required:!0,message:j("required")},{type:"number",min:1,message:j("must.be.at.least.1")}],children:(0,x.jsx)(r.A,{className:"w-100",style:{minWidth:200}})})}),(0,x.jsx)(i.A,{children:(0,x.jsx)(s.A.Item,{label:j("sku"),name:"sku",children:(0,x.jsx)(c.A,{style:{minWidth:200}})})})]}),(0,x.jsxs)(o.A,{className:"mt-4",children:[(0,x.jsx)(d.A,{onClick:t,children:j("prev")}),(0,x.jsx)(d.A,{type:"primary",htmlType:"submit",loading:!!b,children:j("next")})]})]})}},68218:(e,t,n)=>{n.d(t,{C:()=>a});const a=[{title:"addons",content:"First-content"},{title:"stocks",content:"Third-content"},{title:"finish",content:"Finish-content"}]}}]);