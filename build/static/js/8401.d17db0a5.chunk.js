"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[8401],{47992:(e,l,i)=>{i.d(l,{G:()=>r});var o=i(9950),s=i(95491),n=i.n(s),d=i(99674),t=i(90650),a=i(44414);const r=e=>{let{fetchOptions:l,debounceTimeout:i=400,onClear:s,refetchOptions:r=!1,...v}=e;const[u,c]=(0,o.useState)(!1),[m,h]=(0,o.useState)([]),p=(0,o.useMemo)((()=>n()((e=>{h([]),c(!0),l(e).then((e=>{h(e),c(!1)}))}),i)),[l,i]);return(0,a.jsx)(d.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:p,onClear:()=>{p(""),s&&s()},notFoundContent:u?(0,a.jsx)(t.A,{size:"small"}):"no results",...v,options:m,onFocus:()=>{m.length&&!r||p("")}})}},31281:(e,l,i)=>{function o(e,l){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const o=e.map((e=>({[e.locale]:""===l["".concat(i,"[").concat(e.locale,"]")]?void 0:l["".concat(i,"[").concat(e.locale,"]")]})));return Object.assign({},...o)}i.d(l,{A:()=>o})},48401:(e,l,i)=>{i.r(l),i.d(l,{default:()=>c});var o=i(59233),s=i(9950),n=i(23800),d=i(35523),t=i(28429),a=i(81446),r=i(91854),v=i(74623),u=i(44414);function c(){const{id:e}=(0,t.g)(),[l]=o.A.useForm(),i=(0,r.wA)(),{activeMenu:c}=(0,r.d4)((e=>e.menu),r.bN),[m,h]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{c.refetch&&(h(!0),n.A.getById(e).then((e=>{var o,s,n,d,t,a,r,u;let{data:m}=e;const h={...Object.assign({},...null===m||void 0===m||null===(o=m.translations)||void 0===o?void 0:o.map((e=>({["title[".concat(null===e||void 0===e?void 0:e.locale,"]")]:null===e||void 0===e?void 0:e.title})))),...Object.assign({},...null===m||void 0===m||null===(s=m.translations)||void 0===s?void 0:s.map((e=>({["description[".concat(null===e||void 0===e?void 0:e.locale,"]")]:null===e||void 0===e?void 0:e.description})))),...Object.assign({},...null===m||void 0===m||null===(n=m.translations)||void 0===n?void 0:n.map((e=>({["term[".concat(null===e||void 0===e?void 0:e.locale,"]")]:null===e||void 0===e?void 0:e.term})))),shop:{label:null===m||void 0===m||null===(d=m.shop)||void 0===d||null===(t=d.translation)||void 0===t?void 0:t.title,value:null===m||void 0===m||null===(a=m.shop)||void 0===a?void 0:a.id,key:null===m||void 0===m||null===(r=m.shop)||void 0===r?void 0:r.id},services:null===m||void 0===m||null===(u=m.services)||void 0===u?void 0:u.map((e=>{var l,i,o,s;return{label:null===e||void 0===e||null===(l=e.service)||void 0===l||null===(i=l.translation)||void 0===i?void 0:i.title,value:null===e||void 0===e||null===(o=e.service)||void 0===o?void 0:o.id,key:null===e||void 0===e||null===(s=e.service)||void 0===s?void 0:s.id}})),price:null===m||void 0===m?void 0:m.price,color:null===m||void 0===m?void 0:m.color,sessions:2===(null===m||void 0===m?void 0:m.sessions)?{label:"unlimited",value:2,key:2}:{label:"limited",value:1,key:1},sessions_count:null===m||void 0===m?void 0:m.sessions_count,time:null===m||void 0===m?void 0:m.time};l.setFieldsValue(h),i((0,v.Ok)({activeMenu:c,data:h}))})).finally((()=>h(!1))),i((0,v.km)(c)))}),[c.refetch]),(0,u.jsx)(s.Fragment,{children:m?(0,u.jsx)(a.A,{}):(0,u.jsx)(d.A,{form:l,handleSubmit:l=>n.A.update(e,l)})})}},35523:(e,l,i)=>{i.d(l,{A:()=>S});var o=i(23263),s=i(59233),n=i(87094),d=i(41988),t=i(55902),a=i(40577),r=i(99674),v=i(48538),u=i(98591),c=i(9950),m=i(91854),h=i(70030),p=i(47992),A=i(54764),j=i(55660),x=i(71999),b=(i(25825),i(31281)),g=i(86644),y=i(74623),f=i(28429),q=i(44414);const k=["1 day","3 days","7 days","14 days","1 month","2 month","3 month","4 month","5 month","6 month","8 month","18 months","1 year","2 years","5 years"],O=[{label:"limited",value:1,key:1},{label:"unlimited",value:2,key:2}],S=e=>{var l,i,S;let{form:w,handleSubmit:I}=e;const{t:_}=(0,h.B)(),C=(0,m.wA)(),F=(0,f.Zp)(),{paramsData:P}=(0,f.zy)(),{id:L}=(0,f.g)(),{defaultLang:N,languages:V}=(0,m.d4)((e=>e.formLang),m.bN),{activeMenu:z}=(0,m.d4)((e=>e.menu),m.bN),[M,G]=(0,c.useState)((null===(l=z.data)||void 0===l?void 0:l.shop)||[]),[B,E]=(0,c.useState)((null===(i=z.data)||void 0===i?void 0:i.sessions)||O[1].value||0),[T,D]=(0,c.useState)((null===(S=z.data)||void 0===S?void 0:S.color)||""),[K,U]=(0,c.useState)(!1);return(0,q.jsx)(o.A,{title:_(L?"edit.membership":"add.membership"),extra:(0,q.jsx)(x.A,{}),children:(0,q.jsxs)(s.A,{form:w,onFinish:e=>{var l,i,o;const s={shop_id:null===e||void 0===e||null===(l=e.shop)||void 0===l?void 0:l.value,price:null===e||void 0===e?void 0:e.price,time:null===e||void 0===e?void 0:e.time,sessions:(null===e||void 0===e||null===(i=e.sessions)||void 0===i?void 0:i.value)||(null===e||void 0===e?void 0:e.sessions),sessions_count:null===e||void 0===e?void 0:e.sessions_count,title:(0,b.A)(V,e,"title"),description:(0,b.A)(V,e,"description"),term:(0,b.A)(V,e,"term"),services:null===e||void 0===e||null===(o=e.services)||void 0===o?void 0:o.map((e=>({service_id:e.value})))};2===(null===s||void 0===s?void 0:s.sessions)&&(null===s||void 0===s||delete s.sessions_count),I(s).then((()=>{const e="membership";(0,m.vA)((()=>{C((0,y.EK)({...z,nextUrl:e})),C((0,g.jm)(P))})),F("/".concat(e))})).final((()=>U(!1)))},layout:"vertical",initialValues:{sessions:O[1]},children:[(0,q.jsxs)(n.A,{gutter:12,children:[(0,q.jsx)(d.A,{span:24,children:V.map((e=>(0,q.jsx)(s.A.Item,{label:_("title"),name:"title[".concat(null===e||void 0===e?void 0:e.locale,"]"),hidden:(null===e||void 0===e?void 0:e.locale)!==N,rules:[{required:(null===e||void 0===e?void 0:e.locale)===N,message:_("required")},{validator:(e,l)=>l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(_("no.empty.space")):Promise.resolve()}],children:(0,q.jsx)(t.A,{maxLength:100})},"title"+(null===e||void 0===e?void 0:e.id))))}),(0,q.jsx)(d.A,{span:12,children:V.map((e=>(0,q.jsx)(s.A.Item,{label:_("description"),name:"description[".concat(null===e||void 0===e?void 0:e.locale,"]"),hidden:(null===e||void 0===e?void 0:e.locale)!==N,rules:[{required:(null===e||void 0===e?void 0:e.locale)===N,message:_("required")},{validator:(e,l)=>l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(_("no.empty.space")):Promise.resolve()}],children:(0,q.jsx)(u.A,{rows:3,maxLength:300})},"description"+e.id)))}),(0,q.jsx)(d.A,{span:12,children:V.map((e=>(0,q.jsx)(s.A.Item,{label:_("term"),name:"term[".concat(null===e||void 0===e?void 0:e.locale,"]"),hidden:(null===e||void 0===e?void 0:e.locale)!==N,rules:[{required:(null===e||void 0===e?void 0:e.locale)===N,message:_("required")},{validator:(e,l)=>l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(_("no.empty.space")):Promise.resolve()}],children:(0,q.jsx)(u.A,{rows:3,maxLength:300})},"term"+e.id)))}),(0,q.jsx)(d.A,{span:12,children:(0,q.jsx)(s.A.Item,{label:_("shop"),name:"shop",rules:[{required:!0,message:_("required")}],children:(0,q.jsx)(p.G,{fetchOptions:e=>{var l;const i={page:1,perPage:20,status:"approved",search:e};return null!==e&&void 0!==e&&null!==(l=e.trim())&&void 0!==l&&l.length||delete i.search,j.A.getAll(i).then((e=>e.data.map((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))))},onSelect:e=>{G(e),w.setFieldsValue({services:[]})},onClear:()=>{G([]),w.setFieldsValue({services:[]})}})},"shop")}),(0,q.jsx)(d.A,{span:12,children:(0,q.jsx)(s.A.Item,{label:_("services"),name:"services",rules:[{required:!0,message:_("required")}],children:(0,q.jsx)(p.G,{allowClear:!1,fetchOptions:e=>{var l;const i={page:1,perPage:20,shop_id:null===M||void 0===M?void 0:M.value,search:e};return null!==e&&void 0!==e&&null!==(l=e.trim())&&void 0!==l&&l.length||delete i.search,A.A.getAll(i).then((e=>e.data.map((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))))},mode:"multiple",refetchOptions:!0,disabled:!(null!==M&&void 0!==M&&M.value)})},"services")}),(0,q.jsx)(d.A,{span:12,children:(0,q.jsx)(s.A.Item,{label:_("price"),name:"price",rules:[{required:!0,message:_("required")}],children:(0,q.jsx)(a.A,{min:0,className:"w-100"})},"price")}),(0,q.jsx)(d.A,{span:12,children:(0,q.jsx)(s.A.Item,{name:"time",label:_("time"),rules:[{required:!0}],children:(0,q.jsx)(r.A,{children:k.map((e=>(0,q.jsx)(r.A.Option,{value:e,children:_(e)},e)))})})}),(0,q.jsx)(d.A,{span:12,children:(0,q.jsx)(s.A.Item,{name:"sessions",label:_("sessions"),rules:[{required:!0,message:_("required")}],children:(0,q.jsx)(r.A,{onSelect:e=>E(e),children:O.map((e=>(0,q.jsx)(r.A.Option,{value:e.value,children:_(e.label)},e.key)))})})}),(0,q.jsx)(d.A,{span:12,children:(0,q.jsx)(s.A.Item,{name:"sessions_count",label:_("sessions.count"),rules:[{required:B===O[0].value,message:_("required")}],children:(0,q.jsx)(a.A,{min:0,className:"w-100",disabled:(null===B||void 0===B?void 0:B.value)===O[1].value||B===O[1].value})})})]}),(0,q.jsx)(v.A,{type:"primary",htmlType:"submit",loading:K,children:_("submit")})]})})}}}]);