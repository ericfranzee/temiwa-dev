"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[6600],{79406:(e,s,a)=>{a.d(s,{a:()=>d});var r=a(9950),l=a(95491),i=a.n(l),n=a(99674),t=a(90650),m=a(44414);const d=e=>{let{fetchOptions:s,debounceTimeout:a=400,refetch:l=!1,...d}=e;const[c,u]=(0,r.useState)(!1),[o,p]=(0,r.useState)([]),h=(0,r.useMemo)((()=>i()((e=>{p([]),u(!0),s(e).then((e=>{p(e),u(!1)}))}),a)),[s,a]);return(0,m.jsx)(n.A,{showSearch:!0,allowClear:!0,labelInValue:!0,onClear:()=>h(""),filterOption:!1,onSearch:h,notFoundContent:c?(0,m.jsx)(t.A,{size:"small"}):"no results",...d,options:o,onFocus:()=>{o.length&&!l||h("")}})}},56600:(e,s,a)=>{a.r(s),a.d(s,{default:()=>I});var r=a(9950),l=a(59233),i=a(23263),n=a(87094),t=a(41988),m=a(55902),d=a(40577),c=a(25933),u=a(48538),o=a(85923),p=a(28429),h=a(51201),x=a(91854),A=a(74623),j=a(70030),g=a(62466),v=a(81446),_=a(48970),f=a(99016),b=a(62335),w=a(79406),q=a(44414);function I(){var e,s;const{t:a}=(0,j.B)(),I=(0,p.Zp)(),{id:y}=(0,p.g)(),N=(0,x.wA)(),[k]=l.A.useForm(),{activeMenu:E}=(0,x.d4)((e=>e.menu),x.bN),[S,F]=(0,r.useState)(!1),[P,C]=(0,r.useState)(!1),[O,V]=(0,r.useState)((null===E||void 0===E||null===(e=E.data)||void 0===e?void 0:e.image)||[]),[z,B]=(0,r.useState)(null===E||void 0===E||null===(s=E.data)||void 0===s?void 0:s.special);(0,r.useEffect)((()=>()=>{const e=k.getFieldsValue(!0);N((0,A.Ok)({activeMenu:E,data:{...E.data,...e}}))}),[]);return(0,r.useEffect)((()=>{E.refetch&&y&&(e=>{F(!0),h.A.getById(e).then((e=>{let s=e.data;V([(0,g.A)(s.img)]),B(s.special),k.setFieldsValue({...s,options:null===s||void 0===s?void 0:s.options.map((e=>{var s;return{label:null===(s=e.translation)||void 0===s?void 0:s.title,value:e.id}}))})})).finally((()=>{F(!1),N((0,A.km)(E))}))})(y)}),[E.refetch]),(0,q.jsx)(i.A,{title:a(y?"edit.parcel.type":"add.parcel.type"),children:S?(0,q.jsx)(v.A,{}):(0,q.jsxs)(l.A,{form:k,name:"parcel-type",layout:"vertical",initialValues:{...E.data},onFinish:e=>{var s;C(!0);const r={...e,special:Boolean(e.special),special_price:e.special_price||0,special_price_per_km:e.special_price_per_km||0,images:void 0,image:void 0,options:null===(s=e.options)||void 0===s?void 0:s.map((e=>e.value)),...Object.assign({},...O.map(((e,s)=>({["images[".concat(s,"]")]:e.name}))))},l="parcel-types";y?h.A.update(y,r).then((()=>{N((0,f.b)()),o.oR.success(a("successfully.updated")),N((0,A.EK)({...E,nextUrl:l})),I("/".concat(l))})).finally((()=>C(!1))):h.A.create(r).then((()=>{N((0,f.b)()),o.oR.success(a("successfully.created")),N((0,A.EK)({...E,nextUrl:l})),I("/".concat(l))})).finally((()=>C(!1)))},children:[(0,q.jsxs)(n.A,{gutter:12,children:[(0,q.jsx)(t.A,{span:12,children:(0,q.jsx)(l.A.Item,{label:a("title"),name:"type",rules:[{validator:(e,s)=>s?s&&""===(null===s||void 0===s?void 0:s.trim())?Promise.reject(new Error(a("no.empty.space"))):s&&(null===s||void 0===s?void 0:s.trim().length)<2?Promise.reject(new Error(a("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(a("required")))}],children:(0,q.jsx)(m.A,{})})}),(0,q.jsx)(t.A,{span:12,children:(0,q.jsx)(l.A.Item,{label:a("image"),name:"images",rules:[{validator:()=>0===(null===O||void 0===O?void 0:O.length)?Promise.reject(new Error(a("required"))):Promise.resolve()}],children:(0,q.jsx)(_.A,{type:"languages",imageList:O,setImageList:V,form:k,multiple:!1})})}),(0,q.jsx)(t.A,{span:12,children:(0,q.jsx)(l.A.Item,{label:a("start.price"),name:"price",rules:[{required:!0,message:a("required")}],children:(0,q.jsx)(d.A,{min:0,className:"w-100"})})}),(0,q.jsx)(t.A,{span:12,children:(0,q.jsx)(l.A.Item,{label:a("price.per.km"),name:"price_per_km",rules:[{required:!0,message:a("required")}],children:(0,q.jsx)(d.A,{min:0,className:"w-100"})})}),(0,q.jsx)(t.A,{span:12,children:(0,q.jsx)(l.A.Item,{label:a("min_width"),name:"min_width",rules:[{required:!0,message:a("required")}],children:(0,q.jsx)(d.A,{min:0,max:32678,className:"w-100",addonAfter:"sm"})})}),(0,q.jsx)(t.A,{span:12,children:(0,q.jsx)(l.A.Item,{label:a("max_width"),name:"max_width",rules:[{required:!0,message:a("required")}],children:(0,q.jsx)(d.A,{min:0,max:32678,className:"w-100",addonAfter:"sm"})})}),(0,q.jsx)(t.A,{span:12,children:(0,q.jsx)(l.A.Item,{label:a("min_height"),name:"min_height",rules:[{required:!0,message:a("required")}],children:(0,q.jsx)(d.A,{min:0,max:32678,className:"w-100",addonAfter:"sm"})})}),(0,q.jsx)(t.A,{span:12,children:(0,q.jsx)(l.A.Item,{label:a("max_height"),name:"max_height",rules:[{required:!0,message:a("required")}],children:(0,q.jsx)(d.A,{min:0,max:32678,className:"w-100",addonAfter:"sm"})})}),(0,q.jsx)(t.A,{span:12,children:(0,q.jsx)(l.A.Item,{label:a("min_length"),name:"min_length",rules:[{required:!0,message:a("required")}],children:(0,q.jsx)(d.A,{min:0,max:32678,className:"w-100",addonAfter:"sm"})})}),(0,q.jsx)(t.A,{span:12,children:(0,q.jsx)(l.A.Item,{label:a("max_length"),name:"max_length",rules:[{required:!0,message:a("required")}],children:(0,q.jsx)(d.A,{min:0,max:32678,className:"w-100",addonAfter:"sm"})})}),(0,q.jsx)(t.A,{span:12,children:(0,q.jsx)(l.A.Item,{label:a("min_weight"),name:"min_g",rules:[{required:!0,message:a("required")}],children:(0,q.jsx)(d.A,{min:0,max:32678,className:"w-100",addonAfter:"gramm"})})}),(0,q.jsx)(t.A,{span:12,children:(0,q.jsx)(l.A.Item,{label:a("max_weight"),name:"max_g",rules:[{required:!0,message:a("required")}],children:(0,q.jsx)(d.A,{min:0,max:2147e6,className:"w-100",addonAfter:"gramm"})})}),(0,q.jsx)(t.A,{span:12,children:(0,q.jsx)(l.A.Item,{label:a("options"),name:"options",children:(0,q.jsx)(w.a,{fetchOptions:async e=>b.A.getAll({search:e}).then((e=>{let{data:s}=e;return s.map((e=>{var s;return{label:null===(s=e.translation)||void 0===s?void 0:s.title,value:e.id}}))})),mode:"multiple"})})}),(0,q.jsx)(t.A,{span:12,children:(0,q.jsx)(l.A.Item,{label:a("max.range"),name:"max_range",children:(0,q.jsx)(d.A,{min:0,className:"w-100",addonAfter:"km"})})}),(0,q.jsx)(t.A,{span:24,children:(0,q.jsx)(l.A.Item,{label:a("special"),name:"special",valuePropName:"checked",children:(0,q.jsx)(c.A,{onChange:e=>B(e)})})}),!!z&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(t.A,{span:12,children:(0,q.jsx)(l.A.Item,{label:a("start.price"),name:"special_price",rules:[{required:!0,message:a("required")}],children:(0,q.jsx)(d.A,{min:0,className:"w-100"})})}),(0,q.jsx)(t.A,{span:12,children:(0,q.jsx)(l.A.Item,{label:a("price.per.km"),name:"special_price_per_km",rules:[{required:!0,message:a("required")}],children:(0,q.jsx)(d.A,{min:0,className:"w-100"})})})]})]}),(0,q.jsx)(u.A,{type:"primary",htmlType:"submit",loading:P,children:a("save")})]})})}}}]);