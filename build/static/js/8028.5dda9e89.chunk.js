"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[8028],{18028:(e,l,r)=>{r.r(l),r.d(l,{default:()=>j});var a=r(9950),i=r(59233),t=r(23263),n=r(71999),s=r(28429),d=r(17292),u=r(59051),c=r.n(u),o=r(91854),m=r(74623),p=r(70030),x=r(1800),h=r(23962),A=r(85923),f=r(44414);const j=()=>{const{t:e}=(0,p.B)(),[l]=i.A.useForm(),[r,u]=(0,a.useState)(!1),{languages:j}=(0,o.d4)((e=>e.formLang),o.bN),b=(0,o.wA)(),v=(0,s.Zp)(),{id:y}=(0,s.g)(),{activeMenu:g}=(0,o.d4)((e=>e.menu),o.bN),{myShop:q}=(0,o.d4)((e=>e.myShop),o.bN);function _(e){if(null===e||void 0===e||!e.translations)return{};const{translations:l}=e,r=j.map((e=>{var r;return{["title[".concat(e.locale,"]")]:null===(r=l.find((l=>l.locale===e.locale)))||void 0===r?void 0:r.title}}));return Object.assign({},...r)}return(0,a.useEffect)((()=>{g.refetch&&function(e){u(!0),d.A.getById(e).then((e=>{let{data:r}=e;const a={...r,..._(r),expired_at:c()(r.expired_at,"YYYY-MM-DD")};l.setFieldsValue(a)})).finally((()=>{u(!1),b((0,m.km)(g))}))}(y)}),[g.refetch]),(0,f.jsx)(t.A,{title:e("edit.coupon"),extra:(0,f.jsx)(n.A,{}),loading:r,children:(0,f.jsx)(h.A,{form:l,handleSubmit:l=>{const r="seller/coupons",a={...l,shop_id:null===q||void 0===q?void 0:q.id,expired_at:c()(l.expired_at).format("YYYY-MM-DD"),qty:Number(l.qty),price:Number(l.price)};return d.A.update(y,a).then((l=>{A.oR.success(e("successfully.updated")),(0,o.vA)((()=>{b((0,m.EK)({...g,nextUrl:r})),b((0,x.F)({shop_id:null===q||void 0===q?void 0:q.id}))})),v("/".concat(r))}))}})})}},23962:(e,l,r)=>{r.d(l,{A:()=>f});var a=r(9950),i=r(59233),t=r(87094),n=r(41988),s=r(55902),d=r(99674),u=r(86971),c=r(40577),o=r(48538),m=r(59051),p=r.n(m),x=r(70030),h=r(91854),A=r(44414);function f(e){let{form:l,handleSubmit:r}=e;const{t:m}=(0,x.B)(),{defaultLang:f,languages:j}=(0,h.d4)((e=>e.formLang),h.bN),{activeMenu:b}=(0,h.d4)((e=>e.menu),h.bN),v=[{label:m("delivery.fee"),value:"delivery_fee",key:"delivery_fee"},{label:m("total.price"),value:"total_price",key:"total_price"},{label:m("booking.total.price"),value:"booking_total_price",key:"booking_total_price"}],[y,g]=(0,a.useState)(!1);return(0,A.jsxs)(i.A,{form:l,name:"coupon-form",layout:"vertical",onFinish:e=>{g(!0),r(e).finally((()=>g(!1)))},initialValues:{for:"delivery_fee",type:"fix",...null===b||void 0===b?void 0:b.data},children:[(0,A.jsxs)(t.A,{gutter:12,children:[(0,A.jsx)(n.A,{span:12,children:j.map((e=>(0,A.jsx)(i.A.Item,{label:m("title"),name:"title[".concat(e.locale,"]"),rules:[{required:e.locale===f,message:m("required")}],hidden:e.locale!==f,children:(0,A.jsx)(s.A,{})},"title"+e.id)))}),(0,A.jsx)(n.A,{span:12,children:(0,A.jsx)(i.A.Item,{label:m("name"),name:"name",rules:[{required:!0,message:m("required")}],children:(0,A.jsx)(s.A,{})})}),(0,A.jsx)(n.A,{span:12,children:(0,A.jsx)(i.A.Item,{label:m("type"),name:"type",rules:[{required:!0,message:m("required")}],children:(0,A.jsxs)(d.A,{children:[(0,A.jsx)(d.A.Option,{value:"fix",children:m("fix")}),(0,A.jsx)(d.A.Option,{value:"percent",children:m("percent")})]})})}),(0,A.jsx)(n.A,{span:12,children:(0,A.jsx)(i.A.Item,{name:"expired_at",label:m("expired.at"),rules:[{required:!0,message:m("required")}],children:(0,A.jsx)(u.A,{className:"w-100",placeholder:"",disabledDate:e=>p()().add(-1,"days")>=e})})}),(0,A.jsx)(n.A,{span:12,children:(0,A.jsx)(i.A.Item,{label:m("quantity"),name:"qty",rules:[{required:!0,message:m("required")}],children:(0,A.jsx)(c.A,{min:0,className:"w-100"})})}),(0,A.jsx)(n.A,{span:12,children:(0,A.jsx)(i.A.Item,{label:m("price"),name:"price",rules:[{required:!0,message:m("required")}],children:(0,A.jsx)(c.A,{min:0,className:"w-100"})})}),(0,A.jsx)(n.A,{span:12,children:(0,A.jsx)(i.A.Item,{name:"for",label:"for",rules:[{required:!0,message:m("required")}],children:(0,A.jsx)(d.A,{options:v})})})]}),(0,A.jsx)(o.A,{type:"primary",htmlType:"submit",loading:y,children:m("submit")})]})}}}]);