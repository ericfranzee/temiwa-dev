"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[2755],{47992:(e,t,s)=>{s.d(t,{G:()=>o});var a=s(9950),n=s(95491),l=s.n(n),r=s(99674),i=s(90650),d=s(44414);const o=e=>{let{fetchOptions:t,debounceTimeout:s=400,onClear:n,refetchOptions:o=!1,...u}=e;const[c,m]=(0,a.useState)(!1),[h,g]=(0,a.useState)([]),f=(0,a.useMemo)((()=>l()((e=>{g([]),m(!0),t(e).then((e=>{g(e),m(!1)}))}),s)),[t,s]);return(0,d.jsx)(r.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:f,onClear:()=>{f(""),n&&n()},notFoundContent:c?(0,d.jsx)(i.A,{size:"small"}):"no results",...u,options:h,onFocus:()=>{h.length&&!o||f("")}})}},92755:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Y});var a=s(9950),n=s(28429),l=s(85923),r=s(59233),i=s(23263),d=s(87094),o=s(41988),u=s(55902),c=s(99674),m=s(86971),h=s(48538),g=s(91854),f=s(74623),p=s(70030),x=s(31594),b=s(59051),j=s.n(b),A=s(24611),_=s(81446),y=s(81499),v=s(7843),w=s(47992),N=s(44414);const q=[{title:"order",value:"order"},{title:"subscribe",value:"subscribe"},{title:"verify",value:"verify"}],Y=()=>{const{t:e}=(0,p.B)(),{activeMenu:t}=(0,g.d4)((e=>e.menu),g.bN),s=(0,g.wA)(),[b]=r.A.useForm(),Y=(0,n.Zp)(),[D,F]=(0,a.useState)(!1),[M,C]=(0,a.useState)(!1),{id:I}=(0,n.g)(),{defaultLang:E,languages:S}=(0,g.d4)((e=>e.formLang),g.bN);(0,a.useEffect)((()=>()=>{const e=b.getFieldsValue(!0),a=JSON.stringify(e.send_to),n={...e,send_to:a};s((0,f.Ok)({activeMenu:t,data:n}))}),[]);(0,a.useEffect)((()=>{t.refetch&&(e=>{C(!0),A.A.getById(e).then((e=>{const t={...e.data,send_to:j()(e.data.send_to,"YYYY-MM-DD HH:mm:ss"),has_date:!0,email_setting_id:{label:e.data.email_setting.host,value:e.data.email_setting.id}};b.setFieldsValue(t)})).finally((()=>{C(!1),s((0,f.km)(t))}))})(I)}),[t.refetch]);return(0,N.jsx)(N.Fragment,{children:M?(0,N.jsx)(_.A,{}):(0,N.jsx)(i.A,{title:e("edit.subscriber"),className:"h-100",children:(0,N.jsxs)(r.A,{name:"subscriber-add",layout:"vertical",onFinish:a=>{console.log("data",a);const n={...a,send_to:j()(a.send_to).format("YYYY-MM-DD HH:mm:ss"),email_setting_id:a.email_setting_id.value};F(!0);const r="message/subscriber";A.A.update(I,n).then((()=>{l.oR.success(e("successfully.created")),s((0,f.EK)({...t,nextUrl:r})),Y("/".concat(r)),s((0,y.e)())})).finally((()=>F(!1)))},form:b,initialValues:{...t.data,...(()=>{const e=t.data;if(null===e||void 0===e||!e.send_to)return e;const s=e.send_to;return{...e,send_to:j()(s,"YYYY-MM-DD")}})()},className:"d-flex flex-column h-100",children:[(0,N.jsxs)(d.A,{gutter:12,children:[(0,N.jsx)(o.A,{span:12,children:(0,N.jsx)(r.A.Item,{label:e("subject"),name:"subject",rules:[{required:!0,message:e("required")}],children:(0,N.jsx)(u.A,{})})}),(0,N.jsx)(o.A,{span:12,children:(0,N.jsx)(r.A.Item,{label:e("type"),name:"type",rules:[{required:!0,message:e("required")}],children:(0,N.jsx)(c.A,{disabled:!0,options:q,className:"w-100"})})}),(0,N.jsx)(o.A,{span:12,children:(0,N.jsx)(r.A.Item,{label:e("email.setting.id"),name:"email_setting_id",rules:[{required:!0,message:e("required")}],children:(0,N.jsx)(w.G,{fetchOptions:()=>v.A.get().then((e=>{let{data:t}=e;return t.map((e=>({label:e.host,value:e.id})))})),className:"w-100",placeholder:e("email.setting.id")})})}),(0,N.jsx)(o.A,{span:24,children:(0,N.jsx)(x.A,{languages:S,form:b,lang:E})}),(0,N.jsx)(o.A,{span:12,children:(0,N.jsx)(r.A.Item,{label:e("alt.body"),name:"alt_body",rules:[{required:!0,message:e("required")}],children:(0,N.jsx)(u.A,{})})}),(0,N.jsx)(o.A,{span:6,children:(0,N.jsx)(r.A.Item,{label:e("send.to"),name:"send_to",rules:[{required:!0,message:e("required")}],children:(0,N.jsx)(m.A,{showTime:!0,className:"w-100",disabledDate:e=>j()().add(-1,"days")>=e})})})]}),(0,N.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,N.jsx)("div",{className:"pb-5",children:(0,N.jsx)(h.A,{type:"primary",htmlType:"submit",loading:D,children:e("send")})})})]})})})}},31594:(e,t,s)=>{s.d(t,{A:()=>c});s(9950);var a=s(59233),n=s(70030),l=s(36455),r=s(19181),i=s.n(r),d=s(63620),o=s(64924),u=s(44414);function c(e){let{form:t,lang:s,languages:r}=e;const{t:c}=(0,n.B)();return(0,u.jsx)("div",{className:"textEditor",children:(0,u.jsx)(a.A.Item,{label:c("newsletter.content"),name:"body",valuePropName:"data",getValueFromEvent:(e,t)=>t.getData(),rules:[{required:!0,message:c("required")}],className:"description-editor",children:(0,u.jsx)(l.CKEditor,{editor:i(),config:{extraPlugins:[function(e){e.plugins.get("FileRepository").createUploadAdapter=e=>function(e){return{upload:()=>new Promise(((t,s)=>{const a=new FormData;e.file.then((e=>{a.append("image",e),a.append("type","blogs"),o.A.upload(a).then((e=>{let{data:s}=e;t({default:"".concat(d.sE+s.title)})})).catch((e=>{s(e)}))}))}))}}(e)}]},onChange:(e,t)=>{t.getData()},onBlur:(e,s)=>{const a=s.getData();t.setFieldsValue({body:a})}})})})}}}]);