"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[5353],{75670:(e,t,a)=>{a.d(t,{A:()=>p});var l=a(9950),n=a(59233),s=a(70030),i=a(36455),o=a(19181),r=a.n(o),c=a(63620),d=a(64924),u=a(85923),m=a(44414);function p(e){let{form:t,lang:a,languages:o}=e;const{t:p}=(0,s.B)();function g(e){e.plugins.get("FileRepository").createUploadAdapter=e=>function(e){return{upload:()=>new Promise(((t,a)=>{const l=new FormData;e.file.then((e=>{e.size/1024/1024<2||(u.oR.error(p("min.2.mb")),a()),l.append("image",e),l.append("type","blogs"),d.A.upload(l).then((e=>{let{data:a}=e;t({default:"".concat(c.sE+a.title)})})).catch((e=>{a(e)}))}))}))}}(e)}return(0,m.jsx)(l.Fragment,{children:o.map((e=>(0,m.jsx)(n.A.Item,{label:p("description"),name:"description[".concat(e.locale,"]"),valuePropName:"data",getValueFromEvent:(e,t)=>t.getData(),rules:[{required:e.locale===a,message:p("required")},{validator:(e,t)=>t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(p("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<5?Promise.reject(new Error(p("must.be.at.least.5"))):t&&(null===t||void 0===t?void 0:t.trim().length)>200?Promise.reject(new Error(p("must.be.less.200"))):Promise.resolve()}],hidden:e.locale!==a,children:(0,m.jsx)(i.CKEditor,{editor:r(),config:{extraPlugins:[g]},onBlur:(a,l)=>{const n=l.getData();t.setFieldsValue({["description[".concat(e.value,"]")]:n})}})},"desc"+e.locale)))})}},31281:(e,t,a)=>{function l(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const l=e.map((e=>({[e.locale]:""===t["".concat(a,"[").concat(e.locale,"]")]?void 0:t["".concat(a,"[").concat(e.locale,"]")]})));return Object.assign({},...l)}a.d(t,{A:()=>l})},35353:(e,t,a)=>{a.r(t),a.d(t,{default:()=>I});var l=a(9950),n=a(28429),s=a(85923),i=a(59233),o=a(23263),r=a(87094),c=a(41988),d=a(55902),u=a(99674),m=a(25933),p=a(48538),g=a(90650),v=a(91854),h=a(74623),b=a(60926),x=a(95709),A=a(70030),j=a(71999),f=a(48970),_=a(63620),y=a(75670),k=a(96011),N=a.n(k),w=a(31281),F=a(46492),E=a(44414);const I=()=>{var e,t,a;const{t:k}=(0,A.B)(),{activeMenu:I}=(0,v.d4)((e=>e.menu),v.bN),P=(0,v.wA)(),[q]=i.A.useForm(),z=(0,n.Zp)(),{id:B}=(0,n.g)(),[V,D]=(0,l.useState)(!1),[L,R]=(0,l.useState)(!1),{languages:S,defaultLang:C}=(0,v.d4)((e=>e.formLang),v.bN),O=e=>({name:e,url:_.sE+e}),[T,K]=(0,l.useState)(null!==(e=I.data)&&void 0!==e&&null!==(t=e.galleries)&&void 0!==t&&t[0]?[O(null===(a=I.data.galleries)||void 0===a?void 0:a[0].path)]:[]);function M(e){if(!e)return{};const{translations:t}=e,a=S.map((e=>{var a,l;return{["title[".concat(e.locale,"]")]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.title,["description[".concat(e.locale,"]")]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.description}}));return Object.assign({},...a)}(0,l.useEffect)((()=>()=>{const e=q.getFieldsValue(!0);P((0,h.Ok)({activeMenu:I,data:e}))}),[]);return(0,l.useEffect)((()=>{var e;I.refetch&&(e=B,R(!0),x.A.getById(e).then((e=>{let t=e.data;const a={...t,...M(t),...t.buttons};q.setFieldsValue(a),K([O(t.galleries[0].path)])})).finally((()=>{P((0,h.km)(I)),R(!1)})))}),[I.refetch]),(0,E.jsx)(o.A,{title:k("edit.page"),className:"h-100",extra:(0,E.jsx)(j.A,{}),children:L?(0,E.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,E.jsx)(g.A,{size:"large",className:"py-5"})}):(0,E.jsxs)(i.A,{name:"banner-add",layout:"vertical",onFinish:e=>{D(!0);const t={images:T.map((e=>e.name)),active:Number(e.active),type:e.type,title:(0,w.A)(S,e,"title"),description:(0,w.A)(S,e,"description"),buttons:{google_play_button_link:null===e||void 0===e?void 0:e.google_play_button_link,app_store_button_link:null===e||void 0===e?void 0:e.app_store_button_link}};N()({method:"put",url:"".concat(_.TT,"dashboard/admin/pages/").concat(B),headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:t,params:{}}).then((()=>{const e="pages";s.oR.success(k("successfully.updated")),P((0,h.EK)({...I,nextUrl:e})),z("/".concat(e)),P((0,b.f)())})).catch((e=>{var t,a;return s.oR.error(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)})).finally((()=>D(!1)))},form:q,initialValues:{active:!0,...I.data},className:"d-flex flex-column h-100",children:[(0,E.jsxs)(r.A,{gutter:12,children:[(0,E.jsx)(c.A,{span:12,children:S.map((e=>(0,E.jsx)(i.A.Item,{label:k("name"),name:"title[".concat(e.locale,"]"),rules:[{required:e.locale===C,message:k("required")}],hidden:e.locale!==C,children:(0,E.jsx)(d.A,{})},"title"+e.locale)))}),(0,E.jsx)(c.A,{span:12}),(0,E.jsx)(c.A,{span:24,children:(0,E.jsx)(y.A,{form:q,languages:S,lang:C})}),(0,E.jsx)(c.A,{span:12,children:(0,E.jsx)(i.A.Item,{label:k("type"),name:"type",rules:[{required:!0,message:k("required")}],children:(0,E.jsx)(u.A,{options:F.F,className:"w-100",disabled:!0})})}),(0,E.jsx)(c.A,{span:12,children:(0,E.jsx)(i.A.Item,{label:k("active"),name:"active",valuePropName:"checked",children:(0,E.jsx)(m.A,{})})}),(0,E.jsx)(c.A,{span:12,children:(0,E.jsx)(i.A.Item,{label:k("google_play_button_link"),name:"google_play_button_link",children:(0,E.jsx)(d.A,{className:"w-100"})})}),(0,E.jsx)(c.A,{span:12,children:(0,E.jsx)(i.A.Item,{label:k("app_store_button_link"),name:"app_store_button_link",children:(0,E.jsx)(d.A,{className:"w-100"})})}),(0,E.jsx)(c.A,{span:12,children:(0,E.jsx)(i.A.Item,{label:k("image"),children:(0,E.jsx)(f.A,{type:"receipts",imageList:T,setImageList:K,form:q,multiple:!1})})})]}),(0,E.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,E.jsx)("div",{className:"pb-5",children:(0,E.jsx)(p.A,{type:"primary",htmlType:"submit",loading:V,disabled:V,children:k("submit")})})})]})})}},46492:(e,t,a)=>{a.d(t,{F:()=>l});const l=[{value:"delivery",label:"Delivery"},{value:"about",label:"About"},{value:"about_second",label:"About second"},{value:"about_three",label:"About third"}]}}]);