"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[2412],{47992:(e,i,n)=>{n.d(i,{G:()=>r});var l=n(9950),t=n(95491),s=n.n(t),a=n(99674),o=n(90650),d=n(44414);const r=e=>{let{fetchOptions:i,debounceTimeout:n=400,onClear:t,refetchOptions:r=!1,...u}=e;const[c,v]=(0,l.useState)(!1),[h,p]=(0,l.useState)([]),m=(0,l.useMemo)((()=>s()((e=>{p([]),v(!0),i(e).then((e=>{p(e),v(!1)}))}),n)),[i,n]);return(0,d.jsx)(a.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:m,onClear:()=>{m(""),t&&t()},notFoundContent:c?(0,d.jsx)(o.A,{size:"small"}):"no results",...u,options:h,onFocus:()=>{h.length&&!r||m("")}})}},8168:(e,i,n)=>{function l(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}n.d(i,{A:()=>l})},53774:(e,i,n)=>{function l(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const n=Number(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===i?"".concat(n," ").concat(e):"".concat(e," ").concat(n)}n.r(i),n.d(i,{default:()=>l})},42412:(e,i,n)=>{n.r(i),n.d(i,{default:()=>C});var l=n(70030),t=n(91854),s=n(9950),a=n(12916),o=n(48538),d=n(23263),r=n(52913),u=n(12678),c=n(80737),v=n(74623),h=n(47992),p=n(98178),m=n(66209),x=n(44414);const g=()=>{const{t:e}=(0,l.B)(),i=(0,t.wA)(),{activeMenu:n}=(0,t.d4)((e=>e.menu),t.bN),s=e=>{const l=n.data;i((0,v.Ok)({activeMenu:n,data:{...l,...e}}))};return(0,x.jsxs)(c.A,{wrap:!0,children:[(0,x.jsx)(h.G,{fetchOptions:e=>{const i={perPage:10,page:1,search:e};return p.A.getAll(i).then((e=>{var i;return null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.map((e=>{var i;return{label:null===e||void 0===e||null===(i=e.translation)||void 0===i?void 0:i.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},className:"w-200px",placeholder:e("select.service"),onChange:e=>s({service_id:null===e||void 0===e?void 0:e.value})}),(0,x.jsx)(h.G,{fetchOptions:e=>{const i={parPage:10,page:1,search:e,my_clients:1};return m.A.getAll(i).then((e=>{var i;return null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.map((e=>({label:"".concat(null===e||void 0===e?void 0:e.firstname," ").concat(null===e||void 0===e?void 0:e.lastname),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id})))}))},className:"w-200px",placeholder:e("select.user"),onChange:e=>s({user_id:null===e||void 0===e?void 0:e.value})})]})};var f=n(82706),A=n(91524),b=n(75405),j=n(53774),_=n(81446);function w(e){var i,n,t,a,d,r;let{id:u,handleCancel:c}=e;const[v,h]=(0,s.useState)({}),[p,m]=(0,s.useState)(!1),{t:g}=(0,l.B)();return(0,s.useEffect)((()=>{!function(e){m(!0),b.A.getById(e).then((e=>h(e.data))).finally((()=>m(!1)))}(u)}),[u]),(0,x.jsx)(f.A,{visible:!!u,title:g("membership"),onCancel:c,footer:(0,x.jsx)(o.A,{type:"default",onClick:c,children:g("cancel")}),children:p?(0,x.jsx)(_.A,{}):(0,x.jsxs)(A.A,{bordered:!0,children:[(0,x.jsx)(A.A.Item,{span:3,label:g("id"),children:v.id}),(0,x.jsx)(A.A.Item,{span:3,label:g("membership.id"),children:null===(i=v.member_ship)||void 0===i?void 0:i.id}),(0,x.jsx)(A.A.Item,{span:3,label:g("membership"),children:null===(n=v.member_ship)||void 0===n||null===(t=n.translation)||void 0===t?void 0:t.title}),(0,x.jsx)(A.A.Item,{span:3,label:g("price"),children:(0,j.default)(null===v||void 0===v?void 0:v.price)}),(0,x.jsx)(A.A.Item,{span:3,label:g("sessions"),children:v.sessions}),(0,x.jsx)(A.A.Item,{span:3,label:g("sessions.count"),children:v.sessions_count}),(0,x.jsx)(A.A.Item,{span:3,label:g("user.id"),children:null===(a=v.user)||void 0===a?void 0:a.id}),(0,x.jsxs)(A.A.Item,{span:3,label:g("user"),children:[null===(d=v.user)||void 0===d?void 0:d.firstname," ",null===(r=v.user)||void 0===r?void 0:r.lastname]})]})})}var k=n(8168),I=n(88986),y=n(86031);const C=function(){var e,i,n;const{t:c}=(0,l.B)(),h=(0,t.wA)(),{activeMenu:p}=(0,t.d4)((e=>e.menu),t.bN),[m,f]=(0,s.useState)({shop:{}}),{userMemberships:A,loading:b,meta:_,params:C}=(0,t.d4)((e=>e.userMemberships),t.bN),[S,M]=(0,s.useState)(null),O=p.data,N={sort:null===O||void 0===O?void 0:O.sort,column:null===O||void 0===O?void 0:O.column,perPage:null===O||void 0===O?void 0:O.perPage,page:null===O||void 0===O?void 0:O.page,shop_id:null===O||void 0===O?void 0:O.shop_id,service_id:null===O||void 0===O?void 0:O.service_id,user_id:null===O||void 0===O?void 0:O.user_id},P=[{title:c("id"),dataIndex:"id",key:"id",sorter:!0,is_show:!0},{title:c("user_id"),dataIndex:"user_id",key:"user_id",is_show:!0},{title:c("membership"),dataIndex:"membership",key:"membership",is_show:!0,render:(e,i)=>{var n,l;return null===i||void 0===i||null===(n=i.member_ship)||void 0===n||null===(l=n.translation)||void 0===l?void 0:l.title}},{title:c("price"),dataIndex:"price",key:"price",is_show:!0,render:(e,i)=>(0,j.default)(null===i||void 0===i?void 0:i.price)},{title:c("sessions"),dataIndex:"sessions",key:"sessions",is_show:!0},{title:c("transaction"),dataIndex:"transaction",key:"transaction",is_show:!0,render:(e,i)=>{var n;const l=(null===(n=i.transaction)||void 0===n?void 0:n.status)||"not.paid";return"not.paid"===l?(0,x.jsx)(a.A,{children:c(l)}):"paid"===l?(0,x.jsx)(a.A,{color:"cyan",children:c(l)}):(0,x.jsx)(a.A,{color:"warning",children:c(l)})}},{title:c("options"),key:"options",is_show:!0,render:(e,i)=>(0,x.jsx)(o.A,{icon:(0,x.jsx)(u.A,{}),onClick:()=>z(i)})}],z=e=>{M(e.id)};return(0,I.A)((()=>{h((0,y.gH)(N))}),[p.data]),(0,s.useEffect)((()=>{p.refetch&&(h((0,v.km)(p)),h((0,y.gH)(N)))}),[p.refetch]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(d.A,{children:(0,x.jsx)(g,{filters:m,setFilters:f})}),(0,x.jsx)(d.A,{title:c("user.memberships"),children:(0,x.jsx)(r.A,{scroll:{x:!0},columns:null===P||void 0===P?void 0:P.filter((e=>e.is_show)),dataSource:A,loading:b,pagination:{pageSize:C.perPage,page:(null===(e=p.data)||void 0===e?void 0:e.page)||1,total:_.total,defaultCurrent:null===(i=p.data)||void 0===i?void 0:i.page,current:null===(n=p.data)||void 0===n?void 0:n.page},rowKey:e=>e.id,onChange:function(e,i,n){const{pageSize:l,current:t}=e,{field:s,order:a}=n,o=(0,k.A)(a);h((0,v.Ok)({activeMenu:p,data:{...O,perPage:l,page:t,column:s,sort:o}}))}})}),S&&(0,x.jsx)(w,{id:S,handleCancel:()=>M(null)})]})}}}]);