"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[502],{502:(e,l,i)=>{i.r(l),i.d(l,{default:()=>N});var d=i(80737),n=i(12916),o=i(23263),s=i(48538),t=i(52913),r=i(40895),a=i(9950),c=i(70030),v=i(28429),u=i(23758),h=i(81446),x=i(91854),p=i(59051),j=i.n(p),m=i(53774),f=i(37279),y=i(45418),g=i(94117),k=i(74623),b=i(12970),w=i(35973),A=i(13311),_=i(51066),I=i(44414);const N=()=>{var e,l,i,p,N,Y,S,C,D,L,M,q,H;const{t:R}=(0,c.B)(),z=(0,x.wA)(),F=(0,a.useRef)(),B=(0,v.Zp)(),{id:P}=(0,v.g)(),{settings:E}=(0,x.d4)((e=>e.globalSettings)),G=(0,_.Q)(),{defaultCurrency:O}=(0,x.d4)((e=>e.currency),x.bN),{isDemo:Q}=(0,A.A)(),{activeMenu:$}=(0,x.d4)((e=>e.menu),x.bN),[K,T]=(0,a.useState)(null),[U,V]=(0,a.useState)(null),W=[{title:R("id"),dataIndex:"id",key:"id",render:(e,l)=>{var i;return null===l||void 0===l||null===(i=l.stock)||void 0===i?void 0:i.id}},{title:R("product.name"),dataIndex:"product",key:"product",render:(e,l)=>{var i,o,s,t,r;return(0,I.jsxs)(d.A,{direction:"vertical",className:"relative",children:[null===l||void 0===l||null===(i=l.stock)||void 0===i||null===(o=i.product)||void 0===o||null===(s=o.translation)||void 0===s?void 0:s.title,null===l||void 0===l||null===(t=l.stock)||void 0===t||null===(r=t.extras)||void 0===r?void 0:r.map((e=>{var l,i,d;return(0,I.jsxs)(n.A,{children:[null===(l=e.group)||void 0===l||null===(i=l.translation)||void 0===i?void 0:i.title,": ",null===(d=e.value)||void 0===d?void 0:d.value]},null===e||void 0===e?void 0:e.id)}))]})}},{title:R("price"),dataIndex:"price",key:"price",render:(e,l)=>{var i,d,n;return(0,m.default)((null===l||void 0===l||null===(i=l.stock)||void 0===i?void 0:i.price)-(null!==(d=null===l||void 0===l||null===(n=l.stock)||void 0===n?void 0:n.tax)&&void 0!==d?d:0),null===O||void 0===O?void 0:O.symbol)}},{title:R("quantity"),dataIndex:"quantity",key:"quantity",render:(e,l)=>e*(l.stock.product.interval||0)},{title:R("tax"),dataIndex:"tax",key:"tax",render:e=>(0,m.default)(e,null===O||void 0===O?void 0:O.symbol)},{title:R("discount"),dataIndex:"discount",key:"discount",render:(e,l)=>{var i;return(0,m.default)(null===l||void 0===l||null===(i=l.stock)||void 0===i?void 0:i.discount,null===O||void 0===O?void 0:O.symbol)}},{title:R("total.price"),dataIndex:"total_price",key:"total_price",render:e=>(0,m.default)(e,null===O||void 0===O?void 0:O.symbol)}];function X(){T(!0),u.A.getById(P).then((e=>{let{data:l}=e;V(l)})).finally((()=>{T(!1)}))}(0,a.useEffect)((()=>{X(),z((0,k.km)($))}),[]),(0,a.useEffect)((()=>{$.refetch&&(X(),z((0,k.km)($)))}),[$.refetch]);const Z=(0,y.useReactToPrint)({content:()=>F.current});return(0,I.jsx)(o.A,{title:R("invoice"),extra:(0,I.jsxs)(d.A,{wrap:!0,children:[(0,I.jsx)(s.A,{type:"primary",onClick:()=>B(-1),children:(0,I.jsx)("span",{className:"ml-1",children:R("back")})}),(0,I.jsxs)(s.A,{type:"primary",onClick:()=>Z(),ref:F,children:[(0,I.jsx)(f.A,{type:"printer"}),(0,I.jsx)("span",{className:"ml-1",children:R("print")})]})]}),children:K?(0,I.jsx)(h.A,{}):(0,I.jsxs)("div",{className:"container_check",ref:F,children:[(0,I.jsxs)("header",{className:"check_header",children:[(0,I.jsx)("div",{style:{objectFit:"contain",maxWidth:200,maxHeight:200,overflow:"hidden"},children:(0,I.jsx)("img",{src:null===E||void 0===E?void 0:E.favicon,alt:"img",className:"check_icon overflow-hidden rounded",width:200,height:200})}),(0,I.jsxs)("span",{className:"check_companyInfo",children:[(0,I.jsx)("h1",{children:null===E||void 0===E?void 0:E.title}),(0,I.jsx)("h5",{children:null===E||void 0===E?void 0:E.address})]})]}),(0,I.jsxs)("main",{children:[(0,I.jsxs)("span",{children:[(0,I.jsxs)("h4",{children:[R("order.id"),": ",null===U||void 0===U?void 0:U.id]}),(0,I.jsxs)("h4",{children:[R("date"),":"," ",j()(null===U||void 0===U?void 0:U.created_at).format("YYYY-MM-DD ".concat(G))]}),(0,I.jsx)("address",{children:(0,I.jsxs)("p",{children:[(0,I.jsxs)("span",{children:[R("delivery.type"),": ",null===U||void 0===U?void 0:U.delivery_type]}),(null===U||void 0===U||null===(e=U.address)||void 0===e?void 0:e.city)&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("br",{}),(0,I.jsxs)("span",{children:[R("delivery.address"),": ",null===U||void 0===U||null===(l=U.address)||void 0===l?void 0:l.city]})]}),(0,I.jsx)("br",{}),(0,I.jsxs)("span",{children:[R("delivery.date"),":"," ",j()(null===U||void 0===U?void 0:U.delivery_date).format("YYYY-MM-DD ".concat(G))]}),(0,I.jsx)("br",{}),(0,I.jsxs)("span",{children:[R("status"),": ",(0,I.jsx)(n.A,{color:"green",children:null===U||void 0===U?void 0:U.status})]}),(0,I.jsx)("br",{}),(0,I.jsxs)("span",{children:[R("otp"),": ",null!==(i=null===U||void 0===U?void 0:U.otp)&&void 0!==i?i:R("N/A")]})]})})]}),(0,I.jsx)("span",{children:(0,I.jsx)("address",{children:(0,I.jsxs)("p",{children:[(0,I.jsx)("h3",{className:"shop_data",children:R("user")}),(0,I.jsxs)("span",{children:[R("user.id"),": ",null===U||void 0===U||null===(p=U.user)||void 0===p?void 0:p.id]}),(0,I.jsx)("br",{}),(0,I.jsxs)("span",{children:[R("full.name"),":"," ","".concat((null===U||void 0===U||null===(N=U.user)||void 0===N?void 0:N.firstname)||""," ").concat((null===U||void 0===U||null===(Y=U.user)||void 0===Y?void 0:Y.lastname)||"")]}),(0,I.jsx)("br",{}),(0,I.jsxs)("span",{children:[R("email"),":"," ",null!==U&&void 0!==U&&null!==(S=U.user)&&void 0!==S&&S.email||Q?(0,b.A)(null===U||void 0===U||null===(C=U.user)||void 0===C?void 0:C.email):null===U||void 0===U||null===(D=U.user)||void 0===D?void 0:D.email]}),(0,I.jsx)("br",{}),(0,I.jsxs)("span",{children:[R("phone"),":"," ",null!==U&&void 0!==U&&null!==(L=U.user)&&void 0!==L&&L.phone?Q?(0,w.A)(null===U||void 0===U||null===(M=U.user)||void 0===M?void 0:M.phone):null===U||void 0===U||null===(q=U.user)||void 0===q?void 0:q.phone:R("no.phone")]})]})})}),(0,I.jsx)("span",{children:(0,I.jsx)(g.A,{orderId:P,showLink:!1,size:1.5})})]}),(0,I.jsx)(t.A,{scroll:{x:!0},columns:W,dataSource:(null===U||void 0===U?void 0:U.details)||[],loading:K,rowKey:e=>e.id,pagination:!1,className:"check_table"}),(0,I.jsxs)("footer",{children:[(0,I.jsx)("span",{children:(0,I.jsxs)("h3",{children:[R("note"),": ",null!==(H=null===U||void 0===U?void 0:U.note)&&void 0!==H?H:R("no.note")]})}),(0,I.jsxs)("span",{children:[(0,I.jsxs)("span",{children:[(0,I.jsxs)("h5",{children:[R("origin.price"),":"]}),(0,I.jsx)("h4",{children:(0,m.default)(null===U||void 0===U?void 0:U.origin_price,null===O||void 0===O?void 0:O.symbol)})]}),(0,I.jsxs)("span",{children:[(0,I.jsxs)("h5",{children:[R("total.tax"),":"]}),(0,I.jsx)("h4",{children:(0,m.default)(null===U||void 0===U?void 0:U.tax,null===O||void 0===O?void 0:O.symbol)})]}),(0,I.jsxs)("span",{children:[(0,I.jsxs)("h5",{children:[R("service.fee"),":"]}),(0,I.jsx)("h4",{children:(0,m.default)(null===U||void 0===U?void 0:U.service_fee,null===O||void 0===O?void 0:O.symbol)})]}),(0,I.jsxs)("span",{children:[(0,I.jsxs)("h5",{children:[R("delivery.fee"),":"]}),(0,I.jsx)("h4",{children:(0,m.default)(null===U||void 0===U?void 0:U.delivery_fee,null===O||void 0===O?void 0:O.symbol)})]}),(0,I.jsxs)("span",{children:[(0,I.jsxs)("h5",{children:[R("tips"),":"]}),(0,I.jsx)("h4",{children:(0,m.default)(null===U||void 0===U?void 0:U.tips,null===O||void 0===O?void 0:O.symbol)})]}),(0,I.jsxs)("span",{children:[(0,I.jsxs)("h5",{children:[R("total.discount"),":"]}),(0,I.jsxs)("h4",{children:["- ",(0,m.default)(null===U||void 0===U?void 0:U.total_discount)]})]}),(0,I.jsxs)("span",{children:[(0,I.jsxs)("h5",{children:[R("coupon"),":"]}),(0,I.jsxs)("h4",{children:["- ",(0,m.default)(null===U||void 0===U?void 0:U.coupon_price)]})]}),(0,I.jsx)(r.A,{}),(0,I.jsxs)("span",{children:[(0,I.jsxs)("h4",{children:[R("total.price"),":"]}),(0,I.jsx)("h3",{children:(0,m.default)(null===U||void 0===U?void 0:U.total_price,null===O||void 0===O?void 0:O.symbol)})]})]})]}),(0,I.jsxs)("section",{className:"text-center",children:["\xa9 ",j()(new Date).format("YYYY")," ",null===E||void 0===E?void 0:E.title,"."," ",R("all.rights.reserved")]})]})})}},12970:(e,l,i)=>{function d(e){var l,i;let d=null===e||void 0===e?void 0:e.slice(0,1),n=null===e||void 0===e?void 0:e.lastIndexOf("@"),o=null===e||void 0===e?void 0:e.slice(1,n-1);o=null===(l=o)||void 0===l?void 0:l.replace(/./g,"*");let s=null===e||void 0===e?void 0:e.slice(n-1,e.length);return null===d||void 0===d||null===(i=d.concat(o))||void 0===i?void 0:i.concat(s)}i.d(l,{A:()=>d})},35973:(e,l,i)=>{function d(e){const l="".concat(e),i="*".repeat(l.length-2);return(null===l||void 0===l?void 0:l[0])+i+(null===l||void 0===l?void 0:l[(null===l||void 0===l?void 0:l.length)-1])}i.d(l,{A:()=>d})},94117:(e,l,i)=>{i.d(l,{A:()=>p});var d=i(9950),n=i(70030),o=i(53872),s=i(85923),t=i(48538),r=i(12916),a=i(96011),c=i.n(a),v=i(63620),u=i(81446),h=i(44414);const x="https://firebasedynamiclinks.googleapis.com/v1/shortLinks?key=".concat(v.Lq);function p(e){let{orderId:l,showLink:i=!0,size:a=2}=e;const{t:p}=(0,n.B)(),[j,m]=(0,d.useState)(""),[f,y]=(0,d.useState)(!1),[g,k]=(0,d.useState)(null);return(0,d.useEffect)((()=>{(async()=>{y(!0);const e={dynamicLinkInfo:{domainUriPrefix:v.ac,link:"".concat(v.CY,"/orders/").concat(l),androidInfo:{androidPackageName:v.xp},iosInfo:{iosBundleId:v.lu}}};try{const{data:l}=await c().post(x,e);k(null),m(null===l||void 0===l?void 0:l.shortLink)}catch(g){k(g),s.oR.error(g.message)}finally{y(!1)}})()}),[l]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("h3",{children:[p("qr_code"),":"]}),(0,h.jsx)("div",{children:f||g?g?(0,h.jsx)(r.A,{color:"red",children:p("smth.went.wrong")}):(0,h.jsx)(u.A,{}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{style:{width:"".concat(100*a,"px"),height:"".concat(100*a,"px"),borderRadius:"10px",overflow:g?"none":"hidden"},children:(0,h.jsx)(o.Xe,{size:500,id:"qrCode",includeMargin:!0,value:j,style:{width:"100%",aspectRatio:"1/1",height:"100%"},bgColor:"#fff",level:"H"})}),(0,h.jsx)("br",{}),i&&(0,h.jsx)(t.A,{type:"primary",href:j,target:"_blank",rel:"noreferrer",style:{width:"".concat(100*a,"px")},children:p("link.to.order")})]})})]})}},80415:(e,l,i)=>{i.d(l,{G:()=>s,HV:()=>n,LH:()=>d,PR:()=>o,wO:()=>r,xt:()=>t});const d={new:[1,2,3,4,5],accepted:[1,2,3,4,5],ready:[1,2,3,4,5],on_a_way:[1,2,3,4,5],delivered:[1,2,3,4,5],canceled:[1,2,3,4,5],cooking:[1,2,3,4,5]},n=(new Date,new Date,["new","accepted","ready","on_a_way","pause","delivered","canceled"]),o=30,s="HH:mm",t="hh:mm a",r=!0},51066:(e,l,i)=>{i.d(l,{Q:()=>o});var d=i(17706),n=i(80415);const o=()=>{var e,l,i,o;return null!==(e=null===(l=d.M.getState())||void 0===l||null===(i=l.globalSettings)||void 0===i||null===(o=i.settings)||void 0===o?void 0:o.hour_format)&&void 0!==e?e:n.G}},53774:(e,l,i)=>{function d(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const i=Number(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===l?"".concat(i," ").concat(e):"".concat(e," ").concat(i)}i.r(l),i.d(l,{default:()=>d})}}]);