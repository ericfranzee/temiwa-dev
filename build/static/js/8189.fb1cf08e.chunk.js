"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[8189],{78189:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var s=a(9950),i=a(28429),l=a(85923),r=a(59233),n=a(23263),c=a(87094),d=a(41988),m=a(55902),o=a(25933),u=a(48538),v=a(90650),h=a(63620),j=a(91854),g=a(74623),x=a(37963),A=a(59759),p=a(70030),f=a(48970),b=a(44414);const y=()=>{var e,t;const{t:a}=(0,p.B)(),{activeMenu:y}=(0,j.d4)((e=>e.menu),j.bN),{id:E}=(0,i.g)(),k=(0,j.wA)(),[w,P]=(0,s.useState)(null!==(e=y.data)&&void 0!==e&&e.image?[null===(t=y.data)||void 0===t?void 0:t.image]:[]),[F]=r.A.useForm(),I=(0,i.Zp)(),[N,z]=((0,i.zy)(),(0,s.useState)(!1)),[S,V]=(0,s.useState)(!1);(0,s.useEffect)((()=>()=>{const e=F.getFieldsValue(!0);k((0,g.Ok)({activeMenu:y,data:e}))}),[]);const q=e=>({name:e,url:h.sE+e});return(0,s.useEffect)((()=>{y.refetch&&(e=>{z(!0),x.A.getById(e).then((e=>{let t=e.data;F.setFieldsValue({...t,image:[q(t.img)]}),P([q(t.img)])})).finally((()=>{z(!1),k((0,g.km)(y))}))})(E)}),[y.refetch]),(0,b.jsx)(n.A,{title:a("clone.brand"),children:N?(0,b.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,b.jsx)(v.A,{size:"large",className:"py-5"})}):(0,b.jsxs)(r.A,{name:"basic",layout:"vertical",onFinish:e=>{var t;const s={...e,active:e.active?1:0,"images[0]":null===(t=w[0])||void 0===t?void 0:t.name};V(!0);const i="catalog/brands";x.A.create(s).then((()=>{l.oR.success(a("successfully.updated")),k((0,g.EK)({...y,nextUrl:i})),I("/".concat(i)),k((0,A.$F)({}))})).finally((()=>V(!1)))},form:F,initialValues:{...y.data},children:[(0,b.jsxs)(c.A,{gutter:12,children:[(0,b.jsx)(d.A,{span:12,children:(0,b.jsx)(r.A.Item,{label:a("title"),name:"title",rules:[{validator:(e,t)=>t?t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(a("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<2?Promise.reject(new Error(a("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(a("required")))}],children:(0,b.jsx)(m.A,{})})}),(0,b.jsx)(d.A,{span:6,children:(0,b.jsx)(r.A.Item,{label:a("image"),name:"images",rules:[{validator:(e,t)=>0===(null===w||void 0===w?void 0:w.length)?Promise.reject(new Error(a("required"))):Promise.resolve()}],children:(0,b.jsx)(f.A,{type:"brands",imageList:w,setImageList:P,form:F,multiple:!1})})}),(0,b.jsx)(d.A,{span:6,children:(0,b.jsx)("div",{className:"col-md-12 col-sm-6",children:(0,b.jsx)(r.A.Item,{label:a("active"),name:"active",valuePropName:"checked",children:(0,b.jsx)(o.A,{})})})})]}),(0,b.jsx)(u.A,{type:"primary",htmlType:"submit",loading:S,children:a("submit")})]})})}}}]);