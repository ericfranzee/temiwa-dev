"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[8673],{4587:(e,t,i)=>{i.d(t,{A:()=>p});var r=i(9950),l=i(23263),o=i(39452),n=i(94116),a=i(53439),s=i(44414);const d={position:"absolute",zIndex:"1"},c={position:"absolute",zIndex:"1",right:"0",top:"-2px"},u=e=>{let{title:t,series:i,width:u,height:p,xAxis:h,customOptions:v,card:x,type:g,extra:f,direction:m,bodyClass:y}=e,A=JSON.parse(JSON.stringify((e=>{switch(e){case"line":default:return a.V3;case"bar":return a.ck;case"area":return a.cZ;case"pie":return a.vX}})(g)));const j=window.innerWidth<768,b=()=>{if(_.current){var e;const t=_.current.querySelectorAll("div.apexcharts-legend")[0];t.style.marginRight="".concat(j?0:null===(e=w.current)||void 0===e?void 0:e.offsetWidth,"px"),"rtl"===m&&(t.style.right="auto",t.style.left="0"),j&&(t.style.position="relative",t.style.top=0,t.style.justifyContent="start",t.style.padding=0)}};(0,r.useEffect)((()=>{b()}),[]);const w=(0,r.useRef)(null),_=(0,r.useRef)();A.xaxis={categories:h},v&&(A={...A,...v});const z=()=>(0,s.jsx)(n.Ay,{onResize:void setTimeout((()=>{b()}),600),children:(0,s.jsx)("div",{style:"rtl"===m?{direction:"ltr"}:{},className:"chartRef",ref:_,children:(0,s.jsx)(o.A,{options:A,type:g,series:i,width:u,height:p})})});return(0,s.jsx)(s.Fragment,{children:x?(0,s.jsx)(l.A,{children:(0,s.jsxs)("div",{className:"position-relative ".concat(y),children:[(0,s.jsx)("div",{style:j?{}:d,children:t})&&(0,s.jsx)("h4",{className:"font-weight-bold",style:j?{}:d,children:t}),f&&(0,s.jsx)("div",{ref:w,style:j?{}:c,children:f}),z()]})}):z()})};u.defaultProps={series:[],height:300,width:"100%",card:!0,type:"line"};const p=u},53439:(e,t,i)=>{i.d(t,{V3:()=>l,cZ:()=>o,ck:()=>n,lm:()=>r,vX:()=>a});const r=["#3e82f7","#04d182","#ff6b72","#ffc107","#a461d8","#fa8c16","#17bcff"],l={chart:{zoom:{enabled:!1},toolbar:{show:!1}},colors:[...r],dataLabels:{enabled:!1},stroke:{width:3,curve:"smooth",lineCap:"round"},legend:{position:"top",horizontalAlign:"right",offsetY:-15,itemMargin:{vertical:20},tooltipHoverFormatter:function(e,t){return e+" - "+t.w.globals.series[t.seriesIndex][t.dataPointIndex]}},xaxis:{categories:[]},grid:{xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}}},o={...l},n={chart:{zoom:{enabled:!1},toolbar:{show:!1}},plotOptions:{bar:{horizontal:!1,columnWidth:"25px",startingShapre:"rounded",endingShape:"rounded"}},colors:[...r],dataLabels:{enabled:!1},stroke:{show:!0,width:6,curve:"smooth",colors:["transparent"]},legend:{position:"top",horizontalAlign:"right",offsetY:-15,inverseOrder:!0,itemMargin:{vertical:20},tooltipHoverFormatter:function(e,t){return e+" - "+t.w.globals.series[t.seriesIndex][t.dataPointIndex]}},xaxis:{categories:[]},fill:{opacity:1},tooltip:{y:{formatter:e=>"".concat(e)}}},a={colors:[...r],plotOptions:{pie:{size:200,donut:{labels:{show:!0,total:{show:!1,showAlways:!0,label:"",fontSize:"18px",fontFamily:"Roboto",fontWeight:"bold",color:"#1a3353",formatter:function(e){return e.globals.seriesTotals.reduce(((e,t)=>e+t),0)+"Orders count"}}},size:"100%"}}},labels:[],dataLabels:{enabled:!0},legend:{show:!0}}},53774:(e,t,i)=>{function r(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const i=Number(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===t?"".concat(i," ").concat(e):"".concat(e," ").concat(i)}i.r(t),i.d(t,{default:()=>r})},98673:(e,t,i)=>{i.r(t),i.d(t,{default:()=>T});var r=i(66362),l=i(86971),o=i(90650),n=i(87094),a=i(41988),s=i(80737),d=i(40895),c=i(23263),u=i(99674),p=i(52913),h=i(9950),v=i(4587),x=i(27109),g=i(31598),f=i(91854),m=i(28429),y=i(42074),A=i(21215),j=i.n(A),b=i(71795),w=i(50122),_=i(74623),z=i(88986),C=i(59051),k=i.n(C),N=i(53774),S=i(70030),q=i(44414);const{Text:O,Title:R}=r.A,{RangePicker:I}=l.A,T=()=>{var e,t,i,r,l,A,C,T,P,L;const{t:M}=(0,S.B)(),F=(0,m.zy)(),V=j().parse(F.search,[])["?category_id"],D=j().parse(F.search,[])["?product_id"],{date_from:W,date_to:B,by_time:E,chart:H,handleDateRange:J,options:X,handleByTime:Y,chart_type:Z,setChartType:$}=(0,h.useContext)(b.M),{loading:G,carts:K,products:Q,categories:U}=(0,f.d4)((e=>e.overviewReport),f.bN),{defaultCurrency:ee}=(0,f.d4)((e=>e.currency),f.bN),{activeMenu:te}=(0,f.d4)((e=>e.menu),f.bN),ie=(0,f.wA)(),re=[{title:M("title"),dataIndex:"title",key:"title",render:e=>(e=>{const t=null===e||void 0===e?void 0:e.split(", ");return(0,q.jsx)("div",{style:{display:"flex",rowGap:"10px",flexDirection:"column"},children:null===t||void 0===t?void 0:t.map(((e,t)=>"#"===(null===e||void 0===e?void 0:e[0])?(0,q.jsx)("span",{style:{display:"block",width:"15px",height:"15px",borderRadius:"50%",backgroundColor:null===e||void 0===e?void 0:e.trim()}}):e))})})(e)},{title:M("item.sold"),dataIndex:"quantity",key:"quantity"},{title:M("net.sales"),dataIndex:"total_price",key:"total_price",render:e=>(0,N.default)(e,null===ee||void 0===ee?void 0:ee.symbol,null===ee||void 0===ee?void 0:ee.position)},{title:M("orders"),dataIndex:"count",key:"count"}],le=[{title:"Total sales",qty:"delivered_sum",percent:"5",price:!0},{title:"Orders",qty:"count",percent:"5",price:!1},{title:"Canceled orders price",qty:"canceled_sum",percent:"5",price:!0},{title:"Total tax",qty:"tax",percent:"5",price:!0},{title:"Delivered avg",qty:"delivered_avg",percent:"5",price:!0},{title:"Delivery fee",qty:"delivery_fee",percent:"5",price:!0}],oe=(e,t)=>{const i={date_from:W,date_to:B,type:E,page:e,perPage:t};ie((0,w.u1)(i))},ne=(e,t)=>{const i={date_from:W,date_to:B,type:E,page:e,perPage:t};ie((0,w.Aw)(i))},ae=(e,t)=>{const i={date_from:W,date_to:B,type:E,page:e,perPage:t};V&&(i.categories=[V]),D&&(i.products=[D]),ie((0,w.mc)(i))};return(0,h.useEffect)((()=>{te.refetch&&(ae(),oe(),ne(),ie((0,_.km)(te)))}),[te.refetch]),(0,z.A)((()=>{ae()}),[B,E,H,V,D,W]),(0,z.A)((()=>{oe()}),[B,E,W]),(0,z.A)((()=>{ne()}),[B,E,W]),(0,q.jsxs)(o.A,{size:"large",spinning:G,children:[(0,q.jsx)(n.A,{gutter:24,className:"mb-4",children:(0,q.jsx)(a.A,{span:12,children:(0,q.jsx)(s.A,{size:"large",children:(0,q.jsx)(I,{defaultValue:[k()(W),k()(B)],onChange:J})})})}),(0,q.jsx)(d.A,{orientation:"left",children:"Performance"}),(0,q.jsx)(n.A,{gutter:24,children:null===le||void 0===le?void 0:le.map(((e,t)=>(0,q.jsx)(a.A,{span:6,children:(0,q.jsx)(y.N_,{to:"/report/revenue",children:(0,q.jsxs)(c.A,{children:[(0,q.jsx)(n.A,{className:"mb-5",children:(0,q.jsx)(a.A,{children:(0,q.jsx)(O,{children:e.title})})}),(0,q.jsx)(n.A,{gutter:24,children:(0,q.jsx)(a.A,{span:12,children:(0,q.jsx)(R,{level:2,children:e.price?(0,N.default)(K[e.qty],null===ee||void 0===ee?void 0:ee.symbol,null===ee||void 0===ee?void 0:ee.position):K[e.qty]})})})]})},e.title)})))}),(0,q.jsxs)(n.A,{gutter:24,className:"mb-2",children:[(0,q.jsx)(a.A,{span:20,children:(0,q.jsx)(d.A,{orientation:"left",children:"Charts"})}),(0,q.jsx)(a.A,{span:4,children:(0,q.jsxs)("div",{className:"d-flex",children:[(0,q.jsx)(u.A,{style:{width:100},onChange:Y,options:X,defaultValue:E}),(0,q.jsx)(d.A,{type:"vertical",style:{height:"100%"}}),(0,q.jsxs)(s.A,{children:[(0,q.jsx)(x.A,{style:{fontSize:"22px",cursor:"pointer",color:"line"===Z?"green":""},onClick:()=>$("line")}),(0,q.jsx)(g.A,{style:{fontSize:"22px",cursor:"pointer",color:"bar"===Z?"green":""},onClick:()=>$("bar")})]})]})})]}),(0,q.jsxs)(n.A,{gutter:24,children:[(0,q.jsx)(a.A,{span:12,children:(0,q.jsx)(c.A,{title:"Net Sales",children:(0,q.jsx)(v.A,{type:Z,series:[{name:"Orders",data:null===K||void 0===K||null===(e=K.chart_price)||void 0===e?void 0:e.map((e=>e.delivered_sum))}],xAxis:null===K||void 0===K||null===(t=K.chart_price)||void 0===t?void 0:t.map((e=>e.time))})})}),(0,q.jsx)(a.A,{span:12,children:(0,q.jsx)(c.A,{title:"Orders",children:(0,q.jsx)(v.A,{type:Z,series:[{name:"Orders",data:null===K||void 0===K||null===(i=K.chart_count)||void 0===i?void 0:i.map((e=>e.count))}],xAxis:null===K||void 0===K||null===(r=K.chart_price)||void 0===r?void 0:r.map((e=>e.time))})})})]}),(0,q.jsx)(d.A,{orientation:"left",children:"Leaderboards"}),(0,q.jsxs)(n.A,{gutter:24,children:[(0,q.jsx)(a.A,{span:12,children:(0,q.jsx)(c.A,{title:"Top categories",children:(0,q.jsx)(p.A,{scroll:{x:!0},onChange:e=>{const{pageSize:t,current:i}=e;oe(i,t)},pagination:{pageSize:null===U||void 0===U||null===(l=U.meta)||void 0===l?void 0:l.per_page,page:(null===U||void 0===U||null===(A=U.meta)||void 0===A?void 0:A.current_page)||1,total:null===U||void 0===U||null===(C=U.meta)||void 0===C?void 0:C.total,defaultCurrent:1},columns:re,dataSource:null===U||void 0===U?void 0:U.data})})}),(0,q.jsx)(a.A,{span:12,children:(0,q.jsx)(c.A,{title:"Top products",children:(0,q.jsx)(p.A,{scroll:{x:!0},onChange:e=>{const{pageSize:t,current:i}=e;oe(i,t)},pagination:{pageSize:null===Q||void 0===Q||null===(T=Q.meta)||void 0===T?void 0:T.per_page,page:(null===Q||void 0===Q||null===(P=Q.meta)||void 0===P?void 0:P.current_page)||1,total:null===Q||void 0===Q||null===(L=Q.meta)||void 0===L?void 0:L.total,defaultCurrent:1},columns:re,dataSource:null===Q||void 0===Q?void 0:Q.data})})})]})]})}},27109:(e,t,i)=>{i.d(t,{A:()=>s});var r=i(89379),l=i(9950);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6a8.03 8.03 0 00-11.3 0l-230 229.9L461.4 404a8.03 8.03 0 00-11.3 0L266.3 586.7a8.03 8.03 0 000 11.3l39.5 39.7z"}}]},name:"line-chart",theme:"outlined"};var n=i(25085),a=function(e,t){return l.createElement(n.A,(0,r.A)((0,r.A)({},e),{},{ref:t,icon:o}))};const s=l.forwardRef(a)}}]);