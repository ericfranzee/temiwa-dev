"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[4917],{31281:(e,t,a)=>{function l(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const l=e.map((e=>({[e.locale]:""===t["".concat(a,"[").concat(e.locale,"]")]?void 0:t["".concat(a,"[").concat(e.locale,"]")]})));return Object.assign({},...l)}a.d(t,{A:()=>l})},54917:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var l=a(9950),s=a(28429),i=a(85923),n=a(59233),c=a(23263),r=a(87094),d=a(41988),o=a(55902),u=a(48538),m=a(90650),g=a(91854),f=a(74623),h=(a(63620),a(70030)),p=a(71999),x=a(31281),j=a(48970),v=a(58974),A=a(17498),b=a(44414);const y=()=>{var e,t;const{t:a}=(0,h.B)(),{activeMenu:y}=(0,g.d4)((e=>e.menu),g.bN),N=(0,g.wA)(),[k]=n.A.useForm(),q=(0,s.Zp)(),{id:w}=(0,s.g)(),[F,I]=(0,l.useState)(null!==(e=y.data)&&void 0!==e&&e.img?null===(t=y.data)||void 0===t?void 0:t.img:[]),[L,O]=(0,l.useState)(!1),[z,E]=(0,l.useState)(!1),{languages:M,defaultLang:S}=(0,g.d4)((e=>e.formLang),g.bN);(0,l.useEffect)((()=>()=>{const e=k.getFieldsValue(!0);N((0,f.Ok)({activeMenu:y,data:e}))}),[]);const V=e=>e.map((e=>({uid:e,name:e,url:e})));function B(e){if(!e)return{};const{translations:t}=e,a=M.map((e=>{var a;return{["title[".concat(e.locale,"]")]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.title}}));return Object.assign({},...a)}return(0,l.useEffect)((()=>{var e;y.refetch&&(e=w,E(!0),v.A.getById(e).then((e=>{let t=e.data;const a={images:V([t.img]),...B(t)};k.setFieldsValue(a),I(V([t.img])),N((0,f.Ok)({activeMenu:y,data:a}))})).finally((()=>{N((0,f.km)(y)),E(!1)})))}),[y.refetch]),(0,b.jsx)(c.A,{title:a("edit.shop.tag"),className:"h-100",extra:(0,b.jsx)(p.A,{}),children:z?(0,b.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,b.jsx)(m.A,{size:"large",className:"py-5"})}):(0,b.jsxs)(n.A,{name:"edit.shop.tag",layout:"vertical",onFinish:e=>{const t={images:F.map((e=>e.name)),title:(0,x.A)(M,e,"title")};O(!0);const l="shop-tag";v.A.update(w,t).then((()=>{i.oR.success(a("successfully.created")),N((0,f.EK)({...y,nextUrl:l})),q("/".concat(l)),N((0,A.H)())})).finally((()=>O(!1)))},form:k,initialValues:{active:!0,...y.data},className:"d-flex flex-column h-100",children:[(0,b.jsxs)(r.A,{gutter:12,children:[(0,b.jsx)(d.A,{span:12,children:M.map((e=>(0,b.jsx)(n.A.Item,{label:a("title"),name:"title[".concat(e.locale,"]"),rules:[{required:e.locale===S,message:a("required")}],hidden:e.locale!==S,children:(0,b.jsx)(o.A,{})},"title"+e.locale)))}),(0,b.jsx)(d.A,{span:24,children:(0,b.jsx)(n.A.Item,{rules:[{required:!0,message:a("required")}],label:a("image"),name:"images",children:(0,b.jsx)(j.A,{type:"shop-tags",imageList:F,setImageList:I,form:k,multiple:!1})})})]}),(0,b.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,b.jsx)("div",{className:"pb-5",children:(0,b.jsx)(u.A,{type:"primary",htmlType:"submit",loading:L,disabled:L,children:a("submit")})})})]})})}}}]);