"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[2271],{17456:(e,t,a)=>{a.d(t,{A:()=>l});a(9950);const l=a.p+"static/media/paystack.6d6a77c8d6bfc75061ec651e5c2e74eb.svg"},80415:(e,t,a)=>{a.d(t,{G:()=>i,HV:()=>n,LH:()=>l,PR:()=>d,wO:()=>c,xt:()=>r});const l={new:[1,2,3,4,5],accepted:[1,2,3,4,5],ready:[1,2,3,4,5],on_a_way:[1,2,3,4,5],delivered:[1,2,3,4,5],canceled:[1,2,3,4,5],cooking:[1,2,3,4,5]},n=(new Date,new Date,["new","accepted","ready","on_a_way","pause","delivered","canceled"]),d=30,i="HH:mm",r="hh:mm a",c=!0},51066:(e,t,a)=>{a.d(t,{Q:()=>d});var l=a(17706),n=a(80415);const d=()=>{var e,t,a,d;return null!==(e=null===(t=l.M.getState())||void 0===t||null===(a=t.globalSettings)||void 0===a||null===(d=a.settings)||void 0===d?void 0:d.hour_format)&&void 0!==e?e:n.G}},53774:(e,t,a)=>{function l(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const a=Number(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===t?"".concat(a," ").concat(e):"".concat(e," ").concat(a)}a.r(t),a.d(t,{default:()=>l})},42271:(e,t,a)=>{a.r(t),a.d(t,{default:()=>H});var l=a(12916),n=a(23263),d=a(48538),i=a(66362),r=a(52913),c=a(53774),s=a(59051),o=a.n(s),u=a(9950),p=a(70030),h=a(91854),v=a(74623),m=a(53271),y=a(59233),x=a(82706),b=a(87094),f=a(41988),g=a(40577),j=a(53496),A=a(81446),w=a(85923),k=a(17456),S=a(54826),C=a(70283),N=a(68873),_=a(17491),z=a(23327),I=a(44414);function D(e){var t,a;let{open:l,handleCancel:i,refetch:r}=e;const{t:c}=(0,p.B)(),s=(0,h.wA)(),{payments:o,loading:v}=(0,h.d4)((e=>e.payment),h.bN),{myShop:m}=(0,h.d4)((e=>e.myShop),h.bN),{defaultCurrency:D}=(0,h.d4)((e=>e.currency),h.bN),F=(0,h.d4)((e=>e.auth.user.walledId)),[H,M]=(0,u.useState)(!1),[Y,B]=(0,u.useState)({}),[G,V]=(0,u.useState)(null),[q,E]=(0,u.useState)(null),{payment_type:K}=(0,h.d4)((e=>e.globalSettings.settings),h.bN),[Q]=y.A.useForm();(0,u.useEffect)((()=>{o.length||s((0,j.kK)()),async function(){await _.A.getById(m.id).then((e=>{let{data:t}=e;return V(t.map((e=>({label:e.payment.tag||"no name",value:e.payment.id,key:e.payment.id}))))}))}(),async function(){return _.A.getAll().then((e=>{let{data:t}=e;return E(t.map((e=>({label:e.tag||"no name",value:e.id,key:e.id}))))}))}().then()}),[]);const R=e=>{switch(e){case"wallet":return(0,I.jsx)(N.c8K,{size:80});case"paypal":return(0,I.jsx)(S.SnG,{size:80});case"stripe":return(0,I.jsx)(C.kDV,{size:80});case"razorpay":return(0,I.jsx)(C.NVb,{size:80});case"paystack":return(0,I.jsx)("img",{src:k.A,alt:"img",width:"80",height:"80"})}};return(0,I.jsx)(x.A,{visible:l,title:c("wallet.topup"),onCancel:i,footer:[(0,I.jsx)(d.A,{type:"primary",disabled:v,htmlType:"submit",form:"payment",loading:H,children:c("save")},"save-btn"),(0,I.jsx)(d.A,{type:"default",onClick:i,children:c("cancel")},"cancel-btn")],children:v?(0,I.jsx)(A.A,{}):(0,I.jsx)(y.A,{layout:"vertical",id:"payment",onFinish:e=>{if(!Y.value)return void w.oR.warning(c("please.select.payment.type"));const t={wallet_id:F,total_price:e.price,currency_id:null===D||void 0===D?void 0:D.id};M(!0),z.A.topUp(Y.label,t).then((e=>{let{data:t}=e;Q.resetFields(),B({}),i(),r(),window.open(t.data.url)})).finally((()=>M(!1)))},children:(0,I.jsxs)(b.A,{gutter:12,children:[(0,I.jsx)(f.A,{span:24,children:(0,I.jsx)(y.A.Item,{name:"price",label:c("price"),rules:[{required:!0,message:c("required")},{type:"number",min:0,message:c("should.be.greater.than.0")}],children:(0,I.jsx)(g.A,{className:"w-100"})})}),null===(t="admin"===K?q:G)||void 0===t||null===(a=t.filter((e=>"cash"!==(null===e||void 0===e?void 0:e.label)&&"wallet"!==(null===e||void 0===e?void 0:e.label))))||void 0===a?void 0:a.map(((e,t)=>(0,I.jsx)(f.A,{span:8,children:(0,I.jsxs)(n.A,{className:"payment-card ".concat((null===Y||void 0===Y?void 0:Y.label)===e.label?"active":""),onClick:()=>{B(e)},children:[(0,I.jsx)("div",{className:"payment-icon",children:R(null===e||void 0===e?void 0:e.label)}),(0,I.jsx)("div",{className:"font-weight-bold mt-2",children:c(null===e||void 0===e?void 0:e.label)})]})},t)))]})})})}var F=a(51066);const H=()=>{var e;const[t,a]=(0,u.useState)(null),{t:s}=(0,p.B)(),y=(0,h.wA)(),[x,b]=(0,u.useState)(!1),[f,g]=(0,u.useState)(!1),{activeMenu:j}=(0,h.d4)((e=>e.menu)),A=(0,F.Q)(),w=(0,u.useCallback)((()=>{b(!0),m.A.profileShow().then((e=>{a(e.data)})).finally((()=>{b(!1)}))}),[]);(0,u.useEffect)((()=>{null!==j&&void 0!==j&&j.refetch&&w(),y((0,v.km)(j))}),[null===j||void 0===j?void 0:j.refetch]);const k=[{title:s("created.at"),dataIndex:"created_at",render:e=>o()(e).format("YYYY-MM-DD ".concat(A))},{title:s("status"),dataIndex:"status",render:e=>(0,I.jsx)("div",{children:"paid"===e?(0,I.jsx)(l.A,{color:"cyan",children:e}):(0,I.jsx)(l.A,{color:"blue",children:e})})},{title:s("type"),dataIndex:"type",render:e=>"topup"===e?(0,I.jsx)(l.A,{color:"cyan",children:e}):(0,I.jsx)(l.A,{color:"error",children:e})},{title:s("note"),dataIndex:"note"}];return(0,I.jsxs)(n.A,{title:s("user.wallet"),extra:x?null:(0,I.jsx)(d.A,{onClick:()=>g(!0),children:s("top.up")}),children:[null!==t&&void 0!==t&&t.wallet?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(i.A.Title,{children:(0,c.default)(null===t||void 0===t?void 0:t.wallet.price)}),(0,I.jsx)(r.A,{loading:x,dataSource:null===t||void 0===t||null===(e=t.wallet)||void 0===e?void 0:e.histories,columns:k})]}):(0,I.jsx)(r.A,{dataSource:[],columns:k,loading:x}),(0,I.jsx)(D,{refetch:w,open:f,handleCancel:()=>g(!1)})]})}}}]);