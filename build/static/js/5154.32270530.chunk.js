"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[5154],{88754:(e,t,a)=>{a.d(t,{A:()=>g});var l=a(9950),c=a(36455),n=a(19181),s=a.n(n),i=a(59233),o=a(70030),r=a(64924),d=a(63620),u=a(44414);const g=e=>{let{getLanguageFields:t,form:a,lang:n,languages:g}=e;const{t:m}=(0,o.B)();function h(e){e.plugins.get("FileRepository").createUploadAdapter=e=>function(e){return{upload:()=>new Promise(((t,a)=>{const l=new FormData;e.file.then((e=>{l.append("image",e),l.append("type","blogs"),r.A.upload(l).then((e=>{let{data:a}=e;t({default:"".concat(d.sE+a.title)})})).catch((e=>{a(e)}))}))}))}}(e)}return(0,u.jsx)(l.Fragment,{children:g.map((e=>(0,u.jsx)(i.A.Item,{label:m("description"),name:"description[".concat(e.locale,"]"),valuePropName:"data",getValueFromEvent:(e,t)=>t.getData(),rules:[{required:e.locale===n,message:m("required")}],hidden:e.locale!==n,children:(0,u.jsx)(c.CKEditor,{editor:s(),data:t()["description[".concat(e.value,"]")],config:{extraPlugins:[h]},onBlur:(t,l)=>{const c=l.getData();a.setFieldsValue({["description[".concat(e.value,"]")]:c})}})},"desc"+e.locale)))})}},31281:(e,t,a)=>{function l(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const l=e.map((e=>({[e.locale]:""===t["".concat(a,"[").concat(e.locale,"]")]?void 0:t["".concat(a,"[").concat(e.locale,"]")]})));return Object.assign({},...l)}a.d(t,{A:()=>l})},95154:(e,t,a)=>{a.r(t),a.d(t,{default:()=>I});var l=a(9950),c=a(28429),n=a(85923),s=a(59233),i=a(23263),o=a(87094),r=a(41988),d=a(55902),u=a(25933),g=a(80737),m=a(48538),h=a(90650),p=a(91854),A=a(74623),f=a(12044),v=a(58920),x=a(71999),j=a(31281),b=a(62466),y=a(70030),F=a(88754),k=a(48970),q=a(44414);function I(){var e,t;const{t:a}=(0,y.B)(),{activeMenu:I}=(0,p.d4)((e=>e.menu),p.bN),{languages:N,defaultLang:E}=(0,p.d4)((e=>e.formLang),p.bN),L=(0,p.wA)(),[_]=s.A.useForm(),w=(0,c.Zp)(),{uuid:V}=(0,c.g)(),[B,P]=(0,l.useState)(null!==(e=I.data)&&void 0!==e&&e.image?[null===(t=I.data)||void 0===t?void 0:t.image]:[]),[z,C]=(0,l.useState)(!1),[D,O]=(0,l.useState)(!1);(0,l.useEffect)((()=>()=>{const e=_.getFieldsValue(!0);L((0,A.Ok)({activeMenu:I,data:e}))}),[]);function S(e){if(!e)return{};const{translations:t}=e,a=N.map((e=>{var a,l,c;return{["title[".concat(e.locale,"]")]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.title,["description[".concat(e.locale,"]")]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.description,["short_desc[".concat(e.locale,"]")]:null===(c=t.find((t=>t.locale===e.locale)))||void 0===c?void 0:c.short_desc}}));return Object.assign({},...a)}return(0,l.useEffect)((()=>{I.refetch&&(e=>{O(!0),v.A.getById(e).then((e=>{let t=e.data;_.setFieldsValue({...t,...S(t),image:[(0,b.A)(t.img)]}),P([(0,b.A)(t.img)])})).finally((()=>{O(!1),L((0,A.km)(I))}))})(V)}),[I.refetch]),(0,q.jsx)(i.A,{title:a("edit.blog"),extra:(0,q.jsx)(x.A,{}),children:D?(0,q.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,q.jsx)(h.A,{size:"large",className:"py-5"})}):(0,q.jsxs)(s.A,{name:"blog-edit",layout:"vertical",onFinish:e=>{const t={type:"blog",active:e.active?1:0,images:B.length?B.map((e=>e.name)):void 0,title:(0,j.A)(N,e),description:(0,j.A)(N,e,"description"),short_desc:(0,j.A)(N,e,"short_desc")};C(!0);const l="blogs";v.A.update(V,t).then((()=>{n.oR.success(a("successfully.created")),L((0,A.EK)({...I,nextUrl:l})),w("/".concat(l)),L((0,f.k)({}))})).finally((()=>C(!1)))},form:_,initialValues:{active:!0,...I.data},children:[(0,q.jsxs)(o.A,{gutter:12,children:[(0,q.jsx)(r.A,{span:12,children:N.map((e=>(0,q.jsx)(s.A.Item,{label:a("title"),name:"title[".concat(e.locale,"]"),rules:[{required:e.locale===E,message:a("requried")}],hidden:e.locale!==E,children:(0,q.jsx)(d.A,{})},"title"+e.locale)))}),(0,q.jsx)(r.A,{children:(0,q.jsx)(s.A.Item,{label:a("image"),rules:[{required:!B.length,message:a("required")}],children:(0,q.jsx)(k.A,{type:"blogs",imageList:B,setImageList:P,form:_,length:"1",multiple:!1})})}),(0,q.jsx)(r.A,{children:(0,q.jsx)("div",{className:"col-md-12 col-sm-6",children:(0,q.jsx)(s.A.Item,{label:a("active"),name:"active",valuePropName:"checked",children:(0,q.jsx)(u.A,{})})})}),(0,q.jsx)(r.A,{span:24,children:N.map((e=>(0,q.jsx)(s.A.Item,{label:a("short.description"),name:"short_desc[".concat(e.locale,"]"),rules:[{required:e.locale===E,message:a("required")}],hidden:e.locale!==E,children:(0,q.jsx)(d.A,{})},"short_desc"+e.locale)))}),(0,q.jsx)(r.A,{span:24,children:(0,q.jsx)(F.A,{languages:N,form:_,lang:E,getLanguageFields:S})})]}),(0,q.jsx)(g.A,{children:(0,q.jsx)(m.A,{type:"primary",htmlType:"submit",loading:z,children:a("save")})})]})})}}}]);