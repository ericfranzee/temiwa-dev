"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[5588],{12970:(e,t,s)=>{function i(e){var t,s;let i=null===e||void 0===e?void 0:e.slice(0,1),a=null===e||void 0===e?void 0:e.lastIndexOf("@"),n=null===e||void 0===e?void 0:e.slice(1,a-1);n=null===(t=n)||void 0===t?void 0:t.replace(/./g,"*");let l=null===e||void 0===e?void 0:e.slice(a-1,e.length);return null===i||void 0===i||null===(s=i.concat(n))||void 0===s?void 0:s.concat(l)}s.d(t,{A:()=>i})},79406:(e,t,s)=>{s.d(t,{a:()=>r});var i=s(9950),a=s(95491),n=s.n(a),l=s(99674),d=s(90650),o=s(44414);const r=e=>{let{fetchOptions:t,debounceTimeout:s=400,refetch:a=!1,...r}=e;const[c,u]=(0,i.useState)(!1),[m,v]=(0,i.useState)([]),p=(0,i.useMemo)((()=>n()((e=>{v([]),u(!0),t(e).then((e=>{v(e),u(!1)}))}),s)),[t,s]);return(0,o.jsx)(l.A,{showSearch:!0,allowClear:!0,labelInValue:!0,onClear:()=>p(""),filterOption:!1,onSearch:p,notFoundContent:c?(0,o.jsx)(d.A,{size:"small"}):"no results",...r,options:m,onFocus:()=>{m.length&&!a||p("")}})}},34422:(e,t,s)=>{s.d(t,{Q:()=>n});var i=s(59051),a=s.n(i);const n=[{title:"monday",disabled:!1,from:a()("01:00:00","HH:mm:ss"),to:a()("23:00:00","HH:mm:ss")},{title:"tuesday",disabled:!1,from:a()("01:00:00","HH:mm:ss"),to:a()("23:00:00","HH:mm:ss")},{title:"wednesday",disabled:!1,from:a()("01:00:00","HH:mm:ss"),to:a()("23:00:00","HH:mm:ss")},{title:"thursday",disabled:!1,from:a()("01:00:00","HH:mm:ss"),to:a()("23:00:00","HH:mm:ss")},{title:"friday",disabled:!1,from:a()("01:00:00","HH:mm:ss"),to:a()("23:00:00","HH:mm:ss")},{title:"saturday",disabled:!1,from:a()("01:00:00","HH:mm:ss"),to:a()("23:00:00","HH:mm:ss")},{title:"sunday",disabled:!1,from:a()("01:00:00","HH:mm:ss"),to:a()("23:00:00","HH:mm:ss")}]},75588:(e,t,s)=>{s.r(t),s.d(t,{default:()=>qe});var i=s(9950),a=s(54909),n=s(59233),l=s(23263),d=s(28429),o=s(59051),r=s.n(o),c=s(53271),u=s(81446),m=s(50273),v=s(91854),p=s(74623),h=s(70030),x=s(90150),j=s(54766),A=s(62466),f=s(50302),b=s(1840),g=s(13311),y=s(12970),_=s(80737),w=s(48538),k=s(52913),C=s(24513),I=s(44070),S=s(53387),H=s(85923),q=s(55386),N=s(35116),P=s(9456),V=s(48676),M=s(8168),O=s(76083),E=s(44414);const F=function(e){var t,s,a;let{setVisibleComponent:n,setEditId:d}=e;const{t:o}=(0,h.B)(),r=(0,v.wA)(),{setIsModalVisible:c}=(0,i.useContext)(q.o),{activeMenu:u}=(0,v.d4)((e=>e.menu),v.bN),{disabledTimes:m,params:x,meta:j,loading:A}=(0,v.d4)((e=>e.disabledTimes),v.bN),[f,b]=(0,i.useState)(!1),[g,y]=(0,i.useState)(),[F,D]=(0,i.useState)(null),Y=null===u||void 0===u?void 0:u.data,B={search:null===Y||void 0===Y?void 0:Y.search,sort:null===Y||void 0===Y?void 0:Y.sort,column:null===Y||void 0===Y?void 0:Y.column,master_id:null===Y||void 0===Y?void 0:Y.id,...x},[T]=(0,i.useState)([{title:o("id"),dataIndex:"id",is_show:!0,sorter:!0,key:"id"},{title:o("title"),dataIndex:"title",is_show:!0,key:"title"},{title:o("repeats"),is_show:!0,dataIndex:"repeats",key:"repeats"},{title:o("date"),dataIndex:"date",key:"date",is_show:!0},{title:o("from"),dataIndex:"from",key:"from",is_show:!0},{title:o("to"),dataIndex:"to",key:"to",is_show:!0},{title:o("options"),dataIndex:"options",key:"options",is_show:!0,render:(e,t)=>(0,E.jsxs)(_.A,{children:[(0,E.jsx)(w.A,{type:"primary",icon:(0,E.jsx)(C.A,{}),onClick:()=>{z(t.id)}}),(0,E.jsx)(N.A,{icon:(0,E.jsx)(I.A,{}),onClick:()=>{y([t.id]),c(!0),D("delete")}})]})}]),R={selectedRowKeys:g,onChange:e=>{y(e)}},z=e=>{d(e),n("edit-form")};return(0,i.useEffect)((()=>{r((0,V.k1)(B))}),[]),(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(l.A,{title:o("disabled.times"),children:[(0,E.jsxs)("div",{className:"flex align-items-center justify-content-between mb-4",children:[(0,E.jsx)(w.A,{type:"primary",icon:(0,E.jsx)(S.A,{}),onClick:()=>{n("add-form")},children:o("add.disabled.time")}),(0,E.jsx)(w.A,{onClick:()=>{null===g||0===g.length?H.oR.warning(o("select.the.product")):(c(!0),D("all.delete"))},icon:(0,E.jsx)(I.A,{}),children:o("delete.selected")})]}),(0,E.jsx)(k.A,{scroll:{x:!0},rowSelection:R,columns:null===T||void 0===T?void 0:T.filter((e=>e.is_show)),dataSource:m,loading:A,pagination:{pageSize:null===x||void 0===x?void 0:x.perPage,page:(null===(t=u.data)||void 0===t?void 0:t.page)||1,total:null===j||void 0===j?void 0:j.total,defaultCurrent:null===u||void 0===u||null===(s=u.data)||void 0===s?void 0:s.page,current:null===(a=u.data)||void 0===a?void 0:a.page},rowKey:e=>e.id,onChange:function(e,t,s){const{pageSize:i,current:a}=e,{field:n,order:l}=s,d=(0,M.A)(l);r((0,p.Ok)({activeMenu:u,data:{...u.data,perPage:i,page:a,column:n,sort:d}}))}})]}),(0,E.jsx)(O.A,{click:()=>{b(!0);const e={...Object.assign({},...g.map(((e,t)=>({["ids[".concat(t,"]")]:e}))))};P.b.delete(e).then((()=>{H.oR.success(o("successfully.deleted")),y(null),c(!1),D(""),r((0,V.k1)(B))})).finally((()=>b(!1)))},text:F,setText:y,loading:f})]})};var D=s(87094),Y=s(40895),B=s(41988),T=s(55902),R=s(25933),z=s(86971),L=s(57796),K=s(99674),Q=s(40577);const Z=["dont_repeat","day","week","month","custom"],U=["day","week","month"],X=["never","date","after"],G=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];var J=s(51066);const W=function(e){let{initialValues:t={},onSubmit:s,setVisibleComponent:a}=e;const{t:l}=(0,h.B)(),d=(0,v.wA)(),{activeMenu:o}=(0,v.d4)((e=>e.menu)),[c,u]=(0,i.useState)((null===t||void 0===t?void 0:t.repeats)||""),[m,p]=(0,i.useState)((null===t||void 0===t?void 0:t.end_type)||""),[x,j]=(0,i.useState)((null===t||void 0===t?void 0:t.custom_repeat_type)||""),[A,f]=(0,i.useState)(!1),{defaultLang:b,languages:g}=(0,v.d4)((e=>e.formLang),v.bN),y=(0,v.d4)((e=>{var t,s;return null===(t=e.globalSettings)||void 0===t||null===(s=t.settings)||void 0===s?void 0:s.using_12_hour_format}),v.bN),_=(0,J.Q)();return(0,E.jsxs)(n.A,{initialValues:t,layout:"vertical",onFinish:e=>{var t,i,n,l;f(!0);const u=void 0!==e.end_value?"date"===m?r()(null===e||void 0===e?void 0:e.end_value_date).format("YYYY-MM-DD"):null===e||void 0===e?void 0:e.end_value_number:void 0,v="custom"===c?"week"===x?[null===e||void 0===e||null===(t=e.custom_repeat_value)||void 0===t?void 0:t.every,...null===e||void 0===e||null===(i=e.custom_repeat_value)||void 0===i?void 0:i.weekDays]:[null===e||void 0===e||null===(n=e.custom_repeat_value)||void 0===n?void 0:n.every]:void 0,p={...e,date:r()(null===e||void 0===e?void 0:e.date).format("YYYY-MM-DD"),from:r()(null===e||void 0===e?void 0:e.from).format("HH:mm"),to:r()(null===e||void 0===e?void 0:e.to).format("HH:mm"),end_value:u,can_booking:null!==e&&void 0!==e&&e.can_booking?1:0,custom_repeat_value:v,master_id:null===(l=o.data)||void 0===l?void 0:l.id};return delete p.end_value_date,delete p.end_value_number,s(p).then((()=>{var e;H.oR.success("successfully.added"),a("table"),d((0,V.k1)({master_id:null===(e=o.data)||void 0===e?void 0:e.id}))})).finally((()=>{f(!1)}))},children:[(0,E.jsxs)(D.A,{gutter:24,children:[(0,E.jsx)(Y.A,{orientation:"left",plain:!0,children:l("overview")}),(0,E.jsx)(B.A,{span:8,children:g.map((e=>(0,E.jsx)(n.A.Item,{label:l("name"),name:"title[".concat(e.locale,"]"),rules:[{validator:(t,s)=>s||(null===e||void 0===e?void 0:e.locale)!==b?s&&""===(null===s||void 0===s?void 0:s.trim())?Promise.reject(new Error(l("no.empty.space"))):s&&(null===s||void 0===s?void 0:s.length)<2?Promise.reject(new Error(l("min.2.letters"))):Promise.resolve():Promise.reject(new Error(l("required")))}],hidden:e.locale!==b,children:(0,E.jsx)(T.A,{})},"title"+e.id)))}),(0,E.jsx)(B.A,{span:8,children:g.map((e=>(0,E.jsx)(n.A.Item,{label:l("description"),name:"description[".concat(e.locale,"]"),rules:[{validator:(t,s)=>s||(null===e||void 0===e?void 0:e.locale)!==b?s&&""===(null===s||void 0===s?void 0:s.trim())?Promise.reject(new Error(l("no.empty.space"))):s&&(null===s||void 0===s?void 0:s.trim().length)<5?Promise.reject(new Error(l("must.be.at.least.5"))):Promise.resolve():Promise.reject(new Error(l("required")))}],hidden:e.locale!==b,children:(0,E.jsx)(T.A,{maxLength:150})},"description"+e.locale)))}),(0,E.jsx)(B.A,{span:8,children:(0,E.jsx)(n.A.Item,{name:"can_booking",label:l("can.booking"),valuePropName:"can_booking",children:(0,E.jsx)(R.A,{defaultChecked:t.can_booking})})}),(0,E.jsx)(Y.A,{orientation:"left",plain:!0,children:l("date")}),(0,E.jsx)(B.A,{span:8,children:(0,E.jsx)(n.A.Item,{name:"date",label:l("date"),rules:[{required:!0,message:l("required")}],children:(0,E.jsx)(z.A,{className:"w-100"})})}),(0,E.jsx)(B.A,{span:8,children:(0,E.jsx)(n.A.Item,{name:"from",label:l("from"),rules:[{required:!0,message:l("required")}],children:(0,E.jsx)(L.A,{format:_,use12Hour:"1"===y,className:"w-100"})})}),(0,E.jsx)(B.A,{span:8,children:(0,E.jsx)(n.A.Item,{name:"to",label:l("to"),rules:[{required:!0,message:l("required")}],children:(0,E.jsx)(L.A,{format:_,use12Hour:"1"===y,className:"w-100"})})}),(0,E.jsx)(Y.A,{orientation:"left",plain:!0,children:l("repeat")}),(0,E.jsx)(B.A,{span:8,children:(0,E.jsx)(n.A.Item,{name:"repeats",label:l("repeats"),rules:[{required:!0,message:l("required")}],help:"month"===c?"Repeat on the ".concat(r()().date()," of every month"):void 0,children:(0,E.jsx)(K.A,{onChange:u,children:Z.map((e=>(0,E.jsx)(K.A.Option,{value:e,children:l(e)},e)))})})}),"custom"===c&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(Y.A,{orientation:"left",plain:!0,children:l("custom.repeat")}),(0,E.jsx)(B.A,{span:8,children:(0,E.jsx)(n.A.Item,{label:l("every"),children:(0,E.jsxs)(D.A,{children:[(0,E.jsx)(B.A,{span:8,children:(0,E.jsx)(n.A.Item,{name:["custom_repeat_value","every"],rules:[{required:!0,message:l("required")}],children:(0,E.jsx)(Q.A,{min:1,className:"w-100"})})}),(0,E.jsx)(B.A,{span:16,children:(0,E.jsx)(n.A.Item,{name:["custom_repeat_type"],rules:[{required:!0,message:l("required")}],children:(0,E.jsx)(K.A,{onChange:j,children:U.map((e=>(0,E.jsx)(K.A.Option,{value:e,children:l(e)},e)))})})})]})})}),"week"===x&&(0,E.jsx)(B.A,{span:8,children:(0,E.jsx)(n.A.Item,{name:["custom_repeat_value","weekDays"],rules:[{required:!0,message:l("required")}],label:l("on.days"),children:(0,E.jsx)(K.A,{mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"Please select",children:G.map((e=>(0,E.jsx)(K.A.Option,{value:e,children:l(e)},e)))})})})]}),"dont_repeat"!==c&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(Y.A,{orientation:"left",plain:!0,children:l("ends")}),(0,E.jsx)(B.A,{span:8,children:(0,E.jsx)(n.A.Item,{name:"end_type",label:l("end.type"),rules:[{required:!0,message:l("required")}],children:(0,E.jsx)(K.A,{onChange:p,children:X.map((e=>(0,E.jsx)(K.A.Option,{value:e,children:l(e)},e)))})})}),"date"===m?(0,E.jsx)(B.A,{span:8,children:(0,E.jsx)(n.A.Item,{name:"end_value_date",label:l("end.value"),rules:[{required:!0,message:l("required")}],children:(0,E.jsx)(z.A,{className:"w-100"})})}):"after"===m?(0,E.jsx)(B.A,{span:8,children:(0,E.jsx)(n.A.Item,{name:"end_value_number",label:l("occurrences"),rules:[{required:!0,message:l("required")}],children:(0,E.jsx)(Q.A,{min:1,className:"w-100"})})}):null]})]}),(0,E.jsx)(w.A,{type:"primary",htmlType:"submit",loading:A,children:l("submit")})]})};var $=s(71999);const ee=function(e){let{setVisibleComponent:t}=e;const{t:s}=(0,h.B)();return(0,E.jsx)(l.A,{extra:(0,E.jsxs)(_.A,{children:[(0,E.jsx)(w.A,{onClick:()=>t("table"),children:s("back")}),(0,E.jsx)($.A,{})]}),children:(0,E.jsx)(W,{onSubmit:e=>P.b.create(e),setVisibleComponent:t})})};const te=function(e){let{setVisibleComponent:t,editId:s}=e;const{t:a}=(0,h.B)(),{languages:n}=(0,v.d4)((e=>e.formLang)),[d,o]=(0,i.useState)(!1),[c,u]=(0,i.useState)({});function m(e){if(!e)return{};const{translations:t=[]}=e,s=n.map((e=>{var s,i;return{["title[".concat(e.locale,"]")]:null===(s=t.find((t=>t.locale===e.locale)))||void 0===s?void 0:s.title,["description[".concat(e.locale,"]")]:null===(i=t.find((t=>t.locale===e.locale)))||void 0===i?void 0:i.description}}));return Object.assign({},...s)}return(0,i.useEffect)((()=>{var e;e=s,o(!0),P.b.getById(e).then((e=>{let{data:t}=e;const s={...t,...m(t),can_booking:Boolean(t.can_booking),date:r()(t.date),from:r()(t.from,"HH:mm"),to:r()(t.to,"HH:mm")};var i;t.end_value&&("date"===t.end_type?s.end_value_date=r()(t.end_value):s.end_value_number=t.end_value),"custom"===t.repeats&&(s.custom_repeat_value={},s.custom_repeat_value.every=null===t||void 0===t?void 0:t.custom_repeat_value[0],"week"===t.custom_repeat_type&&(s.custom_repeat_value.weekDays=null===t||void 0===t||null===(i=t.custom_repeat_value)||void 0===i?void 0:i.slice(1))),u(s)})).catch((e=>{console.error(e)})).finally((()=>{o(!1)}))}),[]),(0,E.jsx)(l.A,{title:a("edit.disabled.time"),loading:d,extra:(0,E.jsxs)(_.A,{children:[(0,E.jsx)(w.A,{onClick:()=>t("table"),children:a("back")}),(0,E.jsx)($.A,{})]}),children:!d&&(0,E.jsx)(W,{initialValues:c,onSubmit:e=>P.b.update(s,e),setVisibleComponent:t})})};const se=function(){const[e,t]=(0,i.useState)("table"),[s,a]=(0,i.useState)();switch(e){case"table":return(0,E.jsx)(F,{setVisibleComponent:t,setEditId:a});case"add-form":return(0,E.jsx)(ee,{setVisibleComponent:t});case"edit-form":return(0,E.jsx)(te,{editId:s,setVisibleComponent:t});default:return(0,E.jsx)(F,{})}};var ie=s(12916),ae=s(50384),ne=s(34422),le=s(13239),de=s(94118),oe=s(9213),re=s(82371);const ce="dashboard/admin/master-closed-dates",ue=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return re.A.get("".concat(ce,"/").concat(e),{params:t})},me=(e,t)=>re.A.put("".concat(ce,"/").concat(e),t),ve={getAll:()=>re.A.get("dashboard/admin/user-working-days"),getById:e=>(0,re.A)("dashboard/admin/user-working-days/".concat(e)),update:(e,t)=>re.A.put("dashboard/admin/user-working-days/".concat(e),t,{})},pe=()=>{var e;const{t:t}=(0,h.B)(),[s]=n.A.useForm(),a=[{from:new Date(1900,4,18),to:new Date(r()().subtract(1,"days"))}],{activeMenu:d}=(0,v.d4)((e=>e.menu),v.bN),o=(0,v.d4)((e=>{var t,s;return null===(t=e.globalSettings)||void 0===t||null===(s=t.settings)||void 0===s?void 0:s.using_12_hour_format}),v.bN),c=(0,J.Q)(),u=null===d||void 0===d||null===(e=d.data)||void 0===e?void 0:e.id,[m,p]=(0,i.useState)(!0),[x,j]=(0,i.useState)([]),[A,f]=(0,i.useState)(!1),[b,g]=(0,i.useState)(!1),[y,k]=(0,i.useState)(new Array(7).fill(!1)),C=(e,t)=>{const s=[];for(let i=e;i<t;i++)s.push(i);return s},I=()=>({disabledHours:()=>C(0,1),disabledMinutes:()=>C(0,0),disabledSeconds:()=>C(0,60)});(0,i.useEffect)((()=>{g(!0),(async()=>{try{g(!0),await Promise.all([ue(u).then((e=>{const t=e.data.closed_dates.map((e=>new Date(e.date)));j(t)})),ve.getById(u).then((e=>{k(0!==e.data.dates.length?e.data.dates.map((e=>e.disabled)):[]),0!==e.data.dates.length&&s.setFieldsValue({working_days:e.data.dates.map((e=>({title:e.day,from:r()(e.from,"HH:mm:ss"),to:r()(e.to,"HH:mm:ss"),disabled:Boolean(e.disabled)})))})}))])}finally{g(!1)}})().then()}),[]);const S=x&&x.length>0?(0,E.jsxs)(D.A,{children:[(0,E.jsx)(ie.A,{style:{fontSize:14,padding:"4px 10px",width:"100%",marginTop:"10px"},children:t("Your.existing.vacations")}),(0,E.jsxs)(B.A,{span:24,className:"mt-2",children:[x.slice(0,m?1:x.length).map(((e,s)=>(0,E.jsxs)(_.A,{className:"d-flex justify-content-between",style:{borderBottom:"1px solid #4D5B75"},children:[(0,E.jsx)(B.A,{span:24,style:{fontSize:14,marginTop:"8px"},children:r()(e).format("YYYY-MM-DD")}),(0,E.jsx)(B.A,{span:24,children:(0,E.jsx)(ie.A,{color:"red",className:"cursor-pointer mt-3 mb-2",style:{fontSize:14},onClick:()=>{return t=e,j(x.filter((e=>e!==t)));var t},children:t("remove")})})]},s))),(0,E.jsx)(w.A,{className:"mt-3 w-100",onClick:()=>{p(!m)},children:m?(0,E.jsx)(ae.U29,{}):(0,E.jsx)(ae.ZXT,{})})]})]}):(0,E.jsx)(ie.A,{style:{fontSize:14,padding:"4px 10px",width:"100%"},children:"Please pick one or more days."});return(0,i.useEffect)((()=>{s.setFieldsValue({working_days:ne.Q})}),[]),(0,E.jsx)(l.A,{loading:b,children:(0,E.jsxs)(n.A,{onFinish:e=>{f(!0);const s={dates:e.working_days.map((e=>({day:e.title,from:r()(e.from?e.from:"00").format("HH:mm"),to:r()(e.to?e.to:"00").format("HH:mm"),disabled:e.disabled})))},i={dates:x?x.map((e=>r()(e).format("YYYY-MM-DD"))):void 0,master_id:u};Promise.all([me(u,i),ve.update(u,s)]).then((e=>{H.oR.success(t("successfully.created"))})).finally((()=>{f(!1)}))},form:s,children:[(0,E.jsxs)(D.A,{gutter:12,children:[(0,E.jsx)(B.A,{span:12,children:(0,E.jsx)(l.A,{title:t("master.working.days"),children:(0,E.jsx)(n.A.List,{name:"working_days",children:e=>(0,E.jsx)("div",{children:e.map(((e,s)=>(0,E.jsxs)(D.A,{gutter:12,align:"center",children:[(0,E.jsx)(B.A,{span:7,children:(0,E.jsx)(n.A.Item,{name:[s,"day"],children:(0,E.jsx)("span",{children:t(ne.Q[s].title)})})}),y[e.key]?(0,E.jsx)(B.A,{span:13,className:"mt-2",children:(0,E.jsx)("span",{children:t("shop.closed")})}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(B.A,{span:7,children:(0,E.jsx)(n.A.Item,{rules:[{required:!1===y[e.key]}],name:[s,"from"],children:(0,E.jsx)(L.A,{format:c,use12Hour:"1"===o,disabledTime:I,picker:"time",placeholder:t("start.time")})})}),(0,E.jsx)(B.A,{span:6,children:(0,E.jsx)(n.A.Item,{rules:[{required:!1===y[e.key]}],name:[s,"to"],children:(0,E.jsx)(L.A,{format:c,use12Hour:"1"===o,disabledTime:I,picker:"time",placeholder:t("end.time")})})})]}),(0,E.jsx)(B.A,{span:4,children:(0,E.jsx)(n.A.Item,{name:[s,"disabled"],valuePropName:"checked",children:(0,E.jsx)(R.A,{checkedChildren:(0,E.jsx)(le.A,{}),unCheckedChildren:(0,E.jsx)(de.A,{}),checked:y[e.key],onChange:()=>(e=>{const t=[...y];t[e]=!y[e],k(t)})(e.key)})})})]},e.key)))})})})}),(0,E.jsx)(B.A,{span:12,children:(0,E.jsxs)(l.A,{title:t("master.closed.days"),children:[(0,E.jsx)("p",{children:t("restaurant.closed.days.text")}),!b&&(0,E.jsx)(n.A.Item,{rules:[{required:!1,message:t("required")}],children:(0,E.jsx)(oe.hv,{className:"datepicker",mode:"multiple",disabled:a,min:1,selected:x,onSelect:j,footer:S,showOutsideDays:!0})})]})})]}),(0,E.jsx)(w.A,{type:"primary",htmlType:"submit",loading:A,children:t("submit")})]})})};var he=s(88986),xe=s(30020),je=s(75751),Ae=s(53774);const fe={1:"male",2:"female",3:"all"};const be=function(e){var t,s,a;let{setVisibleComponent:n,setEditId:o}=e;const{t:r}=(0,h.B)(),c=(0,v.wA)(),{activeMenu:u}=(0,v.d4)((e=>e.menu)),{setIsModalVisible:m}=(0,i.useContext)(q.o),{serviceMaster:x,meta:j,loading:A,params:f}=(0,v.d4)((e=>e.serviceMaster),v.bN),[b,g]=((0,d.Zp)(),(0,i.useState)(null)),[y,P]=(0,i.useState)(null),[V,F]=(0,i.useState)(!1),[D,Y]=(0,i.useState)({id:null,active:!1}),B={selectedRowKeys:b,onChange:e=>{g(e)}},[T]=(0,i.useState)([{title:r("id"),dataIndex:"id",is_show:!0,sorter:!0,key:"id"},{title:r("service.name"),dataIndex:"serviceName",is_show:!0,key:"service.name",render:(e,t)=>{var s,i;return null===(s=t.service)||void 0===s||null===(i=s.translation)||void 0===i?void 0:i.title}},{title:r("commission.fee"),dataIndex:"commission_fee",is_show:!0,key:"commission.fee",render:e=>(0,Ae.default)(e)},{title:r("discount"),dataIndex:"discount",is_show:!0,key:"discount",render:e=>(0,Ae.default)(e)},{title:r("gender"),dataIndex:"gender",is_show:!0,key:"gender",render:e=>r(fe[e])},{title:r("interval"),dataIndex:"interval",is_show:!0,key:"interval",render:e=>(0,E.jsx)(ie.A,{children:e})},{title:r("type"),dataIndex:"type",is_show:!0,key:"type",render:e=>(0,E.jsx)(ie.A,{children:e})},{title:r("options"),dataIndex:"options",key:"options",is_show:!0,render:(e,t)=>(0,E.jsxs)(_.A,{children:[(0,E.jsx)(w.A,{type:"primary",icon:(0,E.jsx)(C.A,{}),onClick:()=>{R(t.id)}}),(0,E.jsx)(N.A,{icon:(0,E.jsx)(I.A,{}),onClick:()=>{g([t.id]),m(!0),P("delete")}})]})}]),R=e=>{o(e),n("edit-form")},z=null===u||void 0===u?void 0:u.data,L={...f,search:null===z||void 0===z?void 0:z.search,sort:null===z||void 0===z?void 0:z.sort,column:null===z||void 0===z?void 0:z.column,perPage:null===z||void 0===z?void 0:z.perPage,page:null===z||void 0===z?void 0:z.page,master_id:z.id};return(0,i.useEffect)((()=>{c((0,je.hP)(L))}),[]),(0,he.A)((()=>{c((0,je.hP)(L))}),[z]),(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(l.A,{title:r("service.master"),children:[(0,E.jsxs)("div",{className:"d-flex justify-content-between mb-4",children:[(0,E.jsx)(w.A,{icon:(0,E.jsx)(S.A,{}),type:"primary",onClick:()=>{n("add-form")},children:r("add.service.master")}),(0,E.jsx)(w.A,{onClick:()=>{null===b||0===b.length?H.oR.warning(r("select.the.product")):(m(!0),P("all.delete"))},icon:(0,E.jsx)(I.A,{}),children:r("delete.selected")})]}),(0,E.jsx)(k.A,{scroll:{x:!0},rowSelection:B,columns:null===T||void 0===T?void 0:T.filter((e=>e.is_show)),dataSource:x,loading:A,pagination:{pageSize:f.perPage,page:(null===(t=u.data)||void 0===t?void 0:t.page)||1,total:j.total,defaultCurrent:null===(s=u.data)||void 0===s?void 0:s.page,current:null===(a=u.data)||void 0===a?void 0:a.page},rowKey:e=>e.id,onChange:function(e,t,s){const{pageSize:i,current:a}=e,{field:n,order:l}=s,d=(0,M.A)(l);c((0,p.Ok)({activeMenu:u,data:{...u.data,perPage:i,page:a,column:n,sort:d}}))}})]}),(0,E.jsx)(O.A,{click:()=>{"delete"===y||"all.delete"===y?(()=>{F(!0);const e={...Object.assign({},...b.map(((e,t)=>({["ids[".concat(t,"]")]:e}))))};xe.A.delete(e).then((()=>{H.oR.success(r("successfully.deleted")),g(null),m(!1),P(""),c((0,je.hP)(L))})).finally((()=>F(!1)))})():"set.active.order.status"===y&&(F(!0),xe.A.update(D.id,{active:Number(D.active)}).then((()=>{Y({id:null,active:!1}),m(!1),P(""),c((0,je.hP)(L))})).finally((()=>F(!1))))},text:y,setText:g,loading:V})]})};s(55660);var ge=s(54764),ye=(s(47992),s(79406));const _e=["online","offline_in","offline_out"],we=[{value:1,label:"male"},{value:2,label:"female"},{value:3,label:"all"}];const ke=function(e){var t,s,a,l,o,r,c,u,m;let{form:p,onSubmit:x,setVisibleComponent:j}=e;const{t:A}=(0,h.B)(),f=(0,v.wA)(),{activeMenu:b}=((0,d.Zp)(),(0,v.d4)((e=>e.menu))),{defaultCurrency:g}=(0,v.d4)((e=>e.currency),v.bN),y=(0,i.useRef)([]),[_,k]=(0,i.useState)(!1);return(0,E.jsxs)(n.A,{onFinish:e=>{var t;k(!0);const s={...e,shop_id:e.shop.value,service_id:e.service.value,active:e.active?1:0,master_id:null===(t=b.data)||void 0===t?void 0:t.id,shop:void 0,service:void 0};return x(s).then((()=>{var e;H.oR.success("successfully.added"),j("table"),f((0,je.hP)({master_id:null===(e=b.data)||void 0===e?void 0:e.id}))})).finally((()=>{k(!1)}))},form:p,layout:"vertical",initialValues:{active:!0,shop:{label:null!==(t=b.data)&&void 0!==t&&null!==(s=t.invitations)&&void 0!==s&&s[0]?null===(a=b.data)||void 0===a||null===(l=a.invitations[0])||void 0===l||null===(o=l.shop)||void 0===o||null===(r=o.translation)||void 0===r?void 0:r.title:A("shop.not.found"),value:null===(c=b.data)||void 0===c||null===(u=c.invitations[0])||void 0===u||null===(m=u.shop)||void 0===m?void 0:m.id}},children:[(0,E.jsxs)(D.A,{gutter:24,children:[(0,E.jsx)(B.A,{span:8,children:(0,E.jsx)(n.A.Item,{label:A("shop"),name:"shop",rules:[{required:!0,message:A("required")}],children:(0,E.jsx)(K.A,{disabled:!0})})}),(0,E.jsx)(B.A,{span:8,children:(0,E.jsx)(n.A.Item,{label:A("service"),name:"service",rules:[{required:!0,message:A("required")}],children:(0,E.jsx)(ye.a,{fetchOptions:e=>{const t={search:e,active:1};return ge.A.getAll(t).then((e=>{const t=e.data.map((e=>({label:e.translation?e.translation.title:"no name",value:e.id,key:e.id,price:e.price,interval:e.interval,pause:e.pause,commission_fee:e.commission_fee,type:e.type,gender:e.gender})));return y.current=t,t}))},refetch:!0,onChange:e=>{var t;const s=null===(t=y.current)||void 0===t?void 0:t.find((t=>t.value===e.value));p.setFieldsValue({service:e,...s})}})})}),(0,E.jsx)(B.A,{span:8,children:(0,E.jsx)(n.A.Item,{label:A("price"),name:"price",rules:[{required:!0,message:A("required")}],children:(0,E.jsx)(Q.A,{min:0,className:"w-100",addonAfter:null===g||void 0===g?void 0:g.symbol})})}),(0,E.jsx)(B.A,{span:8,children:(0,E.jsx)(n.A.Item,{label:A("interval"),name:"interval",rules:[{required:!0,message:A("required")}],children:(0,E.jsx)(Q.A,{min:0,className:"w-100"})})}),(0,E.jsx)(B.A,{span:8,children:(0,E.jsx)(n.A.Item,{label:A("pause"),name:"pause",rules:[{required:!0,message:A("required")}],children:(0,E.jsx)(Q.A,{min:0,className:"w-100"})})}),(0,E.jsx)(B.A,{span:8,children:(0,E.jsx)(n.A.Item,{label:"type",name:"type",rules:[{required:!0,message:A("required")}],children:(0,E.jsx)(K.A,{children:_e.map(((e,t)=>(0,E.jsx)(K.A.Option,{value:e,children:e},e)))})})}),(0,E.jsx)(B.A,{span:8,children:(0,E.jsx)(n.A.Item,{label:A("commission.fee"),name:"commission_fee",children:(0,E.jsx)(Q.A,{min:1,className:"w-100"})})}),(0,E.jsx)(B.A,{span:8,children:(0,E.jsx)(n.A.Item,{label:A("discount"),name:"discount",rules:[{validator:(e,t)=>void 0!==t&&(t<0||t>100)?Promise.reject(new Error(A("must.be.between.0.and.100"))):Promise.resolve()}],children:(0,E.jsx)(Q.A,{min:0,className:"w-100",addonAfter:"%"})})}),(0,E.jsx)(B.A,{span:8,children:(0,E.jsx)(n.A.Item,{label:A("gender"),name:"gender",rules:[{required:!0,message:A("required")}],children:(0,E.jsx)(K.A,{children:we.map(((e,t)=>(0,E.jsx)(K.A.Option,{value:e.value,children:A(e.label)},e.value)))})})}),(0,E.jsx)(B.A,{span:8,children:(0,E.jsx)(n.A.Item,{label:A("active"),name:"active",valuePropName:"checked",children:(0,E.jsx)(R.A,{})})})]}),(0,E.jsx)(w.A,{type:"primary",htmlType:"submit",loading:_,children:A("submit")})]})};const Ce=function(e){let{setVisibleComponent:t}=e;const{t:s}=(0,h.B)(),[i]=n.A.useForm();return(0,E.jsx)(l.A,{title:s("add.service.master"),extra:(0,E.jsx)(_.A,{children:(0,E.jsx)(w.A,{onClick:()=>t("table"),children:s("back")})}),children:(0,E.jsx)(ke,{form:i,onSubmit:e=>xe.A.create(e),setVisibleComponent:t})})};const Ie=function(e){let{setVisibleComponent:t,editId:s}=e;const{t:a}=(0,h.B)(),[d]=((0,v.wA)(),n.A.useForm()),{activeMenu:o}=(0,v.d4)((e=>e.menu)),[r,c]=(0,i.useState)(!0);return(0,i.useEffect)((()=>{var e;e=s,c(!0),xe.A.getById(e).then((e=>{var t,s,i,a,n;let{data:l}=e;d.setFieldsValue({master:{value:null===(t=l.master)||void 0===t?void 0:t.id,label:"".concat(l.master.firstname," ").concat(l.master.lastname)},shop:{value:l.shop_id,label:null===(s=l.shop)||void 0===s||null===(i=s.translation)||void 0===i?void 0:i.title,key:l.shop_id},service:{value:null===l||void 0===l?void 0:l.service_id,label:null===l||void 0===l||null===(a=l.service)||void 0===a||null===(n=a.translation)||void 0===n?void 0:n.title,key:null===l||void 0===l?void 0:l.service_id},price:l.price,interval:l.interval,pause:l.pause,commission_fee:l.commission_fee,active:l.active,discount:l.discount,type:l.type,gender:l.gender})})).finally((()=>c(!1)))}),[]),(0,E.jsx)(l.A,{title:a("add.service.master"),loading:r,extra:(0,E.jsx)(_.A,{children:(0,E.jsx)(w.A,{onClick:()=>t("table"),children:a("back")})}),children:!r&&(0,E.jsx)(ke,{form:d,onSubmit:e=>xe.A.update(s,e),setVisibleComponent:t})})};const Se=function(){const[e,t]=(0,i.useState)("table"),[s,a]=(0,i.useState)();switch(e){case"table":return(0,E.jsx)(be,{setVisibleComponent:t,setEditId:a});case"add-form":return(0,E.jsx)(Ce,{setVisibleComponent:t});case"edit-form":return(0,E.jsx)(Ie,{editId:s,setVisibleComponent:t});default:return(0,E.jsx)(be,{editId:s,setVisibleComponent:t})}},{TabPane:He}=a.A,qe=()=>{var e;const{t:t}=(0,h.B)(),[s]=n.A.useForm(),{activeMenu:o}=(0,v.d4)((e=>e.menu),v.bN),{languages:_}=(0,v.d4)((e=>e.formLang),v.bN),w=(0,v.wA)(),{uuid:k}=(0,d.g)(),[C,I]=(0,i.useState)(!1),[S,H]=(0,i.useState)("edit"),[q,N]=(0,i.useState)([]),[P,V]=(0,i.useState)(null),M=null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.role,{isDemo:O}=(0,g.A)();function F(e){if(null===e||void 0===e||!e.translations)return{};const{translations:t}=e,s=_.map((e=>{var s,i,a;return{["title[".concat(e.locale,"]")]:null===(s=t.find((t=>t.locale===e.locale)))||void 0===s?void 0:s.title,["description[".concat(e.locale,"]")]:null===(i=t.find((t=>t.locale===e.locale)))||void 0===i?void 0:i.description,["address[".concat(e.locale,"]")]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.address}}));return Object.assign({},...s)}(0,i.useEffect)((()=>{null!==o&&void 0!==o&&o.refetch&&(e=>{I(!0),c.A.getById(e).then((e=>{var t,i,a,n;const l=e.data,d={...l,image:l.img?(0,A.A)(l.img):[]};w((0,p.Ok)({activeMenu:o,data:d})),s.setFieldsValue({firstname:l.firstname,lastname:l.lastname,...F(e.data),email:O?(0,y.A)(l.email):l.email,phone:l.phone,birthday:r()(null===l||void 0===l?void 0:l.birthday).format("YYYY-MM-DD"),gender:l.gender,password_confirmation:l.password_confirmation,password:l.password,shop_id:0!==(null===l||void 0===l||null===(t=l.invitations)||void 0===t?void 0:t.length)?null===l||void 0===l||null===(i=l.invitations)||void 0===i?void 0:i.map((e=>{var t,s,i,a;return{label:null===(t=e.shop)||void 0===t||null===(s=t.translation)||void 0===s?void 0:s.title,value:null===(i=e.shop)||void 0===i?void 0:i.id,key:null===(a=e.shop)||void 0===a?void 0:a.id}})):void 0}),N(l.img?[(0,A.A)(l.img)]:[]),V(null===(a=e.data)||void 0===a||null===(n=a.delivery_man_setting)||void 0===n?void 0:n.id)})).finally((()=>{I(!1),w((0,p.km)(o))}))})(k)}),[null===o||void 0===o?void 0:o.refetch]);return(0,E.jsx)(l.A,{title:t("user.settings"),children:C?(0,E.jsx)(u.A,{}):(0,E.jsxs)(a.A,{activeKey:S,onChange:e=>H(e),tabPosition:"left",size:"small",children:[(0,E.jsx)(He,{tab:t("edit.user"),children:(0,E.jsx)(m.A,{data:null===o||void 0===o?void 0:o.data,form:s,image:q,setImage:N,action_type:"edit"})},"edit"),"cook"===M&&(0,E.jsx)(He,{tab:t("orders"),children:(0,E.jsx)(x.A,{data:null===o||void 0===o?void 0:o.data})},"order"),"deliveryman"===M&&(0,E.jsx)(He,{tab:t("deliveryman"),children:(0,E.jsx)(b.A,{id:P,data:o.data})},"delivery"),(0,E.jsx)(He,{tab:t("wallet"),children:(0,E.jsx)(j.A,{data:null===o||void 0===o?void 0:o.data})},"wallet"),(0,E.jsx)(He,{tab:t("password"),children:(0,E.jsx)(f.A,{data:null===o||void 0===o?void 0:o.data})},"password"),"master"===M&&(0,E.jsx)(He,{tab:t("working.and.closed.days"),children:(0,E.jsx)(pe,{})},"masterClosedDays"),"master"===M&&(0,E.jsx)(He,{tab:t("disabled.times"),children:(0,E.jsx)(se,{})},"masterDisabledTimes"),"master"===M&&(0,E.jsx)(He,{tab:t("service.master"),children:(0,E.jsx)(Se,{})},"serviceMaster")]})})}},57796:(e,t,s)=>{s.d(t,{A:()=>u});var i=s(58168),a=s(9950),n=s(86971),l=function(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(s[i[a]]=e[i[a]])}return s},d=n.A.TimePicker,o=n.A.RangePicker,r=a.forwardRef((function(e,t){return a.createElement(o,(0,i.A)({},e,{dropdownClassName:e.popupClassName,picker:"time",mode:void 0,ref:t}))})),c=a.forwardRef((function(e,t){var s=e.addon,n=e.renderExtraFooter,o=e.popupClassName,r=l(e,["addon","renderExtraFooter","popupClassName"]),c=a.useMemo((function(){return n||(s||void 0)}),[s,n]);return a.createElement(d,(0,i.A)({},r,{dropdownClassName:o,mode:void 0,ref:t,renderExtraFooter:c}))}));c.displayName="TimePicker",c.RangePicker=r;const u=c}}]);