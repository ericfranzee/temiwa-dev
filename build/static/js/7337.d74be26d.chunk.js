"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[7337],{54311:(e,s,a)=>{a.d(s,{A:()=>d});var l=a(59233),t=(a(9950),a(56713)),n=a(70030),i=a(91854),r=a(63620),o=a(44414);function d(e){let{setLocation:s,form:a,item:d,idx:c,defaultLang:m}=e;const{t:u}=(0,n.B)(),{google_map_key:h}=(0,i.d4)((e=>e.globalSettings.settings),i.bN),{ref:p}=(0,t.usePlacesWidget)({apiKey:h||r.CJ,onPlaceSelected:e=>{const l={lat:null===e||void 0===e?void 0:e.geometry.location.lat(),lng:null===e||void 0===e?void 0:e.geometry.location.lng()};s(l),a.setFieldsValue({["address[".concat(m,"]")]:null===e||void 0===e?void 0:e.formatted_address})}});return(0,o.jsx)(l.A.Item,{label:u("address"),name:"address[".concat(null===d||void 0===d?void 0:d.locale,"]"),rules:[{required:(null===d||void 0===d?void 0:d.locale)===m,message:u("required")}],hidden:(null===d||void 0===d?void 0:d.locale)!==m,children:(0,o.jsx)("input",{className:"address-input",ref:p,placeholder:""})},"address"+c)}},40691:(e,s,a)=>{a.d(s,{A:()=>_});var l=a(9950),t=a(87094),n=a(12916),i=a(41988),r=a(80737),o=a(48538),d=a(59233),c=a(23263),m=a(57796),u=a(25933),h=a(70030),p=a(59051),g=a.n(p),x=a(50384),v=a(13239),A=a(94118),j=a(9213),y=a(91854),f=a(51066),b=a(44414);const _=e=>{let{onFinish:s,prev:a,form:p,lines:_,loadingBtn:w,days:k,setDays:S,setLines:C,weeks:I}=e;const{t:q}=(0,h.B)(),N=[{from:new Date(1900,4,18),to:new Date(g()().subtract(1,"days"))}],[H,L]=(0,l.useState)(!0),F=(0,y.d4)((e=>{var s,a;return null===(s=e.globalSettings)||void 0===s||null===(a=s.settings)||void 0===a?void 0:a.using_12_hour_format}),y.bN),O=(0,f.Q)(),B=k&&k.length>0?(0,b.jsxs)(t.A,{children:[(0,b.jsx)(n.A,{style:{fontSize:14,padding:"4px 10px",width:"100%",marginTop:"10px"},children:q("Your.existing.vacations")}),(0,b.jsxs)(i.A,{span:24,className:"mt-2",children:[k.slice(0,H?1:k.length).map(((e,s)=>(0,b.jsxs)(r.A,{className:"d-flex justify-content-between",style:{borderBottom:"1px solid #4D5B75"},children:[(0,b.jsx)(i.A,{span:24,style:{fontSize:14,marginTop:"8px"},children:g()(e).format("YYYY-MM-DD")}),(0,b.jsx)(i.A,{span:24,children:(0,b.jsx)(n.A,{color:"red",className:"cursor-pointer mt-3 mb-2",style:{fontSize:14},onClick:()=>{return s=e,S(k.filter((e=>e!==s)));var s},children:q("remove")})})]},s))),(0,b.jsx)(o.A,{className:"mt-3 w-100",onClick:()=>{L(!H)},children:H?(0,b.jsx)(x.U29,{}):(0,b.jsx)(x.ZXT,{})})]})]}):(0,b.jsx)(n.A,{style:{fontSize:14,padding:"4px 10px",width:"100%"},children:"Please pick one or more days."}),M=(e,s)=>{const a=[];for(let l=e;l<s;l++)a.push(l);return a},P=()=>({disabledHours:()=>M(0,1),disabledMinutes:()=>M(0,0),disabledSeconds:()=>M(0,60)});return(0,b.jsx)(d.A,{form:p,layout:"vertical",onFinish:s,children:(0,b.jsxs)(t.A,{gutter:12,children:[(0,b.jsx)(i.A,{span:12,children:(0,b.jsx)(c.A,{title:q("restaurant.working.days"),children:(0,b.jsx)(t.A,{gutter:8,children:(0,b.jsx)(i.A,{span:24,children:(0,b.jsx)(d.A.List,{name:"working_days",children:e=>(0,b.jsx)("div",{children:e.map(((e,s)=>(0,b.jsxs)(t.A,{gutter:12,align:"center",children:[(0,b.jsx)(i.A,{span:7,children:(0,b.jsx)(d.A.Item,{name:[s,"day"],children:(0,b.jsx)("span",{children:q(I[s].title)})})}),_[e.key]?(0,b.jsx)(i.A,{span:13,className:"mt-2",children:(0,b.jsx)("span",{children:q("shop.closed")})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.A,{span:7,children:(0,b.jsx)(d.A.Item,{rules:[{required:!1===_[e.key]}],name:[s,"from"],children:(0,b.jsx)(m.A,{format:O,use12Hours:"1"===F,disabledTime:P,picker:"time",placeholder:q("start.time")})})}),(0,b.jsx)(i.A,{span:6,children:(0,b.jsx)(d.A.Item,{rules:[{required:!1===_[e.key]}],name:[s,"to"],children:(0,b.jsx)(m.A,{format:O,use12Hours:"1"===F,disabledTime:P,picker:"time",placeholder:q("end.time")})})})]}),(0,b.jsx)(i.A,{span:4,children:(0,b.jsx)(d.A.Item,{name:[s,"disabled"],valuePropName:"checked",children:(0,b.jsx)(u.A,{checkedChildren:(0,b.jsx)(v.A,{}),unCheckedChildren:(0,b.jsx)(A.A,{}),checked:_[e.key],onChange:()=>(e=>{const s=[..._];s[e]=!_[e],C(s)})(e.key)})})})]},e.key)))})})})})})}),(0,b.jsx)(i.A,{span:12,children:(0,b.jsxs)(c.A,{title:q("restaurant.closed.days"),children:[(0,b.jsx)("p",{children:q("restaurant.closed.days.text")}),(0,b.jsx)(d.A.Item,{rules:[{required:!1,message:q("required")}],children:(0,b.jsx)(j.hv,{className:"datepicker",mode:"multiple",disabled:N,min:1,selected:k,onSelect:S,footer:B,showOutsideDays:!0})})]})}),(0,b.jsx)(i.A,{span:24,children:(0,b.jsxs)(r.A,{children:[(0,b.jsx)(o.A,{type:"primary",htmlType:"submit",loading:w,children:q("next")}),(0,b.jsx)(o.A,{htmlType:"submit",onClick:()=>a(),children:q("prev")})]})})]})})}},78498:(e,s,a)=>{a.d(s,{A:()=>x});var l=a(9950),t=a(97239);const n=a.p+"static/media/pin.0e41858db80c699cd8a2.png";var i=a(96011),r=a.n(i),o=a(63620);async function d(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.CJ,a={latlng:"".concat(null===e||void 0===e?void 0:e.lat,",").concat(null===e||void 0===e?void 0:e.lng),key:s};return r().get("https://maps.googleapis.com/maps/api/geocode/json",{params:a}).then((e=>{var s;let{data:a}=e;return null===(s=a.results[0])||void 0===s?void 0:s.formatted_address})).catch((e=>"not found"))}var c=a(39174),m=a(85923),u=a(70030),h=a(6566),p=a(44414);const g=(0,h.A)();const x=(0,t.GoogleApiWrapper)({apiKey:g,libraries:["places","geometry"]})((function(e){var s,a;const[i,r]=(0,l.useState)(),{t:o}=(0,u.B)(),h=async()=>{await navigator.geolocation.getCurrentPosition((function(e){const s={lat:e.coords.latitude,lng:e.coords.longitude};r(s)}),(function(e){m.oR.warning(o("turn.on.gps"))}))};(0,l.useEffect)((()=>{h()}),[]);const x=[{lat:Number(null===e||void 0===e||null===(s=e.location)||void 0===s?void 0:s.lat)||0,lng:Number(null===e||void 0===e||null===(a=e.location)||void 0===a?void 0:a.lng)||0}];for(var v=new e.google.maps.LatLngBounds,A=0;A<x.length;A++)v.extend(x[A]);return(0,p.jsxs)("div",{className:"map-container",style:{height:400,width:"100%"},children:[(0,p.jsx)("button",{className:"map-button",type:"button",onClick:()=>{h(),i&&(async s=>{const a={lat:null===s||void 0===s?void 0:s.lat,lng:null===s||void 0===s?void 0:s.lng};e.setLocation(a);const l=await d(a,g);e.setAddress(l)})(i)},children:(0,p.jsx)(c.uFi,{})}),(0,p.jsx)(t.Map,{cursor:"pointer",onClick:async(s,a,l)=>{const{latLng:t}=l,n={lat:t.lat(),lng:t.lng()};e.setLocation(n);const i=await d(n,g);e.setAddress(i)},google:e.google,defaultZoom:12,zoom:10,className:"clickable",initialCenter:e.location,center:e.location,children:(0,p.jsx)(t.Marker,{position:e.location,icon:{url:n,scaledSize:new e.google.maps.Size(32,32)},className:"marker"})})]})}))},79406:(e,s,a)=>{a.d(s,{a:()=>d});var l=a(9950),t=a(95491),n=a.n(t),i=a(99674),r=a(90650),o=a(44414);const d=e=>{let{fetchOptions:s,debounceTimeout:a=400,refetch:t=!1,...d}=e;const[c,m]=(0,l.useState)(!1),[u,h]=(0,l.useState)([]),p=(0,l.useMemo)((()=>n()((e=>{h([]),m(!0),s(e).then((e=>{h(e),m(!1)}))}),a)),[s,a]);return(0,o.jsx)(i.A,{showSearch:!0,allowClear:!0,labelInValue:!0,onClear:()=>p(""),filterOption:!1,onSearch:p,notFoundContent:c?(0,o.jsx)(r.A,{size:"small"}):"no results",...d,options:u,onFocus:()=>{u.length&&!t||p("")}})}},92967:(e,s,a)=>{a.d(s,{A:()=>f});var l=a(9950),t=a(59233),n=a(82706),i=a(48538),r=a(23263),o=a(87094),d=a(41988),c=a(55902),m=a(99674),u=a(25933),h=a(70030),p=a(85923),g=a(71999),x=a(91854),v=a(15249),A=a(48970),j=a(62572),y=a(44414);function f(e){let{visible:s,handleCancel:a}=e;const{t:f}=(0,h.B)(),[b]=t.A.useForm(),[_,w]=(0,l.useState)(!1),[k,S]=(0,l.useState)(null),[C,I]=(0,l.useState)([]),{defaultLang:q,languages:N}=(0,x.d4)((e=>e.formLang),x.bN);return(0,y.jsx)(n.A,{title:f("add.client"),visible:s,onCancel:a,style:{minWidth:"60vw"},footer:[(0,y.jsx)(i.A,{type:"primary",onClick:()=>b.submit(),loading:_,children:f("save")},"ok-button"),(0,y.jsx)(i.A,{onClick:a,children:f("cancel")},"cancel-button")],children:(0,y.jsx)(r.A,{title:f("add.category"),extra:(0,y.jsx)(g.A,{}),children:(0,y.jsx)(t.A,{name:"basic",layout:"vertical",onFinish:e=>{var s,l,t;w(!0);const n={...e,type:"shop",active:e.active?1:0,keywords:e.keywords.join(","),parent_id:0===(null===(s=e.parent_id)||void 0===s?void 0:s.value)?null:null===(l=e.parent_id)||void 0===l?void 0:l.value,"images[0]":null===(t=C[0])||void 0===t?void 0:t.name};j.A.create(n).then((()=>{p.oR.success(f("successfully.created")),a()})).catch((e=>S(e.response.data.params))).finally((()=>w(!1)))},initialValues:{parent_id:{title:"---",value:0,key:0},active:!0},form:b,children:(0,y.jsxs)(o.A,{gutter:12,children:[(0,y.jsx)(d.A,{span:12,children:N.map(((e,s)=>(0,y.jsx)(t.A.Item,{label:f("name"),name:"title[".concat(e.locale,"]"),help:k&&k["title.".concat(q)]?k["title.".concat(q)][0]:null,validateStatus:k?"error":"success",rules:[{required:e.locale===q,message:f("required")}],hidden:e.locale!==q,children:(0,y.jsx)(c.A,{placeholder:f("name")})},e.title+s)))}),(0,y.jsx)(d.A,{span:12,children:N.map(((e,s)=>(0,y.jsx)(t.A.Item,{label:f("description"),name:"description[".concat(e.locale,"]"),rules:[{required:e.locale===q,message:f("required")}],hidden:e.locale!==q,children:(0,y.jsx)(v.A,{rows:4})},e.locale+s)))}),(0,y.jsx)(d.A,{span:12,children:(0,y.jsx)(t.A.Item,{label:f("keywords"),name:"keywords",rules:[{required:!0,message:f("required")}],children:(0,y.jsx)(m.A,{mode:"tags",style:{width:"100%"}})})}),(0,y.jsx)(d.A,{span:12,children:(0,y.jsx)(t.A.Item,{label:f("parent.category"),name:"parent_id",rules:[{required:!0,message:f("required")}],help:k&&k.parent_id?k.parent_id[0]:null,validateStatus:k?"error":"success",children:(0,y.jsx)(m.A,{children:(0,y.jsx)(m.A.Option,{value:0,children:"---"})})})}),(0,y.jsx)(d.A,{span:4,children:(0,y.jsx)(t.A.Item,{label:f("image"),children:(0,y.jsx)(A.A,{type:"categories",imageList:C,setImageList:I,form:b,multiple:!1})})}),(0,y.jsx)(d.A,{span:2,children:(0,y.jsx)(t.A.Item,{label:f("active"),name:"active",valuePropName:"checked",children:(0,y.jsx)(u.A,{})})})]})})})})}},42580:(e,s,a)=>{a.d(s,{A:()=>_});var l=a(59233),t=a(87094),n=a(41988),i=a(23263),r=a(80737),o=a(48538),d=a(9950),c=a(70030),m=a(91854),u=a(97239),h=a(63620),p=a(39174),g=a(44414);const x=(0,u.GoogleApiWrapper)({apiKey:h.CJ,libraries:["places"]})((e=>{var s,a;const[l,t]=(0,d.useState)({lat:38.58799374569842,lng:-98.47949767583457}),[n,i]=(0,d.useState)(e.triangleCoords?e.triangleCoords:[]),[r,o]=(0,d.useState)(!!e.triangleCoords),[c,m]=(0,d.useState)(null);e.setMerge(r);(0,d.useEffect)((()=>{m(!0)}),[]);const h=e.triangleCoords.map((e=>({lat:Number(e.lat||"0"),lng:Number(e.lng||"0")})));for(var x=new e.google.maps.LatLngBounds,v=0;v<h.length;v++)x.extend(h[v]);return(0,g.jsxs)("div",{className:"map-container",style:{height:500,width:"100%"},children:[(0,g.jsx)("button",{className:"map-button",type:"button",onClick:()=>{navigator.geolocation.getCurrentPosition((function(e){t({lat:e.coords.latitude,lng:e.coords.longitude})}))},children:(0,g.jsx)(p.uFi,{})}),(0,g.jsxs)(u.Map,{options:{minZoom:15,maxZoom:15},cursor:"pointer",onClick:(s,a,l)=>{m(!1);const{latLng:n}=l,d=n.lat(),c=n.lng();r?(i([]),e.settriangleCoords([{lat:d,lng:c}]),t({lat:d,lng:c}),o(!1)):e.settriangleCoords((e=>[...e,{lat:d,lng:c}]))},maxZoom:16,minZoom:2,google:e.google,initialCenter:l,center:l,onReady:function(e,s){s.setOptions({draggableCursor:"crosshair",draggingCursor:"grab"})},bounds:c&&x,className:"clickable",children:[null===(s=e.triangleCoords)||void 0===s?void 0:s.map(((s,a)=>(0,g.jsx)(u.Marker,{onClick:s=>(s=>{var a,l;o(!!e.triangleCoords),(null===(a=e.triangleCoords[0])||void 0===a?void 0:a.lat)===(null===(l=s.position)||void 0===l?void 0:l.lat)&&e.triangleCoords.length>1&&(i(e.triangleCoords),e.setLocation(e.triangleCoords),o(!0),m(!0))})(s),position:s,icon:{url:"https://upload.wikimedia.org/wikipedia/commons/9/94/Circle-image.svg",scaledSize:new e.google.maps.Size(10,10)},className:"marker"},a))),null!==n&&void 0!==n&&n.length?(0,g.jsx)(u.Polygon,{path:e.triangleCoords,strokeColor:"black",strokeOpacity:.8,strokeWeight:3,fillColor:"black",fillOpacity:.35},null===n||void 0===n?void 0:n.length):(0,g.jsx)(u.Polyline,{path:e.triangleCoords,strokeColor:"black",strokeOpacity:.8,strokeWeight:3,fillColor:"black",fillOpacity:.35},null===(a=e.triangleCoords)||void 0===a?void 0:a.length)]})]})}));var v=a(50384);const A=a.p+"static/media/map.c7bd202793a29ce4f6b4.gif";var j=a(82371);const y={getById:e=>j.A.get("rest/shop/delivery-zone/".concat(e)),create:e=>j.A.post("dashboard/admin/delivery-zones",e,{})};var f=a(81446),b=a(85923);const _=e=>{let{next:s,prev:a}=e;const{t:u}=(0,c.B)(),[h]=l.A.useForm(),[p,j]=(0,d.useState)([]),[_,w]=(0,d.useState)(!1),[k,S]=(0,d.useState)(null),[C,I]=(0,d.useState)(!1),{activeMenu:q}=(0,m.d4)((e=>e.menu),m.bN);return(0,d.useEffect)((()=>{var e,s,a;null!==(e=q.data)&&void 0!==e&&e.id&&(a=null===(s=q.data)||void 0===s?void 0:s.id,I(!0),y.getById(a).then((e=>{var s,a;j(void 0!==e.data?null===(s=e.data)||void 0===s||null===(a=s.address)||void 0===a?void 0:a.map((e=>({lat:e[0],lng:e[1]}))):[])})).finally((()=>I(!1))))}),[q.data]),(0,g.jsx)(l.A,{form:h,name:"map",layout:"vertical",onFinish:()=>{if(p.length<3)return void b.oR.warning(u("place.selected.map"));if(!k)return void b.oR.warning(u("place.selected.map"));w(!0);const e={shop_id:q.data.id,address:p.map((e=>({0:e.lat,1:e.lng})))};y.create(e).then((()=>s())).finally((()=>w(!1)))},children:C?(0,g.jsx)(f.A,{}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(t.A,{children:(0,g.jsx)(n.A,{span:24,children:(0,g.jsx)(i.A,{title:(0,g.jsx)("h3",{className:"p-0 m-0",children:u("delivery.zone")}),children:(0,g.jsxs)(t.A,{gutter:12,children:[(0,g.jsxs)(n.A,{span:24,className:"mb-3",children:[(0,g.jsx)("h4",{children:"Instructions"}),"Create zone by click on map and connect the dots together"]}),(0,g.jsx)(n.A,{span:24,className:"mb-3",children:(0,g.jsxs)(r.A,{children:[(0,g.jsx)(v.h6Q,{size:25}),(0,g.jsx)("p",{children:u("delivery.zone.text")})]})}),(0,g.jsx)(n.A,{span:12,children:(0,g.jsx)("img",{src:A,alt:"map gif",style:{object:"contain"}})}),(0,g.jsx)(n.A,{span:24,children:(0,g.jsx)(x,{triangleCoords:p,settriangleCoords:j,setMerge:S})})]})})})}),(0,g.jsxs)(r.A,{children:[(0,g.jsx)(o.A,{type:"primary",htmlType:"submit",loading:_,children:u("next")}),(0,g.jsx)(o.A,{htmlType:"submit",onClick:()=>a(),children:u("prev")})]})]})})}},12040:(e,s,a)=>{a.d(s,{A:()=>g});var l=a(9950),t=a(59233),n=a(82706),i=a(48538),r=a(87094),o=a(41988),d=a(55902),c=a(40577),m=a(70030),u=a(85923),h=a(53271),p=a(44414);function g(e){let{visible:s,handleCancel:a}=e;const{t:g}=(0,m.B)(),[x]=t.A.useForm(),[v,A]=(0,l.useState)(!1),[j,y]=(0,l.useState)(null);return(0,p.jsx)(n.A,{title:g("add.client"),visible:s,onCancel:a,footer:[(0,p.jsx)(i.A,{type:"primary",onClick:()=>x.submit(),loading:v,children:g("save")},"ok-button"),(0,p.jsx)(i.A,{onClick:a,children:g("cancel")},"cancel-button")],children:(0,p.jsx)(t.A,{layout:"vertical",name:"user-add-form",form:x,onFinish:e=>{const s={firstname:e.firstname,lastname:e.lastname,email:e.email,phone:e.phone,password_confirmation:e.password_confirmation,password:e.password,role:"user"};A(!0),h.A.create(s).then((()=>{u.oR.success(g("successfully.added")),a()})).catch((e=>y(e.response.data.params))).finally((()=>A(!1)))},children:(0,p.jsxs)(r.A,{gutter:12,children:[(0,p.jsx)(o.A,{span:12,children:(0,p.jsx)(t.A.Item,{label:g("firstname"),name:"firstname",help:null!==j&&void 0!==j&&j.firstname?j.firstname[0]:null,validateStatus:null!==j&&void 0!==j&&j.firstname?"error":"success",rules:[{required:!0,message:g("required")}],children:(0,p.jsx)(d.A,{})})}),(0,p.jsx)(o.A,{span:12,children:(0,p.jsx)(t.A.Item,{label:"lastname",name:"lastname",help:null!==j&&void 0!==j&&j.lastname?j.lastname[0]:null,validateStatus:null!==j&&void 0!==j&&j.lastname?"error":"success",rules:[{required:!0,message:g("required")}],children:(0,p.jsx)(d.A,{})})}),(0,p.jsx)(o.A,{span:12,children:(0,p.jsx)(t.A.Item,{label:g("phone"),name:"phone",help:null!==j&&void 0!==j&&j.phone?j.phone[0]:null,validateStatus:null!==j&&void 0!==j&&j.phone?"error":"success",rules:[{required:!0,message:g("required")}],children:(0,p.jsx)(c.A,{min:0,className:"w-100"})})}),(0,p.jsx)(o.A,{span:12,children:(0,p.jsx)(t.A.Item,{label:g("email"),name:"email",help:null!==j&&void 0!==j&&j.email?j.email[0]:null,validateStatus:null!==j&&void 0!==j&&j.email?"error":"success",rules:[{required:!0,message:g("required")}],children:(0,p.jsx)(d.A,{type:"email"})})}),(0,p.jsx)(o.A,{span:12,children:(0,p.jsx)(t.A.Item,{label:g("password"),name:"password",help:null!==j&&void 0!==j&&j.password?j.password[0]:null,validateStatus:null!==j&&void 0!==j&&j.password?"error":"success",rules:[{required:!0,message:g("required")}],children:(0,p.jsx)(d.A.Password,{type:"password",className:"w-100"})})}),(0,p.jsx)(o.A,{span:12,children:(0,p.jsx)(t.A.Item,{label:g("password.confirmation"),help:null!==j&&void 0!==j&&j.password_confirmation?j.password_confirmation[0]:null,validateStatus:null!==j&&void 0!==j&&j.password_confirmation?"error":"success",name:"password_confirmation",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:g("required")},e=>{let{getFieldValue:s}=e;return{validator:(e,a)=>a&&s("password")!==a?Promise.reject(g("two.passwords.dont.match")):Promise.resolve()}}],children:(0,p.jsx)(d.A.Password,{type:"password"})})})]})})})}},34422:(e,s,a)=>{a.d(s,{Q:()=>n});var l=a(59051),t=a.n(l);const n=[{title:"monday",disabled:!1,from:t()("01:00:00","HH:mm:ss"),to:t()("23:00:00","HH:mm:ss")},{title:"tuesday",disabled:!1,from:t()("01:00:00","HH:mm:ss"),to:t()("23:00:00","HH:mm:ss")},{title:"wednesday",disabled:!1,from:t()("01:00:00","HH:mm:ss"),to:t()("23:00:00","HH:mm:ss")},{title:"thursday",disabled:!1,from:t()("01:00:00","HH:mm:ss"),to:t()("23:00:00","HH:mm:ss")},{title:"friday",disabled:!1,from:t()("01:00:00","HH:mm:ss"),to:t()("23:00:00","HH:mm:ss")},{title:"saturday",disabled:!1,from:t()("01:00:00","HH:mm:ss"),to:t()("23:00:00","HH:mm:ss")},{title:"sunday",disabled:!1,from:t()("01:00:00","HH:mm:ss"),to:t()("23:00:00","HH:mm:ss")}]},80415:(e,s,a)=>{a.d(s,{G:()=>i,HV:()=>t,LH:()=>l,PR:()=>n,wO:()=>o,xt:()=>r});const l={new:[1,2,3,4,5],accepted:[1,2,3,4,5],ready:[1,2,3,4,5],on_a_way:[1,2,3,4,5],delivered:[1,2,3,4,5],canceled:[1,2,3,4,5],cooking:[1,2,3,4,5]},t=(new Date,new Date,["new","accepted","ready","on_a_way","pause","delivered","canceled"]),n=30,i="HH:mm",r="hh:mm a",o=!0},29597:(e,s,a)=>{function l(e){var s;if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const a=null===e||void 0===e||null===(s=e.location)||void 0===s?void 0:s.split(", ");return{lat:Number(null===a||void 0===a?void 0:a[0]),lng:Number(null===a||void 0===a?void 0:a[1])}}a.d(s,{A:()=>l})},51066:(e,s,a)=>{a.d(s,{Q:()=>n});var l=a(17706),t=a(80415);const n=()=>{var e,s,a,n;return null!==(e=null===(s=l.M.getState())||void 0===s||null===(a=s.globalSettings)||void 0===a||null===(n=a.settings)||void 0===n?void 0:n.hour_format)&&void 0!==e?e:t.G}},6566:(e,s,a)=>{a.d(s,{A:()=>t});var l=a(17706);const t=()=>{var e,s;const a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IS_DEMO:"false"}.MAP_API_KEY,{google_map_key:t}=null===(e=l.M.getState())||void 0===e||null===(s=e.globalSettings)||void 0===s?void 0:s.settings;return t||a}},86289:(e,s,a)=>{a.d(s,{A:()=>O});var l=a(9950),t=a(59233),n=a(80737),i=a(48538),r=a(28429),o=a(87094),d=a(41988),c=a(23263),m=a(55902),u=a(25933),h=a(40577),p=a(40895),g=a(99674),x=a(98591),v=a(53271),A=a(91854),j=a(70030),y=a(62572),f=a(78498),b=a(54311),_=a(48970),w=a(92019),k=a(12040),S=a(92967),C=a(79406),I=a(58974),q=a(44414);const N=e=>{let{logoImage:s,setLogoImage:a,backImage:n,setBackImage:r,form:N,location:H,setLocation:L,user:F}=e;const{t:O}=(0,j.B)(),[B,M]=(0,l.useState)(null),[P,D]=(0,l.useState)(null),[T,z]=(0,l.useState)(null),{defaultLang:E,languages:R}=(0,A.d4)((e=>e.formLang),A.bN);const Y=()=>{M(!0),z(!0)},V=()=>{D(!0),z(!0)},W=()=>{M(!1),D(!1)};return(0,q.jsxs)(o.A,{gutter:12,children:[(0,q.jsx)(d.A,{span:24,children:(0,q.jsx)(c.A,{children:(0,q.jsxs)(o.A,{gutter:12,children:[(0,q.jsx)(d.A,{span:4,children:(0,q.jsx)(t.A.Item,{label:O("logo.image"),children:(0,q.jsx)(_.A,{type:"shops/logo",imageList:s,setImageList:a,form:N,multiple:!1,name:"logo_img"})})}),(0,q.jsx)(d.A,{span:4,children:(0,q.jsx)(t.A.Item,{label:O("background.image"),children:(0,q.jsx)(_.A,{type:"shops/background",imageList:n,setImageList:r,form:N,multiple:!1,name:"background_img"})})}),(0,q.jsx)(d.A,{span:10,children:(0,q.jsx)(t.A.Item,{label:O("status.note"),name:"status_note",children:(0,q.jsx)(x.A,{rows:4})})}),(0,q.jsx)(d.A,{span:4,children:(0,q.jsx)(t.A.Item,{name:"status",label:O("status"),children:(0,q.jsx)(m.A,{disabled:!0})})}),(0,q.jsx)(d.A,{span:2,children:(0,q.jsx)(t.A.Item,{label:O("open"),name:"open",valuePropName:"checked",children:(0,q.jsx)(u.A,{disabled:!0})})})]})})}),(0,q.jsx)(d.A,{span:24,children:(0,q.jsx)(c.A,{title:O("general"),children:(0,q.jsxs)(o.A,{gutter:12,children:[(0,q.jsx)(d.A,{span:12,children:(0,q.jsxs)(o.A,{gutter:12,children:[(0,q.jsx)(d.A,{span:24,children:R.map(((e,s)=>(0,q.jsx)(t.A.Item,{label:O("title"),name:"title[".concat(e.locale,"]"),rules:[{required:e.locale===E,message:O("required")},{min:2,message:O("title.required")}],hidden:e.locale!==E,children:(0,q.jsx)(m.A,{})},"title"+s)))}),(0,q.jsx)(d.A,{span:24,children:(0,q.jsx)(t.A.Item,{label:O("phone"),name:"phone",rules:[{required:!0,message:O("required")}],children:(0,q.jsx)(h.A,{min:0,className:"w-100"})})})]})}),(0,q.jsx)(d.A,{span:12,children:R.map(((e,s)=>(0,q.jsx)(t.A.Item,{label:O("description"),name:"description[".concat(e.locale,"]"),rules:[{required:e.locale===E,message:O("required")},{min:3,message:O("required")}],hidden:e.locale!==E,children:(0,q.jsx)(x.A,{rows:4})},"desc"+s)))}),(0,q.jsx)(d.A,{span:8,children:(0,q.jsx)(t.A.Item,{label:O("restaurant.tags"),name:"tags",rules:[{required:!1,message:O("required")}],children:(0,q.jsx)(C.a,{mode:"multiple",fetchOptions:async function(e){z(!1);const s={search:e};return I.A.getAll(s).then((e=>{let{data:s}=e;return s.map((e=>{var s;return{label:(null===(s=e.translation)||void 0===s?void 0:s.title)||"no name",value:e.id}}))}))},refetch:T})})}),(0,q.jsx)(d.A,{span:8,children:(0,q.jsx)(t.A.Item,{label:O("seller"),name:"user",rules:[{required:!0,message:O("required")}],children:(0,q.jsx)(C.a,{disabled:F,fetchOptions:async function(e){const s={search:e,roles:"user","empty-shop":1};return z(!1),v.A.search(s).then((e=>e.data.map((e=>({label:e.firstname+" "+(e.lastname?e.lastname:""),value:e.id})))))},refetch:T,dropdownRender:e=>(0,q.jsxs)(q.Fragment,{children:[e,(0,q.jsx)(p.A,{style:{margin:"8px 0"}}),(0,q.jsx)(i.A,{className:"w-100",disabled:F,icon:(0,q.jsx)(w.A,{}),onClick:Y,children:O("add.user")})]})})})}),(0,q.jsx)(d.A,{span:8,children:(0,q.jsx)(t.A.Item,{label:O("categories"),name:"categories",rules:[{required:!0,message:O("required")}],children:(0,q.jsx)(C.a,{mode:"multiple",fetchOptions:async function(e){const s={search:e,type:"shop"};return z(!1),y.A.getAll(s).then((e=>{let{data:s}=e;return s.map((e=>{var s;return{label:(null===(s=e.translation)||void 0===s?void 0:s.title)||"no name",value:e.id}}))}))},refetch:T,dropdownRender:e=>(0,q.jsxs)(q.Fragment,{children:[e,(0,q.jsx)(p.A,{style:{margin:"8px 0"}}),(0,q.jsx)(i.A,{className:"w-100",icon:(0,q.jsx)(w.A,{}),onClick:V,children:O("add.category")})]})})})})]})})}),(0,q.jsx)(d.A,{span:8,children:(0,q.jsx)(c.A,{title:O("delivery"),children:(0,q.jsxs)(o.A,{gutter:8,children:[(0,q.jsx)(d.A,{span:12,children:(0,q.jsx)(t.A.Item,{name:"price",label:O("min.price"),rules:[{required:!0,message:O("required")}],children:(0,q.jsx)(h.A,{className:"w-100"})})}),(0,q.jsx)(d.A,{span:12,children:(0,q.jsx)(t.A.Item,{name:"price_per_km",label:O("price.per.km"),rules:[{required:!0,message:O("required")}],children:(0,q.jsx)(h.A,{className:"w-100"})})})]})})}),(0,q.jsx)(d.A,{span:8,children:(0,q.jsx)(c.A,{title:O("delivery.time"),children:(0,q.jsxs)(o.A,{gutter:12,children:[(0,q.jsx)(d.A,{span:12,children:(0,q.jsx)(t.A.Item,{name:"delivery_time_type",label:O("delivery_time_type"),rules:[{required:!0,message:O("required")}],children:(0,q.jsxs)(g.A,{className:"w-100",children:[(0,q.jsx)(g.A.Option,{value:"minute",label:O("minutes")}),(0,q.jsx)(g.A.Option,{value:"hour",label:O("hour")})]})})}),(0,q.jsx)(d.A,{span:12,children:(0,q.jsx)(t.A.Item,{name:"delivery_time_from",label:O("delivery_time_from"),rules:[{required:!0,message:O("required")}],children:(0,q.jsx)(h.A,{className:"w-100"})})}),(0,q.jsx)(d.A,{span:12,children:(0,q.jsx)(t.A.Item,{name:"delivery_time_to",label:O("delivery_time_to"),rules:[{required:!0,message:O("required")}],children:(0,q.jsx)(h.A,{className:"w-100"})})})]})})}),(0,q.jsx)(d.A,{span:8,children:(0,q.jsx)(c.A,{title:O("order.info"),children:(0,q.jsxs)(o.A,{gutter:12,children:[(0,q.jsx)(d.A,{span:12,children:(0,q.jsx)(t.A.Item,{label:O("min.amount"),name:"min_amount",rules:[{required:!0,message:O("required")}],children:(0,q.jsx)(h.A,{min:0,className:"w-100"})})}),(0,q.jsx)(d.A,{span:12,children:(0,q.jsx)(t.A.Item,{label:O("tax"),name:"tax",rules:[{required:!0,message:O("required")}],children:(0,q.jsx)(h.A,{min:0,addonAfter:"%",className:"w-100"})})}),(0,q.jsx)(d.A,{span:12,children:(0,q.jsx)(t.A.Item,{label:O("admin.comission"),name:"percentage",rules:[{required:!0,message:O("required")}],children:(0,q.jsx)(h.A,{min:0,className:"w-100",addonAfter:"%"})})})]})})}),(0,q.jsx)(d.A,{span:24,children:(0,q.jsx)(c.A,{title:O("address"),children:(0,q.jsxs)(o.A,{gutter:12,children:[(0,q.jsx)(d.A,{span:12,children:R.map(((e,s)=>(0,q.jsx)(b.A,{setLocation:L,form:N,item:e,idx:s,defaultLang:E},s)))}),(0,q.jsx)(d.A,{span:24,children:(0,q.jsx)(f.A,{location:H,setLocation:L,setAddress:e=>N.setFieldsValue({["address[".concat(E,"]")]:e})})})]})})}),B&&(0,q.jsx)(k.A,{visible:B,handleCancel:()=>W()}),P&&(0,q.jsx)(S.A,{visible:P,handleCancel:()=>W()})]})};var H=a(74623),L=a(58547),F=a(29597);const O=e=>{var s,a,o,d,c,m,u,h,p;let{next:g,action_type:x="",user:v}=e;const{t:y}=(0,j.B)(),[f]=t.A.useForm(),b=(0,r.Zp)(),_=(0,A.wA)(),{uuid:w}=(0,r.g)(),{activeMenu:k}=(0,A.d4)((e=>e.menu),A.bN),[S,C]=(0,l.useState)(!1),[I,O]=(0,l.useState)(null!==(s=k.data)&&void 0!==s&&s.logo_img?[null===(a=k.data)||void 0===a?void 0:a.logo_img]:[]),[B,M]=(0,l.useState)(null!==(o=k.data)&&void 0!==o&&o.background_img?[null===(d=k.data)||void 0===d?void 0:d.background_img]:[]),{settings:P}=(0,A.d4)((e=>e.globalSettings),A.bN),[D,T]=(0,l.useState)(null!==k&&void 0!==k&&null!==(c=k.data)&&void 0!==c&&c.location?{lat:parseFloat(null===k||void 0===k||null===(m=k.data)||void 0===m||null===(u=m.location)||void 0===u?void 0:u.latitude),lng:parseFloat(null===k||void 0===k||null===(h=k.data)||void 0===h||null===(p=h.location)||void 0===p?void 0:p.longitude)}:(0,F.A)(P));(0,l.useEffect)((()=>()=>{const e=f.getFieldsValue(!0);e.open_time=JSON.stringify(null===e||void 0===e?void 0:e.open_time),e.close_time=JSON.stringify(null===e||void 0===e?void 0:e.close_time),_((0,H.Ok)({activeMenu:k,data:{...k.data,...e}}))}),[]);return(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)(t.A,{form:f,name:"basic",layout:"vertical",onFinish:e=>{var s,a,l;C(!0);const t={...e,"images[0]":null===(s=I[0])||void 0===s?void 0:s.name,"images[1]":null===(a=B[0])||void 0===a?void 0:a.name,delivery_time_type:e.delivery_time_type,delivery_time_to:e.delivery_time_to,delivery_time_from:e.delivery_time_from,categories:e.categories.map((e=>e.value)),tags:null===e||void 0===e||null===(l=e.tags)||void 0===l?void 0:l.map((e=>e.value)),user_id:e.user.value,open:void 0,"location[latitude]":D.lat,"location[longitude]":D.lng,user:void 0,delivery_time:0,type:"restaurant"};"edit"===x?function(e,s){L.A.update(w,s).then((()=>{_((0,H.Ok)({activeMenu:k,data:e})),g()})).catch((e=>console.error(e))).finally((()=>C(!1)))}(e,t):function(e,s){L.A.create(s).then((s=>{let{data:a}=s;_((0,H.W6)({id:"restaurant-".concat(a.uuid),url:"restaurant/".concat(a.uuid),name:y("add.restaurant"),data:{...a,background_img:{name:null===a||void 0===a?void 0:a.background_img},logo_img:{name:null===a||void 0===a?void 0:a.logo_img},...e},refetch:!1})),b("/restaurant/".concat(a.uuid,"?step=1"))})).catch((e=>console.error(e))).finally((()=>C(!1)))}(e,t)},initialValues:{open:!1,status:"new",...k.data},children:[(0,q.jsx)(N,{logoImage:I,setLogoImage:O,backImage:B,setBackImage:M,form:f,location:D,setLocation:T,user:v}),(0,q.jsx)(n.A,{children:(0,q.jsx)(i.A,{type:"primary",htmlType:"submit",loading:S,children:y("next")})})]})})}},90419:(e,s,a)=>{a.d(s,{A:()=>p});var l=a(59233),t=a(9950),n=a(81446),i=a(59051),r=a.n(i),o=a(81466),d=a(80127),c=a(28429),m=a(34422),u=a(40691),h=a(44414);const p=e=>{let{next:s,prev:a}=e;const[i]=l.A.useForm(),[p,g]=(0,t.useState)([]),[x,v]=(0,t.useState)(new Array(7).fill(!1)),[A,j]=(0,t.useState)(!1),[y,f]=(0,t.useState)(!1),{uuid:b}=(0,c.g)();return(0,t.useEffect)((()=>{i.setFieldsValue({working_days:m.Q}),b&&(f(!0),d.A.getById(b).then((e=>{g(e.data.closed_dates.filter((e=>e.day>r()(new Date).format("YYYY-MM-DD"))).map((e=>new Date(e.day))))})),o.A.getById(b).then((e=>{v(0!==e.data.dates.length?e.data.dates.map((e=>e.disabled)):[]),0!==e.data.dates.length&&i.setFieldsValue({working_days:e.data.dates.map((e=>({title:e.day,from:r()(e.from,"HH:mm:ss"),to:r()(e.to,"HH:mm:ss"),disabled:Boolean(e.disabled)})))})})).finally((()=>f(!1))))}),[]),(0,h.jsx)(h.Fragment,{children:y?(0,h.jsx)(n.A,{}):(0,h.jsx)(u.A,{onFinish:e=>{j(!0);const a={dates:p?p.map((e=>r()(e).format("YYYY-MM-DD"))):void 0},l={dates:e.working_days.map((e=>({day:e.title,from:r()(e.from?e.from:"00").format("HH-mm"),to:r()(e.to?e.to:"00").format("HH-mm"),disabled:e.disabled})))};d.A.update(b,a).then((()=>{s()})).finally((()=>j(!1))),0!==e.working_days.length&&o.A.update(b,l).then((()=>{s()})).finally((()=>j(!1)))},prev:a,form:i,lines:x,loadingBtn:A,days:p,setDays:g,setLines:v,weeks:m.Q})})}}}]);