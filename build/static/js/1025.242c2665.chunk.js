"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[1025],{80905:(e,l,i)=>{i.d(l,{j:()=>r});var t=i(9950),n=i(95491),a=i.n(n),s=i(99674),o=i(90650),d=i(44414);const r=e=>{let{fetchOptions:l,debounceTimeout:i=400,hasMore:n,...r}=e;const[c,u]=(0,t.useState)(!1),[v,h]=(0,t.useState)([]),[g,m]=(0,t.useState)(!1),[p,A]=(0,t.useState)(null),[x,j]=(0,t.useState)(1),f=(0,t.useMemo)((()=>a()((e=>{h([]),A(e),u(!0),l({search:e}).then((e=>{h(e),j(2),u(!1)})).finally((()=>m(!1)))}),i)),[l,i,x]);return(0,d.jsxs)(s.A,{showSearch:!0,allowClear:!0,onPopupScroll:async e=>{const i=e.target;g||i.scrollTop+i.offsetHeight!==i.scrollHeight||n&&(m(!0),i.scrollTo(0,i.scrollHeight),l({search:p,page:x}).then((e=>{j((e=>e+1)),h([...v,...e])})).finally((()=>m(!1))))},labelInValue:!0,filterOption:!1,onSearch:f,notFoundContent:c?(0,d.jsx)(o.A,{size:"small"}):"no results",onFocus:()=>{v.length||f("")},...r,children:[v.map(((e,l)=>(0,d.jsx)(s.A.Option,{value:e.value,children:e.label},l))),g&&(0,d.jsx)(s.A.Option,{children:(0,d.jsx)(o.A,{size:"small"})})]})}},8297:(e,l,i)=>{i.d(l,{A:()=>d});var t=i(9950),n=i(55902),a=i(41397),s=i(60767),o=i(44414);function d(e){let{handleChange:l,defaultValue:i,resetSearch:d,...r}=e;const[c,u]=(0,t.useState)(i),v=(0,t.useMemo)((()=>(0,a.debounce)((e=>{l(e)}),800)),[]);return(0,t.useEffect)((()=>{u(i)}),[d]),(0,o.jsx)(n.A,{value:c,onChange:e=>{u(e.target.value),v(e.target.value)},prefix:(0,o.jsx)(s.A,{}),...r})}},33406:(e,l,i)=>{i.r(l),i.d(l,{default:()=>P});var t=i(9950),n=i(25933),a=i(80737),s=i(48538),o=i(23263),d=i(52913),r=i(28429),c=i(42074),u=i(55386),v=i(91854),h=i(74623),g=i(85923),m=i(70030),p=i(93219),A=i(8297),x=i(88986),j=i(78687),f=i(59233),y=i(82706),b=i(90650),S=i(87094),k=i(41988),C=i(55902),_=i(71999),V=i(80905),I=i(2905),w=i(48970),O=i(62466),z=i(44414);function F(e){let{visible:l,setVisible:i,id:a,setId:o}=e;const[d]=f.A.useForm(),r=(0,v.wA)(),{t:c}=(0,m.B)(),{defaultLang:u,languages:h}=(0,v.d4)((e=>e.formLang),v.bN),[A,x]=(0,t.useState)(!1),[F,M]=(0,t.useState)(!1),[q,P]=(0,t.useState)(null),[B,E]=(0,t.useState)([]),L=()=>{P(null),i(!1),d.resetFields(),o(null),E([])};function N(e){if(null===e||void 0===e||!e.translations)return{};const{translations:l}=e,i=h.map((e=>{var i;return{["title[".concat(e.locale,"]")]:null===(i=l.find((l=>l.locale===e.locale)))||void 0===i?void 0:i.title}}));return Object.assign({},...i)}return(0,t.useEffect)((()=>{a&&(M(!0),j.A.show(a).then((e=>{let{data:l}=e;P(l),E(l.img?[(0,O.A)(l.img)]:[]),d.setFieldsValue({images:l.img?[(0,O.A)(l.img)]:[],active:null===l||void 0===l?void 0:l.active,code:null===l||void 0===l?void 0:l.code,region_id:{label:l.region.translation.title,value:l.region.id},...N(l)})})).finally((()=>M(!1))))}),[a]),(0,z.jsx)(y.A,{visible:l,onCancel:L,onOk:L,footer:null,loading:F,title:c("add.country"),children:(0,z.jsxs)(f.A,{form:d,onFinish:e=>{x(!0),null!==q&&void 0!==q&&q.id?(e=>{var l,i,t;j.A.update(q.id,{images:[null===e||void 0===e||null===(l=e.images)||void 0===l||null===(i=l[0])||void 0===i?void 0:i.url],region_id:null===e||void 0===e||null===(t=e.region_id)||void 0===t?void 0:t.value,active:e.active,code:e.code,title:{...Object.assign({},...h.map((l=>({[l.locale]:e["title[".concat(l.locale,"]")]}))))}}).then((()=>{g.oR.success(c("successfully.updated")),(0,v.vA)((()=>{r((0,p.V)({}))})),L()})).finally((()=>x(!1)))})(e):(e=>{var l,i,t;j.A.create({images:[null===e||void 0===e||null===(l=e.images)||void 0===l||null===(i=l[0])||void 0===i?void 0:i.url],active:e.active,code:e.code,region_id:null===e||void 0===e||null===(t=e.region_id)||void 0===t?void 0:t.value,title:{...Object.assign({},...h.map((l=>({[l.locale]:e["title[".concat(l.locale,"]")]}))))}}).then((()=>{g.oR.success(c("successfully.added")),(0,v.vA)((()=>{r((0,p.V)({}))})),L()})).finally((()=>x(!1)))})(e)},layout:"vertical",initialValues:{active:!0},children:[(0,z.jsx)(b.A,{spinning:F,children:(0,z.jsxs)(S.A,{gutter:24,children:[(0,z.jsx)(k.A,{span:24,children:(0,z.jsx)(_.A,{})}),(0,z.jsx)(k.A,{span:24,children:(0,z.jsx)(f.A.Item,{label:c("image"),name:"images",rules:[{validator:()=>0===(null===B||void 0===B?void 0:B.length)?Promise.reject(new Error(c("required"))):Promise.resolve()}],children:(0,z.jsx)(w.A,{type:"countries",imageList:B,setImageList:E,form:d,multiple:!1})})}),(0,z.jsx)(k.A,{span:24,children:h.map((e=>(0,z.jsx)(f.A.Item,{label:c("title"),name:"title[".concat(e.locale,"]"),hidden:e.locale!==u,rules:[{required:(null===e||void 0===e?void 0:e.locale)===u,message:c("required")}],children:(0,z.jsx)(C.A,{})},"title"+e.id)))}),(0,z.jsx)(k.A,{span:24,children:(0,z.jsx)(f.A.Item,{name:"region_id",label:c("region_id"),rules:[{required:!0,message:c("required")}],children:(0,z.jsx)(V.j,{fetchOptions:e=>{let{search:l,page:i}=e;return I.A.get({search:null!==l&&void 0!==l&&l.length?l:void 0,page:i}).then((e=>e.data.map((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:e.id}}))))}})})}),(0,z.jsx)(k.A,{span:24,children:(0,z.jsx)(f.A.Item,{label:c("code"),name:"code",children:(0,z.jsx)(C.A,{})})}),(0,z.jsx)(k.A,{span:4,children:(0,z.jsx)(f.A.Item,{label:c("active"),name:"active",valuePropName:"checked",children:(0,z.jsx)(n.A,{defaultChecked:!0})})})]})}),(0,z.jsx)(s.A,{type:"primary",htmlType:"submit",loading:A,children:c("submit")})]})})}var M=i(24513),q=i(44070);const P=()=>{const{t:e}=(0,m.B)(),l=(0,v.wA)(),i=(0,r.Zp)(),{setIsModalVisible:f}=(0,t.useContext)(u.o);let[y,b]=(0,c.ok)();const{activeMenu:S}=(0,v.d4)((e=>e.menu),v.bN),k=null===S||void 0===S?void 0:S.data,C=y.get("region_id"),{list:_,meta:V,loading:I}=(0,v.d4)((e=>e.deliveryCountries),v.bN),[w,O]=(0,t.useState)(!1),[P,B]=(0,t.useState)(!1),[E,L]=(0,t.useState)(!1),[N,R]=(0,t.useState)(null),T=[{title:e("id"),dataIndex:"id",key:"id"},{title:e("name"),dataIndex:"translation",key:"translation",render:(t,n)=>(0,z.jsx)("div",{style:{cursor:"pointer",textDecoration:"underline"},onClick:()=>(t=>{l((0,h.X4)({url:"deliveryzone/city?country_id=".concat(t.id),id:"city",name:e("city")})),i("/deliveryzone/city?country_id=".concat(t.id))})(n),children:(null===t||void 0===t?void 0:t.title)||"-"})},{title:e("active"),dataIndex:"active",key:"active",render:(i,t)=>(0,z.jsx)(n.A,{onChange:()=>(i=>{O(i),j.A.status(i).then((()=>{f(!1),l((0,p.V)({region_id:C})),g.oR.success(e("successfully.updated"))})).finally((()=>{O(null)}))})(t.id),checked:i,loading:Boolean(w===t.id)},t.id)},{title:e("options"),dataIndex:"options",is_show:!0,render:(i,t)=>(0,z.jsxs)(a.A,{children:[(0,z.jsx)(s.A,{type:"primary",icon:(0,z.jsx)(M.A,{}),onClick:()=>(e=>{B(!0),R(e)})(t.id)}),(0,z.jsx)(s.A,{loading:Boolean(E===t.id),icon:(0,z.jsx)(q.A,{onClick:()=>(i=>{L(i),j.A.delete(i).then((()=>{l((0,p.V)()),g.oR.success(e("successfully.deleted"))})).finally((()=>{L(!1)}))})(t.id)})})]})}];(0,t.useEffect)((()=>{S.refetch&&(l((0,p.V)({region_id:C})),l((0,h.km)(S)))}),[S.refetch]),(0,x.A)((()=>{const e={search:null===k||void 0===k?void 0:k.search,region_id:C};l((0,p.V)(e))}),[null===S||void 0===S?void 0:S.data]);return(0,z.jsxs)(o.A,{title:e("countries"),extra:(0,z.jsxs)(a.A,{children:[(0,z.jsx)(A.A,{placeholder:e("search"),handleChange:e=>{return i=e,t="search",void l((0,h.Ok)({activeMenu:S,data:{...k,[t]:i}}));var i,t},defaultValue:null===k||void 0===k?void 0:k.search,resetSearch:!(null!==k&&void 0!==k&&k.search)}),(0,z.jsx)(s.A,{type:"primary",onClick:()=>B(!0),children:e("add.country")})]}),children:[(0,z.jsx)(d.A,{columns:T,dataSource:_,pagination:{pageSize:V.per_page,page:V.current_page,total:V.total},rowKey:e=>e.id,loading:I,onChange:e=>{const{pageSize:i,current:t}=e;l((0,p.V)({perPage:i,page:t,region_id:C}))}}),(0,z.jsx)(F,{visible:P,setVisible:B,id:N,setId:R})]})}}}]);