"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[1734],{28645:(e,t,a)=>{a.d(t,{A:()=>p});var l=a(9950),n=a(66362),s=a(69216),i=a(80737),d=a(25933),o=a(57811),r=a(81541),c=a(48538),u=a(89323),v=a(70030),h=a(44414);const{Text:m}=n.A,p=e=>{let{columns:t=[],setColumns:a,style:n,size:p="",iconOnly:x}=e;const{t:A}=(0,v.B)(),[f,g]=(0,l.useState)(!1),j=(0,h.jsx)(s.A,{children:null===t||void 0===t?void 0:t.map(((e,l)=>(0,h.jsx)(s.A.Item,{children:(0,h.jsxs)(i.A,{className:"d-flex justify-content-between",children:[(0,h.jsx)(m,{children:e.title}),(0,h.jsx)(d.A,{defaultChecked:!0,onClick:()=>function(e){const l=null===t||void 0===t?void 0:t.map((t=>(t.dataIndex===e.dataIndex&&(t.is_show=!(null!==t&&void 0!==t&&t.is_show)),t)));a(l)}(e),disabled:1===l})]})},e+l)))});return(0,h.jsx)(o.A,{overlay:j,trigger:["click"],onVisibleChange:e=>{g(e)},visible:f,children:(0,h.jsx)(r.A,{title:A("change.columns"),children:(0,h.jsx)(c.A,{style:{...n},size:p,icon:(0,h.jsx)(u.A,{}),children:x?null:A("Columns")})})})}},1201:(e,t,a)=>{a.d(t,{A:()=>r});a(9950);var l=a(70030),n=a(88542);const s=a.p+"static/media/noproductsfound.1cec73868b5fd048b865.riv",i=a.p+"static/media/noresult.ac4af107751f94856a9c.riv",d=a.p+"static/media/nosell.32cb2c2cc548a15c820d.riv";var o=a(44414);const r=function(e){let{id:t="noresult",text:a=""}=e;const{t:r}=(0,l.B)(),c={src:{noproductsfound:s,noresult:i,nosell:d}[t],artboard:"New Artboard",autoplay:!0},{RiveComponent:u}=(0,n.useRive)(c);return(0,o.jsxs)("div",{className:"animation-canvas",children:[(0,o.jsx)("div",{style:{width:"100%",height:200},children:(0,o.jsx)(u,{})}),(0,o.jsx)("div",{className:"text",children:r(a)})]})}},8297:(e,t,a)=>{a.d(t,{A:()=>o});var l=a(9950),n=a(55902),s=a(41397),i=a(60767),d=a(44414);function o(e){let{handleChange:t,defaultValue:a,resetSearch:o,...r}=e;const[c,u]=(0,l.useState)(a),v=(0,l.useMemo)((()=>(0,s.debounce)((e=>{t(e)}),800)),[]);return(0,l.useEffect)((()=>{u(a)}),[o]),(0,d.jsx)(n.A,{value:c,onChange:e=>{u(e.target.value),v(e.target.value)},prefix:(0,d.jsx)(i.A,{}),...r})}},47992:(e,t,a)=>{a.d(t,{G:()=>r});var l=a(9950),n=a(95491),s=a.n(n),i=a(99674),d=a(90650),o=a(44414);const r=e=>{let{fetchOptions:t,debounceTimeout:a=400,onClear:n,refetchOptions:r=!1,...c}=e;const[u,v]=(0,l.useState)(!1),[h,m]=(0,l.useState)([]),p=(0,l.useMemo)((()=>s()((e=>{m([]),v(!0),t(e).then((e=>{m(e),v(!1)}))}),a)),[t,a]);return(0,o.jsx)(i.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:p,onClear:()=>{p(""),n&&n()},notFoundContent:u?(0,o.jsx)(d.A,{size:"small"}):"no results",...c,options:h,onFocus:()=>{h.length&&!r||p("")}})}},80415:(e,t,a)=>{a.d(t,{G:()=>i,HV:()=>n,LH:()=>l,PR:()=>s,wO:()=>o,xt:()=>d});const l={new:[1,2,3,4,5],accepted:[1,2,3,4,5],ready:[1,2,3,4,5],on_a_way:[1,2,3,4,5],delivered:[1,2,3,4,5],canceled:[1,2,3,4,5],cooking:[1,2,3,4,5]},n=(new Date,new Date,["new","accepted","ready","on_a_way","pause","delivered","canceled"]),s=30,i="HH:mm",d="hh:mm a",o=!0},8168:(e,t,a)=>{function l(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}a.d(t,{A:()=>l})},51066:(e,t,a)=>{a.d(t,{Q:()=>s});var l=a(17706),n=a(80415);const s=()=>{var e,t,a,s;return null!==(e=null===(t=l.M.getState())||void 0===t||null===(a=t.globalSettings)||void 0===a||null===(s=a.settings)||void 0===s?void 0:s.hour_format)&&void 0!==e?e:n.G}},53774:(e,t,a)=>{function l(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const a=Number(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===t?"".concat(a," ").concat(e):"".concat(e," ").concat(a)}a.r(t),a.d(t,{default:()=>l})},59337:(e,t,a)=>{a.r(t),a.d(t,{default:()=>R});var l=a(9950),n=a(12916),s=a(80737),i=a(48538),d=a(81541),o=a(23263),r=a(52913),c=a(28429),u=a(12678),v=a(8750),h=a(13700),m=a(91854),p=a(74623),x=a(55386),A=a(85923),f=a(70030),g=a(14928),j=a(88986),y=a(8168),b=a(8297),w=a(53774),_=a(28645),C=a(76083),k=a(82249),H=a(58127),V=a(1201),S=a(47992),z=a(82371);const M={getAllRestTables:e=>z.A.get("rest/booking/tables",{params:e})};var I=a(51066),N=a(59051),O=a.n(N),G=a(44414);function R(){var e,t,a,z,N,R;const D=(0,m.wA)(),P=(0,c.Zp)(),{t:T}=(0,f.B)(),[B,F]=(0,l.useState)(null),[E,Y]=(0,l.useState)(null),{setIsModalVisible:q}=(0,l.useContext)(x.o),[K,Q]=(0,l.useState)(!1),[$,L]=(0,l.useState)(!1),{defaultCurrency:W}=(0,m.d4)((e=>e.currency),m.bN),[X,Z]=(0,l.useState)(null),J=(0,I.Q)(),[U,ee]=(0,l.useState)([{title:T("id"),dataIndex:"id",key:"id",sorter:!0,is_show:!0},{title:T("table"),dataIndex:"table",key:"table",is_show:!0,render:e=>(0,G.jsx)("div",{children:null===e||void 0===e?void 0:e.name})},{title:T("status"),is_show:!0,dataIndex:"status",key:"status",render:(e,t)=>(0,G.jsx)("div",{children:"new"===e?(0,G.jsx)(n.A,{color:"blue",children:T(e)}):"canceled"===e?(0,G.jsx)(n.A,{color:"error",children:T(e)}):(0,G.jsx)(n.A,{color:"cyan",children:T(e)})})},{title:T("products"),dataIndex:"order_details_count",key:"order_details_count",is_show:!0,render:e=>(0,G.jsxs)("div",{className:"text-lowercase",children:[e||0," ",T("products")]})},{title:T("amount"),dataIndex:"total_price",key:"total_price",is_show:!0,render:e=>(0,w.default)(e,null===W||void 0===W?void 0:W.symbol)},{title:T("payment.type"),dataIndex:"transaction",key:"transaction",is_show:!0,render:e=>{var t;return T(null===e||void 0===e||null===(t=e.payment_system)||void 0===t?void 0:t.tag)||"-"}},{title:T("created.at"),is_show:!0,dataIndex:"created_at",key:"created_at",render:e=>O()(e).format("YYYY-MM-DD ".concat(J))},{title:T("options"),key:"options",is_show:!0,render:(e,t)=>(0,G.jsxs)(s.A,{children:[(0,G.jsx)(i.A,{icon:(0,G.jsx)(u.A,{}),onClick:()=>(e=>{D((0,p.X4)({url:"waiter/order/details/".concat(e.id),id:"order_details",name:T("order.details")})),P("/waiter/order/details/".concat(e.id))})(t)}),(0,G.jsx)(d.A,{title:T("assign.to.me"),children:(0,G.jsx)(i.A,{onClick:()=>(e=>{Q(!0),k.A.attachToMe(e).then((()=>{D((0,g.Gb)(de))})).finally((()=>{Q(!1)}))})(t.id),type:"primary",icon:(0,G.jsx)(v.A,{})})})]})}]),{activeMenu:te}=(0,m.d4)((e=>e.menu),m.bN),{orders:ae,meta:le,loading:ne,params:se}=(0,m.d4)((e=>e.waiterOrder),m.bN),ie=null===te||void 0===te?void 0:te.data,de={search:null===ie||void 0===ie?void 0:ie.search,sort:null===ie||void 0===ie?void 0:ie.sort,column:null===ie||void 0===ie?void 0:ie.column,perPage:null===ie||void 0===ie?void 0:ie.perPage,page:null===ie||void 0===ie?void 0:ie.page,user_id:null===ie||void 0===ie?void 0:ie.user_id,table_id:null===ie||void 0===ie?void 0:ie.table_id,shop_id:null!==(null===(e=te.data)||void 0===e?void 0:e.shop_id)?null===(t=te.data)||void 0===t?void 0:t.shop_id:null,delivery_type:"dine_in","empty-waiter":1,status:"new"};(0,j.A)((()=>{D((0,g.Gb)(de))}),[null===te||void 0===te?void 0:te.data]),(0,l.useEffect)((()=>{null!==te&&void 0!==te&&te.refetch&&(D((0,g.Gb)(de)),D((0,p.km)(te)))}),[null===te||void 0===te?void 0:te.refetch]);const oe=(e,t)=>{D((0,p.Ok)({activeMenu:te,data:{...ie,[t]:e}}))},re={selectedRowKeys:B,onChange:e=>{F(e)}};return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(o.A,{children:(0,G.jsxs)(s.A,{wrap:!0,className:"p-0 mb-0",children:[(0,G.jsx)(b.A,{placeholder:T("search"),handleChange:e=>oe(e,"search"),defaultValue:null===(a=te.data)||void 0===a?void 0:a.search}),(0,G.jsx)(S.G,{placeholder:T("select.table"),fetchOptions:async function(e){const t={search:e,perPage:10};return M.getAllRestTables(t).then((e=>{let{data:t}=e;return t.map((e=>({label:e.name,value:e.id})))}))},onSelect:e=>oe(e.value,"table_id"),onDeselect:()=>oe(null,"table_id"),style:{minWidth:200}}),(0,G.jsx)(i.A,{icon:(0,G.jsx)(h.A,{}),onClick:()=>{(0,m.vA)((()=>{D((0,g.gw)()),D((0,p.Ok)({activeMenu:te,data:null}))})),D((0,g.Gb)({status:"all",page:null===ie||void 0===ie?void 0:ie.page,perPage:10}))},children:T("clear")}),(0,G.jsx)(_.A,{columns:U,setColumns:ee})]})}),(0,G.jsxs)(o.A,{children:[(0,G.jsx)(r.A,{locale:{emptyText:(0,G.jsx)(V.A,{})},scroll:{x:!0},rowSelection:re,columns:null===U||void 0===U?void 0:U.filter((e=>e.is_show)),dataSource:ae,loading:ne||K,pagination:{pageSize:se.perPage,page:(null===(z=te.data)||void 0===z?void 0:z.page)||1,total:null===le||void 0===le?void 0:le.total,defaultCurrent:null===(N=te.data)||void 0===N?void 0:N.page,current:null===(R=te.data)||void 0===R?void 0:R.page},rowKey:e=>e.id,onChange:function(e,t,a){const{pageSize:l,current:n}=e,{field:s,order:i}=a,d=(0,y.A)(i);D((0,p.Ok)({activeMenu:te,data:{...ie,perPage:l,page:n,column:s,sort:d}}))}}),(0,G.jsx)(C.A,{click:()=>{L(!0);const e={...Object.assign({},...B.map(((e,t)=>({["ids[".concat(t,"]")]:e}))))};k.A.delete(e).then((()=>{A.oR.success(T("successfully.deleted")),q(!1),D((0,g.Gb)(de)),Y(null)})).finally((()=>L(!1)))},text:T(E?"delete":"all.delete"),loading:$,setText:F})]}),X&&(0,G.jsx)(H.A,{orderDetails:X,handleCancel:()=>{Z(null)}})]})}},58127:(e,t,a)=>{a.d(t,{A:()=>p});var l=a(9950),n=a(59233),s=a(82706),i=a(48538),d=a(87094),o=a(41988),r=a(99674),c=a(91854),u=a(82249),v=a(74623),h=a(70030),m=a(44414);function p(e){var t;let{orderDetails:a,handleCancel:p}=e;const{t:x}=(0,h.B)(),{activeMenu:A}=(0,c.d4)((e=>e.menu),c.bN),{deliverymans:f}=(0,c.d4)((e=>e.deliveryman),c.bN),[g]=n.A.useForm(),j=(0,c.wA)(),[y,b]=(0,l.useState)(!1);return(0,m.jsx)(s.A,{visible:!!a,title:a.title,onCancel:p,footer:[(0,m.jsx)(i.A,{type:"primary",onClick:()=>g.submit(),loading:y,children:x("save")}),(0,m.jsx)(i.A,{type:"default",onClick:p,children:x("cancel")})],children:(0,m.jsx)(n.A,{form:g,layout:"vertical",onFinish:e=>{const t={...e};b(!0),u.A.updateDelivery(a.id,t).then((()=>{p(),j((0,v.Ms)(A))})).finally((()=>b(!1)))},initialValues:{deliveryman:null===(t=a.deliveryman)||void 0===t?void 0:t.id},children:(0,m.jsx)(d.A,{gutter:12,children:(0,m.jsx)(o.A,{span:24,children:(0,m.jsx)(n.A.Item,{label:x("deliveryman"),name:"deliveryman",rules:[{required:!0,message:x("required")}],children:(0,m.jsx)(r.A,{children:f.map(((e,t)=>(0,m.jsxs)(r.A.Option,{value:e.id,className:"d-block",children:[e.firstname," ",e.lastname||""]},e.id)))})})})})})})}},13700:(e,t,a)=>{a.d(t,{A:()=>o});var l=a(89379),n=a(9950);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"};var i=a(25085),d=function(e,t){return n.createElement(i.A,(0,l.A)((0,l.A)({},e),{},{ref:t,icon:s}))};const o=n.forwardRef(d)},89323:(e,t,a)=>{a.d(t,{A:()=>o});var l=a(89379),n=a(9950);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var i=a(25085),d=function(e,t){return n.createElement(i.A,(0,l.A)((0,l.A)({},e),{},{ref:t,icon:s}))};const o=n.forwardRef(d)}}]);